import{a as _t,f as Ce,d as ot,u as sl,t as rl,h as it,b as Ze,c as ke,e as ae,r as T,g as pe,o as ee,i as yt,n as Me,m as Ee,j as Z,k as qe,l as Se,p as l,q as r,s as $,v as t,w as a,x as g,y as w,z as A,A as u,B as s,C as Ye,D as at,E as dl,_ as lt,F as ra,G as da,H as ia,I as ue,J as ie,K as I,L as Oa,M as il,N as G,O as wt,P as et,Q as nn,R as le,S as Oe,T as ve,U as De,V as fe,W as Bn,X as Ot,Y as ht,Z as ul,$ as ua,a0 as tt,a1 as Wn,a2 as Ae,a3 as ml,a4 as Ia,a5 as Le,a6 as Ct,a7 as Pa,a8 as Ua,a9 as jn,aa as cl,ab as Hn,ac as Qt,ad as pl,ae as Qe,af as _l,ag as fl,ah as Nn,ai as gl,aj as Kt,ak as yl,al as hl,am as ma,an as Fa,ao as Yn,ap as Et,aq as Ma,ar as Gn,as as St,at as vl,au as Xn,av as bl,aw as Jn,ax as on,ay as ln,az as ca,aA as Qn,aB as kt,aC as ut,aD as vt,aE as It,aF as sn,aG as pa,aH as kl,aI as wl,aJ as Cl,aK as Sl,aL as $l,aM as Zn,aN as Dl,aO as qa,aP as Zt,aQ as Al,aR as Tl,aS as El,aT as $t,aU as Ol,aV as Il,aW as Pl,aX as Ul,aY as Fl,aZ as Ml,a_ as xn,a$ as ql,b0 as eo,b1 as Rl,b2 as to,b3 as Ra,b4 as ao,b5 as Ka,b6 as Va,b7 as Kl,b8 as Vl,b9 as zl,ba as Ll,bb as Tt,bc as Bl,bd as Ca,be as Wl,bf as ft,bg as no,bh as jl,bi as Hl,bj as Nl,bk as Yl,bl as Vt,bm as Gl,bn as Xl,bo as Jl,bp as Ql,bq as Zl,br as xl,bs as es,bt as ts,bu as as,bv as oo,bw as ns,bx as os,by as ls,bz as ss,bA as rs,bB as lo,bC as ds,bD as Nt,bE as is,bF as us,bG as za,bH as Yt,bI as ms,bJ as cs,bK as ps,bL as _s,bM as fs,bN as gs,bO as ys,bP as hs,bQ as vs,bR as bs}from"./vendor-4a6eb15a.js";const Ta=(e,o)=>{const c=e[o];return c?typeof c=="function"?c():Promise.resolve(c):new Promise((n,v)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(v.bind(null,new Error("Unknown variable dynamic import: "+o)))})};var xt=_t.create({baseURL:window.config.path+"/api/v1"});xt.defaults.headers.Accept="application/json";xt.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";xt.defaults.headers.common["X-CSRF-TOKEN"]=document.head.querySelector('meta[name="csrf-token"]').content;xt.interceptors.response.use(function(e){return e.data},function(e){if(e.response.status===401)window.location.href=window.config.path;else return Promise.reject(e.response)});window.axiosBase=xt;const so=(e,o)=>{var c=o.role.name=="admin";return Ce(o.role.perms,n=>{n.name==e&&(c=!0)}),c},zt=e=>{if(e.details.sales_tax_type=="exclusive"&&e.details.tax_id!=""&&e.details.tax){var o=e.details.tax.rate,c=e.details.sales_price,n=c*(o/100),v=c+n;return v}else return e.details.sales_price},La=e=>`${e.address}, ${e.city}, ${e.state}, ${e.zipcode}, ${e.country}`,Ue=e=>window.config.app_type=="non-saas"?e:`superadmin/${e}`;it.suppressDeprecationWarnings=!0;ot.extend(sl);ot.extend(rl);const X=()=>{const e=Ze(),o=ke(),{t:c}=ae(),n=T(e.meta.orderType),v=window.config.invoice_url,h=window.config.download_lang_csv_url,m=window.config.app_type,d=pe(()=>o.state.auth.menuCollapsed),i=pe(()=>o.state.auth.cssSettings),p=pe(()=>o.state.auth.activeModules),_=pe(()=>o.state.auth.visibleSubscriptionModules),f=pe(()=>o.state.auth.globalSetting),y=pe(()=>o.state.auth.appSetting),b=pe(()=>o.state.auth.addMenus),k=pe(()=>o.state.auth.lang),C=pe(()=>o.state.auth.user),D=pe(()=>o.state.auth.warehouse),S=pe(()=>o.state.auth.all_warehouses),P=pe(()=>o.state.front.appSetting),F=pe(()=>window.config.frontStoreWarehouse);ee(()=>{e.meta&&e.meta.orderType?n.value=e.meta.orderType:n.value="online-orders"});const O={enabled:"success",disabled:"error"},E=[{key:"enabled",value:c("common.enabled")},{key:"disabled",value:c("common.disabled")}],U=[{key:"inclusive",value:c("product.inclusive")},{key:"exclusive",value:c("product.exclusive")}],K=re=>re&&re>it().endOf("day"),z=re=>re==null?ot().tz(y.value.timezone):ot(re).tz(y.value.timezone),M=re=>re==null?ot().tz(y.value.timezone).format(`${y.value.date_format}`):ot(re).tz(y.value.timezone).format(`${y.value.date_format}`),R=re=>re==null?ot().tz(y.value.timezone).format(`${y.value.date_format} ${y.value.time_format}`):ot(re).tz(y.value.timezone).format(`${y.value.date_format} ${y.value.time_format}`),q=re=>re!=null?ot(re).tz(y.value.timezone).format(`${y.value.time_format}`):"",L=re=>parseInt(re),j=re=>parseFloat(parseFloat(re).toFixed(2)),Y=re=>{const we=parseFloat(Math.abs(re)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(y.value.currency.position=="front")var Re=`${y.value.currency.symbol}${we}`;else var Re=`${we}${y.value.currency.symbol}`;return re<0?`- ${Re}`:Re},x=(re,we)=>{const Re=parseFloat(Math.abs(re)).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(we.position=="front")var He=`${we.symbol}${Re}`;else var He=`${Re}${we.symbol}`;return re<0?`- ${He}`:He},B=re=>{var we="";return re.payment_status!=null&&re.payment_status!="all"&&(re.payment_status=="pending"?we+=`(payment_status eq "${re.payment_status}" or payment_status eq "partially_paid" or payment_status eq "unpaid")`:we+=`payment_status eq "${re.payment_status}"`),re.order_status!=null&&re.order_status!="all"&&(n.value=="online-orders"?re.order_status=="cancelled"?we+="cancelled eq 1":re.order_status=="pending"?we+='((order_status eq "ordered" or order_status eq "confirmed" or order_status eq "processing" or order_status eq "shipping") and cancelled ne 1)':we+=`(order_status eq "${re.order_status}" and cancelled ne 1)`:we+=`order_status eq "${re.order_status}"`),we},N=re=>{var we="";return Ce(re,(Re,He)=>{Re!=null&&(we+=`${He} eq "${Re}" and `)}),we.length>0&&(we=we.substring(0,we.length-4)),we},H=re=>so(re,C.value),J=re=>{o.commit("auth/updatePageTitle",c(`menu.${re}`))},se=pe(()=>{const re=C&&C.value&&C.value.role?[C.value.role.name]:[];return C&&C.value&&C.value.role&&Ce(C.value.role.perms,we=>{re.push(we.name)}),re}),ce=pe(()=>{var re={};return n.value=="purchases"?re={type:"purchases",langKey:"purchase",menuKey:"purchases",userType:"suppliers",permission:"purchases"}:n.value=="sales"?re={type:"sales",langKey:"sales",menuKey:"sales",userType:"customers",permission:"sales"}:n.value=="purchase-returns"?re={type:"purchase-returns",langKey:"purchase_returns",menuKey:"purchase_returns",userType:"suppliers",permission:"purchase_returns"}:n.value=="sales-returns"?re={type:"sales-returns",langKey:"sales_returns",menuKey:"sales_returns",userType:"customers",permission:"sales_returns"}:n.value=="online-orders"?re={type:"online-orders",langKey:"online_orders",menuKey:"online_orders",userType:"customers",permission:"online_orders"}:n.value=="quotations"?re={type:"quotations",langKey:"quotation",menuKey:"quotation",userType:"customers",permission:"quotations"}:n.value=="stock-transfers"&&(re={type:"stock-transfers",langKey:"stock_transfer",menuKey:"stock_transfer",userType:"customers",permission:"stock_transfers"}),re}),V=re=>{const we=re.replace("-","_");return c(`menu.${we}`)},ne=[{key:"pending",value:c("common.unpaid")},{key:"paid",value:c("common.paid")}],te=[{key:"pending",value:c("common.pending")},{key:"paid",value:c("common.paid")},{key:"cancelled",value:c("common.cancelled")}],me={received:"green",pending:"orange",ordered:"blue",completed:"green",pending:"orange",delivered:"green",shipping:"purple",processing:"pink",confirmed:"cyan",ordered:"blue",received:"green",pending:"orange"},_e=[{key:"received",value:c("common.received")},{key:"pending",value:c("common.pending")},{key:"ordered",value:c("common.ordered")}],de=[{key:"completed",value:c("common.completed")},{key:"pending",value:c("common.pending")}],ye=[{key:"confirmed",value:c("common.confirmed")},{key:"processing",value:c("common.processing")},{key:"shipping",value:c("common.shipping")}],Fe=[{key:"ordered",value:c("common.ordered")},...ye,{key:"delivered",value:c("common.delivered")}],st=[{key:"received",value:c("common.received")},{key:"pending",value:c("common.pending")}];return{menuCollapsed:d,appSetting:y,appType:m,addMenus:b,selectedLang:k,user:C,selectedWarehouse:D,allWarehouses:S,checkPermission:H,permsArray:se,statusColors:O,orderStatusColors:me,userStatus:E,taxTypes:U,barcodeSymbology:[{key:"CODE128",value:"CODE128"},{key:"CODE39",value:"CODE39"}],frontAppSetting:P,disabledDate:K,formatQuantity:L,formatAmount:j,formatAmountCurrency:Y,formatAmountUsingCurrencyObject:x,convertToPositive:re=>re<0?re*-1:re,calculateOrderFilterString:B,calculateFilterString:N,updatePageTitle:J,orderType:n,orderPageObject:ce,orderStatus:ne,paymentStatus:te,purchaseOrderStatus:_e,onlineOrderChangeStatus:ye,salesOrderStatus:Fe,purchaseReturnStatus:de,salesReturnStatus:st,getRecursiveCategories:(re,we=null)=>{const Re=[],He=[];return re.data.map(Je=>{(we==null||we!=null&&Je.x_parent_id!=we)&&He.push({xid:Je.xid,x_parent_id:Je.x_parent_id,title:Je.name,value:Je.xid})}),He.forEach(Je=>{if(!Je.x_parent_id)return Re.push(Je);const xe=He.findIndex(Ft=>Ft.xid===Je.x_parent_id);if(!He[xe].children)return He[xe].children=[Je];He[xe].children.push(Je)}),Re},filterTreeNode:(re,we)=>we.props.title.toLowerCase().includes(re.toLowerCase()),getOrderTypeFromstring:V,invoiceBaseUrl:v,downloadLangCsvUrl:h,appModules:p,dayjs:ot,formatDate:M,formatDateTime:R,formatTime:q,dayjsObject:z,slugify:re=>{var we=Math.random().toString(36).slice(5),Re=re.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"");return Re+"-"+we},cssSettings:i,frontWarehouse:F,globalSetting:f,willSubscriptionModuleVisible:re=>m=="non-saas"?!0:y.value.subscription_plan&&y.value.subscription_plan.modules?yt(y.value.subscription_plan.modules,re):!1,visibleSubscriptionModules:_}},be=()=>{const e=T(!1),o=T({}),{t:c}=ae(),{appSetting:n}=X();return{loading:e,rules:o,addEditRequestAdmin:m=>{e.value=!0;const{url:d,data:i,success:p}=m;var _={};Ce(i,function(f,y){f==null?_[y]=null:_[y]=f}),axiosAdmin.post(d,_).then(f=>{m.successMessage&&Me.success({placement:n.value.rtl?"bottomLeft":"bottomRight",message:c("common.success"),description:m.successMessage}),p(f.data),e.value=!1,o.value={}}).catch(f=>{var y=f.data;const b=f.status;var k={};if(b==422){if(y.error&&typeof y.error.details<"u")for(var C=Object.keys(y.error.details),D=0;D<C.length;D++){var S=C[D].replace(".","\\.");k[S]={required:!0,message:y.error.details[C[D]][0]}}o.value=k,Ee.error(c("common.fix_errors"))}y&&y.message&&(Ee.error(y.message),y={error:{...y}}),m.error&&m.error(y),e.value=!1})},addEditFileRequestAdmin:m=>{e.value=!0;const{url:d,data:i,success:p}=m,_=new FormData;Ce(i,function(f,y){f==null?_.append(y,null):_.append(y,f.originFileObj)}),axiosAdmin.post(d,_,{headers:{"Content-Type":"multipart/form-data"}}).then(f=>{m.successMessage&&Me.success({placement:n.value.rtl?"bottomLeft":"bottomRight",message:c("common.success"),description:m.successMessage}),p(f.data),e.value=!1,o.value={}}).catch(f=>{var y=f.data;const b=f.status;var k={};if(b==422){if(y.error&&typeof y.error.details<"u")for(var C=Object.keys(y.error.details),D=0;D<C.length;D++){var S=C[D].replace(".","\\.");k[S]={required:!0,message:y.error.details[C[D]][0]}}o.value=k,Ee.error(c("common.fix_errors"))}y&&y.message&&(Ee.error(y.message),y={error:{...y}}),m.error&&m.error(y),e.value=!1})}}};const W=(e,o)=>{const c=e.__vccOpts||e;for(const[n,v]of o)c[n]=v;return c},ks=Z({setup(){const{addEditRequestAdmin:e,loading:o,rules:c}=be(),{globalSetting:n,appType:v}=X(),h=n.value.login_image_url,m=ke(),d=qe(),i=Se({email:null,password:null}),p=T({error:"",success:""});return{loading:o,rules:c,credentials:i,onSubmit:()=>{p.value={error:"",success:!1},e({url:"auth/login",data:i,success:y=>{const b=y.user;m.commit("auth/updateUser",b),m.commit("auth/updateToken",y.token),m.commit("auth/updateExpires",y.expires_in),m.commit("auth/updateVisibleSubscriptionModules",y.visible_subscription_modules),v=="non-saas"?(m.dispatch("auth/updateAllWarehouses"),m.commit("auth/updateWarehouse",y.user.warehouse),d.push({name:"admin.dashboard.index",params:{success:!0}})):b.is_superadmin&&b.user_type=="super_admins"?(m.commit("auth/updateApp",y.app),m.commit("auth/updateEmailVerifiedSetting",y.email_setting_verified),d.push({name:"superadmin.dashboard.index",params:{success:!0}})):(m.commit("auth/updateApp",y.app),m.commit("auth/updateEmailVerifiedSetting",y.email_setting_verified),m.commit("auth/updateAddMenus",y.shortcut_menus.credentials),m.dispatch("auth/updateAllWarehouses"),m.commit("auth/updateWarehouse",y.user.warehouse),d.push({name:"admin.dashboard.index",params:{success:!0}}))},error:y=>{p.value={error:y.error.message?y.error.message:"",success:!1}}})},onRequestSend:p,globalSetting:n,handleGoogleLogin:()=>{const y="/auth/google/redirect";window.location.href=y},loginBackground:h,innerWidth:window.innerWidth}}}),ws={class:"login-main-container"},Cs={class:"form-wrapper"},Ss={class:"login-logo"},$s=["src"],Ds={class:"flex-justify-between mb-24"};function As(e,o,c,n,v,h){const m=l("a-alert"),d=l("a-input"),i=l("a-form-item"),p=l("a-input-password"),_=l("a-checkbox"),f=l("router-link"),y=l("a-button"),b=l("a-divider"),k=l("google-outlined"),C=l("a-form"),D=l("a-col"),S=l("a-row");return r(),$("div",ws,[t(S,{class:"main-container-div"},{default:a(()=>[t(D,{xs:24,sm:24,md:10,lg:8,class:"login-left-column"},{default:a(()=>[g("div",Cs,[g("div",Ss,[g("img",{class:"login-img-logo",src:e.globalSetting.light_logo_url,alt:"logo"},null,8,$s)]),o[5]||(o[5]=g("div",{class:"login-header"},[g("h1",null,"Welcome back"),g("p",null,"Please enter your details to sign in.")],-1)),e.onRequestSend.error?(r(),w(m,{key:0,message:e.onRequestSend.error,type:"error","show-icon":"",class:"mb-20"},null,8,["message"])):A("",!0),e.onRequestSend.success?(r(),w(m,{key:1,message:e.$t("messages.login_success"),type:"success","show-icon":"",class:"mb-20"},null,8,["message"])):A("",!0),t(C,{layout:"vertical",class:"modern-form"},{default:a(()=>[t(i,{label:e.$t("user.email_phone"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null},{default:a(()=>[t(d,{size:"large",value:e.credentials.email,"onUpdate:value":o[0]||(o[0]=P=>e.credentials.email=P),onPressEnter:e.onSubmit,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email_phone")])},null,8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(i,{label:e.$t("user.password"),name:"password",help:e.rules.password?e.rules.password.message:null,validateStatus:e.rules.password?"error":null},{default:a(()=>[t(p,{size:"large",value:e.credentials.password,"onUpdate:value":o[1]||(o[1]=P=>e.credentials.password=P),onPressEnter:e.onSubmit,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.password")])},null,8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),g("div",Ds,[t(_,null,{default:a(()=>[...o[2]||(o[2]=[u("Remember me",-1)])]),_:1}),t(f,{to:{name:"admin.forgot_password"},class:"forgot-link"},{default:a(()=>[u(s(e.$t("login.forgot_password"))+"? ",1)]),_:1})]),t(y,{loading:e.loading,onClick:e.onSubmit,class:"login-btn",block:"",type:"primary",size:"large"},{default:a(()=>[u(s(e.$t("menu.login")),1)]),_:1},8,["loading","onClick"]),t(b,{plain:""},{default:a(()=>[...o[3]||(o[3]=[g("span",{class:"divider-text"},"Or continue with",-1)])]),_:1}),t(y,{disabled:!0,block:"",loading:e.isGoogleLoading,onClick:e.handleGoogleLogin,class:"google-btn",size:"large"},{icon:a(()=>[t(k)]),default:a(()=>[o[4]||(o[4]=u(" Google ",-1))]),_:1},8,["loading","onClick"])]),_:1})])]),_:1}),t(D,{xs:0,sm:0,md:14,lg:16},{default:a(()=>[g("div",{class:"right-visual-container",style:Ye({backgroundImage:`url(${e.loginBackground})`})},[...o[6]||(o[6]=[g("div",{class:"overlay-content"},[g("h2",null,"Streamline your workflow."),g("p",null,"Join thousands of users managing their business effortlessly.")],-1)])],4)]),_:1})]),_:1})])}const Ts=W(ks,[["render",As],["__scopeId","data-v-597a7c05"]]);const Es=Z({setup(){const{addEditRequestAdmin:e,loading:o,rules:c}=be(),{globalSetting:n,appType:v}=X(),h=n.value.login_image_url;ke(),qe();const m=Se({email:null,password:null}),d=T({error:"",success:""});return{loading:o,rules:c,credentials:m,onSubmit:()=>{d.value={error:"",success:!1},e({url:"auth/forgot-password",data:{email:m.email},success:_=>{d.value={error:"",success:!0}},error:_=>{var f;d.value={error:(f=_.error)!=null&&f.message?_.error.message:"Something went wrong",success:!1}}})},onRequestSend:d,globalSetting:n,handleGoogleLogin:()=>{const _="/auth/google/redirect";window.location.href=_},loginBackground:h,innerWidth:window.innerWidth}}}),Os={class:"login-main-container"},Is={class:"login-logo mb-30"},Ps=["src"],Us={class:"login-footer-text"},Fs={class:"right-login-div"},Ms=["src"];function qs(e,o,c,n,v,h){const m=l("a-alert"),d=l("a-input"),i=l("a-form-item"),p=l("a-button"),_=l("router-link"),f=l("a-form"),y=l("a-card"),b=l("a-col"),k=l("a-row");return r(),$("div",Os,[t(k,{class:"main-container-div"},{default:a(()=>[t(b,{xs:24,sm:24,md:24,lg:8},{default:a(()=>[t(k,{class:"login-left-div"},{default:a(()=>[t(b,{xs:{span:20,offset:2},sm:{span:20,offset:2},md:{span:16,offset:4},lg:{span:16,offset:4}},{default:a(()=>[t(y,{bordered:e.innerWidth<=768},{default:a(()=>[t(f,{layout:"vertical"},{default:a(()=>[g("div",Is,[g("img",{class:"login-img-logo",src:e.globalSetting.light_logo_url},null,8,Ps)]),e.onRequestSend.error!=""?(r(),w(m,{key:0,message:e.onRequestSend.error,type:"error","show-icon":"",class:"mb-20 mt-10"},null,8,["message"])):A("",!0),e.onRequestSend.success?(r(),w(m,{key:1,message:e.$t("messages.login_success"),type:"success","show-icon":"",class:"mb-20 mt-10"},null,8,["message"])):A("",!0),t(i,{label:e.$t("user.email_phone"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null},{default:a(()=>[t(d,{value:e.credentials.email,"onUpdate:value":o[0]||(o[0]=C=>e.credentials.email=C),onPressEnter:e.onSubmit,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email_phone")])},null,8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(i,null,{default:a(()=>[t(p,{loading:e.loading,onClick:e.onSubmit,class:"login-btn",block:"",type:"primary"},{default:a(()=>[u(s(e.$t("menu.reset")),1)]),_:1},8,["loading","onClick"])]),_:1}),g("div",Us,[t(_,{to:{name:"admin.login"}},{default:a(()=>[u(s(e.$t("user.back")),1)]),_:1})])]),_:1})]),_:1},8,["bordered"])]),_:1})]),_:1})]),_:1}),t(b,{xs:0,sm:0,md:24,lg:16},{default:a(()=>[g("div",Fs,[g("img",{class:"right-image",src:e.loginBackground},null,8,Ms)])]),_:1})]),_:1})])}const Rs=W(Es,[["render",qs]]),Ba=()=>{const e=T([]),o=T({}),c=T(""),n=T(""),v=T(""),h=T(!1);ae();const m=T(window.config.product_name),d=T(window.config.product_version),i=ke(),p=T([]),_=T([]),f=T(!1),y=T(!1),b=T(""),k=T(0);var C;const D=()=>{f.value=!0;const F=window.config.product_name,O=axiosAdmin.get(Ue("modules")),E=_t.post("https://nvato.codeifly.com/product",{verified_name:F,domain:window.location.host});var U=[];Promise.all([O,E]).then(([K,z])=>{const M=z.data.product,R=window.config.installed_modules,q=window.config.modules;p.value=z.data.offers,_.value=z.data.settings,Ce(M.modules,L=>{const j=at(R,["verified_name",L.verified_name]);if(U.push({...L,current_version:j?j.current_version:"-",status:yt(q,L.verified_name),installed:j!=null}),!L.verified||L.other_domain_verified){var Y=[...window.config.modules],x=dl(Y,function(B){return B!=L.verified_name});i.commit("auth/updateActiveModules",x),window.config.modules=x}}),e.value=U,f.value=!1})},S=F=>{y.value=!0,k.value=0,b.value="";const O={verified_name:F,domain:window.location.host};C=window.setInterval(function(){P()},1500),axiosAdmin.post(Ue("modules/install"),O).then(E=>{y.value=!1,k.value=100,b.value="started",axiosAdmin.post(Ue("modules/extract"),O).then(U=>{b.value="completed",_t.post("https://envato.codeily.com/version-update",{verified_name:U.data.verified_name,version:U.data.version,domain:window.location.host}),i.commit("auth/updateActiveModules",U.data.enabled_modules),window.config.modules=U.data.enabled_modules,window.config.installed_modules=U.data.installed_modules}).catch(U=>{b.value="failed"})}).catch(E=>{y.value=!1,k.value=0,clearInterval(C)})},P=()=>{axiosAdmin(Ue("modules/download-percentage")).then(F=>{k.value=parseInt(F.data.percentage),k.value>=100&&clearInterval(C)})};return{allModules:e,getModuleData:D,install:S,dataLoading:f,rules:o,purchaseCode:c,errorMessage:n,successMessage:v,loading:h,productName:m,version:d,offers:p,settings:_,downloading:y,downloadPercentage:k,extracting:b}};const Ks=Z({setup(){const e=window.config.verify_purchase_background,o=qe(),{rules:c,purchaseCode:n,errorMessage:v,successMessage:h,loading:m,verifyPurchase:d}=Ba();return{rules:c,purchaseCode:n,loading:m,verify:()=>d({success:p=>{o.push({name:"admin.login"})}}),errorMessage:v,successMessage:h,verifyPurchaseBackground:e}}}),Vs={class:"container-content"},zs={class:"text-center"},Ls=["innerHTML"],Bs=["innerHTML"];function Ws(e,o,c,n,v,h){const m=l("a-typography-title"),d=l("a-divider"),i=l("a-alert"),p=l("a-input"),_=l("a-form-item"),f=l("a-button"),y=l("a-form"),b=l("a-col"),k=l("a-row");return r(),$("div",{class:"main-container",style:Ye({backgroundImage:`url(${e.verifyPurchaseBackground})`})},[g("div",Vs,[t(k,{type:"flex",justify:"center"},{default:a(()=>[t(b,{span:8},{default:a(()=>[g("div",zs,[t(m,{level:4},{default:a(()=>[u(s(e.$t("common.verify_purchase")),1)]),_:1})]),t(d),e.successMessage!=""?(r(),w(i,{key:0,type:"success","show-icon":"",banner:""},{message:a(()=>[g("span",{innerHTML:e.successMessage},null,8,Ls)]),_:1})):A("",!0),e.errorMessage!=""?(r(),w(i,{key:1,type:"error","show-icon":"",banner:""},{message:a(()=>[g("span",{innerHTML:e.errorMessage},null,8,Bs)]),_:1})):A("",!0),t(y,{layout:"vertical",class:"mt-20"},{default:a(()=>[t(_,{label:e.$t("common.purchase_code"),name:"purchase_code",help:e.rules.purchase_code?e.rules.purchase_code.message:null,validateStatus:e.rules.purchase_code?"error":null,class:"required"},{default:a(()=>[t(p,{value:e.purchaseCode,"onUpdate:value":o[0]||(o[0]=C=>e.purchaseCode=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(_,null,{default:a(()=>[t(f,{type:"primary",onClick:e.verify,loading:e.loading},{default:a(()=>[u(s(e.$t("common.verify_purchase")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})]),_:1})])],4)}const js=W(Ks,[["render",Ws]]),Hs=[{path:"/admin/login",component:Ts,name:"admin.login",meta:{requireUnauth:!0,menuKey:e=>"login"}},{path:"/admin/reset-password",name:"admin.reset_password",component:()=>lt(()=>import("./ResetPassword-81f7a8af.js"),["assets/ResetPassword-81f7a8af.js","assets/vendor-4a6eb15a.js"]),meta:{requireUnauth:!0,menuKey:e=>"reset_password"}},{path:"/admin/forgot-password",component:Rs,name:"admin.forgot_password",meta:{requireUnauth:!0,menuKey:e=>"forgot_password"}},{path:"/admin/verify",component:js,name:"verify.main",meta:{requireUnauth:!0,menuKey:e=>"verify_product"}}];ra.register(...da);const Ns={props:["data"],components:{DoughnutChart:ia.DoughnutChart},setup(e){const o=T(),c=T({responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1,text:"Chart.js Doughnut Chart"}}}),n=T({});return ue(e,(v,h)=>{n.value={labels:v.data.topSellingProducts?v.data.topSellingProducts.labels:[],datasets:[{data:v.data.topSellingProducts?v.data.topSellingProducts.values:[],backgroundColor:v.data.topSellingProducts?v.data.topSellingProducts.colors:[]}]}}),{chartRef:o,testData:n,options:c}}};function Ys(e,o,c,n,v,h){const m=l("DoughnutChart");return r(),w(m,{ref:"chartRef",chartData:n.testData,options:n.options},null,8,["chartData","options"])}const Gs=W(Ns,[["render",Ys]]);ra.register(...da);const Xs={props:["data"],components:{BarChart:ia.BarChart},setup(e){const o=T(),{t:c}=ae(),n=T({responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1,text:"Chart.js Doughnut Chart"}}}),v=T({});return ue(e,(h,m)=>{v.value={labels:h.data.purchaseSales.dates?h.data.purchaseSales.dates:[],datasets:[{label:c("menu.purchases"),data:h.data.purchaseSales.purchases?h.data.purchaseSales.purchases:[],backgroundColor:"#20C997"},{label:c("menu.sales"),data:h.data.purchaseSales.sales?h.data.purchaseSales.sales:[],backgroundColor:"#FFCD56"}]}}),{chartRef:o,testData:v,options:n}}};function Js(e,o,c,n,v,h){const m=l("BarChart");return r(),w(m,{ref:"chartRef",chartData:n.testData,options:n.options},null,8,["chartData","options"])}const Qs=W(Xs,[["render",Js]]);ra.register(...da);const Zs={props:["data"],components:{LineChart:ia.LineChart},setup(e){const o=T(),{t:c}=ae(),n=T({responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1,text:""}}}),v=T({});return ue(e,(h,m)=>{v.value={labels:h.data.paymentChartData?h.data.paymentChartData.dates:[],datasets:[{label:c("dashboard.payment_sent"),data:h.data.paymentChartData.sent?h.data.paymentChartData.sent:[],borderColor:"#20C997",backgroundColor:"#20C997"},{label:c("dashboard.payment_received"),data:h.data.paymentChartData.received?h.data.paymentChartData.received:[],borderColor:"#FFCD56",backgroundColor:"#FFCD56"}]}}),{chartRef:o,testData:v,options:n}}};function xs(e,o,c,n,v,h){const m=l("LineChart");return r(),w(m,{ref:"chartRef",chartData:n.testData,options:n.options},null,8,["chartData","options"])}const er=W(Zs,[["render",xs]]),tr={props:{bgColor:{default:"#5F63F2"}}},ar={class:"custom-card-widget"};function nr(e,o,c,n,v,h){const m=l("a-space"),d=l("a-card");return r(),w(d,{bordered:!1},{default:a(()=>[g("figure",ar,[t(m,null,{default:a(()=>[g("div",{class:"custom-card-widget-icon",style:Ye({background:c.bgColor})},[ie(e.$slots,"image")],4),g("figcaption",null,[ie(e.$slots,"description")])]),_:3})])]),_:3})}const ro=W(tr,[["render",nr]]);ra.register(...da);const or={props:["data","title"],components:{DoughnutChart:ia.DoughnutChart},setup(e){const o=T(),c=T({responsive:!0,plugins:{legend:{position:"bottom"},title:{display:e.title!="",text:e.title}}}),n=T({labels:e.data.labels,datasets:[{data:e.data.values,backgroundColor:e.data.colors}]});return ue(e,(v,h)=>{n.value={labels:v.data.labels,datasets:[{data:v.data.values,backgroundColor:v.data.colors}]}}),{chartRef:o,testData:n,options:c}}};function lr(e,o,c,n,v,h){const m=l("DoughnutChart");return r(),w(m,{ref:"chartRef",chartData:n.testData,options:n.options},null,8,["chartData","options"])}const sr=W(or,[["render",lr]]),rr=Z({props:["itemDetails","visible"],components:{Doughnut:sr},setup(e,{emit:o}){const{formatAmountCurrency:c,getOrderTypeFromstring:n,formatDate:v,formatDateTime:h}=X();ae();const m=T("product_orders"),d=T({}),i=pe(()=>e.itemDetails.warehouse_stocks.filter(f=>f.stock_quantity<e.itemDetails.stock_quantitiy_alert));return ue(e,(_,f)=>{if(m.value="product_orders",_.itemDetails.warehouse_stocks){var y=[],b=[],k=["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)"];Ce(_.itemDetails.warehouse_stocks,(C,D)=>{y.push(C.warehouse.name),b.push(C.stock_quantity)}),d.value={labels:y,values:b,colors:k}}else d.value={labels:[],values:[],colors:[]}}),{onClose:()=>{o("closed")},formatDate:v,formatDateTime:h,formatAmountCurrency:c,warehouseStockColumns,stockHistoryColumns,productOrderColumns,warehouseStockChartData:d,activeKey:m,getOrderTypeFromstring:n,drawerWidth:window.innerWidth<=991?"90%":"60%",outOfStockWarehouses:i}}});function dr(e,o,c,n,v,h){const m=l("a-image"),d=l("a-col"),i=l("a-row"),p=l("a-statistic"),_=l("a-typography-title"),f=l("Doughnut"),y=l("a-table"),b=l("a-tab-pane"),k=l("a-tabs"),C=l("a-drawer");return r(),w(C,{title:e.itemDetails.name,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},maskClosable:!1,onClose:e.onClose},{default:a(()=>[t(i,null,{default:a(()=>[e.itemDetails.product_type=="single"?(r(),w(d,{key:0,xs:24,sm:24,md:8,lg:6},{default:a(()=>[t(m,{width:150,src:e.itemDetails.image_url},null,8,["src"])]),_:1})):A("",!0),t(d,{xs:24,sm:24,md:8,lg:18},{default:a(()=>[e.itemDetails.description?(r(),w(i,{key:0,class:"mb-10 mt-10"},{default:a(()=>[t(d,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[u(s(e.itemDetails.description),1)]),_:1})]),_:1})):A("",!0),t(i,{class:"mb-10 mt-10"},{default:a(()=>[t(d,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(p,{title:e.$t("product.mrp"),value:e.formatAmountCurrency(e.itemDetails.mrp),style:{"margin-right":"50px"}},null,8,["title","value"])]),_:1}),t(d,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(p,{title:e.$t("product.purchase_price"),value:e.formatAmountCurrency(e.itemDetails.purchase_price),style:{"margin-right":"50px"}},null,8,["title","value"])]),_:1}),t(d,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(p,{title:e.$t("product.sales_price"),value:e.formatAmountCurrency(e.itemDetails.sales_price)},null,8,["title","value"])]),_:1})]),_:1}),o[1]||(o[1]=g("hr",{style:{height:"1px",border:"none",color:"#f0f0f0","background-color":"#f0f0f0"},class:"mt-10 mb-10"},null,-1)),t(i,null,{default:a(()=>[t(d,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(_,{level:5},{default:a(()=>[u(s(e.$t("product.stocks")),1)]),_:1}),t(f,{data:e.warehouseStockChartData,style:{height:"200px"}},null,8,["data"])]),_:1}),t(d,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(y,{columns:e.warehouseStockColumns,"row-key":D=>D.id,"data-source":e.itemDetails.warehouse_stocks,pagination:!1,class:"mt-30"},{bodyCell:a(({column:D,record:S})=>{var P;return[D.dataIndex==="warehouse_id"?(r(),$(I,{key:0},[u(s(S.warehouse.name),1)],64)):A("",!0),D.dataIndex==="stock_quantity"?(r(),$(I,{key:1},[u(s(S.stock_quantity)+" "+s((P=e.itemDetails.unit)==null?void 0:P.short_name),1)],64)):A("",!0)]}),_:1},8,["columns","row-key","data-source"])]),_:1})]),_:1})]),_:1})]),_:1}),t(i,{class:"mt-10"},{default:a(()=>[t(d,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{activeKey:e.activeKey,"onUpdate:activeKey":o[0]||(o[0]=D=>e.activeKey=D)},{default:a(()=>[t(b,{key:"product_orders",tab:e.$t("product.product_orders")},{default:a(()=>[t(y,{columns:e.productOrderColumns,"row-key":D=>D.id,"data-source":e.itemDetails.items,pagination:!1},{bodyCell:a(({column:D,record:S})=>[D.dataIndex==="order_type"?(r(),$(I,{key:0},[u(s(e.getOrderTypeFromstring(S.order.order_type)),1)],64)):A("",!0),D.dataIndex==="order_date"?(r(),$(I,{key:1},[u(s(e.formatDateTime(S.order.order_date)),1)],64)):A("",!0),D.dataIndex==="single_unit_price"?(r(),$(I,{key:2},[u(s(e.formatAmountCurrency(S.single_unit_price)),1)],64)):A("",!0),D.dataIndex==="total_discount"?(r(),$(I,{key:3},[u(s(e.formatAmountCurrency(S.total_discount))+" ("+s(S.discount_rate)+"%) ",1)],64)):A("",!0),D.dataIndex==="total_tax"?(r(),$(I,{key:4},[u(s(e.formatAmountCurrency(S.total_tax))+" ("+s(S.tax_rate)+"%) ",1)],64)):A("",!0),D.dataIndex==="subtotal"?(r(),$(I,{key:5},[u(s(e.formatAmountCurrency(S.subtotal)),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source"])]),_:1},8,["tab"]),t(b,{key:"stock_history",tab:e.$t("product.stock_history")},{default:a(()=>[t(y,{columns:e.stockHistoryColumns,"row-key":D=>D.id,"data-source":e.itemDetails.stock_history,pagination:!1},{bodyCell:a(({column:D,record:S})=>[D.dataIndex==="created_at"?(r(),$(I,{key:0},[u(s(e.formatDateTime(S.created_at)),1)],64)):A("",!0),D.dataIndex==="order_type"?(r(),$(I,{key:1},[u(s(e.getOrderTypeFromstring(S.order_type)),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source"])]),_:1},8,["tab"])]),_:1},8,["activeKey"])]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const ir=W(rr,[["render",dr]]),ur={props:["data"],components:{CloudDownloadOutlined:Oa,CloudUploadOutlined:il,Details:ir},setup(e){const{formatDateTime:o}=X(),c=T(!1),n=T({});return{formatDateTime:o,viewData:n,detailsVisible:c,viewItem:h=>{n.value=h,c.value=!0}}}};function mr(e,o,c,n,v,h){const m=l("Details"),d=l("CloudDownloadOutlined"),i=l("CloudUploadOutlined"),p=l("a-typography-link"),_=l("a-timeline-item"),f=l("a-timeline");return r(),$(I,null,[t(m,{visible:n.detailsVisible,onClosed:o[0]||(o[0]=y=>n.detailsVisible=!1),itemDetails:n.viewData},null,8,["visible","itemDetails"]),t(f,null,{default:a(()=>[(r(!0),$(I,null,G(c.data,y=>(r(),w(_,{key:y.id},{dot:a(()=>[y.stock_type=="out"?(r(),w(d,{key:0,style:{"font-size":"20px"}})):(r(),w(i,{key:1,style:{"font-size":"20px"}}))]),default:a(()=>[g("span",null,[t(p,{onClick:b=>n.viewItem(y.product)},{default:a(()=>[u(s(y.product.name),1)]),_:2},1032,["onClick"]),o[1]||(o[1]=u(" with ",-1)),g("strong",null,s(y.quantity)+" "+s(y.product.unit.short_name),1),u(" "+s(y.order_type)+" on "+s(n.formatDateTime(y.created_at)),1)])]),_:2},1024))),128))]),_:1})],64)}const cr=W(ur,[["render",mr]]),_a=()=>{const{dayjs:e}=X();ke();const{t:o}=ae(),c=Ze(),n=T(c.meta.orderType),v=T([]),h=["user_id","warehouse_id"];ee(()=>{c.meta&&c.meta.orderType?n.value=c.meta.orderType:n.value="online-orders"});const m={order_date:e().utc().format("YYYY-MM-DDTHH:mm:ssZ"),user_id:void 0,notes:"",order_status:void 0,tax_id:void 0,warehouse_id:void 0,discount:0,shipping:0,subtotal:0},d={date:void 0,payment_mode_id:void 0,amount:"",notes:""},i=[{title:"#",dataIndex:"sn"},{title:o("product.name"),dataIndex:"name"},{title:o("product.quantity"),dataIndex:"unit_quantity"},{title:o("product.unit_price"),dataIndex:"single_unit_price"},{title:o("product.discount"),dataIndex:"total_discount"},{title:o("product.tax"),dataIndex:"total_tax"},{title:o("product.subtotal"),dataIndex:"subtotal"},{title:o("common.action"),dataIndex:"action"}],p=[{title:o("product.product"),dataIndex:"product_id"},{title:o("product.quantity"),dataIndex:"quantity"},{title:o("product.unit_price"),dataIndex:"single_unit_price"},{title:o("product.discount"),dataIndex:"total_discount"},{title:o("product.tax"),dataIndex:"total_tax"},{title:o("product.subtotal"),dataIndex:"subtotal"}],_=[{key:"invoice_number",value:o("stock.invoice_number")}],f=pe(()=>{var k={};return n.value=="purchases"?k={type:"purchases",langKey:"purchase",menuKey:"purchases",userType:"suppliers",permission:"purchases"}:n.value=="sales"?k={type:"sales",langKey:"sales",menuKey:"sales",userType:"customers",permission:"sales"}:n.value=="purchase-returns"?k={type:"purchase-returns",langKey:"purchase_returns",menuKey:"purchase_returns",userType:"suppliers",permission:"purchase_returns"}:n.value=="sales-returns"?k={type:"sales-returns",langKey:"sales_returns",menuKey:"sales_returns",userType:"customers",permission:"sales_returns"}:n.value=="online-orders"?k={type:"online-orders",langKey:"online_orders",menuKey:"online_orders",userType:"customers",permission:"online_orders"}:n.value=="quotations"?k={type:"quotations",langKey:"quotation",menuKey:"sales",userType:"customers",permission:"quotations"}:n.value=="stock-transfers"&&(k={type:"stock-transfers",langKey:"stock_transfer",menuKey:"stock_transfer",userType:"customers",permission:"stock_transfers"}),k}),y=()=>{var k=[{title:o("stock.invoice_number"),dataIndex:"invoice_number"}];f.value.type=="stock-transfers"&&k.push({title:o("stock_transfer.warehouse"),dataIndex:"warehouse"}),k.push({title:o(`${f.value.langKey}.${f.value.langKey}_date`),dataIndex:"order_date"}),f.value.type!="stock-transfers"&&k.push({title:o(`${f.value.langKey}.user`),dataIndex:"user_id"}),v.value=[...k,{title:o(`${f.value.langKey}.${f.value.langKey}_status`),dataIndex:"order_status"},{title:o("payments.paid_amount"),dataIndex:"paid_amount"},{title:o("payments.total_amount"),dataIndex:"total_amount"},{title:o("payments.payment_status"),dataIndex:"payment_status"},{title:o("common.action"),dataIndex:"action"}]},b=[{title:o("payments.date"),dataIndex:"date"},{title:o("payments.amount"),dataIndex:"amount"},{title:o("payments.payment_mode"),dataIndex:"payment_mode_id"}];return{initData:m,initPaymentData:d,columns:v,hashableColumns:h,setupTableColumns:y,filterableColumns:_,pageObject:f,orderType:n,orderItemColumns:i,orderPaymentsColumns:b,orderItemDetailsColumns:p}},Ge=()=>{const e=ke(),o=Se({data:[],pagination:{pageSize:10,showSizeChanger:!0},loading:!1,sorter:{},searchColumn:void 0,searchString:"",searchStatus:void 0,filterLoading:!1,filterableColumns:[],selectedRowKeys:[],tableColumns:[]}),c=T(1),n=T({}),v=T([]),h=T(""),m=T({allowExport:!1,exportType:""}),d=b=>{const k=b.limit,C=(b.page-1)*k,D=i(k,C);return h.value=D,axiosAdmin.get(D)},i=(b,k)=>{var C=n.value.url,D="",S="",P=!1,F=!1;if("filterString"in n.value&&n.value.filterString!=""&&typeof n.value.filterString=="string"&&(D+=`${n.value.filterString} and `,P=!0),typeof n.value.filters=="object"&&nn(n.value.filters,(E,U)=>{E!=null&&E!=""&&(D+=`${U} eq "${E}" and `,P=!0,yt(v.value,U)&&(S+=`${E},`,F=!0))}),o.searchColumn!=null&&o.searchString!="")D+=`${o.searchColumn} lk "%${o.searchString}%" and `,P=!0,o.filterLoading=!0;else if(o.searchString!=""&&o.filterableColumns.length>0){var O="";Ce(o.filterableColumns,E=>{O+=`${E.key} lk "%${o.searchString}%" or `}),O.length>0&&(D+=`(${O.substring(0,O.length-3)})`,P=!1),o.filterLoading=!0}if(D.length>0&&P==!0?C+=`&filters=${encodeURIComponent(D.substring(0,D.length-5))}`:D.length>0&&P==!1&&(C+=`&filters=${encodeURIComponent(D)}`),n.value.extraFilters&&typeof n.value.extraFilters=="object"&&nn(n.value.extraFilters,(E,U)=>{E!=null&&E!=""&&(C+=`&${U}=${E}`,yt(v.value,U)&&(S+=`${E},`,F=!0))}),o.sorter&&o.sorter.field){const E=o.sorter.order=="ascend"||o.sorter.order=="asc"?"asc":"desc";C+=`&order=${o.sorter.field} ${E}`}else C+="&order=id desc";return C+=`&offset=${k}&limit=${b}`,F&&(S=S.substring(0,S.length-1),C+=`&hashable=${S}`),C},p=(b,k,C)=>{const D={...o.pagination};D.current=b.current,D.pageSize=b.pageSize,o.pagination=D,c.value=b.current,C=o.sorter,_({limit:b.pageSize,page:b.current,sortField:C.field,sortOrder:C.order,...k})},_=(b={})=>{o.loading=!0,d({limit:o.pagination.pageSize,page:c.value,...b}).then(k=>{const C=k.data,D={...o.pagination};if(D.total=k.meta.paging.total,o.loading=!1,o.data=C,o.pagination=D,o.filterLoading=!1,o.selectedRowKeys=[],m.value.allowExport){var S=m.value.exportType;if(S!=""){var P=e.state.auth.allExportData,F=et(P,O=>O.export_type!=S);e.commit("auth/updatAllExportData",[...F,{export_type:S,data:C,url:h.value}])}}b.success!=null&&b.success(C)})},f=wt(()=>{_({page:1})},400);return{table:o,tableUrl:n,exportDetails:m,currentPage:c,hashable:v,handleTableChange:p,fetch:_,onTableSearch:f,onRowSelectChange:b=>{o.selectedRowKeys=b}}},pr={props:["paymentStatus"]};function _r(e,o,c,n,v,h){const m=l("a-tag");return r(),$("span",null,[c.paymentStatus=="paid"?(r(),w(m,{key:0,color:"success"},{default:a(()=>[u(s(e.$t(`payments.${c.paymentStatus}`)),1)]),_:1})):c.paymentStatus=="partially_paid"?(r(),w(m,{key:1,color:"warning"},{default:a(()=>[u(s(e.$t(`payments.${c.paymentStatus}`)),1)]),_:1})):(r(),w(m,{key:2,color:"error"},{default:a(()=>[u(s(e.$t(`payments.${c.paymentStatus}`)),1)]),_:1}))])}const gt=W(pr,[["render",_r]]),fr={props:["data"],setup(){const{orderStatusColors:e}=X();return{orderStatusColors:e}}};function gr(e,o,c,n,v,h){const m=l("a-tag");return c.data.cancelled?(r(),w(m,{key:0,color:"#f50"},{default:a(()=>[u(s(e.$t("common.cancelled")),1)]),_:1})):(r(),w(m,{key:1,color:n.orderStatusColors[c.data.order_status]},{default:a(()=>[u(s(e.$t(`common.${c.data.order_status}`)),1)]),_:1},8,["color"]))}const fa=W(fr,[["render",gr]]),yr={props:["user","size"]},hr={key:0},vr={key:1};function br(e,o,c,n,v,h){const m=l("a-avatar"),d=l("a-badge");return c.user?(r(),$("div",hr,[t(d,null,{default:a(()=>[t(m,{size:30,src:c.user.profile_image_url},null,8,["src"]),u(" "+s(c.user.name),1)]),_:1})])):(r(),$("div",vr,[g("span",null,s(e.$t("user.walk_in_customer")),1)]))}const Xe=W(yr,[["render",br]]),Wa=()=>{const e="payment-modes?fields=id,xid,name,mode_type",o="payment-modes",{t:c}=ae(),n={name:"",mode_type:"bank"},v=[{title:c("payment_mode.name"),dataIndex:"name"},{title:c("payment_mode.mode_type"),dataIndex:"mode_type"},{title:c("common.action"),dataIndex:"action"}],h=[{key:"name",value:c("payment_mode.name")}];return{url:e,addEditUrl:o,initData:n,columns:v,filterableColumns:h}},kr=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:le,LoadingOutlined:Oe,SaveOutlined:ve},setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n,rules:v}=be();return{loading:n,rules:v,onClose:()=>{v.value={},o("closed")},onSubmit:()=>{c({url:e.url,data:e.formData,successMessage:e.successMessage,success:d=>{o("addEditSuccess",d.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function wr(e,o,c,n,v,h){const m=l("a-input"),d=l("a-form-item"),i=l("a-col"),p=l("a-row"),_=l("a-radio-button"),f=l("a-radio-group"),y=l("a-form"),b=l("SaveOutlined"),k=l("a-button"),C=l("a-modal");return r(),w(C,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(k,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(b)]),default:a(()=>[u(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(k,{key:"back",onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(y,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("payment_mode.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(m,{value:e.formData.name,"onUpdate:value":o[0]||(o[0]=D=>e.formData.name=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("payment_mode.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("payment_mode.mode_type"),mode_type:"mode_type",help:e.rules.mode_type?e.rules.mode_type.message:null,validateStatus:e.rules.mode_type?"error":null},{default:a(()=>[t(f,{value:e.formData.mode_type,"onUpdate:value":o[1]||(o[1]=D=>e.formData.mode_type=D),size:"small","button-style":"solid"},{default:a(()=>[t(_,{value:"cash"},{default:a(()=>[u(s(e.$t("payment_mode.cash")),1)]),_:1}),t(_,{value:"bank"},{default:a(()=>[u(s(e.$t("payment_mode.bank")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const ja=W(kr,[["render",wr]]),Cr=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:le,AddEdit:ja},setup(e,{emit:o}){const{permsArray:c}=X(),{initData:n,addEditUrl:v}=Wa(),h=T(!1),m=T("add"),d=T({...n});return{permsArray:c,visible:h,addEditType:m,addEditUrl:v,formData:d,addEditSuccess:()=>{h.value=!1,d.value={...n},o("onAddSuccess")},onClose:()=>{h.value=!1},showAdd:()=>{h.value=!0}}}}),Sr={key:0};function $r(e,o,c,n,v,h){const m=l("a-menu-item"),d=l("PlusOutlined"),i=l("a-button"),p=l("a-tooltip"),_=l("AddEdit");return e.permsArray.includes("payment_modes_view")||e.permsArray.includes("admin")?(r(),$("div",Sr,[e.customType=="menu"?(r(),w(m,{onClick:e.showAdd,key:"categories"},{icon:a(()=>[ie(e.$slots,"icon")]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick"])):(r(),$(I,{key:1},[e.tooltip?(r(),w(p,{key:0,placement:"topLeft",title:e.$t("payment_mode.add"),"arrow-point-at-center":""},{default:a(()=>[t(i,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),w(i,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("payment_mode.add"),successMessage:e.$t("payment_mode.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const io=W(Cr,[["render",$r]]),Dr=Z({props:["formData","data","visible","url","addEditType","editItemAmount","pageTitle","successMessage"],components:{PlusOutlined:le,LoadingOutlined:Oe,SaveOutlined:ve,PaymentModeAddButton:io},setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n,rules:v}=be(),{disabledDate:h,appSetting:m,formatAmountCurrency:d}=X(),i=T([]);ee(()=>{p()});const p=()=>{axiosAdmin.get("payment-modes?limit=10000").then(b=>{i.value=b.data})};return{paymentModes:i,appSetting:m,formatAmountCurrency:d,disabledDate:h,loading:n,rules:v,onClose:()=>{v.value={},o("closed")},onSubmit:()=>{c({url:e.url,data:e.formData,successMessage:e.successMessage,success:b=>{o("addEditSuccess",b.xid)}})},paymentModeAdded:()=>{p()}}}}),Ar={style:{display:"flex"}},Tr={style:{color:"#7c8db5 !important"}},Er={key:0},Or={key:1};function Ir(e,o,c,n,v,h){const m=l("a-date-picker"),d=l("a-form-item"),i=l("a-col"),p=l("a-row"),_=l("a-select-option"),f=l("a-select"),y=l("PaymentModeAddButton"),b=l("a-input"),k=l("a-textarea"),C=l("a-form"),D=l("SaveOutlined"),S=l("a-button"),P=l("a-modal");return r(),w(P,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(S,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(D)]),default:a(()=>[u(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(S,{key:"back",onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(C,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("payments.date"),name:"date",help:e.rules.date?e.rules.date.message:null,validateStatus:e.rules.date?"error":null,class:"required"},{default:a(()=>[t(m,{value:e.formData.date,"onUpdate:value":o[0]||(o[0]=F=>e.formData.date=F),format:e.appSetting.date_format,valueFormat:"YYYY-MM-DD","disabled-date":e.disabledDate,style:{width:"100%"}},null,8,["value","format","disabled-date"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("payments.payment_mode"),name:"payment_mode_id",help:e.rules.payment_mode_id?e.rules.payment_mode_id.message:null,validateStatus:e.rules.payment_mode_id?"error":null,class:"required"},{default:a(()=>[g("span",Ar,[t(f,{value:e.formData.payment_mode_id,"onUpdate:value":o[1]||(o[1]=F=>e.formData.payment_mode_id=F),placeholder:e.$t("common.select_default_text",[e.$t("payments.payment_mode")]),allowClear:!0},{default:a(()=>[(r(!0),$(I,null,G(e.paymentModes,F=>(r(),w(_,{key:F.xid,value:F.xid},{default:a(()=>[u(s(F.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),t(y,{onOnAddSuccess:e.paymentModeAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("payments.amount"),name:"amount",help:e.rules.amount?e.rules.amount.message:null,validateStatus:e.rules.amount?"error":null,class:"required"},{default:a(()=>[t(b,{prefix:e.appSetting.currency.symbol,value:e.formData.amount,"onUpdate:value":o[2]||(o[2]=F=>e.formData.amount=F),placeholder:e.$t("common.placeholder_default_text",[e.$t("payments.amount")])},null,8,["prefix","value","placeholder"]),g("small",Tr,[u(s(e.$t("common.max_amount"))+" ",1),e.addEditType=="edit"?(r(),$("span",Er,s(e.formatAmountCurrency(e.data.due_amount+e.editItemAmount)),1)):(r(),$("span",Or,s(e.formatAmountCurrency(e.data.due_amount)),1))])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("payments.notes"),name:"notes",help:e.rules.notes?e.rules.notes.message:null,validateStatus:e.rules.notes?"error":null},{default:a(()=>[t(k,{value:e.formData.notes,"onUpdate:value":o[3]||(o[3]=F=>e.formData.notes=F),placeholder:e.$t("payments.notes"),rows:5},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Pr=W(Dr,[["render",Ir]]);const Ur={props:["selectedItem"],components:{PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,LeftOutlined:Bn,UserInfo:Xe,AddEdit:Pr,PaymentStatus:gt,OrderStatus:fa},setup(e,{emit:o}){const{initPaymentData:c,orderPaymentsColumns:n,orderItemDetailsColumns:v}=_a(),{formatAmountCurrency:h,permsArray:m,formatDate:d,formatDateTime:i}=X(),{t:p}=ae(),_=T(!1),f=T("add"),y=T("order-payments"),b=T({}),k=T({}),C=T(0),D=m.value.includes("order_payments_view")||m.value.includes("admin")?"payments":"order_items",S=T(D),P=pe(()=>f.value=="add"?p("payments.add"):p("payments.edit")),F=pe(()=>f.value=="add"?p("payments.created"):p("payments.updated"));return{onClose:()=>{o("goBack")},formatDate:d,formatDateTime:i,formatAmountCurrency:h,orderPaymentsColumns:n,orderItemDetailsColumns:v,activeKey:S,addEditSuccess:z=>{o("reloadOrder"),f.value=="add"&&(b.value={order_id:e.selectedItem.xid,date:void 0,payment_mode_id:void 0,amount:"",notes:""}),_.value=!1},formData:b,addEditVisible:_,addItem:()=>{y.value="order-payments",f.value="add",b.value={...c,order_id:e.selectedItem.xid},_.value=!0,C.value=0},onCloseAddEdit:()=>{b.value={...c,order_id:e.selectedItem.xid},_.value=!1,C.value=0},addEditUrl:y,addEditType:f,viewData:k,permsArray:m,editItemAmount:C,pageTitle:P,successMessage:F}}},Fr={class:"order-details"},Mr={class:"table-responsive"},qr={class:"table-responsive"};function Rr(e,o,c,n,v,h){const m=l("AddEdit"),d=l("a-descriptions-item"),i=l("OrderStatus"),p=l("PaymentStatus"),_=l("a-descriptions"),f=l("a-col"),y=l("a-row"),b=l("EditOutlined"),k=l("a-button"),C=l("DeleteOutlined"),D=l("a-table"),S=l("a-tab-pane"),P=l("a-avatar"),F=l("a-badge"),O=l("a-tabs");return r(),$("div",null,[t(m,{addEditType:n.addEditType,visible:n.addEditVisible,url:n.addEditUrl,onAddEditSuccess:n.addEditSuccess,onClosed:n.onCloseAddEdit,formData:n.formData,data:c.selectedItem,editItemAmount:n.editItemAmount,pageTitle:n.pageTitle,successMessage:n.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","editItemAmount","pageTitle","successMessage"]),g("div",Fr,[t(y,{class:"mt-10"},{default:a(()=>[t(f,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(_,{title:null,layout:"vertical",contentStyle:{fontWeight:500,marginBottom:"20px"}},{default:a(()=>[t(d,{label:e.$t("stock.order_date")},{default:a(()=>[u(s(n.formatDateTime(c.selectedItem.order_date)),1)]),_:1},8,["label"]),t(d,{label:e.$t("stock.invoice_number")},{default:a(()=>[u(s(c.selectedItem.invoice_number),1)]),_:1},8,["label"]),c.selectedItem.user&&c.selectedItem.user.name?(r(),w(d,{key:0,label:c.selectedItem.order_type=="purchases"||c.selectedItem.order_type=="purchase-returns"?e.$t("stock.supplier"):e.$t("stock.customer")},{default:a(()=>[u(s(c.selectedItem.user.name),1)]),_:1},8,["label"])):A("",!0),c.selectedItem.order_type=="stock-transfers"&&c.selectedItem.warehouse&&c.selectedItem.warehouse.name?(r(),w(d,{key:1,label:e.$t("stock_transfer.to_warehouse")},{default:a(()=>[u(s(c.selectedItem.warehouse.name),1)]),_:1},8,["label"])):A("",!0),c.selectedItem.from_warehouse&&c.selectedItem.from_warehouse.name?(r(),w(d,{key:2,label:e.$t("stock_transfer.from_warehouse")},{default:a(()=>[u(s(c.selectedItem.from_warehouse.name),1)]),_:1},8,["label"])):A("",!0),t(d,{label:e.$t("stock.status")},{default:a(()=>[t(i,{data:c.selectedItem},null,8,["data"])]),_:1},8,["label"]),t(d,{label:e.$t("payments.payment_status")},{default:a(()=>[t(p,{paymentStatus:c.selectedItem.payment_status},null,8,["paymentStatus"])]),_:1},8,["label"]),t(d,{label:e.$t("stock.order_taken_by")},{default:a(()=>[u(s(c.selectedItem.staff_member&&c.selectedItem.staff_member.name?c.selectedItem.staff_member.name:"-"),1)]),_:1},8,["label"]),t(d,{label:e.$t("payments.total_amount")},{default:a(()=>[u(s(n.formatAmountCurrency(c.selectedItem.total)),1)]),_:1},8,["label"]),t(d,{label:e.$t("payments.paid_amount")},{default:a(()=>[u(s(n.formatAmountCurrency(c.selectedItem.paid_amount)),1)]),_:1},8,["label"]),t(d,{label:e.$t("payments.due_amount")},{default:a(()=>[u(s(n.formatAmountCurrency(c.selectedItem.due_amount)),1)]),_:1},8,["label"]),t(d,{label:e.$t("stock.discount")},{default:a(()=>[u(s(n.formatAmountCurrency(c.selectedItem.discount)),1)]),_:1},8,["label"]),t(d,{label:e.$t("stock.shipping")},{default:a(()=>[u(s(n.formatAmountCurrency(c.selectedItem.shipping)),1)]),_:1},8,["label"]),t(d,{label:e.$t("stock.order_tax")},{default:a(()=>[u(s(c.selectedItem.tax_rate>0?`${c.selectedItem.tax_rate}%`:"-"),1)]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),t(y,null,{default:a(()=>[t(f,{span:24},{default:a(()=>[t(O,{activeKey:n.activeKey,"onUpdate:activeKey":o[0]||(o[0]=E=>n.activeKey=E)},{default:a(()=>[n.permsArray.includes("order_payments_view")||n.permsArray.includes("admin")?(r(),w(S,{key:"payments",tab:e.$t("payments.payments")},{default:a(()=>[t(y,null,{default:a(()=>[t(f,{span:24},{default:a(()=>[g("div",Mr,[t(D,{"row-key":E=>E.xid,columns:n.orderPaymentsColumns,"data-source":c.selectedItem.order_payments,pagination:!1},{bodyCell:a(({column:E,record:U})=>[E.dataIndex==="date"?(r(),$(I,{key:0},[u(s(n.formatDate(U.payment.date)),1)],64)):A("",!0),E.dataIndex==="amount"?(r(),$(I,{key:1},[u(s(n.formatAmountCurrency(U.amount)),1)],64)):A("",!0),E.dataIndex==="payment_mode_id"?(r(),$(I,{key:2},[u(s(U.payment.payment_mode.name),1)],64)):A("",!0),E.dataIndex==="action"?(r(),$(I,{key:3},[n.permsArray.includes("order_payments_edit")||n.permsArray.includes("admin")?(r(),w(k,{key:0,type:"primary",onClick:K=>e.editItem(U),style:{"margin-left":"4px"}},{icon:a(()=>[t(b)]),_:1},8,["onClick"])):A("",!0),n.permsArray.includes("order_payments_delete")||n.permsArray.includes("admin")?(r(),w(k,{key:1,type:"primary",onClick:K=>e.showDeleteConfirm(U.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(C)]),_:1},8,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-key","columns","data-source"])])]),_:1})]),_:1})]),_:1},8,["tab"])):A("",!0),t(S,{key:"order_items",tab:e.$t("product.order_items")},{default:a(()=>[t(y,null,{default:a(()=>[t(f,{span:24},{default:a(()=>[g("div",qr,[t(D,{"row-key":E=>E.xid,columns:n.orderItemDetailsColumns,"data-source":c.selectedItem.items,pagination:!1},{bodyCell:a(({column:E,record:U})=>[E.dataIndex==="product_id"?(r(),w(F,{key:0},{default:a(()=>[t(P,{shape:"square",src:U.product.image_url},null,8,["src"]),u(" "+s(U.product.name),1)]),_:2},1024)):A("",!0),E.dataIndex==="single_unit_price"?(r(),$(I,{key:1},[u(s(n.formatAmountCurrency(U.single_unit_price)),1)],64)):A("",!0),E.dataIndex==="total_discount"?(r(),$(I,{key:2},[u(s(n.formatAmountCurrency(U.total_discount)),1)],64)):A("",!0),E.dataIndex==="total_tax"?(r(),$(I,{key:3},[u(s(n.formatAmountCurrency(U.total_tax)),1)],64)):A("",!0),E.dataIndex==="subtotal"?(r(),$(I,{key:4},[u(s(n.formatAmountCurrency(U.subtotal)),1)],64)):A("",!0)]),_:1},8,["row-key","columns","data-source"])])]),_:1})]),_:1})]),_:1},8,["tab"])]),_:1},8,["activeKey"])]),_:1})]),_:1})])])}const Ea=W(Ur,[["render",Rr]]);const Kr=Z({props:["visible","order"],emits:["close","restSelectedItem","reloadOrder"],components:{PaymentStatus:gt,Details:Ea,PlusOutlined:le,DownloadOutlined:Ot},setup(e,{emit:o}){const{formatAmountCurrency:c,permsArray:n,invoiceBaseUrl:v,selectedWarehouse:h}=X();ae();const m=T(null),d=()=>{o("close")},i=()=>{o("goBack")},p=()=>{o("reloadOrder")},_=()=>{};return{detailsRef:m,formatAmountCurrency:c,invoiceBaseUrl:v,permsArray:n,selectedWarehouse:h,onClose:d,restSelectedItem:i,paymentSuccess:p,drawerWidth:window.innerWidth<=991?"90%":"60%",downloadInvoice:_}}}),Vr={style:{width:"50%"}},zr={key:0};function Lr(e,o,c,n,v,h){const m=l("PaymentStatus"),d=l("a-page-header"),i=l("a-progress"),p=l("a-breadcrumb"),_=l("PlusOutlined"),f=l("a-button"),y=l("DownloadOutlined"),b=l("a-typography-link"),k=l("a-space"),C=l("Details"),D=l("a-drawer");return r(),w(D,{width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},maskClosable:!1,onClose:e.onClose},{title:a(()=>[t(d,{style:{padding:"0px"}},{title:a(()=>[u(" #"+s(e.order.invoice_number)+" ",1),t(m,{paymentStatus:e.order.payment_status},null,8,["paymentStatus"])]),_:1}),t(p,null,{default:a(()=>[g("div",Vr,[t(i,{percent:parseFloat(parseFloat(parseFloat(e.order.paid_amount)/parseFloat(e.order.total)*100).toFixed(2))},null,8,["percent"])])]),_:1})]),extra:a(()=>[t(k,null,{default:a(()=>[(e.permsArray.includes("order_payments_create")||e.permsArray.includes("admin"))&&e.order.payment_status!="paid"&&e.order.order_type!="stock-transfers"&&e.detailsRef?(r(),w(f,{key:0,type:"primary",onClick:e.detailsRef.addItem},{default:a(()=>[t(_),u(" "+s(e.$t("payments.add")),1)]),_:1},8,["onClick"])):(e.permsArray.includes("order_payments_create")||e.permsArray.includes("admin"))&&e.order.payment_status!="paid"&&e.order.order_type=="stock-transfers"&&e.order.from_warehouse&&e.order.from_warehouse.xid&&e.order.from_warehouse.xid==e.selectedWarehouse.xid&&e.detailsRef?(r(),w(f,{key:1,type:"primary",onClick:e.detailsRef.addItem},{default:a(()=>[t(_),u(" "+s(e.$t("payments.add")),1)]),_:1},8,["onClick"])):A("",!0),t(b,{href:`${e.invoiceBaseUrl}/${e.order.unique_id}`,target:"_blank"},{default:a(()=>[t(f,{type:"primary"},{default:a(()=>[t(y),u(" "+s(e.$t("sales.invoice")),1)]),_:1})]),_:1},8,["href"])]),_:1})]),default:a(()=>[e.order&&e.order.xid?(r(),$("div",zr,[t(C,{ref:"detailsRef",selectedItem:e.order,onGoBack:e.restSelectedItem,onReloadOrder:e.paymentSuccess},null,8,["selectedItem","onGoBack","onReloadOrder"])])):A("",!0)]),_:1},8,["width","open","onClose"])}const Br=W(Kr,[["render",Lr]]),Wr=Z({props:["data","visible"],emits:["confirmSuccess","closed"],components:{LoadingOutlined:Oe,CheckOutlined:ht},setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n,rules:v}=be(),{t:h}=ae(),m=T([{title:h("product.product"),dataIndex:"product_id"},{title:h("product.quantity"),dataIndex:"quantity"},{title:h("stock_adjustment.current_stock"),dataIndex:"current_stock"}]);return{rules:v,loading:n,onClose:()=>{v.value={},o("closed")},onSubmit:()=>{c({url:`online-orders/confirm/${e.data.unique_id}`,data:{},successMessage:h("online_orders.order_confirmed"),success:p=>{o("closed"),o("confirmSuccess")}})},confirmOrderTableColumns:m}}});function jr(e,o,c,n,v,h){const m=l("a-typography-text"),d=l("a-table"),i=l("a-col"),p=l("a-row"),_=l("a-form"),f=l("CheckOutlined"),y=l("a-button"),b=l("a-modal");return r(),w(b,{open:e.visible,closable:!1,centered:!0,title:e.$t("online_orders.update_orders_status"),onOk:e.onSubmit},{footer:a(()=>[t(y,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(f)]),default:a(()=>[u(" "+s(e.$t("common.confirm")),1)]),_:1},8,["loading","onClick"]),t(y,{key:"back",onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(_,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{columns:e.confirmOrderTableColumns,"data-source":e.data.items,"row-key":k=>k.id,pagination:!1},{bodyCell:a(({column:k,record:C})=>[k.dataIndex==="product_id"?(r(),$(I,{key:0},[u(s(C.product.name),1)],64)):A("",!0),k.dataIndex==="quantity"?(r(),$(I,{key:1},[u(s(`${C.quantity} ${C.product.unit.short_name}`),1)],64)):A("",!0),k.dataIndex==="current_stock"?(r(),$(I,{key:2},[C.product.details.current_stock<C.quantity?(r(),w(m,{key:0,type:"danger",strong:""},{default:a(()=>[u(s(`${C.product.details.current_stock} ${C.product.unit.short_name}`),1)]),_:2},1024)):C.product.details.current_stock>=C.quantity?(r(),w(m,{key:1,type:"success",strong:""},{default:a(()=>[u(s(`${C.product.details.current_stock} ${C.product.unit.short_name}`),1)]),_:2},1024)):A("",!0)],64)):A("",!0)]),_:1},8,["columns","data-source","row-key"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Hr=W(Wr,[["render",jr]]),Pt=()=>{const e=Ze(),o=ke(),c=pe(()=>o.getters["front/storeCartItems"]),{formatAmountUsingCurrencyObject:n}=X(),v=o.state.auth.appSetting,h=o.state.auth.user,{t:m}=ae(),d=T(e.params.type),i=pe(()=>o.state.front.warehouseCurrency),p=pe(()=>window.config.frontStoreWarehouse),_=pe(()=>o.state.front.appSetting),f={enabled:"success",disabled:"error"},y=[{key:"enabled",value:m("common.enabled")},{key:"disabled",value:m("common.disabled")}],b=[{key:"inclusive",value:m("product.inclusive")},{key:"exclusive",value:m("product.exclusive")}],k=J=>J&&J>moment().endOf("day"),C=J=>parseFloat(parseFloat(J).toFixed(2)),D=J=>n(J,i.value),S=J=>{var se="";return Ce(J,(ce,V)=>{ce!=null&&(se+=`${V} eq "${ce}" and `)}),se.length>0&&(se=se.substring(0,se.length-4)),se},P=J=>checkUserPermission(J,h),F=J=>{o.commit("auth/updatePageTitle",m(`menu.${J}`))},O=pe(()=>{const J=[o.state.auth.user.role.name];return Ce(o.state.auth.user.role.perms,se=>{J.push(se.name)}),J}),E=pe(()=>{var J={};return d.value=="purchases"?J={type:"purchases",langKey:"purchase",menuKey:"purchases",userType:"suppliers"}:d.value=="sales"?J={type:"sales",langKey:"sales",menuKey:"sales",userType:"customers"}:d.value=="purchase-returns"?J={type:"purchase-returns",langKey:"purchase_returns",menuKey:"purchase_returns",userType:"suppliers"}:d.value=="sales-returns"&&(J={type:"sales-returns",langKey:"sales_returns",menuKey:"sales_returns",userType:"customers"}),J}),U=J=>{const se=J.replace("-","_");return m(`menu.${se}`)},K=[{key:"pending",value:m("common.pending")},{key:"paid",value:m("common.paid")},{key:"cancelled",value:m("common.cancelled")}],z=[{key:"pending",value:m("common.pending")},{key:"paid",value:m("common.paid")},{key:"cancelled",value:m("common.cancelled")}],M=[{key:"received",value:m("common.received")},{key:"pending",value:m("common.pending")},{key:"ordered",value:m("common.ordered")}],R=[{key:"completed",value:m("common.completed")},{key:"pending",value:m("common.pending")}],q=[{key:"ordered",value:m("common.ordered")},{key:"confirmed",value:m("common.confirmed")},{key:"processing",value:m("common.processing")},{key:"shipping",value:m("common.shipping")},{key:"delivered",value:m("common.delivered")}],L=[{key:"received",value:m("common.received")},{key:"pending",value:m("common.pending")}],j=[{key:"CODE128",value:"CODE128"},{key:"CODE39",value:"CODE39"}],Y=(J,se=null)=>{const ce=[],V=[];return J.data.map(ne=>{(se==null||se!=null&&ne.parent_id!=se)&&V.push({id:ne.id,parent_id:ne.parent_id,title:ne.name,value:ne.id})}),V.forEach(ne=>{if(!ne.parent_id)return ce.push(ne);const te=V.findIndex(me=>me.id===ne.parent_id);if(!V[te].children)return V[te].children=[ne];V[te].children.push(ne)}),ce},x=(J,se)=>se.props.title.toLowerCase().includes(J.toLowerCase()),B=pe(()=>{let J=0;return Ce(c.value,se=>{J+=se.cart_quantity*se.details.sales_price}),J});return{appSetting:v,user:h,checkPermission:P,permsArray:O,statusColors:f,userStatus:y,taxTypes:b,barcodeSymbology:j,disabledDate:k,formatAmount:C,formatAmountCurrency:D,calculateFilterString:S,updatePageTitle:F,orderType:d,orderPageObject:E,orderStatus:K,paymentStatus:z,purchaseOrderStatus:M,salesOrderStatus:q,purchaseReturnStatus:R,salesReturnStatus:L,getRecursiveCategories:Y,filterTreeNode:x,getOrderTypeFromstring:U,products:c,total:B,updateCart:()=>{o.commit("front/addCartItems",c.value)},removeItem:J=>{const se=et(c.value,ce=>ce.xid!=J);o.commit("front/addCartItems",se)},frontAppSetting:_,warehouseCurrency:i,frontWarehouse:p}},Nr=Z({props:["orderStatus"],setup(e){const{salesOrderStatus:o}=X(),{orderStatus:c}=e,n=T(0);return ee(()=>{var v=ul(o,["key",c]);n.value=v+1}),{current:n,salesOrderStatus:o}}});function Yr(e,o,c,n,v,h){const m=l("a-step"),d=l("a-steps");return r(),w(d,{current:e.current,status:"wait"},{default:a(()=>[(r(!0),$(I,null,G(e.salesOrderStatus,i=>(r(),w(m,{key:i.key,title:i.value},null,8,["title"]))),128))]),_:1},8,["current"])}const uo=W(Nr,[["render",Yr]]);const Gr=Z({props:{order:{default:{}},detailView:{default:"front"}},components:{OrderStatus:uo,PaymentStatus:gt,StopOutlined:ua,OrderStatusTag:fa},setup(e,{emit:o}){const c=Pt(),n=X(),v=ke(),h=pe(()=>v.state.front.warehouseCurrency);return{columns:[{title:"#",dataIndex:"id"},{title:"Product",dataIndex:"product_id"},{title:"Quantity",dataIndex:"quantity"},{title:"Price",dataIndex:"unit_price"},{title:"Total",dataIndex:"subtotal"}],formatAmountCurrency:i=>e.detailView=="admin"?n.formatAmountCurrency(i):c.formatAmountCurrency(i),buildAddress:La,warehouseCurrency:h}}}),Xr={key:0},Jr={key:1},Qr={class:"item-desc mt-40"},Zr={class:"mt-20 pl-15"},xr={class:"pd-10"},ed={class:"item-total pd-10"};function td(e,o,c,n,v,h){const m=l("stop-outlined"),d=l("a-alert"),i=l("order-status"),p=l("a-descriptions-item"),_=l("PaymentStatus"),f=l("OrderStatusTag"),y=l("a-descriptions"),b=l("a-avatar"),k=l("a-list-item-meta"),C=l("a-list-item"),D=l("a-table"),S=l("a-col"),P=l("a-row");return r(),$(I,null,[e.order.cancelled?(r(),$("div",Xr,[t(d,{message:e.$t("online_orders.order_cancelled"),description:e.$t("online_orders.order_cancelled_message"),type:"error","show-icon":""},{icon:a(()=>[t(m)]),_:1},8,["message","description"])])):(r(),$("div",Jr,[t(i,{orderStatus:e.order.order_status},null,8,["orderStatus"])])),g("div",Qr,[g("span",null,s(e.$t("online_orders.order_summary")),1)]),g("div",Zr,[t(y,{title:null,column:2,labelStyle:{fontWeight:"bold"}},{default:a(()=>[t(p,{label:e.$t("stock.order_id")},{default:a(()=>[u(s(e.order.invoice_number),1)]),_:1},8,["label"]),t(p,{label:e.$t("common.total")},{default:a(()=>[u(s(e.formatAmountCurrency(e.order.total)),1)]),_:1},8,["label"]),t(p,{label:e.$t("user.name")},{default:a(()=>[u(s(e.order.shipping_address.name),1)]),_:1},8,["label"]),t(p,{label:e.$t("user.email")},{default:a(()=>[u(s(e.order.shipping_address.email),1)]),_:1},8,["label"]),t(p,{label:e.$t("user.phone")},{default:a(()=>[u(s(e.order.shipping_address.phone),1)]),_:1},8,["label"]),t(p,{label:e.$t("payments.payment_status")},{default:a(()=>[t(_,{paymentStatus:e.order.payment_status},null,8,["paymentStatus"])]),_:1},8,["label"]),t(p,{label:e.$t("stock.status")},{default:a(()=>[t(f,{data:e.order},null,8,["data"])]),_:1},8,["label"]),t(p,{label:e.$t("stock.shipping_address")},{default:a(()=>[u(s(e.order.shipping_address.shipping_address),1)]),_:1},8,["label"]),t(p,{label:e.$t("stock.billing_address")},{default:a(()=>[u(s(e.order.shipping_address.address),1)]),_:1},8,["label"])]),_:1})]),t(P,{class:"mt-20"},{default:a(()=>[t(S,{span:24},{default:a(()=>[t(D,{columns:e.columns,"row-key":F=>F.id,"data-source":e.order.items,pagination:!1},{bodyCell:a(({index:F,column:O,record:E})=>[O.dataIndex==="id"?(r(),$(I,{key:0},[u(s(F+1),1)],64)):A("",!0),O.dataIndex==="product_id"?(r(),w(C,{key:1},{default:a(()=>[t(k,null,{avatar:a(()=>[t(b,{src:E.product.image_url,size:"large",shape:"square"},null,8,["src"])]),title:a(()=>[u(s(E.product.name),1)]),_:2},1024)]),_:2},1024)):A("",!0),O.dataIndex==="unit_price"?(r(),$(I,{key:2},[u(s(e.formatAmountCurrency(E.unit_price)),1)],64)):A("",!0),O.dataIndex==="subtotal"?(r(),$(I,{key:3},[u(s(e.formatAmountCurrency(E.subtotal)),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source"])]),_:1})]),_:1}),t(P,{class:"mt-30"},{default:a(()=>[t(S,{span:18}),t(S,{span:6},{default:a(()=>[g("div",xr,[t(P,null,{default:a(()=>[t(S,{span:12},{default:a(()=>[u(s(e.$t("product.subtotal")),1)]),_:1}),t(S,{span:12,class:"text-right"},{default:a(()=>[u(s(e.formatAmountCurrency(e.order.subtotal)),1)]),_:1})]),_:1}),t(P,{class:"mt-10"},{default:a(()=>[t(S,{span:12},{default:a(()=>[u(s(e.$t("product.discount")),1)]),_:1}),t(S,{span:12,class:"text-right"},{default:a(()=>[u(s(e.formatAmountCurrency(e.order.discount)),1)]),_:1})]),_:1}),t(P,{class:"mt-10"},{default:a(()=>[t(S,{span:12},{default:a(()=>[u(s(e.$t("stock.order_tax")),1)]),_:1}),t(S,{span:12,class:"text-right"},{default:a(()=>[u(s(e.formatAmountCurrency(e.order.tax_amount)),1)]),_:1})]),_:1}),t(P,{class:"mt-10"},{default:a(()=>[t(S,{span:12},{default:a(()=>[u(s(e.$t("stock.shipping")),1)]),_:1}),t(S,{span:12,class:"text-right"},{default:a(()=>[u(s(e.formatAmountCurrency(e.order.shipping)),1)]),_:1})]),_:1})]),g("div",ed,[t(P,{class:"mt-10"},{default:a(()=>[t(S,{span:12},{default:a(()=>[u(s(e.$t("stock.grand_total")),1)]),_:1}),t(S,{span:12,class:"text-right"},{default:a(()=>[u(s(e.formatAmountCurrency(e.order.total)),1)]),_:1})]),_:1})])]),_:1})]),_:1})],64)}const mo=W(Gr,[["render",td]]),ad=Z({props:["order","visible"],emits:["closed"],components:{OrderDetails:mo},setup(e,{emit:o}){return{onClose:()=>{o("closed")}}}});function nd(e,o,c,n,v,h){const m=l("OrderDetails"),d=l("a-modal");return r(),w(d,{open:e.visible,centered:!0,title:e.$t("online_orders.update_orders_status"),onCancel:e.onClose,width:"70%",footer:!1},{default:a(()=>[t(m,{order:e.order,detailView:"admin"},null,8,["order"])]),_:1},8,["open","title","onCancel"])}const od=W(ad,[["render",nd]]),ld={props:{selectable:{default:!1},tableSize:{default:"large"},bordered:{default:!1},orderType:{default:""},filters:{default:{}},perPageItems:Number},emits:["onRowSelection"],components:{EyeOutlined:tt,PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,MoreOutlined:Wn,DownloadOutlined:Ot,ExclamationCircleOutlined:Ae,SisternodeOutlined:ml,CheckOutlined:ht,StopOutlined:ua,SendOutlined:Ia,Details:Ea,UserInfo:Xe,Details:Ea,PaymentStatus:gt,OrderStatus:fa,OrderDetails:Br,ConfirmOrder:Hr,ViewOrder:od},setup(e,{emit:o}){const c=ke(),{columns:n,hashableColumns:v,setupTableColumns:h,filterableColumns:m,pageObject:d,orderType:i,orderStatus:p,orderItemDetailsColumns:_}=_a(),f=Ge(),{formatAmountCurrency:y,invoiceBaseUrl:b,permsArray:k,calculateOrderFilterString:C,formatDate:D,selectedWarehouse:S,selectedLang:P,orderStatusColors:F}=X();Ze();const{t:O}=ae(),E=T(!1),U=T({}),K=T(!1),z=T(!1),M=T({});ee(()=>{q()});const R=de=>{var ye=!1;return(de.order_type=="stock-transfers"&&e.filters.transfer_type=="transfered"&&(k.value.includes(`${d.value.permission}_delete`)||k.value.includes("admin"))&&de.payment_status=="unpaid"||de.order_type!="online-orders"&&(k.value.includes(`${d.value.permission}_delete`)||k.value.includes("admin"))&&de.payment_status=="unpaid")&&(ye=!0),{disabled:!ye,name:de.xid}},q=()=>{i.value=e.orderType,e.perPageItems&&(f.table.pagination.pageSize=e.perPageItems),f.table.pagination.current=1,f.table.pagination.currentPage=1,f.hashable.value=v,h(),L()},L=()=>{const de=e.filters,ye=C(de);var Fe={};de.dates&&(Fe.dates=de.dates),de.transfer_type&&(Fe.transfer_type=de.transfer_type),f.tableUrl.value={url:`${e.orderType}?fields=id,xid,unique_id,warehouse_id,x_warehouse_id,warehouse{id,xid,name},from_warehouse_id,x_from_warehouse_id,fromWarehouse{id,xid,name},invoice_number,order_type,order_date,tax_amount,discount,shipping,subtotal,paid_amount,due_amount,order_status,payment_status,total,tax_rate,staff_user_id,x_staff_user_id,staffMember{id,xid,name,profile_image,profile_image_url,user_type},user_id,x_user_id,user{id,xid,user_type,name,profile_image,profile_image_url,phone},orderPayments{id,xid,amount,payment_id,x_payment_id},orderPayments:payment{id,xid,amount,payment_mode_id,x_payment_mode_id,date,notes},orderPayments:payment:paymentMode{id,xid,name},items{id,xid,product_id,x_product_id,single_unit_price,unit_price,quantity,tax_rate,total_tax,tax_type,total_discount,subtotal},items:product{id,xid,name,image,image_url,unit_id,x_unit_id},items:product:unit{id,xid,name,short_name},items:product:details{id,xid,warehouse_id,x_warehouse_id,product_id,x_product_id,current_stock},items:orderItemTaxes{id,xid,order_item_id,order_item_id,tax_name,tax_amount},cancelled,terms_condition,shippingAddress{id,xid,order_id,name,email,phone,address,shipping_address,city,state,country,zipcode}`,filterString:ye,filters:{user_id:de.user_id?de.user_id:void 0,warehouse_id:de.warehouse_id?de.warehouse_id:void 0},extraFilters:Fe},f.table.filterableColumns=m,de.searchColumn&&de.searchString&&de.searchString!=""?(f.table.searchColumn=de.searchColumn,f.table.searchString=de.searchString):(f.table.searchColumn=void 0,f.table.searchString=""),f.fetch({page:f.table.pagination.currentPage})},j=de=>{Le.confirm({title:O("common.delete")+"?",icon:t(Ae),content:O(`${d.value.langKey}.delete_message`),centered:!0,okText:O("common.yes"),okType:"danger",cancelText:O("common.no"),onOk(){axiosAdmin.delete(`${e.orderType}/${de}`).then(()=>{x(),L(),Me.success({message:O("common.success"),description:O(`${d.value.langKey}.deleted`)})})},onCancel(){}})},Y=()=>{Le.confirm({title:O("common.delete")+"?",icon:t(Ae),content:O(`${d.value.langKey}.selected_delete_message`),centered:!0,okText:O("common.yes"),okType:"danger",cancelText:O("common.no"),onOk(){const de=[];Ce(f.table.selectedRowKeys,ye=>{de.push(axiosAdmin.delete(`${e.orderType}/${ye}`))}),Promise.all(de).then(ye=>{x(),_e(),L(),Me.success({message:O("common.success"),description:O(`${d.value.langKey}.deleted`),placement:"bottomRight"})})},onCancel(){}})},x=()=>{c.dispatch("auth/updateVisibleSubscriptionModules")},B=de=>{U.value=de,E.value=!0},N=()=>{U.value={}},H=()=>{f.fetch({page:f.currentPage.value,success:de=>{const ye=at(de,Fe=>Fe.xid==U.value.xid);ye!=null&&(U.value=ye)}})},J=()=>{E.value=!1},se=de=>{M.value=de,K.value=!0},ce=de=>{M.value=de,z.value=!0},V=de=>{processRequest({url:`online-orders/change-status/${de.unique_id}`,data:{order_status:de.order_status},success:ye=>{Me.success({placement:"bottomRight",message:O("common.success"),description:O("online_orders.order_status_changed")})},error:ye=>{}})},ne=de=>{Le.confirm({title:O("quotation.convert_to_sale")+"?",icon:t(Ae),content:O("quotation.convert_message"),centered:!0,okText:O("common.yes"),okType:"danger",cancelText:O("common.no"),onOk(){axiosAdmin.post(`quotations/convert-to-sale/${de.unique_id}`).then(()=>{f.fetch(),Me.success({placement:"bottomRight",message:O("common.success"),description:O("quotation.quotation_converted_to_sales")})})},onCancel(){}})},te=de=>{Le.confirm({title:O("online_orders.cancel_order")+"?",icon:t(Ae),content:O("online_orders.cancel_message"),centered:!0,okText:O("common.yes"),okType:"danger",cancelText:O("common.no"),onOk(){axiosAdmin.post(`online-orders/cancel/${de.unique_id}`).then(()=>{q(),Me.success({message:O("common.success"),description:O("online_orders.order_cancelled"),placement:"bottomRight"})})},onCancel(){}})},me=de=>{Le.confirm({title:O("common.delivered")+"?",icon:t(Ae),content:O("online_orders.deliver_message"),centered:!0,okText:O("common.yes"),okType:"danger",cancelText:O("common.no"),onOk(){axiosAdmin.post(`online-orders/delivered/${de.unique_id}`).then(()=>{q(),Me.success({message:O("common.success"),description:O("online_orders.order_delivered"),placement:"bottomRight"})})},onCancel(){}})},_e=()=>{f.table.selectedRowKeys=[],o("onRowSelection",[])};return ue(e,(de,ye)=>{_e(),q(),N()}),ue(S,(de,ye)=>{_e(),f.table.pagination.current=1,L()}),{columns:n,...f,filterableColumns:m,pageObject:d,formatDate:D,orderStatus:p,orderStatusColors:F,setUrlData:L,formatAmountCurrency:y,invoiceBaseUrl:b,permsArray:k,selectedItem:U,viewItem:B,restSelectedItem:N,paymentSuccess:H,showDeleteConfirm:j,showSelectedDeleteConfirm:Y,detailsDrawerVisible:E,onDetailDrawerClose:J,orderItemDetailsColumns:_,selectedLang:P,initialSetup:q,convertToSale:ne,confirmOrder:se,cancelOrder:te,viewOrder:ce,confirmDelivery:me,changeOrderStatus:V,confirmModalVisible:K,viewModalVisible:z,modalData:M,getCheckboxProps:R}}},sd={class:"table-responsive"},rd={key:0},dd={key:0},id={key:1};function ud(e,o,c,n,v,h){const m=l("user-info"),d=l("PaymentStatus"),i=l("OrderStatus"),p=l("EyeOutlined"),_=l("a-button"),f=l("a-tooltip"),y=l("CheckOutlined"),b=l("SendOutlined"),k=l("StopOutlined"),C=l("a-space"),D=l("MoreOutlined"),S=l("a-menu-item"),P=l("EditOutlined"),F=l("DeleteOutlined"),O=l("DownloadOutlined"),E=l("a-typography-link"),U=l("a-menu"),K=l("a-dropdown"),z=l("SisternodeOutlined"),M=l("a-avatar"),R=l("a-badge"),q=l("a-table"),L=l("a-col"),j=l("a-row"),Y=l("OrderDetails"),x=l("ConfirmOrder"),B=l("ViewOrder");return r(),$(I,null,[t(j,null,{default:a(()=>[t(L,{span:24},{default:a(()=>[g("div",sd,[t(q,{"row-selection":c.selectable&&c.orderType!="online-orders"?{selectedRowKeys:e.table.selectedRowKeys,onChange:(N,H)=>{e.onRowSelectChange(N),e.$emit("onRowSelection",N)},getCheckboxProps:n.getCheckboxProps}:null,columns:n.columns,"row-key":N=>N.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:c.bordered,size:c.tableSize},{bodyCell:a(({column:N,record:H})=>[N.dataIndex==="order_date"?(r(),$(I,{key:0},[u(s(n.formatDate(H.order_date)),1)],64)):A("",!0),N.dataIndex==="warehouse"?(r(),$(I,{key:1},[H.warehouse&&H.warehouse.xid?(r(),$("span",rd,s(H.warehouse.name),1)):A("",!0)],64)):A("",!0),N.dataIndex==="user_id"?(r(),w(m,{key:2,user:H.user},null,8,["user"])):A("",!0),N.dataIndex==="paid_amount"?(r(),$(I,{key:3},[u(s(n.formatAmountCurrency(H.paid_amount)),1)],64)):A("",!0),N.dataIndex==="total_amount"?(r(),$(I,{key:4},[u(s(n.formatAmountCurrency(H.total)),1)],64)):A("",!0),N.dataIndex==="payment_status"?(r(),w(d,{key:5,paymentStatus:H.payment_status},null,8,["paymentStatus"])):A("",!0),N.dataIndex==="order_status"?(r(),w(i,{key:6,data:H},null,8,["data"])):A("",!0),N.dataIndex==="action"?(r(),$(I,{key:7},[H.order_type=="online-orders"&&H.order_status!="delivered"&&!H.cancelled?(r(),w(C,{key:0},{default:a(()=>[t(f,{placement:"topLeft",title:e.$t("stock.view_order")},{default:a(()=>[t(_,{type:"primary",onClick:J=>n.viewOrder(H)},{icon:a(()=>[t(p)]),_:1},8,["onClick"])]),_:2},1032,["title"]),H.order_status=="ordered"&&!H.cancelled?(r(),w(f,{key:0,placement:"topLeft",title:e.$t("common.confirm")},{default:a(()=>[t(_,{type:"primary",onClick:J=>n.confirmOrder(H)},{icon:a(()=>[t(y)]),_:1},8,["onClick"])]),_:2},1032,["title"])):A("",!0),!H.cancelled&&H.order_status!="ordered"&&H.order_status!="delivered"?(r(),w(f,{key:1,placement:"topLeft",title:e.$t("online_orders.confirm_delivery")},{default:a(()=>[t(_,{type:"primary",onClick:J=>n.confirmDelivery(H)},{icon:a(()=>[t(b)]),_:1},8,["onClick"])]),_:2},1032,["title"])):A("",!0),!H.cancelled&&H.order_status!="delivered"?(r(),w(f,{key:2,placement:"topLeft",title:e.$t("common.cancel")},{default:a(()=>[t(_,{type:"primary",onClick:J=>n.cancelOrder(H),danger:""},{icon:a(()=>[t(k)]),_:1},8,["onClick"])]),_:2},1032,["title"])):A("",!0)]),_:2},1024)):H.order_type=="stock-transfers"?(r(),w(K,{key:1,placement:"bottomRight"},{overlay:a(()=>[t(U,null,{default:a(()=>[n.permsArray.includes(`${n.pageObject.permission}_view`)||n.permsArray.includes("admin")?(r(),w(S,{key:"view",onClick:J=>n.viewItem(H)},{default:a(()=>[t(p),u(" "+s(e.$t("common.view")),1)]),_:1},8,["onClick"])):A("",!0),c.filters.transfer_type=="transfered"&&(n.permsArray.includes(`${n.pageObject.permission}_edit`)||n.permsArray.includes("admin"))?(r(),w(S,{key:"edit",onClick:()=>e.$router.push({name:`admin.stock.${n.pageObject.type}.edit`,params:{id:H.xid}})},{default:a(()=>[t(P),u(" "+s(e.$t("common.edit")),1)]),_:1},8,["onClick"])):A("",!0),c.filters.transfer_type=="transfered"&&(n.permsArray.includes(`${n.pageObject.permission}_delete`)||n.permsArray.includes("admin"))&&H.payment_status=="unpaid"?(r(),w(S,{key:"delete",onClick:J=>n.showDeleteConfirm(H.xid)},{default:a(()=>[t(F),u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0),t(S,{key:"download"},{default:a(()=>[t(E,{href:`${n.invoiceBaseUrl}/${H.unique_id}/${n.selectedLang}`,target:"_blank"},{default:a(()=>[t(O),u(" "+s(e.$t("common.download")),1)]),_:1},8,["href"])]),_:2},1024)]),_:2},1024)]),default:a(()=>[t(D)]),_:2},1024)):(r(),w(K,{key:2,placement:"bottomRight"},{overlay:a(()=>[t(U,null,{default:a(()=>[(n.permsArray.includes(`${n.pageObject.permission}_view`)||n.permsArray.includes("admin"))&&H.order_type=="quotations"?(r(),w(S,{key:"view",onClick:J=>n.convertToSale(H)},{default:a(()=>[t(z),u(" "+s(e.$t("quotation.convert_to_sale")),1)]),_:1},8,["onClick"])):A("",!0),n.permsArray.includes(`${n.pageObject.permission}_view`)||n.permsArray.includes("admin")?(r(),w(S,{key:"view",onClick:J=>n.viewItem(H)},{default:a(()=>[t(p),u(" "+s(e.$t("common.view")),1)]),_:1},8,["onClick"])):A("",!0),H.order_type!="online-orders"&&(n.permsArray.includes(`${n.pageObject.permission}_edit`)||n.permsArray.includes("admin"))?(r(),w(S,{key:"edit",onClick:()=>e.$router.push({name:`admin.stock.${n.pageObject.type}.edit`,params:{id:H.xid}})},{default:a(()=>[t(P),u(" "+s(e.$t("common.edit")),1)]),_:1},8,["onClick"])):A("",!0),H.order_type!="online-orders"&&(n.permsArray.includes(`${n.pageObject.permission}_delete`)||n.permsArray.includes("admin"))&&H.payment_status=="unpaid"?(r(),w(S,{key:"delete",onClick:J=>n.showDeleteConfirm(H.xid)},{default:a(()=>[t(F),u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0),t(S,{key:"download"},{default:a(()=>[t(E,{href:`${n.invoiceBaseUrl}/${H.unique_id}/${n.selectedLang}`,target:"_blank"},{default:a(()=>[t(O),u(" "+s(e.$t("common.download")),1)]),_:1},8,["href"])]),_:2},1024)]),_:2},1024)]),default:a(()=>[t(D)]),_:2},1024))],64)):A("",!0)]),expandedRowRender:a(N=>[N&&N.record&&N.record.items?(r(),w(q,{key:0,"row-key":H=>H.xid,columns:n.orderItemDetailsColumns,"data-source":N.record.items,pagination:!1},{bodyCell:a(({column:H,record:J})=>[H.dataIndex==="product_id"?(r(),w(R,{key:0},{default:a(()=>[t(M,{shape:"square",src:J.product.image_url},null,8,["src"]),u(" "+s(J.product.name),1)]),_:2},1024)):A("",!0),H.dataIndex==="quantity"?(r(),$(I,{key:1},[u(s(`${J.quantity} ${J.product.unit.short_name}`),1)],64)):A("",!0),H.dataIndex==="single_unit_price"?(r(),$(I,{key:2},[u(s(n.formatAmountCurrency(J.single_unit_price)),1)],64)):A("",!0),H.dataIndex==="total_discount"?(r(),$(I,{key:3},[u(s(n.formatAmountCurrency(J.total_discount)),1)],64)):A("",!0),H.dataIndex==="total_tax"?(r(),$(I,{key:4},[J.order_item_taxes.length>0?(r(),$("span",dd,[(r(!0),$(I,null,G(J.order_item_taxes,se=>(r(),$("span",{key:se.xid},[g("span",null,s(se.tax_name)+" : "+s(n.formatAmountCurrency(se.tax_amount)),1),o[2]||(o[2]=g("br",null,null,-1))]))),128))])):(r(),$("span",id,s(n.formatAmountCurrency(J.total_tax)),1))],64)):A("",!0),H.dataIndex==="subtotal"?(r(),$(I,{key:5},[u(s(n.formatAmountCurrency(J.subtotal)),1)],64)):A("",!0)]),_:1},8,["row-key","columns","data-source"])):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange","bordered","size"])])]),_:1})]),_:1}),t(Y,{visible:n.detailsDrawerVisible,order:n.selectedItem,onClose:n.onDetailDrawerClose,onGoBack:n.restSelectedItem,onReloadOrder:n.paymentSuccess},null,8,["visible","order","onClose","onGoBack","onReloadOrder"]),t(x,{visible:n.confirmModalVisible,data:n.modalData,onClosed:o[0]||(o[0]=N=>n.confirmModalVisible=!1),onConfirmSuccess:n.initialSetup},null,8,["visible","data","onConfirmSuccess"]),t(B,{visible:n.viewModalVisible,order:n.modalData,onClosed:o[1]||(o[1]=N=>n.viewModalVisible=!1)},null,8,["visible","order"])],64)}const ea=W(ld,[["render",ud]]),md=Z({props:{dateRange:{default:[]},formatType:{default:"YYYY-MM-DD HH:mm:ss"}},emits:["dateTimeChanged"],setup(e,{emit:o}){const c=T([]),{appSetting:n,dayjs:v}=X();return ee(()=>{e.dateRange&&e.dateRange.length>0&&(c.value=[v(e.dateRange[0]),v(e.dateRange[1])])}),{appSetting:n,dateRangeValue:c,dateTimeChanged:d=>{d?o("dateTimeChanged",[d[0].tz(n.value.timezone).startOf("day").utc().format(e.formatType),d[1].tz(n.value.timezone).endOf("day").utc().format(e.formatType)]):o("dateTimeChanged",[])},resetPicker:()=>{c.value=[]}}}});function cd(e,o,c,n,v,h){const m=l("a-range-picker");return r(),w(m,{value:e.dateRangeValue,"onUpdate:value":o[0]||(o[0]=d=>e.dateRangeValue=d),format:e.appSetting.date_format,placeholder:[e.$t("common.start_date"),e.$t("common.end_date")],style:{width:"100%"},onChange:e.dateTimeChanged},null,8,["value","format","placeholder","onChange"])}const rt=W(md,[["render",cd]]),pd=Z({components:{SyncOutlined:Ct,CloudDownloadOutlined:Oa},setup(){const{appSetting:e,appType:o}=X(),c=window.config.app_version,n=T("fetching"),v=T([]);return ee(()=>{e.value.update_app_notification&&o=="non-saas"&&axiosAdmin(Ue("update-app")).then(h=>{_t.post("https://envato.codeifly.com/product",{verified_name:window.config.product_name,domain:window.location.host}).then(m=>{v.value=m.data,v.value.product.version!=c?n.value="update_available":n.value="success"})})}),{appSetting:e,productStatus:n,product:v,appType:o}}});function _d(e,o,c,n,v,h){const m=l("CloudDownloadOutlined"),d=l("a-button"),i=l("a-alert"),p=l("a-col"),_=l("a-row");return e.appSetting.update_app_notification&&e.productStatus=="update_available"&&e.appType=="non-saas"?(r(),w(_,{key:0,class:"mt-20"},{default:a(()=>[t(p,{span:24},{default:a(()=>[e.productStatus=="update_available"?(r(),w(i,{key:0,type:"success",message:e.$t("update_app.update_available"),showIcon:"",onClose:o[0]||(o[0]=()=>e.$router.push({name:"admin.settings.update_app.index"}))},{description:a(()=>[u(s(e.$t("messages.new_app_version_avaialbe",[e.product.product.version])),1)]),closeText:a(()=>[t(d,{type:"primary"},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("update_app.update_now")),1)]),_:1})]),_:1},8,["message"])):A("",!0)]),_:1})]),_:1})):A("",!0)}const fd=W(pd,[["render",_d]]),gd=Z({setup(){return{}}}),yd={class:"breadcrumb-header"};function hd(e,o,c,n,v,h){const m=l("a-col"),d=l("a-row"),i=l("a-card");return r(),$("div",yd,[t(i,{class:"page-content-sub-header breadcrumb-left-border"},{default:a(()=>[t(d,null,{default:a(()=>[t(m,{span:24},{default:a(()=>[ie(e.$slots,"header",{key:"header"})]),_:3}),t(m,{span:24},{default:a(()=>[ie(e.$slots,"breadcrumb",{key:"breadcrumb"})]),_:3})]),_:3})]),_:3})])}const ge=W(gd,[["render",hd]]);const vd={components:{EyeOutlined:tt,ArrowUpOutlined:Pa,ArrowDownOutlined:Ua,DoubleRightOutlined:jn,StateWidget:ro,TopProducts:Gs,PurchaseSales:Qs,PaymentsChart:er,OrderTable:ea,UserInfo:Xe,Tiimeline:cr,LineChartOutlined:cl,BankOutlined:Hn,ShoppingOutlined:Qt,TagOutlined:pl,DateRangePicker:rt,UpdateAppAlert:fd,AdminPageHeader:ge},setup(){const{t:e}=ae(),{formatQuantity:o,formatAmountCurrency:c,appSetting:n,user:v,permsArray:h,selectedWarehouse:m}=X(),d=T(""),i=Se({dates:[]}),p=T([]),_=Ze(),f=[{title:e("product.product"),dataIndex:"product_name"},{title:e("product.quantity"),dataIndex:"current_stock"},{title:e("product.quantitiy_alert"),dataIndex:"stock_quantitiy_alert"}],y=[{title:e("stock.customer"),dataIndex:"customer_id"},{title:e("payments.total_amount"),dataIndex:"total_amount"}];return ee(()=>{const b=axiosAdmin.post("dashboard",i);h.value.includes("purchases_view")?d.value="purchases":h.value.includes("purchase_returns_view")?d.value="purchase-returns":h.value.includes("sales_returns_view")?d.value="sales-returns":d.value="sales",_.params&&_.params.success&&Me.success({message:e("common.welcome_back",[v.value.name]),description:e("messages.login_success_dashboard"),placement:"topRight"}),Promise.all([b]).then(([k])=>{p.value=k.data})}),ue([i,m],(b,k)=>{axiosAdmin.post("dashboard",i).then(C=>{p.value=C.data})}),{filters:i,activeOrderType:d,responseData:p,stockQuantityColumns:f,topCustomerColumns:y,formatQuantity:o,formatAmountCurrency:c,permsArray:h,appSetting:n}}},bd={class:"dashboard-page-content-container"},kd={class:"mt-30 mb-20"},wd={key:0},Cd={key:0},Sd={key:0},$d={key:0};function Dd(e,o,c,n,v,h){const m=l("a-page-header"),d=l("AdminPageHeader"),i=l("UpdateAppAlert"),p=l("DateRangePicker"),_=l("a-col"),f=l("a-row"),y=l("LineChartOutlined"),b=l("StateWidget"),k=l("ShoppingOutlined"),C=l("TagOutlined"),D=l("BankOutlined"),S=l("TopProducts"),P=l("a-card"),F=l("PurchaseSales"),O=l("DoubleRightOutlined"),E=l("a-button"),U=l("a-tab-pane"),K=l("a-tabs"),z=l("a-statistic"),M=l("OrderTable"),R=l("PaymentsChart"),q=l("a-table"),L=l("user-info");return r(),$(I,null,[t(d,null,{header:a(()=>[t(m,{title:e.$t("menu.dashboard"),style:{padding:"0px"}},null,8,["title"])]),_:1}),g("div",bd,[t(i),t(f,{gutter:[8,8],class:"mt-30 mb-10"},{default:a(()=>[t(_,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(p,{ref:"serachDateRangePicker",onDateTimeChanged:o[0]||(o[0]=j=>n.filters.dates=j)},null,512)]),_:1})]),_:1}),g("div",kd,[t(f,{gutter:[15,15]},{default:a(()=>[t(_,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(b,null,{image:a(()=>[t(y,{style:{color:"#fff","font-size":"24px"}})]),description:a(()=>[n.responseData.stateData?(r(),$("h2",wd,s(n.formatAmountCurrency(n.responseData.stateData.totalSales)),1)):A("",!0),g("p",null,s(e.$t("dashboard.total_sales")),1)]),_:1})]),_:1}),t(_,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(b,null,{image:a(()=>[t(k,{style:{color:"#fff","font-size":"24px"}})]),description:a(()=>[n.responseData.stateData?(r(),$("h2",Cd,s(n.formatAmountCurrency(n.responseData.stateData.totalExpenses)),1)):A("",!0),g("p",null,s(e.$t("dashboard.total_expenses")),1)]),_:1})]),_:1}),t(_,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(b,null,{image:a(()=>[t(C,{style:{color:"#fff","font-size":"24px"}})]),description:a(()=>[n.responseData.stateData?(r(),$("h2",Sd,s(n.formatAmountCurrency(n.responseData.stateData.paymentSent)),1)):A("",!0),g("p",null,s(e.$t("dashboard.payment_sent")),1)]),_:1})]),_:1}),t(_,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(b,null,{image:a(()=>[t(D,{style:{color:"#fff","font-size":"24px"}})]),description:a(()=>[n.responseData.stateData?(r(),$("h2",$d,s(n.formatAmountCurrency(n.responseData.stateData.paymentReceived)),1)):A("",!0),g("p",null,s(e.$t("dashboard.payment_received")),1)]),_:1})]),_:1})]),_:1})]),t(f,{gutter:[18,18],class:"mt-30 mb-20"},{default:a(()=>[t(_,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(P,{title:e.$t("dashboard.top_selling_product")},{default:a(()=>[t(S,{data:n.responseData},null,8,["data"])]),_:1},8,["title"])]),_:1}),t(_,{xs:24,sm:24,md:12,lg:18,xl:18},{default:a(()=>[t(P,{title:e.$t("dashboard.sales_purchases")},Qe({default:a(()=>[t(F,{data:n.responseData},null,8,["data"])]),_:2},[n.permsArray.includes("sales_view")||n.permsArray.includes("admin")?{name:"extra",fn:a(()=>[t(E,{class:"mt-10",type:"link",onClick:o[1]||(o[1]=j=>e.$router.push({name:"admin.stock.sales.index"}))},{default:a(()=>[u(s(e.$t("common.view_all"))+" ",1),t(O)]),_:1})]),key:"0"}:void 0]),1032,["title"])]),_:1})]),_:1}),(n.permsArray.includes("purchases_view")||n.permsArray.includes("sales_view")||n.permsArray.includes("purchase_returns_view")||n.permsArray.includes("sales_returns_view")||n.permsArray.includes("admin"))&&n.activeOrderType!=""?(r(),w(f,{key:0,class:"mt-30 mb-20"},{default:a(()=>[t(_,{span:24},{default:a(()=>[t(P,{title:e.$t("dashboard.recent_stock_history"),bodyStyle:{paddingTop:"0px"}},{extra:a(()=>[t(K,{activeKey:n.activeOrderType,"onUpdate:activeKey":o[2]||(o[2]=j=>n.activeOrderType=j)},{default:a(()=>[n.permsArray.includes("sales_view")||n.permsArray.includes("admin")?(r(),w(U,{key:"sales",tab:e.$t("menu.sales")},null,8,["tab"])):A("",!0),n.permsArray.includes("purchases_view")||n.permsArray.includes("admin")?(r(),w(U,{key:"purchases",tab:e.$t("menu.purchases")},null,8,["tab"])):A("",!0),n.permsArray.includes("purchase_returns_view")||n.permsArray.includes("admin")?(r(),w(U,{key:"purchase-returns",tab:e.$t("menu.purchase_returns")},null,8,["tab"])):A("",!0),n.permsArray.includes("sales_returns_view")||n.permsArray.includes("admin")?(r(),w(U,{key:"sales-returns",tab:e.$t("menu.sales_returns")},null,8,["tab"])):A("",!0)]),_:1},8,["activeKey"])]),default:a(()=>[t(f,null,{default:a(()=>[t(_,{xs:24,sm:24,md:12,lg:6,xl:6,class:"col-border-right pt-30"},{default:a(()=>[n.responseData.stockHistoryStatsData?(r(),w(f,{key:0,style:Ye(n.appSetting.rtl?{marginLeft:"24px"}:{marginRight:"24px"}),class:"stock-history-stats"},{default:a(()=>[t(_,{span:24,class:"sales mb-20"},{default:a(()=>[t(z,{title:e.$t("dashboard.total_sales_items"),value:n.formatQuantity(n.responseData.stockHistoryStatsData.totalSales)},null,8,["title","value"])]),_:1}),t(_,{span:24,class:"sales-returns mb-20"},{default:a(()=>[t(z,{title:e.$t("dashboard.total_sales_returns_items"),value:n.formatQuantity(n.responseData.stockHistoryStatsData.totalSalesReturn)},null,8,["title","value"])]),_:1}),t(_,{span:24,class:"purchases mb-20"},{default:a(()=>[t(z,{title:e.$t("dashboard.total_purchases_items"),value:n.formatQuantity(n.responseData.stockHistoryStatsData.totalPurchases)},null,8,["title","value"])]),_:1}),t(_,{span:24,class:"purchase-returns mb-20"},{default:a(()=>[t(z,{title:e.$t("dashboard.total_purchase_returns_items"),value:n.formatQuantity(n.responseData.stockHistoryStatsData.totalPurchaseReturn)},null,8,["title","value"])]),_:1})]),_:1},8,["style"])):A("",!0)]),_:1}),t(_,{xs:24,sm:24,md:12,lg:18,xl:18},{default:a(()=>[t(M,{orderType:n.activeOrderType,filters:n.filters,perPageItems:5},null,8,["orderType","filters"])]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})):A("",!0),t(f,{gutter:[18,18],class:"mt-30 mb-20"},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24,xl:24},{default:a(()=>[t(P,{title:e.$t("payments.payments")},Qe({default:a(()=>[t(R,{data:n.responseData},null,8,["data"])]),_:2},[n.permsArray.includes("order_payments_view")||n.permsArray.includes("admin")?{name:"extra",fn:a(()=>[t(E,{class:"mt-10",type:"link",onClick:o[3]||(o[3]=j=>e.$router.push({name:"admin.reports.payments.index"}))},{default:a(()=>[u(s(e.$t("common.view_all"))+" ",1),t(O)]),_:1})]),key:"0"}:void 0]),1032,["title"])]),_:1})]),_:1}),t(f,{gutter:[18,18],class:"mt-30 mb-20"},{default:a(()=>[t(_,{xs:24,sm:24,md:12,lg:16,xl:16},{default:a(()=>[n.responseData&&n.responseData.stockAlerts?(r(),w(P,{key:0,title:e.$t("menu.stock_alert"),bodyStyle:{padding:"0px"}},Qe({default:a(()=>[t(q,{columns:n.stockQuantityColumns,"row-key":j=>j.xid,"data-source":n.responseData.stockAlerts,pagination:!1},{bodyCell:a(({column:j,record:Y})=>[j.dataIndex==="current_stock"?(r(),$(I,{key:0},[u(s(`${Y.current_stock} ${Y.short_name}`),1)],64)):A("",!0),j.dataIndex==="stock_quantitiy_alert"?(r(),$(I,{key:1},[u(s(`${Y.stock_quantitiy_alert} ${Y.short_name}`),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source"])]),_:2},[n.permsArray.includes("warehouses_view")||n.permsArray.includes("admin")?{name:"extra",fn:a(()=>[t(E,{class:"mt-10",type:"link",onClick:o[4]||(o[4]=j=>e.$router.push({name:"admin.reports.stock.index"}))},{default:a(()=>[u(s(e.$t("common.view_all"))+" ",1),t(O)]),_:1})]),key:"0"}:void 0]),1032,["title"])):A("",!0)]),_:1}),t(_,{xs:24,sm:24,md:12,lg:8,xl:8},{default:a(()=>[n.responseData&&n.responseData.topCustomers?(r(),w(P,{key:0,title:e.$t("dashboard.top_customers"),bodyStyle:{padding:"0px"}},Qe({default:a(()=>[t(q,{columns:n.topCustomerColumns,"row-key":j=>j.customer_id,"data-source":n.responseData.topCustomers,pagination:!1},{bodyCell:a(({column:j,record:Y})=>[j.dataIndex=="customer_id"?(r(),w(L,{key:0,user:Y.customer},null,8,["user"])):A("",!0),j.dataIndex=="total_amount"?(r(),$(I,{key:1},[u(s(n.formatAmountCurrency(Y.total_amount))+" ",1),o[6]||(o[6]=g("br",null,null,-1)),u(" "+s(e.$t("dashboard.total_sales"))+" : "+s(Y.total_sales),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source"])]),_:2},[n.permsArray.includes("users_view")||n.permsArray.includes("admin")?{name:"extra",fn:a(()=>[t(E,{class:"mt-10",type:"link",onClick:o[5]||(o[5]=j=>e.$router.push({name:"admin.reports.users.index"}))},{default:a(()=>[u(s(e.$t("common.view_all"))+" ",1),t(O)]),_:1})]),key:"0"}:void 0]),1032,["title"])):A("",!0)]),_:1})]),_:1})])],64)}const Ad=W(vd,[["render",Dd]]),Td=[{path:"/",component:()=>lt(()=>import("./Admin-3be1af1f.js"),["assets/Admin-3be1af1f.js","assets/vendor-4a6eb15a.js"]),children:[{path:"/admin/dashboard",component:Ad,name:"admin.dashboard.index",meta:{requireAuth:!0,menuParent:"dashboard",menuKey:e=>"dashboard"}}]}],co=()=>{const e="brands",{t:o}=ae(),c={name:"",slug:"",image:void 0,image_url:void 0},n=[{title:o("brand.name"),dataIndex:"name"},{title:o("brand.logo"),dataIndex:"image_url"},{title:o("common.action"),dataIndex:"action"}],v=[{key:"name",value:o("brand.name")}];return{addEditUrl:e,initData:c,columns:n,filterableColumns:v}},Ve=()=>{const{table:e,tableUrl:o,hashable:c,currentPage:n,handleTableChange:v,fetch:h,onTableSearch:m,onRowSelectChange:d,exportDetails:i}=Ge(),p=T(!1),_=T({}),f=T(""),y=T(""),b=T({}),k=T([]),C=T({}),D=T(!1),S=T("add"),P=T(""),F=T({}),{t:O}=ae(),E=ke(),U=V=>{p.value=!0,_.value=V},K=()=>{P.value=f.value,S.value="add",D.value=!0,_.value={}},z=()=>{H(),D.value=!1},M=()=>{p.value=!1,_.value={}},R=V=>{const ne={};var te=C.value;Object.keys(b.value).forEach(me=>{if(_l(te,me)){const _e=te[me];ne[me]=fl(V,_e)}else yt(k.value,me)?ne[me]=V[`x_${me}`]:ne[me]=V[me]}),console.log(ne),ne._method="PUT",F.value=ne,_.value=V,P.value=`${f.value}/${V.xid}`,S.value="edit",D.value=!0},q=()=>{E.dispatch("auth/updateVisibleSubscriptionModules")},L=V=>{x(V,"add-edit")},j=V=>{x(V,"add-new")},Y=V=>{x(V,"add-continue")},x=(V,ne="add-edit")=>{if(S.value=="add"){const te={...e.pagination};te.current=1,n.value=1,e.pagination=te}q(),(ne=="add-edit"||ne=="add-new")&&H(),h({page:S.value=="add"?1:n.value,limit:10}),ne=="add-edit"&&(D.value=!1)},B=V=>{Le.confirm({title:O("common.delete")+"?",icon:t(Ae),content:O(`${y.value}.delete_message`),centered:!0,okText:O("common.yes"),okType:"danger",cancelText:O("common.no"),onOk(){return axiosAdmin.delete(`${f.value}/${V}`).then(ne=>{q(),h({page:n.value}),Me.success({message:O("common.success"),description:O(`${y.value}.deleted`),placement:"bottomRight"})}).catch(()=>{})},onCancel(){}})},N=()=>{Le.confirm({title:O("common.delete")+"?",icon:t(Ae),content:O(`${y.value}.selected_delete_message`),centered:!0,okText:O("common.yes"),okType:"danger",cancelText:O("common.no"),onOk(){const V=[];Ce(e.selectedRowKeys,ne=>{V.push(axiosAdmin.delete(`${f.value}/${ne}`))}),Promise.all(V).then(ne=>{q(),h({page:n.value}),Me.success({message:O("common.success"),description:O(`${y.value}.deleted`),placement:"bottomRight"})})},onCancel(){}})},H=()=>{F.value={...b.value}},J=V=>{F.value={...F.value,...V}},se=pe(()=>y.value!=""?S.value=="add"?O(`${y.value}.add`):O(`${y.value}.edit`):""),ce=pe(()=>y.value!=""?S.value=="add"?O(`${y.value}.created`):O(`${y.value}.updated`):"");return ue(k,(V,ne)=>{c.value=V}),{detailsVisible:p,viewData:_,onCloseDetails:M,addEditVisible:D,addEditType:S,addEditUrl:P,currentPage:n,formData:F,initData:b,crudUrl:f,langKey:y,hashableColumns:k,multiDimensalObjectColumns:C,pageTitle:se,successMessage:ce,viewItem:U,addItem:K,editItem:R,onCloseAddEdit:z,showDeleteConfirm:B,addEditSuccess:L,addAndNewSuccess:j,addAndContinueSuccess:Y,restFormData:H,assignNewFormData:J,showSelectedDeleteConfirm:N,table:e,tableUrl:o,handleTableChange:v,fetch:h,onTableSearch:m,onRowSelectChange:d,exportDetails:i}};const Ed=Z({props:{formData:null,folder:String,imageField:{default:"image",type:String},url:{default:"upload-file",type:String}},components:{LoadingOutlined:Oe,PlusOutlined:le},setup(e,{emit:o}){const c=T([]),n=T(!1),{t:v}=ae();return{fileList:c,loading:n,customRequest:m=>{const d=new FormData;d.append("image",m.file),d.append("folder",e.folder),n.value=!0,axiosAdmin.post(e.url,d,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>{c.value=[],n.value=!1,o("onFileUploaded",{file:i.data.file,file_url:i.data.file_url})}).catch(()=>{n.value=!1,Ee.error(v("messages.uploading_failed"))})}}}}),Od={key:0},Id=["src"],Pd={key:1},Ud={class:"ant-upload-text"};function Fd(e,o,c,n,v,h){const m=l("loading-outlined"),d=l("plus-outlined"),i=l("a-upload");return r(),w(i,{accept:"image/*","file-list":e.fileList,"onUpdate:fileList":o[0]||(o[0]=p=>e.fileList=p),name:"image","list-type":"picture-card",class:"avatar-uploader","show-upload-list":!1,customRequest:e.customRequest},{default:a(()=>[e.formData[e.imageField]!=null?(r(),$("div",Od,[g("img",{style:{width:"128px"},src:e.formData[`${e.imageField}_url`],alt:"avatar"},null,8,Id)])):(r(),$("div",Pd,[e.loading?(r(),w(m,{key:0})):(r(),w(d,{key:1})),g("div",Ud,s(e.$t("common.upload")),1)]))]),_:1},8,["file-list","customRequest"])}const mt=W(Ed,[["render",Fd]]),Md=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:le,LoadingOutlined:Oe,SaveOutlined:ve,Upload:mt},setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n,rules:v}=be(),{slugify:h}=X();return{loading:n,rules:v,onClose:()=>{v.value={},o("closed")},onSubmit:()=>{c({url:e.url,data:e.formData,successMessage:e.successMessage,success:i=>{o("addEditSuccess",i.xid)}})},slugify:h,drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function qd(e,o,c,n,v,h){const m=l("a-input"),d=l("a-form-item"),i=l("a-col"),p=l("a-row"),_=l("Upload"),f=l("a-form"),y=l("SaveOutlined"),b=l("a-button"),k=l("a-modal");return r(),w(k,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(b,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(y)]),default:a(()=>[u(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(b,{key:"back",onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(f,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("brand.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(m,{value:e.formData.name,"onUpdate:value":o[0]||(o[0]=C=>e.formData.name=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("brand.name")]),onKeyup:o[1]||(o[1]=C=>e.formData.slug=e.slugify(C.target.value))},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("brand.slug"),name:"slug",help:e.rules.slug?e.rules.slug.message:null,validateStatus:e.rules.slug?"error":null,class:"required"},{default:a(()=>[t(m,{value:e.formData.slug,"onUpdate:value":o[2]||(o[2]=C=>e.formData.slug=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("brand.slug")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("brand.logo"),name:"logo",help:e.rules.logo?e.rules.logo.message:null,validateStatus:e.rules.logo?"error":null},{default:a(()=>[t(_,{formData:e.formData,folder:"brand",onOnFileUploaded:o[3]||(o[3]=C=>{e.formData.image=C.file,e.formData.image_url=C.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const po=W(Md,[["render",qd]]),Rd=Z({props:{acceptFormat:{default:"image/*,.pdf",type:String},formData:null,folder:String,uploadField:{default:"file",type:String}},components:{UploadOutlined:Nn,DownloadOutlined:Ot,DeleteOutlined:fe},setup(e,{emit:o}){const c=T([]),n=T(!1),{t:v}=ae();return{fileList:c,loading:n,customRequest:m=>{const d=new FormData;d.append("file",m.file),d.append("folder",e.folder),n.value=!0,axiosAdmin.post("upload-file",d,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>{c.value=[],n.value=!1,o("onFileUploaded",{file:i.data.file,file_url:i.data.file_url})}).catch(i=>{n.value=!1;var p=v("messages.uploading_failed");i.status==422&&(i.data&&i.data.error&&i.data.error.details&&i.data.error.details.file[0]||i.data&&i.data.error&&i.data.error.details&&i.data.error.details.image[0])&&(p=i.data.error.details.file[0]),Ee.error(p)})}}}}),Kd={key:0},Vd={key:1};function zd(e,o,c,n,v,h){const m=l("UploadOutlined"),d=l("a-button"),i=l("a-upload"),p=l("DownloadOutlined"),_=l("a-tag"),f=l("a-typography-link"),y=l("DeleteOutlined");return e.formData[e.uploadField]==null?(r(),$("div",Kd,[t(i,{accept:e.acceptFormat,"file-list":e.fileList,"onUpdate:fileList":o[0]||(o[0]=b=>e.fileList=b),name:"file",customRequest:e.customRequest},{default:a(()=>[t(d,{loading:e.loading},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("common.upload")),1)]),_:1},8,["loading"])]),_:1},8,["accept","file-list","customRequest"])])):(r(),$("div",Vd,[t(f,{href:e.formData[`${e.uploadField}_url`],target:"_blank"},{default:a(()=>[t(_,{color:"success"},{icon:a(()=>[t(p)]),default:a(()=>[u(" "+s(e.$t("common.download")),1)]),_:1})]),_:1},8,["href"]),t(f,{onClick:o[1]||(o[1]=()=>{e.formData[e.uploadField]=void 0,e.formData[`${e.uploadField}_url`]=void 0})},{default:a(()=>[t(_,{color:"error"},{icon:a(()=>[t(y)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1})]),_:1})]))}const _o=W(Rd,[["render",zd]]),Ld=Z({props:["pageTitle","sampleFileUrl","importUrl"],emits:["onUploadSuccess"],components:{CloudDownloadOutlined:Oa,UploadFile:_o,UploadOutlined:Nn},setup(e,{emit:o}){const{addEditFileRequestAdmin:c,loading:n,rules:v}=be(),{t:h}=ae(),m=T([]),d=T(!1),i=y=>(m.value=[...m.value,y],!1),p=()=>{const y={};m&&m.value&&m.value[0]!=null&&(y.file=m.value[0]),n.value=!0,c({url:e.importUrl,data:y,successMessage:h("messages.imported_successfully"),success:b=>{f(),o("onUploadSuccess")}})},_=()=>{d.value=!0},f=y=>{m.value=[],d.value=!1};return{fileList:m,rules:v,loading:n,visible:d,showModal:_,handleCancel:f,importItems:p,beforeUpload:i}}});function Bd(e,o,c,n,v,h){const m=l("CloudDownloadOutlined"),d=l("a-button"),i=l("a-typography-link"),p=l("a-typography-paragraph"),_=l("a-col"),f=l("a-row"),y=l("UploadOutlined"),b=l("a-upload"),k=l("a-form-item"),C=l("a-form"),D=l("a-modal");return r(),$("div",null,[t(d,{type:"primary",onClick:e.showModal},{default:a(()=>[t(m),u(" "+s(e.pageTitle),1)]),_:1},8,["onClick"]),t(D,{open:e.visible,"onUpdate:open":o[1]||(o[1]=S=>e.visible=S),title:e.pageTitle},{footer:a(()=>[t(d,{type:"primary",loading:e.loading,onClick:e.importItems},{default:a(()=>[u(s(e.$t("common.import")),1)]),_:1},8,["loading","onClick"]),t(d,{key:"back",onClick:e.handleCancel},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(f,{gutter:16,class:"mb-10"},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(p,null,{default:a(()=>[g("ul",null,[g("li",null,[t(i,{href:e.sampleFileUrl,target:"_blank"},{default:a(()=>[u(s(e.$t("messages.click_here_to_download_sample_file")),1)]),_:1},8,["href"])])])]),_:1})]),_:1})]),_:1}),t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(C,{layout:"vertical"},{default:a(()=>[t(k,{label:e.$t("common.file"),name:"file",help:e.rules.file?e.rules.file.message:null,validateStatus:e.rules.file?"error":null},{default:a(()=>[t(b,{accept:".xlsx,.csv","file-list":e.fileList,"onUpdate:fileList":o[0]||(o[0]=S=>e.fileList=S),name:"file","before-upload":e.beforeUpload,maxCount:1},{default:a(()=>[t(d,{loading:e.loading},{icon:a(()=>[t(y)]),default:a(()=>[u(" "+s(e.$t("common.upload")),1)]),_:1},8,["loading"])]),_:1},8,["file-list","before-upload"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title"])])}const Lt=W(Ld,[["render",Bd]]),Wd={components:{PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,AddEdit:po,AdminPageHeader:ge,ImportBrands:Lt},setup(){const{addEditUrl:e,initData:o,columns:c,filterableColumns:n}=co(),v=Ve(),{permsArray:h}=X(),m=window.config.brand_sample_file;ee(()=>{d()});const d=()=>{v.tableUrl.value={url:"brands?fields=id,xid,name,slug,image,image_url"},v.table.filterableColumns=n,v.fetch({page:1}),v.crudUrl.value=e,v.langKey.value="brand",v.initData.value={...o},v.formData.value={...o}};return{columns:c,filterableColumns:n,permsArray:h,...v,sampleFileUrl:m,setUrlData:d}}},jd={class:"table-responsive"};function Hd(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("PlusOutlined"),y=l("a-button"),b=l("ImportBrands"),k=l("a-space"),C=l("DeleteOutlined"),D=l("a-col"),S=l("a-select-option"),P=l("a-select"),F=l("a-input-search"),O=l("a-input-group"),E=l("a-row"),U=l("admin-page-filters"),K=l("AddEdit"),z=l("a-image"),M=l("EditOutlined"),R=l("a-table"),q=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.brands"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.product_manager")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.brands")),1)]),_:1})]),_:1})]),_:1}),t(U,null,{default:a(()=>[t(E,{gutter:[16,16]},{default:a(()=>[t(D,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(k,null,{default:a(()=>[n.permsArray.includes("brands_create")||n.permsArray.includes("admin")?(r(),w(k,{key:0},{default:a(()=>[t(y,{type:"primary",onClick:e.addItem},{default:a(()=>[t(f),u(" "+s(e.$t("brand.add")),1)]),_:1},8,["onClick"]),t(b,{pageTitle:e.$t("brand.import_brands"),sampleFileUrl:n.sampleFileUrl,importUrl:"brands/import",onOnUploadSuccess:n.setUrlData},null,8,["pageTitle","sampleFileUrl","onOnUploadSuccess"])]),_:1})):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("brands_delete")||n.permsArray.includes("admin"))?(r(),w(y,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(C)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(D,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(E,{gutter:[16,16],justify:"end"},{default:a(()=>[t(D,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[t(O,{compact:""},{default:a(()=>[t(P,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":o[0]||(o[0]=L=>e.table.searchColumn=L),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),$(I,null,G(n.filterableColumns,L=>(r(),w(S,{key:L.key},{default:a(()=>[u(s(L.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(F,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":o[1]||(o[1]=L=>e.table.searchString=L),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(q,null,{default:a(()=>[t(K,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(E,null,{default:a(()=>[t(D,{span:24},{default:a(()=>[g("div",jd,[t(R,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:L=>({disabled:!1,name:L.xid})},columns:n.columns,"row-key":L=>L.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:L,text:j,record:Y})=>[L.dataIndex==="image_url"?(r(),w(z,{key:0,width:32,src:j},null,8,["src"])):A("",!0),L.dataIndex==="action"?(r(),$(I,{key:1},[n.permsArray.includes("brands_edit")||n.permsArray.includes("admin")?(r(),w(y,{key:0,type:"primary",onClick:x=>e.editItem(Y),style:{"margin-left":"4px"}},{icon:a(()=>[t(M)]),_:1},8,["onClick"])):A("",!0),n.permsArray.includes("brands_delete")||n.permsArray.includes("admin")?(r(),w(y,{key:1,type:"primary",onClick:x=>e.showDeleteConfirm(Y.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(C)]),_:1},8,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Nd=W(Wd,[["render",Hd]]),fo=()=>{const e="categories",{t:o}=ae(),c=["parent_id"],n={name:"",slug:"",image:void 0,image_url:void 0,parent_id:null},v=[{title:o("category.name"),dataIndex:"name"},{title:o("category.logo"),dataIndex:"image_url"},{title:o("common.action"),dataIndex:"action"}];return{hashableColumns:c,addEditUrl:e,initData:n,columns:v}},Yd=Z({props:["formData","data","visible","url","addEditType"],components:{PlusOutlined:le,LoadingOutlined:Oe,SaveOutlined:ve,Upload:mt},setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n,rules:v}=be(),{getRecursiveCategories:h,slugify:m}=X(),{t:d}=ae(),i=T([]),p=(b=null)=>{var k="categories?fields=id,xid,name,parent_id,x_parent_id&limit=10000";b!=null&&(k+=`&filters=id ne ${b}&hashable=${b}`),axiosAdmin.get(k).then(C=>{i.value=h(C,b)})},_=pe(()=>e.addEditType=="add"?d("category.add"):d("category.edit")),f=()=>{var b={parent_id:null,...e.formData};const k=e.addEditType=="add"?d("category.created"):d("category.updated");c({url:e.url,data:b,successMessage:k,success:C=>{p(),o("addEditSuccess",C.xid)}})},y=()=>{v.value={},o("closed")};return ue(e,(b,k)=>{b.addEditType=="add"?p():p(b.data.xid)}),{loading:n,rules:v,onClose:y,onSubmit:f,pageTitle:_,allCategories:i,slugify:m}}}),Gd={class:"small-text-message"};function Xd(e,o,c,n,v,h){const m=l("a-tree-select"),d=l("a-form-item"),i=l("a-col"),p=l("a-row"),_=l("a-input"),f=l("Upload"),y=l("a-form"),b=l("SaveOutlined"),k=l("a-button"),C=l("a-modal");return r(),w(C,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(k,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(b)]),default:a(()=>[u(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(k,{key:"back",onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(y,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("category.parent_category"),name:"parent_id",help:e.rules.parent_id?e.rules.parent_id.message:null,validateStatus:e.rules.parent_id?"error":null},{default:a(()=>[t(m,{value:e.formData.parent_id,"onUpdate:value":o[0]||(o[0]=D=>e.formData.parent_id=D),"show-search":"",style:{width:"100%"},"dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:e.$t("common.select_default_text",[e.$t("category.category")]),"tree-data":e.allCategories,"allow-clear":"","tree-default-expand-all":""},null,8,["value","placeholder","tree-data"]),g("small",Gd,s(e.$t("messages.leave_blank_to_create_parent_category")),1)]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("category.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(_,{value:e.formData.name,"onUpdate:value":o[1]||(o[1]=D=>e.formData.name=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("category.name")]),onKeyup:o[2]||(o[2]=D=>e.formData.slug=e.slugify(D.target.value))},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("category.slug"),name:"slug",help:e.rules.slug?e.rules.slug.message:null,validateStatus:e.rules.slug?"error":null,class:"required"},{default:a(()=>[t(_,{value:e.formData.slug,"onUpdate:value":o[3]||(o[3]=D=>e.formData.slug=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("category.slug")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("category.logo"),name:"image",help:e.rules.image?e.rules.image.message:null,validateStatus:e.rules.image?"error":null},{default:a(()=>[t(f,{formData:e.formData,folder:"category",onOnFileUploaded:o[4]||(o[4]=D=>{e.formData.image=D.file,e.formData.image_url=D.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const go=W(Yd,[["render",Xd]]),Jd={components:{PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,ExclamationCircleOutlined:Ae,AddEdit:go,AdminPageHeader:ge,ImportCategories:Lt},setup(){const e=ke(),{initData:o,columns:c}=fo(),{permsArray:n}=X(),{t:v}=ae(),h=window.config.category_sample_file,m=T(!1),d=T({}),i=T(!1),p=T("add"),_=T("categories"),f=T([]),y=T({}),b=T([]);ee(()=>{S()});const k=M=>{b.value=M},C=M=>({disabled:!(!M.children||M.children.length==0),name:M.xid}),D=pe(()=>({selectedRowKeys:gl(b),onChange:k,getCheckboxProps:C})),S=()=>{axiosAdmin.get("categories?fields=id,xid,name,slug,parent_id,x_parent_id,image,image_url&order=parent_id asc&limit=10000").then(M=>{const R=[];var q=M.data;q.forEach(L=>{if(!L.x_parent_id)return R.push(L);const j=q.findIndex(Y=>Y.xid===L.x_parent_id);if(!q[j].children)return q[j].children=[L];q[j].children.push(L)}),f.value=R})};return{columns:c,addEditSuccess:M=>{p.value=="add"&&(y.value={name:"",slug:"",image:void 0,image_url:void 0,parent_id:null}),S(),i.value=!1},formData:y,editItem:M=>{y.value={name:M.name,slug:M.slug,image:M.image,image_url:M.image_url,parent_id:M.x_parent_id,_method:"PUT"},d.value=M,_.value=`categories/${M.xid}`,p.value="edit",i.value=!0},addEditVisible:i,addItem:()=>{_.value="categories",p.value="add",i.value=!0},onCloseAddEdit:()=>{y.value={...o},i.value=!1},addEditUrl:_,addEditType:p,showDeleteConfirm:M=>{Le.confirm({title:v("common.delete")+"?",icon:t(Ae),content:v("category.delete_message"),centered:!0,okText:v("common.yes"),okType:"danger",cancelText:v("common.no"),onOk(){axiosAdmin.delete(`categories/${M}`).then(()=>{S(),Me.success({message:v("common.success"),description:v("category.deleted")})})},onCancel(){}})},detailsVisible:m,viewItem:M=>{d.value=M,m.value=!0},viewData:d,allCategories:f,permsArray:n,sampleFileUrl:h,getCategories:S,selectedRowKeys:b,rowSelection:D,showSelectedDeleteConfirm:()=>{Le.confirm({title:v("common.delete")+"?",icon:t(Ae),content:v("category.delete_message"),centered:!0,okText:v("common.yes"),okType:"danger",cancelText:v("common.no"),onOk(){const M=[];Ce(b.value,R=>{M.push(axiosAdmin.delete(`categories/${R}`))}),Promise.all(M).then(R=>{e.dispatch("auth/updateVisibleSubscriptionModules"),S(),Me.success({message:v("common.success"),description:v("category.deleted"),placement:"bottomRight"})})},onCancel(){}})}}}},Qd={class:"table-responsive"};function Zd(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("PlusOutlined"),y=l("a-button"),b=l("ImportCategories"),k=l("a-space"),C=l("DeleteOutlined"),D=l("a-col"),S=l("a-row"),P=l("admin-page-filters"),F=l("AddEdit"),O=l("a-image"),E=l("EditOutlined"),U=l("a-table"),K=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.categories"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.product_manager")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.categories")),1)]),_:1})]),_:1})]),_:1}),t(P,null,{default:a(()=>[t(S,{gutter:[16,16]},{default:a(()=>[t(D,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(k,null,{default:a(()=>[n.permsArray.includes("categories_create")||n.permsArray.includes("admin")?(r(),w(k,{key:0},{default:a(()=>[t(y,{type:"primary",onClick:n.addItem},{default:a(()=>[t(f),u(" "+s(e.$t("category.add")),1)]),_:1},8,["onClick"]),t(b,{pageTitle:e.$t("category.import_categories"),sampleFileUrl:n.sampleFileUrl,importUrl:"categories/import",onOnUploadSuccess:n.getCategories},null,8,["pageTitle","sampleFileUrl","onOnUploadSuccess"])]),_:1})):A("",!0),n.selectedRowKeys.length>0&&(n.permsArray.includes("categories_delete")||n.permsArray.includes("admin"))?(r(),w(y,{key:1,type:"primary",onClick:n.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(C)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(D,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(S,{gutter:[16,16],justify:"end"})]),_:1})]),_:1})]),_:1}),t(K,null,{default:a(()=>[t(F,{addEditType:n.addEditType,visible:n.addEditVisible,url:n.addEditUrl,onAddEditSuccess:n.addEditSuccess,onClosed:n.onCloseAddEdit,formData:n.formData,data:n.viewData,destroyOnClose:!0},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data"]),t(S,null,{default:a(()=>[t(D,{span:24},{default:a(()=>[g("div",Qd,[t(U,{"row-selection":n.rowSelection,columns:n.columns,"row-key":z=>z.xid,"data-source":n.allCategories,defaultExpandAllRows:!0,bordered:"",size:"middle"},{bodyCell:a(({column:z,text:M,record:R})=>[z.dataIndex==="image_url"?(r(),w(O,{key:0,width:32,src:M},null,8,["src"])):A("",!0),z.dataIndex==="action"?(r(),$(I,{key:1},[n.permsArray.includes("categories_edit")||n.permsArray.includes("admin")?(r(),w(y,{key:0,type:"primary",onClick:q=>n.editItem(R),style:{"margin-left":"4px"}},{icon:a(()=>[t(E)]),_:1},8,["onClick"])):A("",!0),(n.permsArray.includes("categories_delete")||n.permsArray.includes("admin"))&&(!R.children||R.children.length==0)?(r(),w(y,{key:1,type:"primary",onClick:q=>n.showDeleteConfirm(R.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(C)]),_:1},8,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source"])])]),_:1})]),_:1})]),_:1})],64)}const xd=W(Jd,[["render",Zd]]),yo=()=>{const e="products",{t:o}=ae(),c=["unit_id","category_id","brand_id","tax_id"],n={stock_quantitiy_alert:"details.stock_quantitiy_alert",mrp:"details.mrp",purchase_price:"details.purchase_price",sales_price:"details.sales_price",tax_id:"details.x_tax_id",purchase_tax_type:"details.purchase_tax_type",sales_tax_type:"details.sales_tax_type",opening_stock:"details.opening_stock",opening_stock_date:"details.opening_stock_date",wholesale_price:"details.wholesale_price",wholesale_quantity:"details.wholesale_quantity"},v={warehouse_id:void 0,name:"",slug:"",image:void 0,image_url:void 0,barcode_symbology:"CODE128",item_code:"",stock_quantitiy_alert:null,category_id:void 0,brand_id:void 0,mrp:0,purchase_price:0,sales_price:0,tax_id:void 0,unit_id:void 0,description:"",purchase_tax_type:"exclusive",sales_tax_type:"exclusive",custom_fields:[],opening_stock:void 0,opening_stock_date:void 0,wholesale_price:void 0,wholesale_quantity:void 0,product_type:"single",variations:[]},h=[{title:"",dataIndex:"status"},{title:o("product.product"),dataIndex:"name"},{title:o("product.category"),dataIndex:"category_id"},{title:o("product.brand"),dataIndex:"brand_id"},{title:o("product.sales_price"),dataIndex:"sales_price"},{title:o("product.purchase_price"),dataIndex:"purchase_price"},{title:o("product.current_stock"),dataIndex:"current_stock"},{title:o("common.action"),dataIndex:"action"}],m=[{title:o("product.product"),dataIndex:"name"},{title:o("product.category"),dataIndex:"category_id"},{title:o("product.brand"),dataIndex:"brand_id"},{title:o("common.action"),dataIndex:"action"}],d=[{title:o("product.product"),dataIndex:"name"},{title:o("product.item_code"),dataIndex:"item_code"},{title:o("product.sales_price"),dataIndex:"sales_price"},{title:o("product.purchase_price"),dataIndex:"purchase_price"},{title:o("product.current_stock"),dataIndex:"current_stock"},{title:o("common.action"),dataIndex:"action"}],i=[{key:"name",value:o("product.name")}];return{addEditUrl:e,initData:v,columns:h,variableProductcolumns:m,variantColumns:d,filterableColumns:i,hashableColumns:c,multiDimensalObjectColumns:n}};const ei={props:["product"]},ti={class:"user-info"},ai={class:"user-name"},ni={key:0,class:"user-designation"};function oi(e,o,c,n,v,h){const m=l("a-avatar");return r(),$("div",ti,[g("figure",null,[t(m,{size:40,src:c.product.image_url},null,8,["src"])]),g("figcaption",null,[g("h1",ai,s(c.product.name),1),c.product.category_id?(r(),$("span",ni,s(c.product.category.name),1)):A("",!0)])])}const li=W(ei,[["render",oi]]),si={};function ri(e,o,c,n,v,h){const m=l("a-typography-title");return r(),$(I,null,[t(m,{level:5},{default:a(()=>[ie(e.$slots,"default")]),_:3}),o[0]||(o[0]=g("hr",{style:{"margin-bottom":"20px"}},null,-1))],64)}const ga=W(si,[["render",ri]]),di={props:["label","content"],components:{InfoCircleOutlined:Kt},setup(){return{escapeSctipyTab:o=>o.replace(/<script.*?>.*?<\/script>/gi,"")}}},ii=["innerHTML"];function ui(e,o,c,n,v,h){const m=l("InfoCircleOutlined"),d=l("a-popover");return r(),$("span",null,[u(s(c.label)+" ",1),t(d,{trigger:"hover"},{title:a(()=>[u(s(c.label),1)]),content:a(()=>[g("div",{innerHTML:n.escapeSctipyTab(c.content)},null,8,ii)]),default:a(()=>[t(m)]),_:1})])}const ho=W(di,[["render",ui]]),vo={name:"BarcodeGenerator",props:{value:[String,Number],format:[String],width:[String,Number],height:[String,Number],displayValue:{type:[String,Boolean],default:!0},text:[String,Number],fontOptions:[String],font:[String],textAlign:[String],textPosition:[String],textMargin:[String,Number],fontSize:[String,Number],background:[String],lineColor:[String],margin:[String,Number],marginTop:[String,Number],marginBottom:[String,Number],marginLeft:[String,Number],marginRight:[String,Number],flat:[Boolean],ean128:[String,Boolean],elementTag:{type:String,default:"svg",validator:function(e){return["canvas","svg","img"].indexOf(e)!==-1}}},render(){return yl(this.elementTag,{})},mounted:function(){mi.call(this)}};function mi(){var e=this,o={format:this.format,width:this.width,height:this.height,displayValue:this.displayValue,text:this.text,fontOptions:this.fontOptions,font:this.font,textAlign:this.textAlign,textPosition:this.textPosition,textMargin:this.textMargin,fontSize:this.fontSize,background:this.background,lineColor:this.lineColor,margin:this.margin,marginTop:this.marginTop,marginBottom:this.marginBottom,marginLeft:this.marginLeft,marginRight:this.marginRight,flat:this.flat,ean128:this.ean128,valid:function(c){e.valid=c},elementTag:this.elementTag};ci(o),hl(this.$el,this.value,o)}function ci(e){Object.keys(e).forEach(o=>e[o]===void 0?delete e[o]:{})}const pi=Z({props:["itemCode","barcodeSymbology"],components:{BarcodeOutlined:ma,PrinterOutlined:Fa,BarcodeGenerator:vo},setup(){const e=T(!1);return{visible:e,showModal:()=>{e.value=!0},handleOk:v=>{e.value=!1},printDiv:v=>{var h=document.getElementById(v).innerHTML,m=window.open("","","height=500, width=500");m.document.write("<body >"),m.document.write(h),m.document.write("</body></html>"),m.document.close(),m.print()}}}}),_i={id:"printThis",style:{display:"none"}},fi={style:{"text-align":"center"}};function gi(e,o,c,n,v,h){const m=l("BarcodeOutlined"),d=l("a-button"),i=l("BarcodeGenerator"),p=l("PrinterOutlined"),_=l("a-modal");return r(),$("div",null,[t(d,{type:"text",size:"small",onClick:e.showModal},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("product.view_barcode")),1)]),_:1},8,["onClick"]),g("div",_i,[(r(),$(I,null,G(24,f=>t(i,{key:f,value:e.itemCode+"",format:e.barcodeSymbology,height:75,elementTag:"svg"},null,8,["value","format"])),64))]),t(_,{open:e.visible,"onUpdate:open":o[1]||(o[1]=f=>e.visible=f),title:e.$t("product.barcode"),footer:!1,onOk:e.handleOk},{default:a(()=>[g("p",fi,[t(i,{value:e.itemCode+"",format:e.barcodeSymbology,height:75,elementTag:"svg"},null,8,["value","format"])]),t(d,{type:"primary",onClick:o[0]||(o[0]=f=>e.printDiv("printThis")),block:""},{icon:a(()=>[t(p)]),default:a(()=>[u(" "+s(e.$t("product.print_barcode")),1)]),_:1})]),_:1},8,["open","title","onOk"])])}const bo=W(pi,[["render",gi]]),yi=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:le,AddEdit:po},setup(e,{emit:o}){const{permsArray:c}=X(),{initData:n,addEditUrl:v}=co(),h=T(!1),m=T("add"),d=T({...n});return{permsArray:c,visible:h,addEditType:m,addEditUrl:v,formData:d,addEditSuccess:()=>{h.value=!1,d.value={...n},o("onAddSuccess")},onClose:()=>{h.value=!1},showAdd:()=>{h.value=!0}}}}),hi={key:0};function vi(e,o,c,n,v,h){const m=l("a-menu-item"),d=l("PlusOutlined"),i=l("a-button"),p=l("a-tooltip"),_=l("AddEdit");return e.permsArray.includes("brands_create")||e.permsArray.includes("admin")?(r(),$("div",hi,[e.customType=="menu"?(r(),w(m,{onClick:e.showAdd,key:"brands"},{icon:a(()=>[ie(e.$slots,"icon")]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick"])):(r(),$(I,{key:1},[e.tooltip?(r(),w(p,{key:0,placement:"topLeft",title:e.$t("brand.add"),"arrow-point-at-center":""},{default:a(()=>[t(i,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),w(i,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("brand.add"),successMessage:e.$t("brand.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const bi=W(yi,[["render",vi]]),ki=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:le,AddEdit:go},setup(e,{emit:o}){const{permsArray:c}=X(),{initData:n,addEditUrl:v}=fo(),h=T(!1),m=T("add"),d=T({...n});return{permsArray:c,visible:h,addEditType:m,addEditUrl:v,formData:d,addEditSuccess:()=>{h.value=!1,d.value={...n},o("onAddSuccess")},onClose:()=>{h.value=!1},showAdd:()=>{h.value=!0}}}}),wi={key:0};function Ci(e,o,c,n,v,h){const m=l("a-menu-item"),d=l("PlusOutlined"),i=l("a-button"),p=l("a-tooltip"),_=l("AddEdit");return e.permsArray.includes("categories_create")||e.permsArray.includes("admin")?(r(),$("div",wi,[e.customType=="menu"?(r(),w(m,{onClick:e.showAdd,key:"categories"},{icon:a(()=>[ie(e.$slots,"icon")]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick"])):(r(),$(I,{key:1},[e.tooltip?(r(),w(p,{key:0,placement:"topLeft",title:e.$t("category.add"),"arrow-point-at-center":""},{default:a(()=>[t(i,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),w(i,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("category.add"),successMessage:e.$t("category.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const Si=W(ki,[["render",Ci]]),ko=()=>{const e="units?fields=id,xid,name,short_name,operator,operator_value,is_deletable",o="units",{t:c}=ae(),n={name:"",short_name:"",parent_id:null,operator:"multiply",operator_value:1},v=[{title:c("unit.name"),dataIndex:"name"},{title:c("unit.short_name"),dataIndex:"short_name"},{title:c("common.action"),dataIndex:"action"}],h=[{key:"name",value:c("unit.name")}];return{url:e,addEditUrl:o,initData:n,columns:v,filterableColumns:h}},$i=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:le,LoadingOutlined:Oe,SaveOutlined:ve},setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n,rules:v}=be();return{loading:n,rules:v,onClose:()=>{v.value={},o("closed")},onSubmit:()=>{c({url:e.url,data:e.formData,successMessage:e.successMessage,success:d=>{o("addEditSuccess",d.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Di(e,o,c,n,v,h){const m=l("a-input"),d=l("a-form-item"),i=l("a-col"),p=l("a-row"),_=l("a-form"),f=l("SaveOutlined"),y=l("a-button"),b=l("a-modal");return r(),w(b,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(y,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(f)]),default:a(()=>[u(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(y,{key:"back",onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(_,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("unit.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(m,{value:e.formData.name,"onUpdate:value":o[0]||(o[0]=k=>e.formData.name=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("unit.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("unit.short_name"),name:"short_name",help:e.rules.short_name?e.rules.short_name.message:null,validateStatus:e.rules.short_name?"error":null,class:"required"},{default:a(()=>[t(m,{value:e.formData.short_name,"onUpdate:value":o[1]||(o[1]=k=>e.formData.short_name=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("unit.short_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const wo=W($i,[["render",Di]]),Ai=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:le,AddEdit:wo},setup(e,{emit:o}){const{permsArray:c}=X(),{initData:n,addEditUrl:v}=ko(),h=T(!1),m=T("add"),d=T({...n});return{permsArray:c,visible:h,addEditType:m,addEditUrl:v,formData:d,addEditSuccess:()=>{h.value=!1,d.value={...n},o("onAddSuccess")},onClose:()=>{h.value=!1},showAdd:()=>{h.value=!0}}}}),Ti={key:0};function Ei(e,o,c,n,v,h){const m=l("a-menu-item"),d=l("PlusOutlined"),i=l("a-button"),p=l("a-tooltip"),_=l("AddEdit");return e.permsArray.includes("units_create")||e.permsArray.includes("admin")?(r(),$("div",Ti,[e.customType=="menu"?(r(),w(m,{onClick:e.showAdd,key:"categories"},{icon:a(()=>[ie(e.$slots,"icon")]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick"])):(r(),$(I,{key:1},[e.tooltip?(r(),w(p,{key:0,placement:"topLeft",title:e.$t("unit.add"),"arrow-point-at-center":""},{default:a(()=>[t(i,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),w(i,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("unit.add"),successMessage:e.$t("unit.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const Oi=W(Ai,[["render",Ei]]),Co=()=>{const e="taxes?fields=id,xid,name,rate,tax_type,x_parent_id,parent_id,multipleTax{id,xid,name,rate,tax_type,x_parent_id,parent_id}&filters=parent_id eq null",o="taxes",{t:c}=ae(),n=["parent_id"],v={name:"",rate:"",tax_type:"single"},h=[{title:c("tax.name"),dataIndex:"name"},{title:c("tax.tax_type"),dataIndex:"tax_type"},{title:c("tax.rate"),dataIndex:"rate"},{title:c("common.action"),dataIndex:"action"}],m=[{key:"name",value:c("tax.name")}];return{url:e,addEditUrl:o,initData:v,columns:h,filterableColumns:m,hashableColumns:n}},Ii=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:le,LoadingOutlined:Oe,SaveOutlined:ve,MinusSquareOutlined:Yn,FormItemHeading:ga},setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n,rules:v}=be(),h=T([]),m=T([{tax_name:"",rate:"",id:void 0}]),d=()=>{var y=et(m.value,function(k){return k.tax_name!=""&&k.rate&&k.rate>0}),b={...e.formData,multiple_taxes:y,removed_fields:h.value};c({url:e.url,data:b,successMessage:e.successMessage,success:k=>{o("addEditSuccess",k.xid)}})},i=pe(()=>m.value.length==0?!1:Et(m.value,{tax_name:""})||Et(m.value,{tax_name:null})||Et(m.value,{rate:""})||Et(m.value,{rate:null})),p=()=>{m.value.push({tax_name:"",rate:"",id:""})},_=y=>{let b=m.value.indexOf(y);b!==-1&&m.value.splice(b,1),y.id!=""&&h.value.push(y.id)},f=()=>{v.value={},o("closed")};return ue(()=>e.visible,(y,b)=>{e.visible&&(m.value=[],e.addEditType=="add"?m.value.push({tax_name:"",rate:"",id:""}):Ce(e.data.multiple_tax,k=>{m.value.push({tax_name:k.name,rate:k.rate,id:k.xid})}))}),{loading:n,rules:v,onClose:f,onSubmit:d,removeFormField:_,formFields:m,addFormField:p,addFormButtonStatus:i,sumBy:Ma,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),Pi={key:2,class:"ant-form-item-explain-error",style:{marginTop:"-15px"}};function Ui(e,o,c,n,v,h){const m=l("a-input"),d=l("a-form-item"),i=l("a-col"),p=l("a-row"),_=l("a-select-option"),f=l("a-select"),y=l("a-input-number"),b=l("form-item-heading"),k=l("MinusSquareOutlined"),C=l("PlusOutlined"),D=l("a-button"),S=l("a-form"),P=l("SaveOutlined"),F=l("a-modal");return r(),w(F,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(D,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(P)]),default:a(()=>[u(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(D,{key:"back",onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(S,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("tax.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(m,{value:e.formData.name,"onUpdate:value":o[0]||(o[0]=O=>e.formData.name=O),placeholder:e.$t("common.placeholder_default_text",[e.$t("tax.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("tax.tax_type"),name:"tax_type",help:e.rules.tax_type?e.rules.tax_type.message:null,validateStatus:e.rules.tax_type?"error":null,class:"required"},{default:a(()=>[t(f,{value:e.formData.tax_type,"onUpdate:value":o[1]||(o[1]=O=>e.formData.tax_type=O),placeholder:e.$t("common.select_default_text",[e.$t("tax.tax_type")]),onChange:o[2]||(o[2]=O=>{e.formData.rate=O=="multiple"?e.sumBy(e.formFields,"rate"):void 0})},{default:a(()=>[t(_,{value:"single"},{default:a(()=>[u(s(e.$t("tax.single")),1)]),_:1}),t(_,{value:"multiple"},{default:a(()=>[u(s(e.$t("tax.multiple")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("tax.rate"),name:"rate",help:e.rules.rate?e.rules.rate.message:null,validateStatus:e.rules.rate?"error":null,class:"required"},{default:a(()=>[t(y,{value:e.formData.rate,"onUpdate:value":o[3]||(o[3]=O=>e.formData.rate=O),placeholder:e.$t("common.placeholder_default_text",[e.$t("tax.rate")]),min:"0",style:{width:"100%"},disabled:e.formData.tax_type=="multiple"},{addonAfter:a(()=>[...o[5]||(o[5]=[u("%",-1)])]),_:1},8,["value","placeholder","disabled"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),e.formData.tax_type=="multiple"?(r(),w(b,{key:0},{default:a(()=>[u(s(e.$t("tax.multiple_tax")),1)]),_:1})):A("",!0),e.formData.tax_type=="multiple"?(r(!0),$(I,{key:1},G(e.formFields,(O,E)=>(r(),w(p,{gutter:16,key:O.id,style:{display:"flex","align-items":"center"}},{default:a(()=>[t(i,{xs:24,sm:24,md:e.addEditType=="add"?11:12,lg:e.addEditType=="add"?11:12},{default:a(()=>[t(d,{name:"tax_name",help:e.rules.tax_name?e.rules.tax_name.message:null,validateStatus:e.rules.tax_name?"error":null,class:"required"},{default:a(()=>[t(m,{value:O.tax_name,"onUpdate:value":U=>O.tax_name=U,placeholder:e.$t("common.placeholder_default_text",[e.$t("tax.name")]),min:"0",style:{width:"100%"}},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["help","validateStatus"])]),_:2},1032,["md","lg"]),t(i,{xs:24,sm:24,md:e.addEditType=="add"?11:12,lg:e.addEditType=="add"?11:12},{default:a(()=>[t(d,{name:"rate",class:"required"},{default:a(()=>[t(y,{value:O.rate,"onUpdate:value":U=>O.rate=U,placeholder:e.$t("common.placeholder_default_text",[e.$t("tax.rate")]),style:{width:"100%"},onChange:o[4]||(o[4]=()=>{e.formData.rate=e.sumBy(e.formFields,"rate")})},{addonAfter:a(()=>[...o[6]||(o[6]=[u("%",-1)])]),_:1},8,["value","onUpdate:value","placeholder"])]),_:2},1024)]),_:2},1032,["md","lg"]),e.addEditType=="add"?(r(),w(i,{key:0,span:2,style:{"margin-bottom":"20px"}},{default:a(()=>[t(k,{onClick:()=>{e.removeFormField(O),e.formData.rate=e.sumBy(e.formFields,"rate")}},null,8,["onClick"])]),_:2},1024)):A("",!0)]),_:2},1024))),128)):A("",!0),e.rules&&e.rules.multiple_taxes?(r(),$("p",Pi,s(e.rules.multiple_taxes.message),1)):A("",!0),e.formData.tax_type=="multiple"?(r(),w(p,{key:3,gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:4,lg:4},{default:a(()=>[t(d,null,{default:a(()=>[t(D,{type:"primary",onClick:e.addFormField,disabled:e.addFormButtonStatus},{default:a(()=>[t(C),u(" "+s(e.$t("tax.add")),1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1})):A("",!0)]),_:1})]),_:1},8,["open","title","onOk"])}const So=W(Ii,[["render",Ui]]),Fi=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:le,AddEdit:So},setup(e,{emit:o}){const{permsArray:c}=X(),{initData:n,addEditUrl:v}=Co(),h=T(!1),m=T("add"),d=T({...n});return{permsArray:c,visible:h,addEditType:m,addEditUrl:v,formData:d,addEditSuccess:()=>{h.value=!1,d.value={...n},o("onAddSuccess")},onClose:()=>{h.value=!1},showAdd:()=>{h.value=!0}}}}),Mi={key:0};function qi(e,o,c,n,v,h){const m=l("a-menu-item"),d=l("PlusOutlined"),i=l("a-button"),p=l("a-tooltip"),_=l("AddEdit");return e.permsArray.includes("taxes_create")||e.permsArray.includes("admin")?(r(),$("div",Mi,[e.customType=="menu"?(r(),w(m,{onClick:e.showAdd,key:"categories"},{icon:a(()=>[ie(e.$slots,"icon")]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick"])):(r(),$(I,{key:1},[e.tooltip?(r(),w(p,{key:0,placement:"topLeft",title:e.$t("tax.add"),"arrow-point-at-center":""},{default:a(()=>[t(i,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),w(i,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("tax.add"),successMessage:e.$t("tax.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const Ha=W(Fi,[["render",qi]]),Na=()=>{const e="warehouses",o="warehouses?fields=id,xid,company_id,x_company_id,logo,logo_url,dark_logo,dark_logo_url,name,slug,email,phone,address,show_email_on_invoice,show_phone_on_invoice,show_mrp_on_invoice,show_discount_tax_on_invoice,terms_condition,bank_details,signature,signature_url,online_store_enabled,default_pos_order_status,customers_visibility,suppliers_visibility,products_visibility",{t:c}=ae(),n={name:"",slug:"",email:"",phone:"",logo:void 0,logo_url:void 0,dark_logo:void 0,dark_logo_url:void 0,show_email_on_invoice:0,show_phone_on_invoice:0,show_mrp_on_invoice:1,show_discount_tax_on_invoice:1,address:"",terms_condition:`1. Goods once sold will not be taken back or exchanged
2. All disputes are subject to [ENTER_YOUR_CITY_NAME] jurisdiction only`,bank_details:"",signature:void 0,signature_url:void 0,default_pos_order_status:"delivered",customers_visibility:"all",suppliers_visibility:"all",products_visibility:"all"},v=[{title:c("warehouse.logo"),dataIndex:"logo"},{title:c("warehouse.name"),dataIndex:"name",sorter:!0},{title:c("warehouse.email"),dataIndex:"email",sorter:!0},{title:c("warehouse.phone"),dataIndex:"phone"},{title:c("warehouse.online_store"),dataIndex:"online_store_enabled"},{title:c("common.action"),dataIndex:"action"}],h=[{key:"name",value:c("warehouse.name")},{key:"email",value:c("warehouse.email")},{key:"phone",value:c("warehouse.phone")}];return{url:o,addEditUrl:e,initData:n,columns:v,filterableColumns:h}},Ri=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],emits:["addEditSuccess"],components:{PlusOutlined:le,LoadingOutlined:Oe,SaveOutlined:ve,FileTextOutlined:Gn,EyeOutlined:tt,SettingOutlined:St,Upload:mt},setup(e,{emit:o}){const c=ke(),{addEditRequestAdmin:n,loading:v,rules:h}=be(),{slugify:m,salesOrderStatus:d,selectedWarehouse:i}=X(),p=T("basic_details"),_=Se({display:"flex",height:"30px",lineHeight:"30px"});return{loading:v,rules:h,onClose:()=>{p.value="basic_details",h.value={},o("closed")},onSubmit:()=>{n({url:e.url,data:e.formData,successMessage:e.successMessage,success:b=>{c.dispatch("auth/updateAllWarehouses"),i.value&&i.value.xid&&i.value.xid==b.xid&&axiosAdmin.post("change-warehouse",{warehouse_id:b.xid}).then(k=>{c.commit("auth/updateWarehouse",k.data.warehouse)}),o("addEditSuccess",b.xid),p.value="basic_details",h.value={}}})},slugify:m,activeKey:p,salesOrderStatus:d,radioStyle:_,drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Ki(e,o,c,n,v,h){const m=l("FileTextOutlined"),d=l("a-input"),i=l("a-form-item"),p=l("a-col"),_=l("a-row"),f=l("a-switch"),y=l("Upload"),b=l("a-textarea"),k=l("a-typography-paragraph"),C=l("a-tab-pane"),D=l("EyeOutlined"),S=l("a-radio"),P=l("a-radio-group"),F=l("SettingOutlined"),O=l("a-select-option"),E=l("a-select"),U=l("a-radio-button"),K=l("a-tabs"),z=l("a-form"),M=l("SaveOutlined"),R=l("a-button"),q=l("a-drawer");return r(),w(q,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[t(R,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:a(()=>[t(M)]),default:a(()=>[u(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),t(R,{onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(z,{layout:"vertical"},{default:a(()=>[t(K,{activeKey:e.activeKey,"onUpdate:activeKey":o[19]||(o[19]=L=>e.activeKey=L)},{default:a(()=>[t(C,{key:"basic_details"},{tab:a(()=>[g("span",null,[t(m),u(" "+s(e.$t("warehouse.basic_details")),1)])]),default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("warehouse.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(d,{value:e.formData.name,"onUpdate:value":o[0]||(o[0]=L=>e.formData.name=L),placeholder:e.$t("common.placeholder_default_text",[e.$t("warehouse.name")]),onKeyup:o[1]||(o[1]=L=>e.formData.slug=e.slugify(L.target.value))},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("warehouse.slug"),name:"slug",help:e.rules.slug?e.rules.slug.message:null,validateStatus:e.rules.slug?"error":null,class:"required"},{default:a(()=>[t(d,{value:e.formData.slug,"onUpdate:value":o[2]||(o[2]=L=>e.formData.slug=L),placeholder:e.$t("common.placeholder_default_text",[e.$t("warehouse.slug")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:16,lg:16},{default:a(()=>[t(i,{label:e.$t("warehouse.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null,class:"required"},{default:a(()=>[t(d,{value:e.formData.email,"onUpdate:value":o[3]||(o[3]=L=>e.formData.email=L),placeholder:e.$t("common.placeholder_default_text",[e.$t("warehouse.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(i,{label:e.$t("warehouse.show_email_on_invoice"),name:"show_email_on_invoice",help:e.rules.show_email_on_invoice?e.rules.show_email_on_invoice.message:null,validateStatus:e.rules.show_email_on_invoice?"error":null},{default:a(()=>[t(f,{checked:e.formData.show_email_on_invoice,"onUpdate:checked":o[4]||(o[4]=L=>e.formData.show_email_on_invoice=L),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:16,lg:16},{default:a(()=>[t(i,{label:e.$t("warehouse.phone"),name:"phone",help:e.rules.phone?e.rules.phone.message:null,validateStatus:e.rules.phone?"error":null,class:"required"},{default:a(()=>[t(d,{value:e.formData.phone,"onUpdate:value":o[5]||(o[5]=L=>e.formData.phone=L),placeholder:e.$t("common.placeholder_default_text",[e.$t("warehouse.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(i,{label:e.$t("warehouse.show_phone_on_invoice"),name:"show_phone_on_invoice",help:e.rules.show_phone_on_invoice?e.rules.show_phone_on_invoice.message:null,validateStatus:e.rules.show_phone_on_invoice?"error":null},{default:a(()=>[t(f,{checked:e.formData.show_phone_on_invoice,"onUpdate:checked":o[6]||(o[6]=L=>e.formData.show_phone_on_invoice=L),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(i,{label:e.$t("warehouse.logo"),name:"logo",help:e.rules.logo?e.rules.logo.message:null,validateStatus:e.rules.logo?"error":null},{default:a(()=>[t(y,{formData:e.formData,folder:"warehouses",imageField:"logo",onOnFileUploaded:o[7]||(o[7]=L=>{e.formData.logo=L.file,e.formData.logo_url=L.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1}),t(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(i,{label:e.$t("warehouse.dark_logo"),name:"dark_logo",help:e.rules.dark_logo?e.rules.dark_logo.message:null,validateStatus:e.rules.dark_logo?"error":null},{default:a(()=>[t(y,{formData:e.formData,folder:"warehouses",imageField:"dark_logo",onOnFileUploaded:o[8]||(o[8]=L=>{e.formData.dark_logo=L.file,e.formData.dark_logo_url=L.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(i,{label:e.$t("warehouse.address"),name:"address",help:e.rules.address?e.rules.address.message:null,validateStatus:e.rules.address?"error":null},{default:a(()=>[t(b,{value:e.formData.address,"onUpdate:value":o[9]||(o[9]=L=>e.formData.address=L),placeholder:e.$t("common.placeholder_default_text",[e.$t("warehouse.address")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(i,null,{default:a(()=>[t(k,{type:"warning",strong:""},{default:a(()=>[g("blockquote",null,s(e.$t("warehouse.details_will_be_shown_on_invoice")),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(i,{label:e.$t("warehouse.bank_details"),name:"bank_details",help:e.rules.bank_details?e.rules.bank_details.message:null,validateStatus:e.rules.bank_details?"error":null},{default:a(()=>[t(b,{value:e.formData.bank_details,"onUpdate:value":o[10]||(o[10]=L=>e.formData.bank_details=L),placeholder:e.$t("common.placeholder_default_text",[e.$t("warehouse.bank_details")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(i,{label:e.$t("warehouse.terms_condition"),name:"terms_condition",help:e.rules.terms_condition?e.rules.terms_condition.message:null,validateStatus:e.rules.terms_condition?"error":null},{default:a(()=>[t(b,{value:e.formData.terms_condition,"onUpdate:value":o[11]||(o[11]=L=>e.formData.terms_condition=L),placeholder:e.$t("common.placeholder_default_text",[e.$t("warehouse.terms_condition")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(i,{label:e.$t("warehouse.signature"),name:"signature",help:e.rules.signature?e.rules.signature.message:null,validateStatus:e.rules.signature?"error":null},{default:a(()=>[t(y,{formData:e.formData,folder:"warehouses",imageField:"signature",onOnFileUploaded:o[12]||(o[12]=L=>{e.formData.signature=L.file,e.formData.signature_url=L.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1}),t(C,{key:"visibility"},{tab:a(()=>[g("span",null,[t(D),u(" "+s(e.$t("warehouse.visibility")),1)])]),default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(i,{label:e.$t("warehouse.customers_visibility"),name:"customers_visibility",help:e.rules.customers_visibility?e.rules.customers_visibility.message:null,validateStatus:e.rules.customers_visibility?"error":null},{default:a(()=>[t(P,{value:e.formData.customers_visibility,"onUpdate:value":o[13]||(o[13]=L=>e.formData.customers_visibility=L)},{default:a(()=>[t(S,{style:Ye(e.radioStyle),value:"all"},{default:a(()=>[u(s(e.$t("warehouse.view_all_customers")),1)]),_:1},8,["style"]),t(S,{style:Ye(e.radioStyle),value:"warehouse"},{default:a(()=>[u(s(e.$t("warehouse.view_warehouse_customers")),1)]),_:1},8,["style"])]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(i,{label:e.$t("warehouse.suppliers_visibility"),name:"suppliers_visibility",help:e.rules.suppliers_visibility?e.rules.suppliers_visibility.message:null,validateStatus:e.rules.suppliers_visibility?"error":null},{default:a(()=>[t(P,{value:e.formData.suppliers_visibility,"onUpdate:value":o[14]||(o[14]=L=>e.formData.suppliers_visibility=L)},{default:a(()=>[t(S,{style:Ye(e.radioStyle),value:"all"},{default:a(()=>[u(s(e.$t("warehouse.view_all_suppliers")),1)]),_:1},8,["style"]),t(S,{style:Ye(e.radioStyle),value:"warehouse"},{default:a(()=>[u(s(e.$t("warehouse.view_warehouse_suppliers")),1)]),_:1},8,["style"])]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(i,{label:e.$t("warehouse.products_visibility"),name:"products_visibility",help:e.rules.products_visibility?e.rules.products_visibility.message:null,validateStatus:e.rules.products_visibility?"error":null},{default:a(()=>[t(P,{value:e.formData.products_visibility,"onUpdate:value":o[15]||(o[15]=L=>e.formData.products_visibility=L)},{default:a(()=>[t(S,{style:Ye(e.radioStyle),value:"all"},{default:a(()=>[u(s(e.$t("warehouse.view_all_products")),1)]),_:1},8,["style"]),t(S,{style:Ye(e.radioStyle),value:"warehouse"},{default:a(()=>[u(s(e.$t("warehouse.view_warehouse_products")),1)]),_:1},8,["style"])]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1}),t(C,{key:"pos_settings"},{tab:a(()=>[g("span",null,[t(F),u(" "+s(e.$t("menu.pos_settings")),1)])]),default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(i,{label:e.$t("warehouse.default_pos_order_status"),name:"default_pos_order_status",help:e.rules.default_pos_order_status?e.rules.default_pos_order_status.message:null,validateStatus:e.rules.default_pos_order_status?"error":null},{default:a(()=>[t(E,{value:e.formData.default_pos_order_status,"onUpdate:value":o[16]||(o[16]=L=>e.formData.default_pos_order_status=L),placeholder:e.$t("warehouse.default_pos_order_status"),style:{width:"100%"}},{default:a(()=>[(r(!0),$(I,null,G(e.salesOrderStatus,L=>(r(),w(O,{key:L.key,value:L.key},{default:a(()=>[u(s(L.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(i,{label:e.$t("warehouse.show_mrp_on_invoice"),name:"show_mrp_on_invoice",help:e.rules.show_mrp_on_invoice?e.rules.show_mrp_on_invoice.message:null,validateStatus:e.rules.show_mrp_on_invoice?"error":null},{default:a(()=>[t(P,{value:e.formData.show_mrp_on_invoice,"onUpdate:value":o[17]||(o[17]=L=>e.formData.show_mrp_on_invoice=L),size:"small",buttonStyle:"solid"},{default:a(()=>[t(U,{value:1},{default:a(()=>[u(s(e.$t("common.yes")),1)]),_:1}),t(U,{value:0},{default:a(()=>[u(s(e.$t("common.no")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(i,{label:e.$t("warehouse.show_discount_tax_on_invoice"),name:"show_discount_tax_on_invoice",help:e.rules.show_discount_tax_on_invoice?e.rules.show_discount_tax_on_invoice.message:null,validateStatus:e.rules.show_discount_tax_on_invoice?"error":null},{default:a(()=>[t(P,{value:e.formData.show_discount_tax_on_invoice,"onUpdate:value":o[18]||(o[18]=L=>e.formData.show_discount_tax_on_invoice=L),size:"small",buttonStyle:"solid"},{default:a(()=>[t(U,{value:1},{default:a(()=>[u(s(e.$t("common.yes")),1)]),_:1}),t(U,{value:0},{default:a(()=>[u(s(e.$t("common.no")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["activeKey"])]),_:1})]),_:1},8,["title","width","open","onClose"])}const Ya=W(Ri,[["render",Ki]]),Vi=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:le,AddEdit:Ya},setup(e,{emit:o}){const{permsArray:c}=X(),{initData:n,addEditUrl:v}=Na(),h=T(!1),m=T("add"),d=T({...n});return{permsArray:c,visible:h,addEditType:m,addEditUrl:v,formData:d,addEditSuccess:()=>{h.value=!1,d.value={...n},o("onAddSuccess")},onClose:()=>{h.value=!1},showAdd:()=>{h.value=!0}}}}),zi={key:0};function Li(e,o,c,n,v,h){const m=l("a-menu-item"),d=l("PlusOutlined"),i=l("a-button"),p=l("a-tooltip"),_=l("AddEdit");return e.permsArray.includes("warehouses_create")||e.permsArray.includes("admin")?(r(),$("div",zi,[e.customType=="menu"?(r(),w(m,{onClick:e.showAdd,key:"customers"},{icon:a(()=>[ie(e.$slots,"icon")]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick"])):(r(),$(I,{key:1},[e.tooltip?(r(),w(p,{key:0,placement:"topLeft",title:e.$t("warehouse.add"),"arrow-point-at-center":""},{default:a(()=>[t(i,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),w(i,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("warehouse.add"),successMessage:e.$t("warehouse.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const Bt=W(Vi,[["render",Li]]),Bi=Z({props:["formData","variations","selectedUnit","showTable"],emits:["variant_added"],components:{PlusOutlined:le,SaveOutlined:ve,EditOutlined:De,BarcodeOutlined:ma,Upload:mt,Barcode:bo,InputLabelPopover:ho},setup(e,{emit:o}){const{appSetting:c,formatAmountCurrency:n}=X(),{addEditRequestAdmin:v,loading:h,rules:m}=be(),d=T([]),i=T([]),p=T([]),_=T([]),{t:f}=ae(),y=T("add"),b=T(!1),k=T({}),C=T([]),D=T([{title:f("product.image"),dataIndex:"image"},{title:f("variations.variation"),dataIndex:"variant_id"},{title:f("variations.variant_value"),dataIndex:"variant_value_id"},{title:f("product.item_code"),dataIndex:"item_code"},{title:f("product.purchase_price"),dataIndex:"purchase_price"},{title:f("product.sales_price"),dataIndex:"sales_price"},{title:f("product.mrp"),dataIndex:"mrp"},{title:f("product.opening_stock"),dataIndex:"opening_stock"},{title:f("common.action"),dataIndex:"action"}]);ee(()=>{O(),S(e.formData.variations)});const S=j=>{var Y=[];Ce(j,x=>{var B=[],N=[];Ce(x.product_variations,H=>{B.push(H.x_variant_id),N.push(H.x_variant_value_id)}),Y.push({unique_id:F(),image:x.image,image_url:x.image_url,variant_id:B,variant_value_id:N,xid:x.xid,item_code:x.item_code,purchase_price:x.details.purchase_price,purchase_tax_type:x.details.purchase_tax_type,sales_price:x.details.sales_price,sales_tax_type:x.details.sales_tax_type,mrp:x.details.mrp,opening_stock:x.details.opening_stock,opening_stock_date:x.details.opening_stock_date,stock_quantitiy_alert:x.details.stock_quantitiy_alert})}),C.value=Y,o("variant_added",C.value)},P=j=>{C.value=j},F=()=>Math.random().toString(36).slice(2),O=()=>{var j=[];Ce(e.variations,Y=>{Y.x_parent_id==null&&j.push(Y)}),p.value=j},E=(j,Y)=>{_.value=[];var x=[],B=[];Ce(e.variations,N=>{if(yt(j,N.xid)&&N.sub_variations.length>0){var H=[];Ce(N.sub_variations,J=>{H.push({label:J.name,value:J.xid,parentId:N.xid}),yt(i.value,J.xid)&&B.push(J.xid)}),x.push({label:N.name,value:N.xid,parentId:void 0,children:H,disabled:!1})}}),i.value=B,_.value=x},U=j=>{const Y=at(e.variations,["xid",j]);return Y?Y.name:"-"},K=()=>{k.value={unique_id:F(),image:void 0,image_url:void 0,variant_id:d.value,variant_value_id:i.value,xid:"",item_code:"",purchase_price:"",purchase_tax_type:"exclusive",sales_price:"",sales_tax_type:"exclusive",mrp:"",opening_stock:0,opening_stock_date:void 0,stock_quantitiy_alert:null},b.value=!0},z=j=>{k.value={unique_id:j.unique_id,image:j.image,image_url:j.image_url,variant_id:j.x_variant_id?j.x_variant_id:j.variant_id,variant_value_id:j.x_variant_value_id?j.x_variant_value_id:j.variant_value_id,xid:j.xid,item_code:j.item_code,purchase_price:j.purchase_price,purchase_tax_type:j.purchase_tax_type,sales_price:j.sales_price,sales_tax_type:j.sales_tax_type,mrp:j.mrp,opening_stock:j.opening_stock,opening_stock_date:j.opening_stock_date,stock_quantitiy_alert:j.stock_quantitiy_alert},y.value="edit",b.value=!0},M=()=>{v({url:"/products/check-variants",data:k.value,success:j=>{Et(C.value,["unique_id",k.value.unique_id])?C.value=vl(C.value,Y=>Y.unique_id==k.value.unique_id?k.value:Y):C.value=[{...k.value},...C.value],o("variant_added",C.value),d.value=[],i.value=[],b.value=!1}})},R=()=>{m.value={},b.value=!1};ue(()=>e.showTable,(j,Y)=>{S(j.formData.variations)});const q=(j,Y)=>{var x=at(e.variations,["xid",Y.parentId]),B=[];Ce(i.value,N=>{var H=at(x.sub_variations,{xid:N});H==null&&B.push(N)}),B.push(j),i.value=B},L=(j,Y)=>{i.value=et(i.value,x=>x!=j)};return{appSetting:c,formatAmountCurrency:n,variantId:d,variantValueId:i,varaitionTypes:p,varaitionTypeValues:_,getValueByVariation:E,addNewVariant:K,addEditType:y,addEditForm:k,visible:b,onSubmit:M,onClose:R,variantTableData:C,variantTableColumns:D,generateRandomTableKey:F,getVariantNameById:U,editItem:z,rules:m,loading:h,modalWidth:window.innerWidth<=991?"90%":"35%",variantValueSelected:q,variantValueDeselected:L,setVariantTableData:S,setDirectVariantTableData:P}}}),Wi={key:1},ji={key:2};function Hi(e,o,c,n,v,h){const m=l("a-select-option"),d=l("a-select"),i=l("a-col"),p=l("PlusOutlined"),_=l("a-button"),f=l("a-row"),y=l("a-avatar"),b=l("a-badge"),k=l("EditOutlined"),C=l("a-table"),D=l("Upload"),S=l("a-form-item"),P=l("BarcodeOutlined"),F=l("Barcode"),O=l("a-input"),E=l("InputLabelPopover"),U=l("a-input-number"),K=l("a-date-picker"),z=l("a-form"),M=l("SaveOutlined"),R=l("a-modal");return r(),$(I,null,[e.formData.product_type=="variable"?(r(),w(f,{key:0,gutter:16,style:{"margin-bottom":"20px"}},{default:a(()=>[t(i,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(d,{value:e.variantId,"onUpdate:value":o[0]||(o[0]=q=>e.variantId=q),placeholder:e.$t("common.select_default_text",[e.$t("variations.variation")]),onChange:e.getValueByVariation,style:{width:"100%"},allowClear:!1,mode:"multiple"},{default:a(()=>[(r(!0),$(I,null,G(e.varaitionTypes,q=>(r(),w(m,{key:q.xid,value:q.xid},{default:a(()=>[u(s(q.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),t(i,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(d,{value:e.variantValueId,placeholder:e.$t("common.select_default_text",[e.$t("variations.variant_value")]),allowClear:!1,style:{width:"100%"},disabled:e.variantId==null,options:e.varaitionTypeValues,mode:"multiple","field-names":{label:"label",value:"value",parentId:"parentId",options:"children"},onSelect:e.variantValueSelected,onDeselect:e.variantValueDeselected},null,8,["value","placeholder","disabled","options","onSelect","onDeselect"])]),_:1}),t(i,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(_,{type:"primary",onClick:e.addNewVariant,disabled:e.variantValueId.length<=0},{icon:a(()=>[t(p)]),default:a(()=>[u(s(e.$t("variations.add"))+" ",1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})):A("",!0),e.formData.product_type=="variable"?(r(),w(C,{key:1,dataSource:e.variantTableData,columns:e.variantTableColumns,"row-key":q=>q.xid&&q.xid!=""?q.xid:e.generateRandomTableKey(),size:"middle",pagination:!1,class:"mb-20"},{bodyCell:a(({column:q,text:L,record:j})=>[q.dataIndex==="image"?(r(),w(b,{key:0},{default:a(()=>[t(y,{shape:"square",src:j.image_url},null,8,["src"])]),_:2},1024)):A("",!0),q.dataIndex==="variant_id"?(r(),$("ul",Wi,[(r(!0),$(I,null,G(j.variant_id,Y=>(r(),$("li",{key:Y},s(e.getVariantNameById(Y)),1))),128))])):A("",!0),q.dataIndex==="variant_value_id"?(r(),$("ul",ji,[(r(!0),$(I,null,G(j.variant_value_id,Y=>(r(),$("li",{key:Y},s(e.getVariantNameById(Y)),1))),128))])):A("",!0),q.dataIndex==="purchase_price"&&j&&j.purchase_price?(r(),$(I,{key:3},[u(s(e.formatAmountCurrency(j.purchase_price)),1)],64)):A("",!0),q.dataIndex==="sales_price"&&j&&j.sales_price?(r(),$(I,{key:4},[u(s(e.formatAmountCurrency(j.sales_price)),1)],64)):A("",!0),q.dataIndex==="mrp"&&j&&j.mrp?(r(),$(I,{key:5},[u(s(e.formatAmountCurrency(j.mrp)),1)],64)):A("",!0),q.dataIndex==="action"?(r(),w(_,{key:6,type:"primary",onClick:Y=>e.editItem(j)},{icon:a(()=>[t(k)]),_:1},8,["onClick"])):A("",!0)]),_:1},8,["dataSource","columns","row-key"])):A("",!0),t(R,{open:e.visible,closable:!1,centered:!0,title:e.addEditType=="add"?e.$t("variations.add"):e.$t("variations.edit"),onOk:e.onSubmit,width:e.modalWidth},{footer:a(()=>[t(_,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(M)]),default:a(()=>[u(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(_,{key:"back",onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(z,{layout:"vertical"},{default:a(()=>[t(f,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(S,{label:e.$t("product.image"),name:"image"},{default:a(()=>[t(D,{formData:e.addEditForm,folder:"product",onOnFileUploaded:o[1]||(o[1]=q=>{e.addEditForm.image=q.file,e.addEditForm.image_url=q.file_url})},null,8,["formData"])]),_:1},8,["label"])]),_:1}),t(i,{xs:24,sm:24,md:16,lg:16},{default:a(()=>[t(f,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(S,{label:e.$t("product.item_code"),name:"item_code",help:e.rules.item_code?e.rules.item_code.message:null,validateStatus:e.rules.item_code?"error":null,class:"required"},{default:a(()=>[t(O,{value:e.addEditForm.item_code,"onUpdate:value":o[3]||(o[3]=q=>e.addEditForm.item_code=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.item_code")])},{addonAfter:a(()=>[e.addEditForm.item_code==""?(r(),w(_,{key:0,type:"text",size:"small",onClick:o[2]||(o[2]=()=>{e.addEditForm.item_code=parseInt(Math.random()*1e10)})},{icon:a(()=>[t(P)]),default:a(()=>[u(" "+s(e.$t("product.generate_barcode")),1)]),_:1})):(r(),w(F,{key:1,itemCode:e.addEditForm.item_code,barcodeSymbology:e.formData.barcode_symbology},null,8,["itemCode","barcodeSymbology"]))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(f,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(S,{name:"stock_quantitiy_alert"},{label:a(()=>[t(E,{label:e.$t("product.quantitiy_alert"),content:e.$t("popover.quantitiy_alert")},null,8,["label","content"])]),default:a(()=>[t(U,{value:e.addEditForm.stock_quantitiy_alert,"onUpdate:value":o[4]||(o[4]=q=>e.addEditForm.stock_quantitiy_alert=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.quantitiy_alert")]),min:"0",style:{width:"100%"}},null,8,["value","placeholder"])]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(S,{label:e.$t("product.mrp"),name:"mrp"},{default:a(()=>[t(U,{value:e.addEditForm.mrp,"onUpdate:value":o[5]||(o[5]=q=>e.addEditForm.mrp=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.mrp")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[u(s(e.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})]),_:1}),t(f,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(S,{label:e.$t("product.purchase_price"),name:"purchase_price",help:e.rules.purchase_price?e.rules.purchase_price.message:null,validateStatus:e.rules.purchase_price?"error":null,class:"required"},{default:a(()=>[t(U,{value:e.addEditForm.purchase_price,"onUpdate:value":o[7]||(o[7]=q=>e.addEditForm.purchase_price=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.purchase_price")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[u(s(e.appSetting.currency.symbol),1)]),addonAfter:a(()=>[t(d,{value:e.addEditForm.purchase_tax_type,"onUpdate:value":o[6]||(o[6]=q=>e.addEditForm.purchase_tax_type=q),style:{width:"100px"}},{default:a(()=>[t(m,{value:"inclusive"},{default:a(()=>[u(s(e.$t("common.with_tax")),1)]),_:1}),t(m,{value:"exclusive"},{default:a(()=>[u(s(e.$t("common.without_tax")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(S,{label:e.$t("product.sales_price"),name:"sales_price",help:e.rules.sales_price?e.rules.sales_price.message:null,validateStatus:e.rules.sales_price?"error":null,class:"required"},{default:a(()=>[t(U,{value:e.addEditForm.sales_price,"onUpdate:value":o[9]||(o[9]=q=>e.addEditForm.sales_price=q),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.sales_price")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[u(s(e.appSetting.currency.symbol),1)]),addonAfter:a(()=>[t(d,{value:e.addEditForm.sales_tax_type,"onUpdate:value":o[8]||(o[8]=q=>e.addEditForm.sales_tax_type=q),style:{width:"100px"}},{default:a(()=>[t(m,{value:"inclusive"},{default:a(()=>[u(s(e.$t("common.with_tax")),1)]),_:1}),t(m,{value:"exclusive"},{default:a(()=>[u(s(e.$t("common.without_tax")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(f,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(S,{label:e.$t("product.opening_stock"),name:"opening_stock",class:"required"},{default:a(()=>[t(U,{value:e.addEditForm.opening_stock,"onUpdate:value":o[10]||(o[10]=q=>e.addEditForm.opening_stock=q),placeholder:"0",style:{width:"100%"}},{addonAfter:a(()=>[u(s(e.selectedUnit&&e.selectedUnit.short_name?e.selectedUnit.short_name:""),1)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(S,{label:e.$t("product.opening_stock_date"),name:"opening_stock_date"},{default:a(()=>[t(K,{value:e.addEditForm.opening_stock_date,"onUpdate:value":o[11]||(o[11]=q=>e.addEditForm.opening_stock_date=q),format:e.appSetting.date_format,valueFormat:"YYYY-MM-DD",style:{width:"100%"}},null,8,["value","format"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk","width"])],64)}const Ni=W(Bi,[["render",Hi]]);const Yi=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:le,LoadingOutlined:Oe,SaveOutlined:ve,Upload:mt,UserInfo:Xe,FormItemHeading:ga,InputLabelPopover:ho,BarcodeOutlined:ma,Barcode:bo,BrandAddButton:bi,CategoryAddButton:Si,UnitAddButton:Oi,TaxAddButton:Ha,WarehouseAddButton:Bt,AddEditVariant:Ni},setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n,rules:v}=be(),{permsArray:h,taxTypes:m,barcodeSymbology:d,appSetting:i,slugify:p,selectedWarehouse:_}=X();ae();const f=T([]),y=T([]),b=T([]),k=T([]),C=T([]),D=T([]),S=T({}),P=T({});ke();const F="brands?limit=10000",O="categories?limit=10000",E="units?limit=10000",U="taxes?limit=10000",K="custom-fields?limit=10000",z="warehouses?limit=10000",M=T(void 0),R=T(null),q=T([]),L="variations?fields=id,xid,parent_id,x_parent_id,name,subVariations{id,xid,parent_id,x_parent_id,name}&limit=10000";ee(()=>{it.suppressDeprecationWarnings=!0;const te=axiosAdmin.get(F),me=axiosAdmin.get(O),_e=axiosAdmin.get(E),de=axiosAdmin.get(U),ye=axiosAdmin.get(K),Fe=axiosAdmin.get(z),st=axiosAdmin.get(L);Promise.all([te,me,_e,de,ye,Fe,st]).then(([Q,$e,Te,Be,ct,pt,re])=>{f.value=Q.data,b.value=Te.data,k.value=Be.data,C.value=ct.data,D.value=pt.data,q.value=re.data,P.value=at(b.value,["xid",e.formData.unit_id]),j($e.data)})});const j=te=>{const me=[],_e=[];te.map(de=>{_e.push({xid:de.xid,x_parent_id:de.x_parent_id,title:de.name,value:de.xid,disabled:!1})}),_e.forEach(de=>{if(!de.x_parent_id)return me.push(de);const ye=_e.findIndex(Fe=>Fe.xid===de.x_parent_id);if(!_e[ye].children)return _e[ye].children=[de];_e[ye].children.push(de)}),y.value=me},Y=te=>te&&te>it().endOf("day"),x=()=>{e.formData.item_code=parseInt(Math.random()*1e10)},B=(te="add-edit")=>{const me={...e.formData,tax_id:e.formData.tax_id==null?"":e.formData.tax_id,custom_fields:S.value,warehouse_id:M.value};c({url:e.url,data:me,successMessage:e.successMessage,success:_e=>{if(te=="add-new")o("addAndNewSuccess",_e.xid),ne();else if(te=="add-continue"){o("addAndContinueSuccess",_e.xid),e.formData.slug=p(e.formData.name),x();var de=[],ye=e.formData.variations;Ce(ye,Fe=>{de.push({...Fe,item_code:parseInt(Math.random()*1e10),unique_id:Math.random().toString(36).slice(2)})}),e.formData.variations=de,R.value.setDirectVariantTableData(de)}else o("addEditSuccess",_e.xid)}})},N=()=>{v.value={},o("closed")},H=()=>{axiosAdmin.get(F).then(te=>{f.value=te.data})},J=()=>{axiosAdmin.get(O).then(te=>{j(te.data)})},se=()=>{axiosAdmin.get(E).then(te=>{b.value=te.data})},ce=()=>{axiosAdmin.get(U).then(te=>{k.value=te.data})},V=()=>{axiosAdmin.get(z).then(te=>{D.value=te.data})},ne=()=>{var te={};Ce(C.value,me=>{if(e.addEditType=="add"||e.formData.custom_fields.length==0)te[me.name]="";else{var _e=at(e.formData.custom_fields,["field_name",me.name]);te[me.name]=_e===void 0?"":_e.field_value}}),S.value={...te},P.value=at(b.value,["xid",e.formData.unit_id]),M.value=e.addEditType=="add"?_.value.xid:e.data.warehouse&&e.data.warehouse.xid?e.data.warehouse.xid:void 0};return ue(()=>e.visible,(te,me)=>{te==!0&&ne()}),{loading:n,rules:v,onClose:N,onSubmit:B,disabledDate:Y,brands:f,categories:y,taxes:k,units:b,warehouses:D,selectedWarehouse:_,slugify:p,generateBarCode:x,drawerWidth:window.innerWidth<=991?"90%":"70%",appSetting:i,customFields:C,customFieldsData:S,taxTypes:m,barcodeSymbology:d,selectedUnit:P,brandAdded:H,categoryAdded:J,unitAdded:se,taxAdded:ce,warehouseAdded:V,permsArray:h,waehouseId:M,variations:q,variableTypeTable:R}}}),Gi={key:0,style:{display:"flex"}},Xi={key:1},Ji={style:{display:"flex"}},Qi={style:{display:"flex"}},Zi={style:{display:"flex"}},xi={style:{display:"flex"}};function eu(e,o,c,n,v,h){const m=l("a-select-option"),d=l("a-select"),i=l("a-form-item"),p=l("a-col"),_=l("a-row"),f=l("Upload"),y=l("WarehouseAddButton"),b=l("a-input"),k=l("a-tree-select"),C=l("CategoryAddButton"),D=l("BrandAddButton"),S=l("UnitAddButton"),P=l("InputLabelPopover"),F=l("a-input-number"),O=l("BarcodeOutlined"),E=l("a-button"),U=l("Barcode"),K=l("form-item-heading"),z=l("TaxAddButton"),M=l("a-date-picker"),R=l("a-alert"),q=l("AddEditVariant"),L=l("a-textarea"),j=l("a-form"),Y=l("SaveOutlined"),x=l("a-drawer");return r(),w(x,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[t(E,{type:"primary",loading:e.loading,onClick:e.onSubmit,style:{"margin-right":"8px"}},{icon:a(()=>[t(Y)]),default:a(()=>[u(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),e.addEditType=="add"?(r(),w(E,{key:0,type:"primary",loading:e.loading,onClick:o[23]||(o[23]=B=>e.onSubmit("add-continue")),style:{"margin-right":"8px"}},{icon:a(()=>[t(Y)]),default:a(()=>[u(" "+s(e.$t("common.save_and_continue")),1)]),_:1},8,["loading"])):A("",!0),t(E,{onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(j,{layout:"vertical"},{default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(i,{label:e.$t("product.product_type"),name:"product_type",help:e.rules.product_type?e.rules.product_type.message:null,validateStatus:e.rules.product_type?"error":null,class:"required"},{default:a(()=>[t(d,{value:e.formData.product_type,"onUpdate:value":o[0]||(o[0]=B=>e.formData.product_type=B),style:{width:"100%"},disabled:e.addEditType=="edit"},{default:a(()=>[t(m,{value:"single"},{default:a(()=>[u(s(e.$t("variations.single_type_product")),1)]),_:1}),t(m,{value:"variable"},{default:a(()=>[u(s(e.$t("variations.variant_type_product")),1)]),_:1})]),_:1},8,["value","disabled"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(i,{label:e.$t("product.image"),name:"image",help:e.rules.image?e.rules.image.message:null,validateStatus:e.rules.image?"error":null},{default:a(()=>[t(f,{formData:e.formData,folder:"product",onOnFileUploaded:o[1]||(o[1]=B=>{e.formData.image=B.file,e.formData.image_url=B.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1}),t(p,{xs:24,sm:24,md:16,lg:16},{default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(i,{name:"warehouse_id",help:e.rules.warehouse_id?e.rules.warehouse_id.message:null,validateStatus:e.rules.warehouse_id?"error":null,class:"required"},{label:a(()=>[u(s(e.$t("warehouse.warehouse")),1)]),default:a(()=>[e.permsArray.includes("admin")?(r(),$("span",Gi,[t(d,{value:e.waehouseId,"onUpdate:value":o[2]||(o[2]=B=>e.waehouseId=B),placeholder:e.$t("common.select_default_text",[e.$t("warehouse.warehouse")])},{default:a(()=>[(r(!0),$(I,null,G(e.warehouses,B=>(r(),w(m,{key:B.xid,value:B.xid},{default:a(()=>[u(s(B.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),t(y,{onOnAddSuccess:e.warehouseAdded},null,8,["onOnAddSuccess"])])):(r(),$("span",Xi,[t(d,{value:e.selectedWarehouse.xid,placeholder:e.$t("common.select_default_text",[e.$t("warehouse.warehouse")]),disabled:""},{default:a(()=>[t(m,{value:e.selectedWarehouse.xid},{default:a(()=>[u(s(e.selectedWarehouse.name),1)]),_:1},8,["value"])]),_:1},8,["value","placeholder"])]))]),_:1},8,["help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("product.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(b,{value:e.formData.name,"onUpdate:value":o[3]||(o[3]=B=>e.formData.name=B),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.name")]),onKeyup:o[4]||(o[4]=B=>e.formData.slug=e.slugify(B.target.value))},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("product.slug"),name:"slug",help:e.rules.slug?e.rules.slug.message:null,validateStatus:e.rules.slug?"error":null,class:"required"},{default:a(()=>[t(b,{value:e.formData.slug,"onUpdate:value":o[5]||(o[5]=B=>e.formData.slug=B),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.slug")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("product.category"),name:"category_id",help:e.rules.category_id?e.rules.category_id.message:null,validateStatus:e.rules.category_id?"error":null,class:"required"},{default:a(()=>[g("span",Ji,[(r(),w(k,{key:"categories_total"+e.categories.length,value:e.formData.category_id,"onUpdate:value":o[6]||(o[6]=B=>e.formData.category_id=B),"show-search":"",style:{width:"100%"},"dropdown-style":{maxHeight:"250px",overflow:"auto"},placeholder:e.$t("common.select_default_text",[e.$t("product.category")]),treeData:e.categories,"allow-clear":"","tree-default-expand-all":""},null,8,["value","placeholder","treeData"])),t(C,{onOnAddSuccess:e.categoryAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("product.brand"),name:"brand_id",help:e.rules.brand_id?e.rules.brand_id.message:null,validateStatus:e.rules.brand_id?"error":null},{default:a(()=>[g("span",Qi,[t(d,{value:e.formData.brand_id,"onUpdate:value":o[7]||(o[7]=B=>e.formData.brand_id=B),placeholder:e.$t("common.select_default_text",[e.$t("product.brand")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(e.brands,B=>(r(),w(m,{key:B.xid,title:B.name,value:B.xid},{default:a(()=>[u(s(B.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"]),t(D,{onOnAddSuccess:e.brandAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:e.formData.product_type=="single"?12:24,lg:e.formData.product_type=="single"?12:24},{default:a(()=>[t(i,{label:e.$t("product.unit"),name:"unit_id",help:e.rules.unit_id?e.rules.unit_id.message:null,validateStatus:e.rules.unit_id?"error":null,class:"required"},{default:a(()=>[g("span",Zi,[t(d,{value:e.formData.unit_id,"onUpdate:value":o[8]||(o[8]=B=>e.formData.unit_id=B),placeholder:e.$t("common.select_default_text",[e.$t("product.unit")]),allowClear:!0,onChange:o[9]||(o[9]=(B,N)=>e.selectedUnit=N)},{default:a(()=>[(r(!0),$(I,null,G(e.units,B=>(r(),w(m,{key:B.xid,value:B.xid,short_name:B.short_name},{default:a(()=>[u(s(B.name)+" ("+s(B.short_name)+") ",1)]),_:2},1032,["value","short_name"]))),128))]),_:1},8,["value","placeholder"]),t(S,{onOnAddSuccess:e.unitAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["md","lg"]),e.formData.product_type=="single"?(r(),w(p,{key:0,xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{name:"stock_quantitiy_alert",help:e.rules.stock_quantitiy_alert?e.rules.stock_quantitiy_alert.message:null,validateStatus:e.rules.stock_quantitiy_alert?"error":null},{label:a(()=>[t(P,{label:e.$t("product.quantitiy_alert"),content:e.$t("popover.quantitiy_alert")},null,8,["label","content"])]),default:a(()=>[t(F,{value:e.formData.stock_quantitiy_alert,"onUpdate:value":o[10]||(o[10]=B=>e.formData.stock_quantitiy_alert=B),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.quantitiy_alert")]),min:"0",style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["help","validateStatus"])]),_:1})):A("",!0)]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(i,{label:e.$t("product.barcode_symbology"),name:"barcode_symbology",help:e.rules.barcode_symbology?e.rules.barcode_symbology.message:null,validateStatus:e.rules.barcode_symbology?"error":null,class:"required"},{default:a(()=>[t(d,{value:e.formData.barcode_symbology,"onUpdate:value":o[11]||(o[11]=B=>e.formData.barcode_symbology=B),placeholder:e.$t("common.select_default_text",[e.$t("product.barcode_symbology")])},{default:a(()=>[(r(!0),$(I,null,G(e.barcodeSymbology,B=>(r(),w(m,{key:B.key,value:B.value},{default:a(()=>[u(s(B.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:16,lg:16},{default:a(()=>[t(i,{label:e.$t("product.item_code"),name:"item_code",help:e.rules.item_code?e.rules.item_code.message:null,validateStatus:e.rules.item_code?"error":null,class:"required"},{default:a(()=>[t(b,{value:e.formData.item_code,"onUpdate:value":o[12]||(o[12]=B=>e.formData.item_code=B),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.item_code")])},{addonAfter:a(()=>[e.formData.item_code==""?(r(),w(E,{key:0,type:"text",size:"small",onClick:e.generateBarCode},{icon:a(()=>[t(O)]),default:a(()=>[u(" "+s(e.$t("product.generate_barcode")),1)]),_:1},8,["onClick"])):(r(),w(U,{key:1,itemCode:e.formData.item_code,barcodeSymbology:e.formData.barcode_symbology},null,8,["itemCode","barcodeSymbology"]))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1}),t(K,null,{default:a(()=>[u(s(e.formData.product_type=="single"?e.$t("product.price_tax"):e.$t("product.variant_details")),1)]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(i,{label:e.$t("product.tax"),name:"tax_id",help:e.rules.tax_id?e.rules.tax_id.message:null,validateStatus:e.rules.tax_id?"error":null},{default:a(()=>[g("span",xi,[t(d,{value:e.formData.tax_id,"onUpdate:value":o[13]||(o[13]=B=>e.formData.tax_id=B),placeholder:e.$t("common.select_default_text",[e.$t("product.tax")]),allowClear:!0},{default:a(()=>[(r(!0),$(I,null,G(e.taxes,B=>(r(),w(m,{key:B.xid,value:B.xid},{default:a(()=>[u(s(B.name)+" ("+s(B.rate)+"%) ",1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),t(z,{onOnAddSuccess:e.taxAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1}),e.formData.product_type=="single"?(r(),w(p,{key:0,xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(i,{label:e.$t("product.opening_stock"),name:"opening_stock",help:e.rules.opening_stock?e.rules.opening_stock.message:null,validateStatus:e.rules.opening_stock?"error":null},{default:a(()=>[t(b,{value:e.formData.opening_stock,"onUpdate:value":o[14]||(o[14]=B=>e.formData.opening_stock=B),placeholder:"0"},{addonAfter:a(()=>[u(s(e.selectedUnit&&e.selectedUnit.short_name?e.selectedUnit.short_name:""),1)]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})):A("",!0),e.formData.product_type=="single"?(r(),w(p,{key:1,xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(i,{label:e.$t("product.opening_stock_date"),name:"opening_stock_date",help:e.rules.opening_stock_date?e.rules.opening_stock_date.message:null,validateStatus:e.rules.opening_stock_date?"error":null},{default:a(()=>[t(M,{value:e.formData.opening_stock_date,"onUpdate:value":o[15]||(o[15]=B=>e.formData.opening_stock_date=B),format:e.appSetting.date_format,valueFormat:"YYYY-MM-DD",style:{width:"100%"}},null,8,["value","format"])]),_:1},8,["label","help","validateStatus"])]),_:1})):A("",!0)]),_:1}),e.formData.product_type=="single"?(r(),w(_,{key:0,gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(i,{label:e.$t("product.purchase_price"),name:"purchase_price",help:e.rules.purchase_price?e.rules.purchase_price.message:null,validateStatus:e.rules.purchase_price?"error":null,class:"required"},{default:a(()=>[t(F,{value:e.formData.purchase_price,"onUpdate:value":o[17]||(o[17]=B=>e.formData.purchase_price=B),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.purchase_price")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[u(s(e.appSetting.currency.symbol),1)]),addonAfter:a(()=>[t(d,{value:e.formData.purchase_tax_type,"onUpdate:value":o[16]||(o[16]=B=>e.formData.purchase_tax_type=B),style:{width:"120px"}},{default:a(()=>[t(m,{value:"inclusive"},{default:a(()=>[u(s(e.$t("common.with_tax")),1)]),_:1}),t(m,{value:"exclusive"},{default:a(()=>[u(s(e.$t("common.without_tax")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(i,{label:e.$t("product.sales_price"),name:"sales_price",help:e.rules.sales_price?e.rules.sales_price.message:null,validateStatus:e.rules.sales_price?"error":null,class:"required"},{default:a(()=>[t(F,{value:e.formData.sales_price,"onUpdate:value":o[19]||(o[19]=B=>e.formData.sales_price=B),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.sales_price")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[u(s(e.appSetting.currency.symbol),1)]),addonAfter:a(()=>[t(d,{value:e.formData.sales_tax_type,"onUpdate:value":o[18]||(o[18]=B=>e.formData.sales_tax_type=B),style:{width:"120px"}},{default:a(()=>[t(m,{value:"inclusive"},{default:a(()=>[u(s(e.$t("common.with_tax")),1)]),_:1}),t(m,{value:"exclusive"},{default:a(()=>[u(s(e.$t("common.without_tax")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(i,{label:e.$t("product.mrp"),name:"mrp",help:e.rules.mrp?e.rules.mrp.message:null,validateStatus:e.rules.mrp?"error":null},{default:a(()=>[t(F,{value:e.formData.mrp,"onUpdate:value":o[20]||(o[20]=B=>e.formData.mrp=B),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.mrp")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[u(s(e.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),e.formData.product_type=="variable"?(r(),$(I,{key:1},[t(R,{message:e.$t("variations.add_variation_message"),type:"info","show-icon":"",class:"mb-20"},null,8,["message"]),t(q,{ref:"variableTypeTable",showTable:e.formData.product_type!="single",formData:e.formData,variations:e.variations,selectedUnit:e.selectedUnit,onVariant_added:o[21]||(o[21]=B=>e.formData.variations=B)},null,8,["showTable","formData","variations","selectedUnit"])],64)):A("",!0),t(K,null,{default:a(()=>[u(s(e.$t("product.custom_fields")),1)]),_:1}),t(_,{gutter:16},{default:a(()=>[(r(!0),$(I,null,G(e.customFields,B=>(r(),w(p,{xs:24,sm:24,md:6,lg:6,key:B.xid},{default:a(()=>[t(i,{label:B.name,name:B.name},{default:a(()=>[t(b,{value:e.customFieldsData[B.name],"onUpdate:value":N=>e.customFieldsData[B.name]=N,placeholder:B.name},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["label","name"])]),_:2},1024))),128))]),_:1}),t(_,null,{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(i,{label:e.$t("product.description"),name:"description",help:e.rules.description?e.rules.description.message:null,validateStatus:e.rules.description?"error":null},{default:a(()=>[t(L,{value:e.formData.description,"onUpdate:value":o[22]||(o[22]=B=>e.formData.description=B),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.description")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const $o=W(Yi,[["render",eu]]),Do=()=>{const{t:e}=ae(),o=["product_id"],c=["product_id"],n=[{title:e("stock.order_date"),dataIndex:"order_date"},{title:e("stock.order_type"),dataIndex:"order_type"},{title:e("product.quantity"),dataIndex:"quantity"},{title:e("product.unit_price"),dataIndex:"single_unit_price"},{title:e("product.discount"),dataIndex:"total_discount"},{title:e("product.tax"),dataIndex:"total_tax"},{title:e("product.subtotal"),dataIndex:"subtotal"}],v=[{title:e("common.date"),dataIndex:"created_at"},{title:e("stock.order_type"),dataIndex:"order_type"},{title:e("product.quantity"),dataIndex:"quantity"},{title:e("product.stocks"),dataIndex:"stock_type"},{title:e("stock.remarks"),dataIndex:"action_type"}];return{productOrderColumns:n,stockHistoryColumns:v,stockHistoryHashableColumns:o,orderItemsHashableColumns:c}},tu=Z({props:["product"],setup(e){const{stockHistoryColumns:o,stockHistoryHashableColumns:c}=Do(),{formatDate:n,formatDateTime:v,formatAmountCurrency:h,getOrderTypeFromstring:m}=X(),d=Ge();return ee(()=>{d.tableUrl.value={url:"stock-history?fields=id,xid,created_at,order_type,quantity,stock_type,action_type",filters:{product_id:e.product.xid}},d.hashable.value=[...c],d.fetch({page:1})}),{stockHistoryColumns:o,...d,formatDate:n,formatDateTime:v,formatAmountCurrency:h,getOrderTypeFromstring:m}}}),au={key:0,class:"table-responsive"};function nu(e,o,c,n,v,h){const m=l("a-table"),d=l("a-col"),i=l("a-row");return r(),w(i,null,{default:a(()=>[t(d,{span:24},{default:a(()=>[e.table.loading?A("",!0):(r(),$("div",au,[t(m,{columns:e.stockHistoryColumns,"row-key":p=>p.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange},{bodyCell:a(({column:p,record:_})=>[p.dataIndex==="created_at"?(r(),$(I,{key:0},[u(s(e.formatDateTime(_.created_at)),1)],64)):A("",!0),p.dataIndex==="order_type"?(r(),$(I,{key:1},[u(s(e.getOrderTypeFromstring(_.order_type)),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])]))]),_:1})]),_:1})}const ou=W(tu,[["render",nu]]),lu=Z({props:["product"],setup(e){const{productOrderColumns:o,orderItemsHashableColumns:c}=Do(),{formatDate:n,formatDateTime:v,formatAmountCurrency:h,getOrderTypeFromstring:m}=X(),d=Ge();return ee(()=>{d.tableUrl.value={url:"order-items?fields=id,xid,quantity,single_unit_price,unit_price,total_discount,discount_rate,total_tax,tax_rate,subtotal,order_id,x_order_id,order{id,xid,order_type,order_date},unit_id,x_unit_id,unit{id,xid,short_name},product_id,x_product_id,product{id,xid,unit_id,x_unit_id},product:unit{id,xid,short_name}",filters:{product_id:e.product.xid}},d.hashable.value=[...c],d.table.sorter={field:"orders.order_date",order:"asc"},d.fetch({page:1})}),{productOrderColumns:o,orderItemsHashableColumns:c,...d,formatDate:n,formatDateTime:v,formatAmountCurrency:h,getOrderTypeFromstring:m}}}),su={key:0,class:"table-responsive"};function ru(e,o,c,n,v,h){const m=l("a-table"),d=l("a-col"),i=l("a-row");return r(),w(i,null,{default:a(()=>[t(d,{span:24},{default:a(()=>[e.table.loading?A("",!0):(r(),$("div",su,[t(m,{columns:e.productOrderColumns,"row-key":p=>p.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange},{bodyCell:a(({column:p,record:_})=>[p.dataIndex==="order_type"?(r(),$(I,{key:0},[u(s(e.getOrderTypeFromstring(_.order.order_type)),1)],64)):A("",!0),p.dataIndex==="order_date"?(r(),$(I,{key:1},[u(s(e.formatDateTime(_.order.order_date)),1)],64)):A("",!0),p.dataIndex==="quantity"?(r(),$(I,{key:2},[u(s(_.quantity)+" "+s(_.product&&_.product.unit&&_.product.unit.short_name?_.product.unit.short_name:""),1)],64)):A("",!0),p.dataIndex==="single_unit_price"?(r(),$(I,{key:3},[u(s(e.formatAmountCurrency(_.single_unit_price)),1)],64)):A("",!0),p.dataIndex==="total_discount"?(r(),$(I,{key:4},[u(s(e.formatAmountCurrency(_.total_discount))+" ("+s(_.discount_rate)+"%) ",1)],64)):A("",!0),p.dataIndex==="total_tax"?(r(),$(I,{key:5},[u(s(e.formatAmountCurrency(_.total_tax))+" ("+s(_.tax_rate)+"%) ",1)],64)):A("",!0),p.dataIndex==="subtotal"?(r(),$(I,{key:6},[u(s(e.formatAmountCurrency(_.subtotal)),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])]))]),_:1})]),_:1})}const du=W(lu,[["render",ru]]),iu=Z({props:["product"],components:{StockHistory:ou,ProductOrderItems:du},setup(){return{activeKey:T("product_order_items")}}});function uu(e,o,c,n,v,h){const m=l("ProductOrderItems"),d=l("a-tab-pane"),i=l("StockHistory"),p=l("a-tabs");return r(),w(p,{activeKey:e.activeKey,"onUpdate:activeKey":o[0]||(o[0]=_=>e.activeKey=_)},{default:a(()=>[t(d,{key:"product_order_items",tab:e.$t("product.product_orders")},{default:a(()=>[t(m,{product:e.product},null,8,["product"])]),_:1},8,["tab"]),t(d,{key:"stock_history",tab:e.$t("product.stock_history")},{default:a(()=>[t(i,{product:e.product},null,8,["product"])]),_:1},8,["tab"])]),_:1},8,["activeKey"])}const mu=W(iu,[["render",uu]]);const cu=Z({props:["product","visible"],emits:["closed"],components:{ProductDetails:mu},setup(e,{emit:o}){const{formatAmountCurrency:c}=X(),{t:n}=ae(),v=T([{title:n("variations.variation"),dataIndex:"variant_id"},{title:n("product.item_code"),dataIndex:"item_code"},{title:n("product.purchase_price"),dataIndex:"purchase_price"},{title:n("product.sales_price"),dataIndex:"sales_price"},{title:n("product.mrp"),dataIndex:"mrp"}]);return{formatAmountCurrency:c,onClose:()=>{o("closed")},variantTableColumns:v,drawerWidth:window.innerWidth<=991?"90%":"60%"}}}),pu={class:"product-details"},_u=["innerHTML"];function fu(e,o,c,n,v,h){const m=l("a-image"),d=l("a-col"),i=l("a-alert"),p=l("a-row"),_=l("a-descriptions-item"),f=l("a-descriptions"),y=l("a-divider"),b=l("a-table"),k=l("ProductDetails"),C=l("a-drawer");return r(),w(C,{title:e.product.name,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},maskClosable:!1,onClose:e.onClose,destroyOnClose:!0},{default:a(()=>[g("div",pu,[t(p,{gutter:[16,16]},{default:a(()=>[e.product.product_type=="single"?(r(),w(d,{key:0,xs:24,sm:24,md:4,lg:4},{default:a(()=>[t(m,{src:e.product.image_url},null,8,["src"])]),_:1})):A("",!0),t(d,{xs:24,sm:24,md:e.product.product_type=="single"?20:24,lg:e.product.product_type=="single"?20:24},{default:a(()=>[e.product.details&&e.product.details.status=="out_of_stock"?(r(),w(p,{key:0,class:"mb-10 mt-10"},{default:a(()=>[t(d,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(i,{type:"error"},{message:a(()=>[g("span",{innerHTML:e.$t("messages.product_out_of_stock",[e.product.details.current_stock,e.product.details.stock_quantitiy_alert])},null,8,_u)]),_:1})]),_:1})]),_:1})):A("",!0),t(p,{class:"mb-10 mt-10"},{default:a(()=>[t(d,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(f,{title:e.$t("product.details"),layout:"vertical",contentStyle:{fontWeight:500,marginBottom:"20px"}},{default:a(()=>[t(_,{label:e.$t("product.name")},{default:a(()=>[u(s(e.product.name),1)]),_:1},8,["label"]),e.product.product_type=="single"?(r(),w(_,{key:0,label:e.$t("product.item_code")},{default:a(()=>[u(s(e.product.item_code),1)]),_:1},8,["label"])):A("",!0),t(_,{label:e.$t("product.category")},{default:a(()=>[u(s(e.product.category&&e.product.category.xid?e.product.category.name:"-"),1)]),_:1},8,["label"]),t(_,{label:e.$t("product.brand")},{default:a(()=>[u(s(e.product.brand&&e.product.brand.xid?e.product.brand.name:"-"),1)]),_:1},8,["label"]),e.product.product_type=="single"?(r(),$(I,{key:1},[t(_,{label:e.$t("product.current_stock")},{default:a(()=>[u(s(e.product.details&&e.product.details.current_stock?`${e.product.details.current_stock} ${e.product.unit.short_name}`:"-"),1)]),_:1},8,["label"]),t(_,{label:e.$t("product.quantitiy_alert")},{default:a(()=>[u(s(e.product.details&&e.product.details.stock_quantitiy_alert?`${e.product.details.stock_quantitiy_alert} ${e.product.unit.short_name}`:"-"),1)]),_:1},8,["label"]),t(_,{label:e.$t("product.sales_price")},{default:a(()=>[u(s(e.product.details&&e.product.details.sales_price?e.formatAmountCurrency(e.product.details.sales_price):"-")+" "+s(e.product.details&&e.product.details.sales_tax_type=="inclusive"?` (${e.$t("common.with_tax")})`:` (${e.$t("common.without_tax")})`),1)]),_:1},8,["label"]),t(_,{label:e.$t("product.purchase_price")},{default:a(()=>[u(s(e.product.details&&e.product.details.purchase_price?e.formatAmountCurrency(e.product.details.purchase_price):"-")+" "+s(e.product.details&&e.product.details.purchase_tax_type=="inclusive"?` (${e.$t("common.with_tax")})`:` (${e.$t("common.without_tax")})`),1)]),_:1},8,["label"]),t(_,{label:e.$t("product.mrp")},{default:a(()=>[u(s(e.product.details&&e.product.details.mrp?e.formatAmountCurrency(e.product.details.mrp):"-"),1)]),_:1},8,["label"]),t(_,{label:e.$t("tax.rate")},{default:a(()=>[u(s(e.product.details&&e.product.details.tax&&e.product.details.tax.rate?`${e.product.details.tax.rate}%`:"-"),1)]),_:1},8,["label"]),t(_,{label:e.$t("product.opening_stock")},{default:a(()=>[u(s(e.product.details&&e.product.details.opening_stock?`${e.product.details.opening_stock} ${e.product.unit.short_name}`:"-"),1)]),_:1},8,["label"])],64)):A("",!0)]),_:1},8,["title"])]),_:1})]),_:1})]),_:1},8,["md","lg"])]),_:1})]),e.product.product_type=="variable"?(r(),$(I,{key:0},[t(y,{orientation:"left"},{default:a(()=>[u(s(e.$t("menu.variations")),1)]),_:1}),t(b,{dataSource:e.product.variations,columns:e.variantTableColumns,"row-key":D=>D.xid,pagination:!1,size:"middle",class:"mb-20"},{bodyCell:a(({column:D,text:S,record:P})=>[D.dataIndex==="variant_id"?(r(),$(I,{key:0},[u(s(P.name),1)],64)):A("",!0),D.dataIndex==="purchase_price"?(r(),$(I,{key:1},[u(s(e.formatAmountCurrency(P.details.purchase_price)),1)],64)):A("",!0),D.dataIndex==="sales_price"?(r(),$(I,{key:2},[u(s(e.formatAmountCurrency(P.details.sales_price)),1)],64)):A("",!0),D.dataIndex==="mrp"?(r(),$(I,{key:3},[u(s(e.formatAmountCurrency(P.details.mrp)),1)],64)):A("",!0)]),_:1},8,["dataSource","columns","row-key"])],64)):(r(),w(k,{key:1,product:e.product},null,8,["product"]))]),_:1},8,["title","width","open","onClose"])}const gu=W(cu,[["render",fu]]),yu=Z({props:["moduleName"],setup(e){const{visibleSubscriptionModules:o}=X();return{visibleSubscriptionModules:o}}});function hu(e,o,c,n,v,h){return e.visibleSubscriptionModules&&e.visibleSubscriptionModules.includes(e.moduleName)?ie(e.$slots,"default",{key:0}):A("",!0)}const Ao=W(yu,[["render",hu]]),vu=Z({props:["moduleName"],components:{FormOutlined:Xn},setup(e){const{visibleSubscriptionModules:o,appSetting:c,user:n}=X();return{visibleSubscriptionModules:o,appSetting:c,user:n}}});function bu(e,o,c,n,v,h){const m=l("FormOutlined"),d=l("a-button"),i=l("a-alert"),p=l("a-col"),_=l("a-row");return e.visibleSubscriptionModules&&!e.visibleSubscriptionModules.includes(e.moduleName)&&e.appSetting.x_admin_id==e.user.xid?(r(),w(_,{key:0,gutter:[15,15],class:"mb-20"},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(i,{message:e.$t("subscription_plans.limit_exceed"),description:e.$t("subscription_plans.upgrade_your_plan"),type:"error","show-icon":"",onClose:o[0]||(o[0]=()=>e.$router.push({name:"admin.subscription.change_plan"}))},{closeText:a(()=>[t(d,{type:"primary"},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("subscription_plans.upgrade_plan")),1)]),_:1})]),_:1},8,["message","description"])]),_:1})]),_:1})):A("",!0)}const ku=W(vu,[["render",bu]]);const wu={components:{EyeOutlined:tt,PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,ClusterOutlined:bl,AppstoreAddOutlined:Jn,AddEdit:$o,ProductView:gu,ProductInfo:li,AdminPageHeader:ge,ImportProducts:Lt,SubscriptionModuleVisibility:Ao,SubscriptionModuleVisibilityMessage:ku},setup(){const{addEditUrl:e,initData:o,columns:c,variantColumns:n,filterableColumns:v,hashableColumns:h,multiDimensalObjectColumns:m}=yo(),d=Ve(),{appSetting:i,permsArray:p,formatAmountCurrency:_,getRecursiveCategories:f,filterTreeNode:y,selectedWarehouse:b}=X(),k=T({category_id:void 0,brand_id:void 0}),C=window.config.product_sample_file,D=T([]),S=T([]),P=T("single");ee(()=>{O(),F(),d.crudUrl.value=e,d.langKey.value="product",d.initData.value={...o},d.formData.value={...o},d.hashableColumns.value=[...h],d.multiDimensalObjectColumns.value={...m}});const F=()=>{var z="products?fields=id,xid,name,slug,product_type,barcode_symbology,item_code,image,image_url,category_id,x_category_id,category{id,xid,name},brand_id,x_brand_id,brand{id,xid,name},unit_id,x_unit_id,unit{id,xid,name,short_name},description,details{stock_quantitiy_alert,opening_stock,opening_stock_date,wholesale_price,wholesale_quantity,mrp,purchase_price,sales_price,tax_id,x_tax_id,purchase_tax_type,sales_tax_type,current_stock,warehouse_id,x_warehouse_id,status},details:tax{id,xid,name,rate},details:warehouse{id,xid,name},customFields{id,xid,field_name,field_value},warehouse_id,x_warehouse_id,warehouse{id,xid}";P.value=="variable"&&(z="products?fields=id,xid,name,product_type,slug,barcode_symbology,item_code,image,image_url,category_id,x_category_id,category{id,xid,name},brand_id,x_brand_id,brand{id,xid,name},unit_id,x_unit_id,unit{id,xid,name,short_name},description,details{stock_quantitiy_alert,opening_stock,opening_stock_date,wholesale_price,wholesale_quantity,mrp,purchase_price,sales_price,tax_id,x_tax_id,purchase_tax_type,sales_tax_type,current_stock,warehouse_id,x_warehouse_id,status},details:tax{id,xid,name,rate},details:warehouse{id,xid,name},customFields{id,xid,field_name,field_value},warehouse_id,x_warehouse_id,warehouse{id,xid},parent_id,x_parent_id,variations.limit(10000).offset(0){id,xid,name,slug,item_code,product_type,barcode_symbology,item_code,image,image_url,category_id,x_category_id,unit_id,x_unit_id,brand_id,x_brand_id},variations:productVariations{id,xid,product_id,x_product_id,variant_id,x_variant_id,variant_value_id,x_variant_value_id},variations:category{id,xid,name},variations:brand{id,xid,name},variations:unit{id,xid,name,short_name},variations:productVariations:variation{id,xid,name},variations:productVariations:variationType{id,xid,name},variations:details{stock_quantitiy_alert,opening_stock,opening_stock_date,wholesale_price,wholesale_quantity,mrp,purchase_price,sales_price,tax_id,x_tax_id,purchase_tax_type,sales_tax_type,current_stock,warehouse_id,x_warehouse_id,status},variations:details:tax{id,xid,name,rate},variations:details:warehouse{id,xid,name}"),d.tableUrl.value={url:z,filters:k,extraFilters:{product_type:P.value}},d.table.filterableColumns=v,d.fetch({page:1})},O=()=>{const z=axiosAdmin.get("categories?limit=10000"),M=axiosAdmin.get("brands?limit=10000");Promise.all([z,M]).then(([R,q])=>{D.value=f(R),S.value=q.data})},E=z=>{var M="";const R=on(z.variations,L=>L.details.sales_price),q=ln(z.variations,L=>L.details.sales_price);return R&&R.details.sales_price&&(M+=_(R.details.sales_price)),q&&q.details.sales_price&&(M+=" - "+_(q.details.sales_price)),M},U=z=>{var M="";const R=on(z.variations,L=>L.details.purchase_price),q=ln(z.variations,L=>L.details.purchase_price);return R&&R.details.sales_price&&(M+=_(R.details.purchase_price)),q&&q.details.sales_price&&(M+=" - "+_(q.details.purchase_price)),M},K=z=>Ma(z.variations,M=>M.details.current_stock);return ue(b,(z,M)=>{F()}),{columns:c,variantColumns:n,appSetting:i,...d,permsArray:p,formatAmountCurrency:_,categories:D,brands:S,filters:k,filterTreeNode:y,setUrlData:F,sampleFileUrl:C,productType:P,getVariableProductSalePrice:E,getVariableProductPurchasePrice:U,getVariableProductStockSum:K}}},Cu={class:"table-responsive"},Su={key:0},$u={key:1},Du={key:0},Au={key:1},Tu={key:0},Eu={key:1};function Ou(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("PlusOutlined"),y=l("a-button"),b=l("SubscriptionModuleVisibility"),k=l("ImportProducts"),C=l("DeleteOutlined"),D=l("a-space"),S=l("a-col"),P=l("a-input-search"),F=l("a-select-option"),O=l("a-select"),E=l("a-tree-select"),U=l("a-row"),K=l("admin-page-filters"),z=l("AddEdit"),M=l("ProductView"),R=l("SubscriptionModuleVisibilityMessage"),q=l("AppstoreAddOutlined"),L=l("a-tab-pane"),j=l("ClusterOutlined"),Y=l("a-tabs"),x=l("a-badge"),B=l("a-popover"),N=l("a-avatar"),H=l("EyeOutlined"),J=l("EditOutlined"),se=l("a-table"),ce=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.products"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.product_manager")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.products")),1)]),_:1})]),_:1})]),_:1}),t(K,null,{default:a(()=>[t(U,{gutter:[16,16]},{default:a(()=>[t(S,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(D,null,{default:a(()=>[n.permsArray.includes("products_create")||n.permsArray.includes("admin")?(r(),$(I,{key:0},[t(b,{moduleName:"product"},{default:a(()=>[t(y,{type:"primary",onClick:o[0]||(o[0]=()=>{e.formData={...e.formData,product_type:n.productType},e.addItem()})},{default:a(()=>[t(f),u(" "+s(e.$t("product.add")),1)]),_:1})]),_:1}),t(k,{pageTitle:e.$t("product.import_products"),sampleFileUrl:n.sampleFileUrl,importUrl:"products/import",onOnUploadSuccess:n.setUrlData},null,8,["pageTitle","sampleFileUrl","onOnUploadSuccess"])],64)):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("products_delete")||n.permsArray.includes("admin"))?(r(),w(y,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(C)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(S,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(U,{gutter:[16,16],justify:"end"},{default:a(()=>[t(S,{xs:24,sm:24,md:8,lg:8,xl:6},{default:a(()=>[t(P,{value:e.table.searchString,"onUpdate:value":o[1]||(o[1]=V=>e.table.searchString=V),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,style:{width:"100%"},loading:e.table.filterLoading,placeholder:e.$t("common.search")},null,8,["value","onChange","onSearch","loading","placeholder"])]),_:1}),t(S,{xs:24,sm:24,md:8,lg:8,xl:6},{default:a(()=>[t(O,{value:n.filters.brand_id,"onUpdate:value":o[2]||(o[2]=V=>n.filters.brand_id=V),placeholder:e.$t("common.select_default_text",[e.$t("product.brand")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:n.setUrlData},{default:a(()=>[(r(!0),$(I,null,G(n.brands,V=>(r(),w(F,{key:V.xid,title:V.name,value:V.xid},{default:a(()=>[u(s(V.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),t(S,{xs:24,sm:24,md:8,lg:8,xl:6},{default:a(()=>[t(E,{value:n.filters.category_id,"onUpdate:value":o[3]||(o[3]=V=>n.filters.category_id=V),"show-search":"",style:{width:"100%"},"dropdown-style":{maxHeight:"250px",overflow:"auto"},placeholder:e.$t("common.select_default_text",[e.$t("category.category")]),"tree-data":n.categories,"allow-clear":"","tree-default-expand-all":"",filterTreeNode:n.filterTreeNode,onChange:n.setUrlData},null,8,["value","placeholder","tree-data","filterTreeNode","onChange"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(ce,null,{default:a(()=>[t(z,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onAddAndNewSuccess:e.addAndNewSuccess,onAddAndContinueSuccess:e.addAndContinueSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onAddAndNewSuccess","onAddAndContinueSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(M,{product:e.viewData,visible:e.detailsVisible,onClosed:e.onCloseDetails},null,8,["product","visible","onClosed"]),t(R,{moduleName:"product"}),t(U,{gutter:16},{default:a(()=>[t(S,{span:24},{default:a(()=>[t(Y,{activeKey:n.productType,"onUpdate:activeKey":o[4]||(o[4]=V=>n.productType=V),onChange:n.setUrlData},{default:a(()=>[t(L,{key:"single"},{tab:a(()=>[g("span",null,[t(q),u(" "+s(e.$t("variations.single_type_product")),1)])]),_:1}),t(L,{key:"variable"},{tab:a(()=>[g("span",null,[t(j),u(" "+s(e.$t("variations.variant_type_product")),1)])]),_:1})]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1}),t(U,null,{default:a(()=>[t(S,{span:24},{default:a(()=>[g("div",Cu,[t(se,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:V=>({disabled:!1,name:V.xid})},columns:n.columns,"row-key":V=>V.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},Qe({bodyCell:a(({column:V,text:ne,record:te})=>[V.dataIndex==="status"&&te&&te.details?(r(),$(I,{key:0},[te.details.status=="out_of_stock"?(r(),w(B,{key:0,placement:"top"},{content:a(()=>[u(s(e.$t("common.out_of_stock")),1)]),default:a(()=>[t(x,{status:"error"})]),_:1})):(r(),w(x,{key:1,status:"success"}))],64)):A("",!0),V.dataIndex==="name"?(r(),w(x,{key:1},{default:a(()=>[t(N,{shape:"square",src:te.image_url},null,8,["src"]),u(" "+s(te.name),1)]),_:2},1024)):A("",!0),V.dataIndex==="warehouse_id"?(r(),$(I,{key:2},[u(s(te.details&&te.details.warehouse&&te.details.warehouse.name?te.details.warehouse.name:"-"),1)],64)):A("",!0),V.dataIndex==="category_id"?(r(),$(I,{key:3},[u(s(te.category?te.category.name:"-"),1)],64)):A("",!0),V.dataIndex==="brand_id"?(r(),$(I,{key:4},[u(s(te.brand?te.brand.name:"-"),1)],64)):A("",!0),V.dataIndex==="sales_price"?(r(),$(I,{key:5},[n.productType=="single"&&te&&te.details?(r(),$("span",Su,s(n.formatAmountCurrency(te.details.sales_price)),1)):n.productType=="variable"?(r(),$("span",$u,s(n.getVariableProductSalePrice(te)),1)):A("",!0)],64)):A("",!0),V.dataIndex==="purchase_price"?(r(),$(I,{key:6},[n.productType=="single"&&te&&te.details?(r(),$("span",Du,s(n.formatAmountCurrency(te.details.purchase_price)),1)):n.productType=="variable"?(r(),$("span",Au,s(n.getVariableProductPurchasePrice(te)),1)):A("",!0)],64)):A("",!0),V.dataIndex==="current_stock"?(r(),$(I,{key:7},[n.productType=="single"&&te&&te.details?(r(),$("span",Tu,s(`${te.details.current_stock} ${te.unit.short_name}`),1)):n.productType=="variable"?(r(),$("span",Eu,s(n.getVariableProductStockSum(te)),1)):A("",!0)],64)):A("",!0),V.dataIndex==="action"?(r(),w(D,{key:8},{default:a(()=>[t(y,{onClick:me=>e.viewItem(te),type:"primary"},{icon:a(()=>[t(H)]),_:1},8,["onClick"]),n.permsArray.includes("products_edit")||n.permsArray.includes("admin")?(r(),w(y,{key:0,type:"primary",onClick:me=>e.editItem(te)},{icon:a(()=>[t(J)]),_:1},8,["onClick"])):A("",!0),n.permsArray.includes("products_delete")||n.permsArray.includes("admin")?(r(),w(y,{key:1,type:"primary",onClick:me=>e.showDeleteConfirm(te.xid)},{icon:a(()=>[t(C)]),_:1},8,["onClick"])):A("",!0)]),_:2},1024)):A("",!0)]),_:2},[n.productType=="variable"?{name:"expandedRowRender",fn:a(V=>[V&&V.record&&V.record.variations?(r(),w(se,{key:0,columns:n.variantColumns,"row-key":ne=>ne.xid,"data-source":V.record.variations,pagination:!1,size:"middle"},{bodyCell:a(({column:ne,text:te,record:me})=>[ne.dataIndex==="name"?(r(),$(I,{key:0},[u(s(me.name),1)],64)):A("",!0),ne.dataIndex==="sales_price"&&me&&me.details?(r(),$(I,{key:1},[u(s(n.formatAmountCurrency(me.details.sales_price)),1)],64)):A("",!0),ne.dataIndex==="purchase_price"&&me&&me.details?(r(),$(I,{key:2},[u(s(n.formatAmountCurrency(me.details.purchase_price)),1)],64)):A("",!0),ne.dataIndex==="current_stock"&&me&&me.details?(r(),$(I,{key:3},[u(s(`${me.details.current_stock} ${V.record.unit.short_name}`),1)],64)):A("",!0),ne.dataIndex==="action"?(r(),w(y,{key:4,onClick:_e=>e.viewItem(me),type:"links"},{icon:a(()=>[t(H)]),_:1},8,["onClick"])):A("",!0)]),_:2},1032,["columns","row-key","data-source"])):A("",!0)]),key:"0"}:void 0]),1032,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Iu=W(wu,[["render",Ou]]),Pu=()=>{const e="variations?fields=id,xid,name,parent_id,x_parent_id,subVariation{id,xid,parent_id,x_parent_id,name}",o="variations",{t:c}=ae(),n=["parent_id"],v={name:"",parent_id:void 0},h=[{title:c("variation.name"),dataIndex:"name"},{title:c("variation.value"),dataIndex:"value"},{title:c("common.action"),dataIndex:"action"}],m=[{key:"name",value:c("variation.name")}];return{url:e,addEditUrl:o,initData:v,columns:h,filterableColumns:m,hashableColumns:n}},Uu=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:le,LoadingOutlined:Oe,SaveOutlined:ve,Upload:mt,MinusSquareOutlined:Yn,FormItemHeading:ga},setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n,rules:v}=be(),{slugify:h}=X(),m=T([{name:"",id:""}]),d=T([]),i=()=>{var k={...e.formData,value:_(),removed_variations:d.value};c({url:e.url,data:k,successMessage:e.successMessage,success:C=>{o("addEditSuccess",C.xid)}})},p=()=>{m.value.push({name:"",id:""})},_=()=>{var k=[];return Ce(m.value,C=>{C.name!=""&&k.push(C)}),k},f=pe(()=>m.value.length==0?!1:Et(m.value,{name:""})||Et(m.value,{name:null})),y=k=>{let C=m.value.indexOf(k);C!==-1&&m.value.splice(C,1),k.id!=""&&d.value.push(k.id)},b=()=>{v.value={},o("closed")};return ue(()=>e.visible,(k,C)=>{e.visible&&(m.value=[],e.addEditType=="edit"&&Ce(e.data.sub_variations,D=>{m.value.push({name:D.name,id:D.xid})}))}),{loading:n,rules:v,onClose:b,onSubmit:i,slugify:h,formFields:m,removeFormField:y,addFormField:p,addFormButtonStatus:f,drawerWidth:window.innerWidth<=991?"90%":"45%"}}}),Fu={key:0,style:{color:"red"}};function Mu(e,o,c,n,v,h){const m=l("a-input"),d=l("a-form-item"),i=l("a-col"),p=l("a-row"),_=l("form-item-heading"),f=l("MinusSquareOutlined"),y=l("PlusOutlined"),b=l("a-button"),k=l("a-form"),C=l("SaveOutlined"),D=l("a-modal");return r(),w(D,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(b,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(C)]),default:a(()=>[u(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(b,{key:"back",onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(k,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("variation.variation_name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(m,{value:e.formData.name,"onUpdate:value":o[0]||(o[0]=S=>e.formData.name=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("variation.variation_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,null,{default:a(()=>[u(s(e.$t("variation.variation_values")),1)]),_:1}),(r(!0),$(I,null,G(e.formFields,(S,P)=>(r(),w(p,{gutter:16,key:S.id,style:{display:"flex","align-items":"center"}},{default:a(()=>[t(i,{xs:24,sm:24,md:23,lg:23},{default:a(()=>[t(d,{label:e.$t("variation.value"),name:"name"},{default:a(()=>[t(m,{value:S.name,"onUpdate:value":F=>S.name=F,placeholder:e.$t("common.placeholder_default_text",[e.$t("variation.value")])},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["label"])]),_:2},1024),e.addEditType=="add"?(r(),w(i,{key:0,span:1,style:{"margin-top":"6px"}},{default:a(()=>[t(f,{onClick:F=>e.removeFormField(S)},null,8,["onClick"])]),_:2},1024)):A("",!0)]),_:2},1024))),128)),e.rules.value?(r(),$("p",Fu,s(e.rules.value.message),1)):A("",!0),t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,null,{default:a(()=>[t(b,{type:"dashed",block:"",onClick:e.addFormField,disabled:e.addFormButtonStatus},{default:a(()=>[t(y),u(" "+s(e.$t("variation.add_new_value")),1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const qu=W(Uu,[["render",Mu]]),Ru={components:{PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,AddEdit:qu,AdminPageHeader:ge},setup(){const{addEditUrl:e,url:o,initData:c,columns:n,filterableColumns:v,hashableColumns:h}=Pu(),m=Ve(),{permsArray:d}=X();return ee(()=>{const i=encodeURIComponent("parent_id eq null");m.tableUrl.value={url:`variations?fields=id,xid,name,parent_id,x_parent_id,subVariations{id,xid,parent_id,x_parent_id,name}&filters=${i}`},m.table.filterableColumns=v,m.fetch({page:1}),m.crudUrl.value=e,m.langKey.value="variation",m.initData.value={...c},m.formData.value={...c},m.hashableColumns.value=[...h]}),{columns:n,...m,filterableColumns:v,permsArray:d}}},Ku={class:"table-responsive"},Vu={key:0},zu={key:0};function Lu(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("PlusOutlined"),y=l("a-button"),b=l("DeleteOutlined"),k=l("a-space"),C=l("a-col"),D=l("a-select-option"),S=l("a-select"),P=l("a-input-search"),F=l("a-input-group"),O=l("a-row"),E=l("admin-page-filters"),U=l("AddEdit"),K=l("EditOutlined"),z=l("a-table"),M=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.variations"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.product_manager")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.variations")),1)]),_:1})]),_:1})]),_:1}),t(E,null,{default:a(()=>[t(O,{gutter:[16,16]},{default:a(()=>[t(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(k,null,{default:a(()=>[n.permsArray.includes("variations_create")||n.permsArray.includes("admin")?(r(),w(y,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(f),u(" "+s(e.$t("variation.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("variations_delete")||n.permsArray.includes("admin"))?(r(),w(y,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(b)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(O,{gutter:[16,16],justify:"end"},{default:a(()=>[t(C,{xs:24,sm:24,md:12,lg:8,xl:8},{default:a(()=>[t(F,{compact:""},{default:a(()=>[t(S,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":o[0]||(o[0]=R=>e.table.searchColumn=R),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),$(I,null,G(n.filterableColumns,R=>(r(),w(D,{key:R.key},{default:a(()=>[u(s(R.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(P,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":o[1]||(o[1]=R=>e.table.searchString=R),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(M,null,{default:a(()=>[t(U,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(O,null,{default:a(()=>[t(C,{span:24},{default:a(()=>[g("div",Ku,[t(z,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:R=>({disabled:!1,name:R.xid})},columns:n.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:R,record:q})=>[R.dataIndex==="name"?(r(),$(I,{key:0},[q.x_parent_id==""?(r(),$("span",Vu,[t(O,{gutter:[16,16],style:{"margin-top":"10px"}},{default:a(()=>[t(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[u(s(q.x_parent_id==""?q.name:""),1)]),_:2},1024)]),_:2},1024)])):A("",!0)],64)):A("",!0),R.dataIndex==="value"?(r(),$(I,{key:1},[q.sub_variations.length>0?(r(),$("ul",zu,[(r(!0),$(I,null,G(q.sub_variations,L=>(r(),$("li",{key:L.name},s(L.name),1))),128))])):A("",!0)],64)):A("",!0),R.dataIndex==="action"?(r(),$(I,{key:2},[n.permsArray.includes("variations_edit")||n.permsArray.includes("admin")?(r(),w(y,{key:0,type:"primary",onClick:L=>e.editItem(q),style:{"margin-left":"4px"}},{icon:a(()=>[t(K)]),_:1},8,["onClick"])):A("",!0),n.permsArray.includes("variations_delete")||n.permsArray.includes("admin")?(r(),w(y,{key:1,type:"primary",onClick:L=>e.showDeleteConfirm(q.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(b)]),_:1},8,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Bu=W(Ru,[["render",Lu]]),Wu=[{path:"/",component:()=>lt(()=>import("./Admin-3be1af1f.js"),["assets/Admin-3be1af1f.js","assets/vendor-4a6eb15a.js"]),children:[{path:"/admin/brands",component:Nd,name:"admin.brands.index",meta:{requireAuth:!0,menuParent:"product_manager",menuKey:e=>"brands",permission:"brands_view"}},{path:"/admin/categories",component:xd,name:"admin.categories.index",meta:{requireAuth:!0,menuParent:"product_manager",menuKey:e=>"categories",permission:"categories_view"}},{path:"/admin/products",component:Iu,name:"admin.products.index",meta:{requireAuth:!0,menuParent:"product_manager",menuKey:e=>"products",permission:"products_view"}},{path:"/admin/variations",component:Bu,name:"admin.variations.index",meta:{requireAuth:!0,menuParent:"product_manager",menuKey:e=>"variations",permission:"products_view"}}]}],To=()=>{const{formatAmount:e,orderType:o,orderPageObject:c,selectedWarehouse:n,dayjs:v,appSetting:h}=X(),{t:m}=ae(),d=Ze(),i=T([]),p=T([]),_=T([]),f=Se({orderSearchTerm:void 0,productFetching:!1,products:[]}),y=T({order_type:d.params.type,invoice_number:"",order_date:v().utc().format("YYYY-MM-DDTHH:mm:ssZ"),warehouse_id:o.value=="stock-transfers"?void 0:n.value.xid,user_id:void 0,terms_condition:n.value.terms_condition,notes:"",order_status:void 0,tax_id:void 0,tax_rate:0,tax_amount:0,discount:0,shipping:0,subtotal:0}),b=T([]),k=T({subtotal:0,tax:0}),C=T(!1),D=T(!1),S=T({}),P=T([]),F=T(""),O=wt(N=>{E(N)},300),E=N=>{if(f.products=[],N!=""){f.productFetching=!0;let H="search-product";axiosAdmin.post(H,{order_type:c.value.type,search_term:N,warehouse_id:y.value.warehouse_id}).then(J=>{J.data.length==1?K("",{product:J.data[0]}):f.products=J.data,f.productFetching=!1})}},U=N=>{ca(()=>{N.keyCode==13&&E(N.target.value)})},K=(N,H)=>{const J=H.product;if(yt(p.value,J.xid)){const V=at(i.value,["xid",J.xid]);if(V&&V.quantity<V.stock_quantity){const ne=[];var ce={};i.value.map(me=>{var _e=me.quantity;me.xid==J.xid&&(_e+=1,me.quantity=_e,ce=me),ne.push(me)}),i.value=ne;var se=new Audio(h.value.beep_audio_url);se.play(),f.orderSearchTerm=void 0,f.products=[],M(ce)}else f.orderSearchTerm=void 0,f.products=[],Ee.error(m("common.out_of_stock"))}else{p.value.push(J.xid),i.value.push({...J,sn:i.value.length+1,unit_price:e(J.unit_price),tax_amount:e(J.tax_amount),subtotal:e(J.subtotal)}),f.orderSearchTerm=void 0,f.products=[],R();var se=new Audio(h.value.beep_audio_url);se.play()}},z=N=>{var H=parseFloat(N.quantity),J=parseFloat(N.stock_quantity);N.item_id;const se=parseFloat(N.unit_price);H=H>J&&(c.value.type=="sales"||c.value.type=="purchase-returns")?J:H;const ce=N.discount_rate,V=ce>0?ce/100*se:0,ne=se-V;var te=0,me=ne,_e=se;return N.tax_rate>0&&(N.tax_type=="inclusive"?(_e=ne*100/(100+N.tax_rate),te=_e*(N.tax_rate/100)):(te=ne*(N.tax_rate/100),me=ne+te,_e=ne)),{...N,total_discount:V*H,subtotal:me*H,quantity:H,total_tax:te*H,max_quantity:J,single_unit_price:_e}},M=N=>{const H=[];i.value.map(J=>{if(J.xid==N.xid){const se=z(N);H.push(se)}else H.push(J)}),i.value=H,R()},R=()=>{let N=0,H=0;i.value.map(V=>{N+=V.subtotal});const J=y.value.discount!=""?parseFloat(y.value.discount):0,se=y.value.tax_rate!=""?parseFloat(y.value.tax_rate):0;i.value.map(V=>{H+=V.total_tax}),k.value.subtotal=N,k.value.tax=H,N=N-J;const ce=N*(se/100);N=N+parseFloat(y.value.shipping),y.value.subtotal=e(N+ce),y.value.tax_amount=e(ce),y.value.discount=J},q=()=>{let N=0,H=0;i.value.map(J=>{N+=J.subtotal}),i.value.map(J=>{H+=J.total_tax}),k.value.subtotal=N,k.value.tax=H},L=N=>{const H=[];let J=1;i.value.map(ce=>{N.item_id&&N.item_id!=""&&N.item_id!=null&&N.item_id==ce.item_id&&ce.item_id!=null&&(_.value=[..._.value,ce.item_id]),ce.xid!=N.xid&&(H.push({...ce,sn:J,single_unit_price:e(ce.single_unit_price),tax_amount:e(ce.tax_amount),subtotal:e(ce.subtotal)}),J++)}),i.value=H;const se=p.value.filter(ce=>ce!=N.xid);p.value=se,R()},j=(N,H)=>{y.value.tax_rate=N==null?0:H.tax.rate,R()},Y=N=>{S.value={id:N.xid,discount_rate:N.discount_rate,unit_price:N.unit_price,tax_id:N.x_tax_id,tax_type:N.tax_type==null?void 0:N.tax_type},C.value=!0,F.value=N.name},x=()=>{const N=i.value.filter(ce=>ce.xid==S.value.id),H=b.value.filter(ce=>ce.xid==S.value.tax_id),J=S.value.tax_type!=null?S.value.tax_type:"exclusive",se={...N[0],discount_rate:parseFloat(S.value.discount_rate),unit_price:parseFloat(S.value.unit_price),tax_id:S.value.tax_id,tax_rate:H[0]?H[0].rate:0,tax_type:J};M(se),B()},B=()=>{S.value={},C.value=!1};return{state:f,route:d,orderType:o,orderPageObject:c,selectedProducts:i,selectedProductIds:p,formData:y,productsAmount:k,taxes:b,fetchProducts:O,searchValueSelected:K,recalculateValues:z,quantityChanged:M,recalculateFinalTotal:R,showDeleteConfirm:L,taxChanged:j,editItem:Y,addEditVisible:C,addEditFormData:S,addEditFormSubmitting:D,addEditRules:P,addEditPageTitle:F,onAddEditSubmit:x,onAddEditClose:B,removedOrderItemsIds:_,calculateProductAmount:q,inputValueChanged:U}},ju=Z({props:{size:{default:"middle"},btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:le,AddEdit:$o,SubscriptionModuleVisibility:Ao},setup(e,{emit:o}){const{permsArray:c}=X(),{initData:n,addEditUrl:v}=yo(),h=T(!1),m=T("add"),d=T({...n});return{permsArray:c,visible:h,addEditType:m,addEditUrl:v,formData:d,addEditSuccess:()=>{h.value=!1,d.value={...n},o("onAddSuccess")},onClose:()=>{h.value=!1},showAdd:()=>{h.value=!0}}}}),Hu={key:0};function Nu(e,o,c,n,v,h){const m=l("a-menu-item"),d=l("PlusOutlined"),i=l("a-button"),p=l("a-tooltip"),_=l("AddEdit"),f=l("SubscriptionModuleVisibility");return r(),w(f,{moduleName:"product"},{default:a(()=>[e.permsArray.includes("products_create")||e.permsArray.includes("admin")?(r(),$("div",Hu,[e.customType=="menu"?(r(),w(m,{onClick:e.showAdd,key:"products"},{icon:a(()=>[ie(e.$slots,"icon")]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick"])):(r(),$(I,{key:1},[e.tooltip?(r(),w(p,{key:0,placement:"topLeft",title:e.$t("product.add"),"arrow-point-at-center":""},{default:a(()=>[t(i,{size:e.size,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["size","onClick","type"])]),_:3},8,["title"])):(r(),w(i,{key:1,size:e.size,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["size","onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("product.add"),successMessage:e.$t("product.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)]),_:3})}const Ga=W(ju,[["render",Nu]]),Yu=Z({props:{dateTime:{default:void 0},disabled:{default:!1}},emits:["dateTimeChanged"],setup(e,{emit:o}){const c=T(void 0),{disabledDate:n,formatDateTime:v,dayjs:h}=X();ee(()=>{m(e.dateTime)});const m=p=>{e.dateTime?c.value=h(p):c.value=void 0},d=p=>p?v(p.format()):void 0,i=p=>{const _=p?p.utc().format("YYYY-MM-DDTHH:mm:ssZ"):void 0;o("dateTimeChanged",_)};return ue(()=>e.dateTime,(p,_)=>{m(p)}),{dateTimeValue:c,disabledDate:n,formatOrderDate:d,dateTimeChanged:i}}});function Gu(e,o,c,n,v,h){const m=l("a-date-picker");return r(),w(m,{value:e.dateTimeValue,"onUpdate:value":o[0]||(o[0]=d=>e.dateTimeValue=d),format:e.formatOrderDate,"disabled-date":e.disabledDate,"show-time":"",placeholder:e.$t("common.date_time"),style:{width:"100%"},onChange:e.dateTimeChanged,disabled:e.disabled},null,8,["value","format","disabled-date","placeholder","onChange","disabled"])}const ya=W(Yu,[["render",Gu]]),Eo=()=>{const e="roles?fields=id,xid,name,display_name,description,perms.limit(10000)",o="roles",{t:c}=ae(),n=Se({permissions:[]}),v={name:"",display_name:"",description:"",permissions:[]},h=[{title:c("role.role_name"),dataIndex:"display_name",sorter:!0},{title:c("role.description"),dataIndex:"description"},{title:c("common.action"),dataIndex:"action"}],m=[{key:"name",value:c("role.role_name")}];return{url:e,addEditUrl:o,initData:v,columns:h,filterableColumns:m,preFetchData:n,getPreFetchData:()=>{axiosAdmin.get("permissions?fields=id,xid,name,display_name&limit=10000").then(i=>{n.permissions=i.data})}}};const Xu=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:le,LoadingOutlined:Oe,SaveOutlined:ve},setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n,rules:v}=be(),h=T([]);ae();const m=T([]),d=T([]),{slugify:i,appModules:p}=X();ee(()=>{axiosAdmin.get("permissions?fields=id,xid,name,display_name&limit=10000").then(y=>{const b=[];y.data.map(k=>{b[k.name]=k.xid}),m.value=b})});const _=()=>{const y={...e.formData,permissions:d.value};c({url:e.url,data:y,successMessage:e.successMessage,success:b=>{o("addEditSuccess",b.xid)}})},f=()=>{v.value={},o("closed")};return ue(()=>e.visible,(y,b)=>{y&&e.addEditType=="edit"?e.data.perms.forEach(k=>{d.value.push(k.xid)}):d.value=[]}),{loading:n,rules:v,onClose:f,onSubmit:_,roles:h,permissions:m,drawerWidth:window.innerWidth<=991?"90%":"45%",checkedPermissions:d,slugify:i,appModules:p}}}),Ju={class:"d-flex flex-column scroll-y"},Qu={class:"tbl-responsive"},Zu={class:"table align-middle table-row-dashed row-gap"},xu={class:"text-gray-600 fw-bold"},em={class:"text-gray-800"},tm={class:"d-flex"},am={class:"form-check form-check-custom me-5 me-lg-20"},nm={class:"form-check form-check-custom me-5 me-lg-20"},om={class:"form-check form-check-custom me-5 me-lg-20"},lm={class:"form-check form-check-custom"},sm={class:"text-gray-800"},rm={class:"d-flex"},dm={class:"form-check form-check-custom me-5 me-lg-20"},im={class:"form-check form-check-custom me-5 me-lg-20"},um={class:"form-check form-check-custom me-5 me-lg-20"},mm={class:"form-check form-check-custom"},cm={class:"text-gray-800"},pm={class:"d-flex"},_m={class:"form-check form-check-custom me-5 me-lg-20"},fm={class:"form-check form-check-custom me-5 me-lg-20"},gm={class:"form-check form-check-custom me-5 me-lg-20"},ym={class:"form-check form-check-custom"},hm={class:"text-gray-800"},vm={class:"d-flex"},bm={class:"form-check form-check-custom me-5 me-lg-20"},km={class:"form-check form-check-custom me-5 me-lg-20"},wm={class:"form-check form-check-custom me-5 me-lg-20"},Cm={class:"form-check form-check-custom"},Sm={class:"text-gray-800"},$m={class:"d-flex"},Dm={class:"form-check form-check-custom me-5 me-lg-20"},Am={class:"form-check form-check-custom me-5 me-lg-20"},Tm={class:"form-check form-check-custom me-5 me-lg-20"},Em={class:"form-check form-check-custom"},Om={class:"text-gray-800"},Im={class:"d-flex"},Pm={class:"form-check form-check-custom me-5 me-lg-20"},Um={class:"form-check form-check-custom me-5 me-lg-20"},Fm={class:"form-check form-check-custom me-5 me-lg-20"},Mm={class:"form-check form-check-custom"},qm={class:"text-gray-800"},Rm={class:"d-flex"},Km={class:"form-check form-check-custom me-5 me-lg-20"},Vm={class:"form-check form-check-custom me-5 me-lg-20"},zm={class:"form-check form-check-custom me-5 me-lg-20"},Lm={class:"form-check form-check-custom"},Bm={class:"text-gray-800"},Wm={class:"d-flex"},jm={class:"form-check form-check-custom me-5 me-lg-20"},Hm={class:"form-check form-check-custom me-5 me-lg-20"},Nm={class:"form-check form-check-custom me-5 me-lg-20"},Ym={class:"form-check form-check-custom"},Gm={class:"text-gray-800"},Xm={class:"d-flex"},Jm={class:"form-check form-check-custom me-5 me-lg-20"},Qm={class:"form-check form-check-custom me-5 me-lg-20"},Zm={class:"form-check form-check-custom me-5 me-lg-20"},xm={class:"form-check form-check-custom"},ec={class:"text-gray-800"},tc={class:"d-flex"},ac={class:"form-check form-check-custom me-5 me-lg-20"},nc={class:"form-check form-check-custom me-5 me-lg-20"},oc={class:"form-check form-check-custom me-5 me-lg-20"},lc={class:"form-check form-check-custom"},sc={class:"text-gray-800"},rc={class:"d-flex"},dc={class:"form-check form-check-custom me-5 me-lg-20"},ic={class:"form-check form-check-custom me-5 me-lg-20"},uc={class:"text-gray-800"},mc={class:"d-flex"},cc={class:"form-check form-check-custom me-5 me-lg-20"},pc={class:"form-check form-check-custom me-5 me-lg-20"},_c={class:"form-check form-check-custom me-5 me-lg-20"},fc={class:"form-check form-check-custom"},gc={class:"text-gray-800"},yc={class:"d-flex"},hc={class:"form-check form-check-custom me-5 me-lg-20"},vc={class:"form-check form-check-custom me-5 me-lg-20"},bc={class:"form-check form-check-custom me-5 me-lg-20"},kc={class:"form-check form-check-custom"},wc={class:"text-gray-800"},Cc={class:"d-flex"},Sc={class:"form-check form-check-custom me-5 me-lg-20"},$c={class:"form-check form-check-custom me-5 me-lg-20"},Dc={class:"form-check form-check-custom me-5 me-lg-20"},Ac={class:"form-check form-check-custom"},Tc={class:"text-gray-800"},Ec={class:"d-flex"},Oc={class:"form-check form-check-custom me-5 me-lg-20"},Ic={class:"form-check form-check-custom me-5 me-lg-20"},Pc={class:"form-check form-check-custom me-5 me-lg-20"},Uc={class:"form-check form-check-custom"},Fc={class:"text-gray-800"},Mc={class:"d-flex"},qc={class:"form-check form-check-custom me-5 me-lg-20"},Rc={class:"form-check form-check-custom me-5 me-lg-20"},Kc={class:"form-check form-check-custom me-5 me-lg-20"},Vc={class:"form-check form-check-custom"},zc={class:"text-gray-800"},Lc={class:"d-flex"},Bc={class:"form-check form-check-custom me-5 me-lg-20"},Wc={class:"text-gray-800"},jc={class:"d-flex"},Hc={class:"form-check form-check-custom me-5 me-lg-20"},Nc={class:"text-gray-800"},Yc={class:"d-flex"},Gc={class:"form-check form-check-custom me-5 me-lg-20"},Xc={class:"text-gray-800"},Jc={class:"d-flex"},Qc={class:"form-check form-check-custom me-5 me-lg-20"},Zc={class:"text-gray-800"},xc={class:"d-flex"},ep={class:"form-check form-check-custom me-5 me-lg-20"},tp={class:"text-gray-800"},ap={class:"d-flex"},np={class:"form-check form-check-custom me-5 me-lg-20"},op={class:"text-gray-800"},lp={class:"d-flex"},sp={class:"form-check form-check-custom me-5 me-lg-20"},rp={class:"form-check form-check-custom me-5 me-lg-20"},dp={class:"form-check form-check-custom me-5 me-lg-20"},ip={class:"form-check form-check-custom"},up={class:"text-gray-800"},mp={class:"d-flex"},cp={class:"form-check form-check-custom me-5 me-lg-20"},pp={class:"form-check form-check-custom me-5 me-lg-20"},_p={class:"form-check form-check-custom me-5 me-lg-20"},fp={class:"form-check form-check-custom"},gp={class:"text-gray-800"},yp={class:"d-flex"},hp={class:"form-check form-check-custom me-5 me-lg-20"},vp={class:"form-check form-check-custom me-5 me-lg-20"},bp={class:"form-check form-check-custom me-5 me-lg-20"},kp={class:"form-check form-check-custom"},wp={class:"text-gray-800"},Cp={class:"d-flex"},Sp={class:"form-check form-check-custom me-5 me-lg-20"},$p={class:"form-check form-check-custom me-5 me-lg-20"},Dp={class:"form-check form-check-custom me-5 me-lg-20"},Ap={class:"form-check form-check-custom"},Tp={class:"text-gray-800"},Ep={class:"d-flex"},Op={class:"form-check form-check-custom me-5 me-lg-20"},Ip={class:"form-check form-check-custom me-5 me-lg-20"},Pp={class:"form-check form-check-custom me-5 me-lg-20"},Up={class:"form-check form-check-custom"},Fp={class:"text-gray-800"},Mp={class:"d-flex"},qp={class:"form-check form-check-custom me-5 me-lg-20"},Rp={class:"form-check form-check-custom me-5 me-lg-20"},Kp={class:"form-check form-check-custom me-5 me-lg-20"},Vp={class:"form-check form-check-custom"},zp={class:"text-gray-800"},Lp={class:"d-flex"},Bp={class:"form-check form-check-custom me-5 me-lg-20"},Wp={class:"form-check form-check-custom me-5 me-lg-20"},jp={class:"form-check form-check-custom me-5 me-lg-20"},Hp={class:"form-check form-check-custom"},Np={class:"text-gray-800"},Yp={class:"d-flex"},Gp={class:"form-check form-check-custom me-5 me-lg-20"},Xp={class:"form-check form-check-custom me-5 me-lg-20"},Jp={class:"form-check form-check-custom me-5 me-lg-20"},Qp={class:"form-check form-check-custom"},Zp={class:"text-gray-800"},xp={class:"d-flex"},e_={class:"form-check form-check-custom me-5 me-lg-20"},t_={class:"form-check form-check-custom me-5 me-lg-20"},a_={class:"form-check form-check-custom me-5 me-lg-20"},n_={class:"form-check form-check-custom me-5 me-lg-20"},o_={class:"text-gray-800"},l_={class:"d-flex"},s_={class:"form-check form-check-custom me-5 me-lg-20"},r_={class:"form-check form-check-custom me-5 me-lg-20"},d_={class:"form-check form-check-custom me-5 me-lg-20"},i_={class:"form-check form-check-custom me-5 me-lg-20"},u_={class:"text-gray-800"},m_={class:"d-flex"},c_={class:"form-check form-check-custom me-5 me-lg-20"},p_={class:"form-check form-check-custom me-5 me-lg-20"},__={class:"form-check form-check-custom me-5 me-lg-20"},f_={class:"form-check form-check-custom me-5 me-lg-20"};function g_(e,o,c,n,v,h){const m=l("a-input"),d=l("a-form-item"),i=l("a-col"),p=l("a-row"),_=l("a-textarea"),f=l("a-checkbox"),y=l("a-checkbox-group"),b=l("a-form"),k=l("SaveOutlined"),C=l("a-button"),D=l("a-drawer");return r(),w(D,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[t(C,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:a(()=>[t(k)]),default:a(()=>[u(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),t(C,{onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(b,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("role.display_name"),name:"display_name",help:e.rules.display_name?e.rules.display_name.message:null,validateStatus:e.rules.display_name?"error":null,class:"required"},{default:a(()=>[t(m,{value:e.formData.display_name,"onUpdate:value":o[0]||(o[0]=S=>e.formData.display_name=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("role.display_name")]),onKeyup:o[1]||(o[1]=S=>e.formData.name=e.slugify(S.target.value))},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("role.role_name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(m,{value:e.formData.name,"onUpdate:value":o[2]||(o[2]=S=>e.formData.name=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("role.role_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("role.description"),name:"description",help:e.rules.description?e.rules.description.message:null,validateStatus:e.rules.description?"error":null},{default:a(()=>[t(_,{value:e.formData.description,"onUpdate:value":o[3]||(o[3]=S=>e.formData.description=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("role.description")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("role.permissions"),name:"permissions",help:e.rules.permissions?e.rules.permissions.message:null,validateStatus:e.rules.permissions?"error":null},{default:a(()=>[g("div",Ju,[g("div",Qu,[t(y,{value:e.checkedPermissions,"onUpdate:value":o[4]||(o[4]=S=>e.checkedPermissions=S)},{default:a(()=>[g("table",Zu,[g("tbody",xu,[g("tr",null,[g("td",em,s(e.$t("menu.brands")),1),g("td",null,[g("div",tm,[g("label",am,[t(f,{value:e.permissions.brands_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",nm,[t(f,{value:e.permissions.brands_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",om,[t(f,{value:e.permissions.brands_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",lm,[t(f,{value:e.permissions.brands_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",sm,s(e.$t("menu.categories")),1),g("td",null,[g("div",rm,[g("label",dm,[t(f,{value:e.permissions.categories_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",im,[t(f,{value:e.permissions.categories_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",um,[t(f,{value:e.permissions.categories_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",mm,[t(f,{value:e.permissions.categories_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",cm,s(e.$t("menu.variations")),1),g("td",null,[g("div",pm,[g("label",_m,[t(f,{value:e.permissions.variations_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",fm,[t(f,{value:e.permissions.variations_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",gm,[t(f,{value:e.permissions.variations_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",ym,[t(f,{value:e.permissions.variations_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",hm,s(e.$t("menu.products")),1),g("td",null,[g("div",vm,[g("label",bm,[t(f,{value:e.permissions.products_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",km,[t(f,{value:e.permissions.products_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",wm,[t(f,{value:e.permissions.products_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",Cm,[t(f,{value:e.permissions.products_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",Sm,s(e.$t("menu.expense_categories")),1),g("td",null,[g("div",$m,[g("label",Dm,[t(f,{value:e.permissions.expense_categories_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",Am,[t(f,{value:e.permissions.expense_categories_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",Tm,[t(f,{value:e.permissions.expense_categories_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",Em,[t(f,{value:e.permissions.expense_categories_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",Om,s(e.$t("menu.expenses")),1),g("td",null,[g("div",Im,[g("label",Pm,[t(f,{value:e.permissions.expenses_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",Um,[t(f,{value:e.permissions.expenses_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",Fm,[t(f,{value:e.permissions.expenses_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",Mm,[t(f,{value:e.permissions.expenses_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",qm,s(e.$t("menu.purchases")),1),g("td",null,[g("div",Rm,[g("label",Km,[t(f,{value:e.permissions.purchases_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",Vm,[t(f,{value:e.permissions.purchases_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",zm,[t(f,{value:e.permissions.purchases_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",Lm,[t(f,{value:e.permissions.purchases_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",Bm,s(e.$t("menu.purchase_returns")),1),g("td",null,[g("div",Wm,[g("label",jm,[t(f,{value:e.permissions.purchase_returns_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",Hm,[t(f,{value:e.permissions.purchase_returns_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",Nm,[t(f,{value:e.permissions.purchase_returns_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",Ym,[t(f,{value:e.permissions.purchase_returns_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",Gm,s(e.$t("menu.sales")),1),g("td",null,[g("div",Xm,[g("label",Jm,[t(f,{value:e.permissions.sales_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",Qm,[t(f,{value:e.permissions.sales_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",Zm,[t(f,{value:e.permissions.sales_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",xm,[t(f,{value:e.permissions.sales_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",ec,s(e.$t("menu.sales_returns")),1),g("td",null,[g("div",tc,[g("label",ac,[t(f,{value:e.permissions.sales_returns_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",nc,[t(f,{value:e.permissions.sales_returns_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",oc,[t(f,{value:e.permissions.sales_returns_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",lc,[t(f,{value:e.permissions.sales_returns_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",sc,s(e.$t("menu.order_payments")),1),g("td",null,[g("div",rc,[g("label",dc,[t(f,{value:e.permissions.order_payments_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",ic,[t(f,{value:e.permissions.order_payments_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",uc,s(e.$t("menu.payment_in")),1),g("td",null,[g("div",mc,[g("label",cc,[t(f,{value:e.permissions.payment_in_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",pc,[t(f,{value:e.permissions.payment_in_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",_c,[t(f,{value:e.permissions.payment_in_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",fc,[t(f,{value:e.permissions.payment_in_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",gc,s(e.$t("menu.payment_out")),1),g("td",null,[g("div",yc,[g("label",hc,[t(f,{value:e.permissions.payment_out_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",vc,[t(f,{value:e.permissions.payment_out_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",bc,[t(f,{value:e.permissions.payment_out_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",kc,[t(f,{value:e.permissions.payment_out_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",wc,s(e.$t("menu.quotation")),1),g("td",null,[g("div",Cc,[g("label",Sc,[t(f,{value:e.permissions.quotations_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",$c,[t(f,{value:e.permissions.quotations_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",Dc,[t(f,{value:e.permissions.quotations_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",Ac,[t(f,{value:e.permissions.quotations_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",Tc,s(e.$t("menu.stock_adjustment")),1),g("td",null,[g("div",Ec,[g("label",Oc,[t(f,{value:e.permissions.stock_adjustments_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",Ic,[t(f,{value:e.permissions.stock_adjustments_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",Pc,[t(f,{value:e.permissions.stock_adjustments_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",Uc,[t(f,{value:e.permissions.stock_adjustments_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",Fc,s(e.$t("menu.stock_transfer")),1),g("td",null,[g("div",Mc,[g("label",qc,[t(f,{value:e.permissions.stock_transfers_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",Rc,[t(f,{value:e.permissions.stock_transfers_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",Kc,[t(f,{value:e.permissions.stock_transfers_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",Vc,[t(f,{value:e.permissions.stock_transfers_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",zc,s(e.$t("menu.pos")),1),g("td",null,[g("div",Lc,[g("label",Bc,[t(f,{value:e.permissions.pos_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",Wc,s(e.$t("menu.company")),1),g("td",null,[g("div",jc,[g("label",Hc,[t(f,{value:e.permissions.companies_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",Nc,s(e.$t("menu.storage_settings")),1),g("td",null,[g("div",Yc,[g("label",Gc,[t(f,{value:e.permissions.storage_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",Xc,s(e.$t("menu.email_settings")),1),g("td",null,[g("div",Jc,[g("label",Qc,[t(f,{value:e.permissions.email_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",Zc,s(e.$t("menu.update_app")),1),g("td",null,[g("div",xc,[g("label",ep,[t(f,{value:e.permissions.update_app},{default:a(()=>[u(s(e.$t("common.update_app")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",tp,s(e.$t("menu.cash_bank")),1),g("td",null,[g("div",ap,[g("label",np,[t(f,{value:e.permissions.cash_bank_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",op,s(e.$t("menu.warehouses")),1),g("td",null,[g("div",lp,[g("label",sp,[t(f,{value:e.permissions.warehouses_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",rp,[t(f,{value:e.permissions.warehouses_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",dp,[t(f,{value:e.permissions.warehouses_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",ip,[t(f,{value:e.permissions.warehouses_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",up,s(e.$t("menu.translations")),1),g("td",null,[g("div",mp,[g("label",cp,[t(f,{value:e.permissions.translations_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",pp,[t(f,{value:e.permissions.translations_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",_p,[t(f,{value:e.permissions.translations_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",fp,[t(f,{value:e.permissions.translations_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",gp,s(e.$t("menu.roles")),1),g("td",null,[g("div",yp,[g("label",hp,[t(f,{value:e.permissions.roles_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",vp,[t(f,{value:e.permissions.roles_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",bp,[t(f,{value:e.permissions.roles_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",kp,[t(f,{value:e.permissions.roles_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",wp,s(e.$t("menu.taxes")),1),g("td",null,[g("div",Cp,[g("label",Sp,[t(f,{value:e.permissions.taxes_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",$p,[t(f,{value:e.permissions.taxes_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",Dp,[t(f,{value:e.permissions.taxes_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",Ap,[t(f,{value:e.permissions.taxes_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",Tp,s(e.$t("menu.currencies")),1),g("td",null,[g("div",Ep,[g("label",Op,[t(f,{value:e.permissions.currencies_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",Ip,[t(f,{value:e.permissions.currencies_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",Pp,[t(f,{value:e.permissions.currencies_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",Up,[t(f,{value:e.permissions.currencies_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",Fp,s(e.$t("menu.payment_modes")),1),g("td",null,[g("div",Mp,[g("label",qp,[t(f,{value:e.permissions.payment_modes_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",Rp,[t(f,{value:e.permissions.payment_modes_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",Kp,[t(f,{value:e.permissions.payment_modes_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",Vp,[t(f,{value:e.permissions.payment_modes_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",zp,s(e.$t("menu.units")),1),g("td",null,[g("div",Lp,[g("label",Bp,[t(f,{value:e.permissions.units_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",Wp,[t(f,{value:e.permissions.units_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",jp,[t(f,{value:e.permissions.units_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",Hp,[t(f,{value:e.permissions.units_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",Np,s(e.$t("menu.custom_fields")),1),g("td",null,[g("div",Yp,[g("label",Gp,[t(f,{value:e.permissions.custom_fields_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",Xp,[t(f,{value:e.permissions.custom_fields_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",Jp,[t(f,{value:e.permissions.custom_fields_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",Qp,[t(f,{value:e.permissions.custom_fields_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",Zp,s(e.$t("menu.staff_members")),1),g("td",null,[g("div",xp,[g("label",e_,[t(f,{value:e.permissions.users_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",t_,[t(f,{value:e.permissions.users_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",a_,[t(f,{value:e.permissions.users_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",n_,[t(f,{value:e.permissions.users_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",o_,s(e.$t("menu.customers")),1),g("td",null,[g("div",l_,[g("label",s_,[t(f,{value:e.permissions.customers_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",r_,[t(f,{value:e.permissions.customers_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",d_,[t(f,{value:e.permissions.customers_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",i_,[t(f,{value:e.permissions.customers_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),g("tr",null,[g("td",u_,s(e.$t("menu.suppliers")),1),g("td",null,[g("div",m_,[g("label",c_,[t(f,{value:e.permissions.suppliers_view},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1},8,["value"])]),g("label",p_,[t(f,{value:e.permissions.suppliers_create},{default:a(()=>[u(s(e.$t("common.add")),1)]),_:1},8,["value"])]),g("label",__,[t(f,{value:e.permissions.suppliers_edit},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["value"])]),g("label",f_,[t(f,{value:e.permissions.suppliers_delete},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["value"])])])])]),(r(!0),$(I,null,G(e.appModules,(S,P)=>(r(),w(Qn(S+"Permission"),{key:P,permissions:e.permissions},null,8,["permissions"]))),128))])])]),_:1},8,["value"])])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const Oo=W(Xu,[["render",g_]]),y_=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:le,AddEdit:Oo},setup(e,{emit:o}){const{permsArray:c}=X(),{initData:n,addEditUrl:v}=Eo(),h=T(!1),m=T("add"),d=T({...n});return{permsArray:c,visible:h,addEditType:m,addEditUrl:v,formData:d,addEditSuccess:()=>{h.value=!1,d.value={...n},o("onAddSuccess")},onClose:()=>{h.value=!1},showAdd:()=>{h.value=!0}}}}),h_={key:0};function v_(e,o,c,n,v,h){const m=l("a-menu-item"),d=l("PlusOutlined"),i=l("a-button"),p=l("a-tooltip"),_=l("AddEdit");return e.permsArray.includes("roles_create")||e.permsArray.includes("admin")?(r(),$("div",h_,[e.customType=="menu"?(r(),w(m,{onClick:e.showAdd,key:"categories"},{icon:a(()=>[ie(e.$slots,"icon")]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick"])):(r(),$(I,{key:1},[e.tooltip?(r(),w(p,{key:0,placement:"topLeft",title:e.$t("role.add"),"arrow-point-at-center":""},{default:a(()=>[t(i,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),w(i,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("role.add"),successMessage:e.$t("role.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const b_=W(y_,[["render",v_]]),k_={components:{InfoCircleOutlined:Kt}};function w_(e,o,c,n,v,h){const m=l("InfoCircleOutlined"),d=l("a-tooltip");return r(),w(d,null,{title:a(()=>[u(s(e.$t("user.warehouse_not_changable")),1)]),default:a(()=>[t(m)]),_:1})}const C_=W(k_,[["render",w_]]),S_=Z({props:["addEditData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:le,LoadingOutlined:Oe,SaveOutlined:ve,Upload:mt,RoleAddButton:b_,WarehouseAddButton:Bt,TooltipWarehouse:C_},setup(e,{emit:o}){const{permsArray:c,user:n,appSetting:v,selectedWarehouse:h}=X(),{addEditRequestAdmin:m,loading:d,rules:i}=be(),p=T([]),_=T([]),f=T({}),y="roles?limit=10000",b="warehouses?limit=10000",k=ke(),C=T(!0);ee(()=>{const U=axiosAdmin.get(y),K=axiosAdmin.get(b);Promise.all([U,K]).then(([z,M])=>{p.value=z.data,_.value=M.data}),f.value={...e.addEditData}});const D=()=>{m({url:e.url,data:f.value,successMessage:e.successMessage,success:U=>{o("addEditSuccess",U.xid),n.value.xid==U.xid&&k.dispatch("auth/updateUser")}})},S=()=>{i.value={},o("closed")},P=()=>{axiosAdmin.get(y).then(U=>{p.value=U.data})},F=()=>{axiosAdmin.get(b).then(U=>{_.value=U.data})},O=(U,K)=>{f.value={...f.value,warehouse_id:U.length>0?U[0]:void 0}},E=(U,K)=>{K&&K.title&&K.title=="admin"?C.value=!1:C.value=!0};return ue(()=>e.visible,(U,K)=>{if(U)if(C.value=!0,e.addEditType=="edit"&&(C.value=!0,e.data.user_type=="staff_members"&&e.data.role&&e.data.role.name=="admin"&&(C.value=!1),e.data.user_type=="customers"&&e.data.is_walkin_customer&&(C.value=!1)),e.addEditType=="add")e.addEditData.user_type=="staff_members"?f.value={...e.addEditData,warehouse_id:h.value.xid,warehouses:[h.value.xid]}:f.value={...e.addEditData,warehouse_id:h.value.xid,warehouses:[]};else{var z=e.data.warehouse&&e.data.warehouse.xid?e.data.warehouse.xid:void 0,M=[];if(e.addEditData.user_type=="staff_members"){var R=e.data.user_warehouses;Ce(R,q=>{M.push(q.x_warehouse_id)})}f.value={...e.addEditData,role_id:e.data.role&&e.data.role.xid?e.data.role.xid:void 0,warehouse_id:z,warehouses:M,opening_balance:e.data.details&&e.data.details.opening_balance?e.data.details.opening_balance:void 0,opening_balance_type:e.data.details&&e.data.details.opening_balance_type?e.data.details.opening_balance_type:void 0,credit_period:e.data.details&&e.data.details.credit_period?e.data.details.credit_period:void 0,credit_limit:e.data.details&&e.data.details.credit_limit?e.data.details.credit_limit:void 0,_method:"PUT"}}}),{loading:d,rules:i,onClose:S,onSubmit:D,roles:p,warehouses:_,formData:f,roleAdded:P,warehouseAdded:F,permsArray:c,appSetting:v,selectedWarehouse:h,warehousesChanged:O,drawerWidth:window.innerWidth<=991?"90%":"45%",warehouseVisible:C,roleChanged:E}}}),$_={key:0,style:{display:"flex"}},D_={key:1},A_={style:{display:"flex"}},T_={key:0,class:"small-text-message"};function E_(e,o,c,n,v,h){const m=l("Upload"),d=l("a-form-item"),i=l("a-col"),p=l("a-select-option"),_=l("a-select"),f=l("WarehouseAddButton"),y=l("a-row"),b=l("RoleAddButton"),k=l("a-input"),C=l("a-input-password"),D=l("a-input-number"),S=l("a-textarea"),P=l("a-form"),F=l("SaveOutlined"),O=l("a-button"),E=l("a-drawer");return r(),w(E,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[t(O,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:a(()=>[t(F)]),default:a(()=>[u(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),t(O,{onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(P,{layout:"vertical"},{default:a(()=>[t(y,null,{default:a(()=>[t(i,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(d,{label:e.$t("user.profile_image"),name:"profile_image",help:e.rules.profile_image?e.rules.profile_image.message:null,validateStatus:e.rules.profile_image?"error":null},{default:a(()=>[t(m,{formData:e.formData,folder:"user",imageField:"profile_image",onOnFileUploaded:o[0]||(o[0]=U=>{e.formData.profile_image=U.file,e.formData.profile_image_url=U.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(i,{xs:24,sm:24,md:18,lg:18},{default:a(()=>[e.warehouseVisible?(r(),w(y,{key:0,gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{name:"warehouse_id",help:e.rules.warehouse_id?e.rules.warehouse_id.message:null,validateStatus:e.rules.warehouse_id?"error":null,class:"required"},{label:a(()=>[u(s(e.$t("warehouse.warehouse")),1)]),default:a(()=>[e.permsArray.includes("admin")?(r(),$("span",$_,[e.formData.user_type=="staff_members"?(r(),w(_,{key:0,value:e.formData.warehouses,"onUpdate:value":o[1]||(o[1]=U=>e.formData.warehouses=U),placeholder:e.$t("common.select_default_text",[e.$t("warehouse.warehouse")]),mode:"multiple",onChange:e.warehousesChanged},{default:a(()=>[(r(!0),$(I,null,G(e.warehouses,U=>(r(),w(p,{key:U.xid,value:U.xid},{default:a(()=>[u(s(U.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder","onChange"])):(r(),w(_,{key:1,value:e.formData.warehouse_id,"onUpdate:value":o[2]||(o[2]=U=>e.formData.warehouse_id=U),placeholder:e.$t("common.select_default_text",[e.$t("warehouse.warehouse")])},{default:a(()=>[(r(!0),$(I,null,G(e.warehouses,U=>(r(),w(p,{key:U.xid,value:U.xid},{default:a(()=>[u(s(U.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])),t(f,{onOnAddSuccess:e.warehouseAdded},null,8,["onOnAddSuccess"])])):(r(),$("span",D_,[t(_,{value:e.selectedWarehouse.xid,placeholder:e.$t("common.select_default_text",[e.$t("warehouse.warehouse")]),disabled:""},{default:a(()=>[t(p,{value:e.selectedWarehouse.xid},{default:a(()=>[u(s(e.selectedWarehouse.name),1)]),_:1},8,["value"])]),_:1},8,["value","placeholder"])]))]),_:1},8,["help","validateStatus"])]),_:1})]),_:1})):A("",!0),e.formData.user_type=="staff_members"&&e.permsArray.includes("admin")?(r(),w(y,{key:1,gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("user.role"),name:"role_id",help:e.rules.role_id?e.rules.role_id.message:null,validateStatus:e.rules.role_id?"error":null,class:"required"},{default:a(()=>[g("span",A_,[t(_,{value:e.formData.role_id,"onUpdate:value":o[3]||(o[3]=U=>e.formData.role_id=U),placeholder:e.$t("common.select_default_text",[e.$t("user.role")]),allowClear:!0,onChange:e.roleChanged},{default:a(()=>[(r(!0),$(I,null,G(e.roles,U=>(r(),w(p,{key:U.xid,value:U.xid,title:U.name},{default:a(()=>[u(s(U.display_name),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder","onChange"]),t(b,{onOnAddSuccess:e.roleAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),t(y,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(k,{value:e.formData.name,"onUpdate:value":o[4]||(o[4]=U=>e.formData.name=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.phone"),name:"phone",help:e.rules.phone?e.rules.phone.message:null,validateStatus:e.rules.phone?"error":null,class:"required"},{default:a(()=>[t(k,{value:e.formData.phone,"onUpdate:value":o[5]||(o[5]=U=>e.formData.phone=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(y,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null,class:kt({required:e.formData.user_type=="staff_members"})},{default:a(()=>[t(k,{value:e.formData.email,"onUpdate:value":o[6]||(o[6]=U=>e.formData.email=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus","class"])]),_:1}),t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.status"),name:"status",help:e.rules.status?e.rules.status.message:null,validateStatus:e.rules.status?"error":null,class:"required"},{default:a(()=>[t(_,{value:e.formData.status,"onUpdate:value":o[7]||(o[7]=U=>e.formData.status=U),placeholder:e.$t("common.select_default_text",[e.$t("user.status")])},{default:a(()=>[t(p,{value:"enabled"},{default:a(()=>[u(s(e.$t("common.enabled")),1)]),_:1}),t(p,{value:"disabled"},{default:a(()=>[u(s(e.$t("common.disabled")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),e.formData.user_type=="staff_members"||e.formData.user_type=="customers"?(r(),w(y,{key:2},{default:a(()=>[t(i,{span:24},{default:a(()=>[t(d,{label:e.$t("user.password"),name:"password",help:e.rules.password?e.rules.password.message:null,validateStatus:e.rules.password?"error":null,class:kt(e.formData.user_type=="staff_members"?"required":"")},{default:a(()=>[t(C,{value:e.formData.password,"onUpdate:value":o[8]||(o[8]=U=>e.formData.password=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.password")])},null,8,["value","placeholder"]),e.addEditType=="edit"?(r(),$("small",T_,s(e.$t("user.password_blank")),1)):A("",!0)]),_:1},8,["label","help","validateStatus","class"])]),_:1})]),_:1})):A("",!0),e.formData.user_type!="staff_members"?(r(),w(y,{key:3,gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("user.tax_number"),name:"tax_number",help:e.rules.tax_number?e.rules.tax_number.message:null,validateStatus:e.rules.tax_number?"error":null},{default:a(()=>[t(k,{value:e.formData.tax_number,"onUpdate:value":o[9]||(o[9]=U=>e.formData.tax_number=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.tax_number")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),e.formData.user_type!="staff_members"?(r(),w(y,{key:4,gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("user.opening_balance"),name:"opening_balance",help:e.rules.opening_balance?e.rules.opening_balance.message:null,validateStatus:e.rules.opening_balance?"error":null},{default:a(()=>[t(k,{value:e.formData.opening_balance,"onUpdate:value":o[11]||(o[11]=U=>e.formData.opening_balance=U),placeholder:"0"},{prefix:a(()=>[u(s(e.appSetting.currency.symbol),1)]),addonAfter:a(()=>[t(_,{value:e.formData.opening_balance_type,"onUpdate:value":o[10]||(o[10]=U=>e.formData.opening_balance_type=U),style:{width:"100px"}},{default:a(()=>[t(p,{value:"receive"},{default:a(()=>[u(s(e.$t("user.receive")),1)]),_:1}),t(p,{value:"pay"},{default:a(()=>[u(s(e.$t("user.pay")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0)]),_:1})]),_:1}),e.formData.user_type!="staff_members"?(r(),w(y,{key:0,gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.credit_period"),name:"credit_period",help:e.rules.credit_period?e.rules.credit_period.message:null,validateStatus:e.rules.credit_period?"error":null},{default:a(()=>[t(D,{value:e.formData.credit_period,"onUpdate:value":o[12]||(o[12]=U=>e.formData.credit_period=U),placeholder:"0","addon-after":e.$t("user.days"),type:"number",precision:0,style:{width:"100%"}},null,8,["value","addon-after"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.credit_limit"),name:"credit_limit",help:e.rules.credit_limit?e.rules.credit_limit.message:null,validateStatus:e.rules.credit_limit?"error":null},{default:a(()=>[t(k,{value:e.formData.credit_limit,"onUpdate:value":o[13]||(o[13]=U=>e.formData.credit_limit=U),placeholder:"0","addon-before":e.appSetting.currency.symbol},null,8,["value","addon-before"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),t(y,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.formData.user_type=="staff_members"?e.$t("user.address"):e.$t("user.billing_address"),name:"address",help:e.rules.address?e.rules.address.message:null,validateStatus:e.rules.address?"error":null},{default:a(()=>[t(S,{value:e.formData.address,"onUpdate:value":o[14]||(o[14]=U=>e.formData.address=U),placeholder:e.$t("common.placeholder_default_text",[e.formData.user_type=="staff_members"?e.$t("user.address"):e.$t("user.billing_address")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),e.formData.user_type!="staff_members"?(r(),w(y,{key:1,gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("user.shipping_address"),name:"shipping_address",help:e.rules.shipping_address?e.rules.shipping_address.message:null,validateStatus:e.rules.shipping_address?"error":null},{default:a(()=>[t(S,{value:e.formData.shipping_address,"onUpdate:value":o[15]||(o[15]=U=>e.formData.shipping_address=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.shipping_address")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0)]),_:1})]),_:1},8,["title","width","open","onClose"])}const ha=W(S_,[["render",E_]]),va=()=>{const{t:e}=ae(),o="users",c="customers",n="suppliers",v={warehouse_id:void 0,warehouses:[],name:"",email:"",profile_image:void 0,profile_image_url:void 0,phone:"",address:"",status:"enabled"},h={shipping_address:"",opening_balance:"",opening_balance_type:"receive",credit_period:"30",credit_limit:"",tax_number:void 0},m={user_type:"customers",...v,...h},d={...m,user_type:"staff_members",role_id:void 0,password:""},i={user_type:"suppliers",...m,...h},p=[{title:e("user.name"),dataIndex:"name",key:"name"},{title:e("user.email"),dataIndex:"email"},{title:e("user.created_at"),dataIndex:"created_at"},{title:e("user.status"),dataIndex:"status",key:"status"},{title:e("common.action"),dataIndex:"action"}],_=[{title:e("user.name"),dataIndex:"name",key:"name"},{title:e("user.email"),dataIndex:"email"},{title:e("user.created_at"),dataIndex:"created_at"},{title:e("common.balance"),dataIndex:"balance"},{title:e("user.status"),dataIndex:"status",key:"status"},{title:e("common.action"),dataIndex:"action"}],f=[{key:"users.name",value:e("user.name")},{key:"email",value:e("user.email")},{key:"phone",value:e("user.phone")}];return{customerInitData:m,staffMemberInitData:d,supplierInitData:i,columns:p,supplierCustomerColumns:_,filterableColumns:f,staffMemberAddEditUrl:o,customerAddEditUrl:c,supplierAddEditUrl:n}},O_=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:le,AddEdit:ha},setup(e,{emit:o}){const{permsArray:c}=X(),{supplierInitData:n,supplierAddEditUrl:v}=va(),h=T(!1),m=T("add"),d=T({...n});return{permsArray:c,visible:h,addEditType:m,supplierAddEditUrl:v,formData:d,addEditSuccess:()=>{h.value=!1,d.value={...n},o("onAddSuccess")},onClose:()=>{h.value=!1},showAdd:()=>{h.value=!0}}}}),I_={key:0};function P_(e,o,c,n,v,h){const m=l("a-menu-item"),d=l("PlusOutlined"),i=l("a-button"),p=l("a-tooltip"),_=l("AddEdit");return e.permsArray.includes("suppliers_create")||e.permsArray.includes("admin")?(r(),$("div",I_,[e.customType=="menu"?(r(),w(m,{onClick:e.showAdd,key:"suppliers"},{icon:a(()=>[ie(e.$slots,"icon")]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick"])):(r(),$(I,{key:1},[e.tooltip?(r(),w(p,{key:0,placement:"topLeft",title:e.$t("supplier.add"),"arrow-point-at-center":""},{default:a(()=>[t(i,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),w(i,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.supplierAddEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,addEditData:e.formData,data:e.formData,pageTitle:e.$t("supplier.add"),successMessage:e.$t("supplier.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","addEditData","data","pageTitle","successMessage"])])):A("",!0)}const U_=W(O_,[["render",P_]]),F_=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:le,AddEdit:ha},setup(e,{emit:o}){const{permsArray:c}=X(),{customerInitData:n,customerAddEditUrl:v}=va(),h=T(!1),m=T("add"),d=T({...n});return{permsArray:c,visible:h,addEditType:m,customerAddEditUrl:v,formData:d,addEditSuccess:()=>{h.value=!1,d.value={...n},o("onAddSuccess")},onClose:()=>{h.value=!1},showAdd:()=>{h.value=!0}}}}),M_={key:0};function q_(e,o,c,n,v,h){const m=l("a-menu-item"),d=l("PlusOutlined"),i=l("a-button"),p=l("a-tooltip"),_=l("AddEdit");return e.permsArray.includes("customers_create")||e.permsArray.includes("admin")?(r(),$("div",M_,[e.customType=="menu"?(r(),w(m,{onClick:e.showAdd,key:"customers"},{icon:a(()=>[ie(e.$slots,"icon")]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick"])):(r(),$(I,{key:1},[e.tooltip?(r(),w(p,{key:0,placement:"topLeft",title:e.$t("customer.add"),"arrow-point-at-center":""},{default:a(()=>[t(i,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),w(i,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.customerAddEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,addEditData:e.formData,data:e.formData,pageTitle:e.$t("customer.add"),successMessage:e.$t("customer.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","addEditData","data","pageTitle","successMessage"])])):A("",!0)}const Io=W(F_,[["render",q_]]),R_=Z({props:["orderPageObject","rules","usersList","editOrderDisable"],emits:["onSuccess"],components:{SearchOutlined:ut,SupplierAddButton:U_,CustomerAddButton:Io},setup(e,{emit:o}){const c=Se({orderSearchTerm:[],productFetching:!1,products:[]}),n=wt(h=>{if(c.products=[],h!=""){const m=h.trim();c.productFetching=!0;const d=`name lk "${m}%" or (phone lk "${m}%")`;let i=`${e.orderPageObject.userType}?fields=id,xid,name,phone&filters=${encodeURIComponent(d)}`;axiosAdmin.get(i).then(p=>{c.products=p.data,c.productFetching=!1})}},300),v=(h,m)=>{o("onSuccess",h)};return ue(()=>e.usersList,(h,m)=>{c.products=[h],c.orderSearchTerm=h.xid}),{...vt(c),fetchProducts:n,searchValueSelected:v}}}),K_={style:{display:"flex"}},V_={key:0};function z_(e,o,c,n,v,h){const m=l("SearchOutlined"),d=l("a-spin"),i=l("a-select-option"),p=l("a-select"),_=l("SupplierAddButton"),f=l("CustomerAddButton"),y=l("a-form-item");return r(),w(y,{label:e.$t(`${e.orderPageObject.langKey}.user`),name:"user_id",help:e.rules.user_id?e.rules.user_id.message:null,validateStatus:e.rules.user_id?"error":null,class:"required"},{default:a(()=>[g("span",K_,[t(p,{value:e.orderSearchTerm,"onUpdate:value":o[0]||(o[0]=b=>e.orderSearchTerm=b),"show-search":"","filter-option":!1,placeholder:e.$t("common.select_default_text",[e.$t(`${e.orderPageObject.langKey}.user`)]),style:{width:"100%"},"not-found-content":e.productFetching?void 0:null,onSearch:e.fetchProducts,"option-label-prop":"label",onSelect:e.searchValueSelected,disabled:e.editOrderDisable},Qe({suffixIcon:a(()=>[t(m)]),default:a(()=>[(r(!0),$(I,null,G(e.products,b=>(r(),w(i,{key:b.xid,value:b.xid,label:b.name,product:b},{default:a(()=>[u(s(b.name)+" ",1),b.phone&&b.phone!=""?(r(),$("span",V_,[o[1]||(o[1]=g("br",null,null,-1)),u(" "+s(b.phone),1)])):A("",!0)]),_:2},1032,["value","label","product"]))),128))]),_:2},[e.productFetching?{name:"notFoundContent",fn:a(()=>[t(d,{size:"small"})]),key:"0"}:void 0]),1032,["value","placeholder","not-found-content","onSearch","onSelect","disabled"]),e.orderPageObject.userType=="suppliers"?(r(),w(_,{key:0})):(r(),w(f,{key:1}))])]),_:1},8,["label","help","validateStatus"])}const Po=W(R_,[["render",z_]]),L_={components:{EyeOutlined:tt,PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,ExclamationCircleOutlined:Ae,SearchOutlined:ut,SaveOutlined:ve,LoadingOutlined:Oe,TaxAddButton:Ha,WarehouseAddButton:Bt,ProductAddButton:Ga,DateTimePicker:ya,AdminPageHeader:ge,UserSearch:Po},setup(){const{addEditRequestAdmin:e,loading:o,rules:c}=be(),{appSetting:n,formatAmount:v,formatAmountCurrency:h,taxTypes:m,orderStatus:d,purchaseOrderStatus:i,salesOrderStatus:p,salesReturnStatus:_,purchaseReturnStatus:f,permsArray:y,selectedWarehouse:b}=X(),{orderItemColumns:k}=_a(),{state:C,orderType:D,orderPageObject:S,selectedProducts:P,formData:F,productsAmount:O,taxes:E,recalculateValues:U,fetchProducts:K,searchValueSelected:z,quantityChanged:M,recalculateFinalTotal:R,showDeleteConfirm:q,taxChanged:L,editItem:j,addEditVisible:Y,addEditFormData:x,addEditFormSubmitting:B,addEditRules:N,addEditPageTitle:H,onAddEditSubmit:J,onAddEditClose:se,inputValueChanged:ce}=To(),{t:V}=ae(),ne=T([]),te=T([]),me=qe(),_e=T([]),de="taxes?limit=10000",ye="units?limit=10000",Fe=`warehouses?filters=id ne "${b.value.xid}"&hashable=${b.value.xid}&limit=10000`;ee(()=>{const Be=axiosAdmin.get(de),ct=axiosAdmin.get(ye),pt=axiosAdmin.get(Fe);Promise.all([Be,ct,pt]).then(([re,we,Re])=>{E.value=re.data,te.value=we.data,ne.value=Re.data}),D.value=="purchases"?_e.value=i:D.value=="sales"?_e.value=p:D.value=="sales-returns"?_e.value=_:D.value=="purchase-returns"?_e.value=f:D.value=="quotations"?_e.value=[]:D.value=="stock-transfers"&&(_e.value=p)});const st=()=>{const Be={...F.value,order_type:S.value.type,total:F.value.subtotal,total_items:P.value.length,product_items:P.value};e({url:D.value,data:Be,successMessage:V(`${S.value.langKey}.created`),success:ct=>{me.push({name:`admin.stock.${D.value}.index`})}})},Q=()=>{axiosAdmin.get(ye).then(Be=>{te.value=Be.data})},$e=()=>{axiosAdmin.get(de).then(Be=>{E.value=Be.data})},Te=()=>{axiosAdmin.get(Fe).then(Be=>{ne.value=Be.data})};return{...vt(C),formData:F,productsAmount:O,rules:c,loading:o,warehouses:ne,taxes:E,onSubmit:st,fetchProducts:K,searchValueSelected:z,selectedProducts:P,showDeleteConfirm:q,quantityChanged:M,formatAmountCurrency:h,taxChanged:L,recalculateFinalTotal:R,appSetting:n,editItem:j,orderPageObject:S,orderItemColumns:k,addEditVisible:Y,addEditFormData:x,addEditFormSubmitting:B,addEditRules:N,addEditPageTitle:H,onAddEditSubmit:J,onAddEditClose:se,allOrderStatus:_e,taxTypes:m,permsArray:y,unitAdded:Q,taxAdded:$e,warehouseAdded:Te,inputValueChanged:ce}}},B_={class:"small-text-message"},W_={style:{display:"flex"}},j_={style:{display:"flex"}},H_={style:{display:"flex"}},N_={style:{display:"flex"}};function Y_(e,o,c,n,v,h){const m=l("SaveOutlined"),d=l("a-button"),i=l("a-page-header"),p=l("router-link"),_=l("a-breadcrumb-item"),f=l("a-breadcrumb"),y=l("AdminPageHeader"),b=l("a-input"),k=l("a-form-item"),C=l("a-col"),D=l("a-select-option"),S=l("a-select"),P=l("WarehouseAddButton"),F=l("UserSearch"),O=l("DateTimePicker"),E=l("a-row"),U=l("SearchOutlined"),K=l("a-spin"),z=l("ProductAddButton"),M=l("a-typography-text"),R=l("a-input-number"),q=l("EditOutlined"),L=l("DeleteOutlined"),j=l("a-table-summary-cell"),Y=l("a-table-summary-row"),x=l("a-table"),B=l("a-textarea"),N=l("TaxAddButton"),H=l("a-form"),J=l("a-card"),se=l("admin-page-table-content"),ce=l("a-modal");return r(),$(I,null,[t(y,null,{header:a(()=>[t(i,{title:e.$t(`menu.${n.orderPageObject.menuKey}`),onBack:o[0]||(o[0]=()=>e.$router.go(-1)),class:"p-0"},{extra:a(()=>[t(d,{type:"primary",loading:n.loading,onClick:n.onSubmit,block:""},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("common.save")),1)]),_:1},8,["loading","onClick"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(f,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(_,null,{default:a(()=>[t(p,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(_,null,{default:a(()=>[u(s(n.orderPageObject.type=="sales"||n.orderPageObject.type=="sales-returns"||n.orderPageObject.type=="quotations"?e.$t("menu.sales"):e.$t("menu.purchases")),1)]),_:1}),t(_,null,{default:a(()=>[t(p,{to:{name:`admin.stock.${n.orderPageObject.type}.index`}},{default:a(()=>[u(s(e.$t(`menu.${n.orderPageObject.menuKey}`)),1)]),_:1},8,["to"])]),_:1}),t(_,null,{default:a(()=>[u(s(e.$t("common.create")),1)]),_:1})]),_:1})]),_:1}),t(se,null,{default:a(()=>[t(J,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[t(H,{layout:"vertical"},{default:a(()=>[t(E,{gutter:16},{default:a(()=>[t(C,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(k,{label:e.$t("stock.invoice_number"),name:"invoice_number",help:n.rules.invoice_number?n.rules.invoice_number.message:null,validateStatus:n.rules.invoice_number?"error":null},{default:a(()=>[t(b,{value:n.formData.invoice_number,"onUpdate:value":o[1]||(o[1]=V=>n.formData.invoice_number=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.invoice_number")])},null,8,["value","placeholder"]),g("small",B_,s(e.$t("stock.invoie_number_blank")),1)]),_:1},8,["label","help","validateStatus"])]),_:1}),n.orderPageObject.type=="stock-transfers"?(r(),w(C,{key:0,xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(k,{label:e.$t(`${n.orderPageObject.langKey}.warehouse`),name:"warehouse_id",help:n.rules.warehouse_id?n.rules.warehouse_id.message:null,validateStatus:n.rules.warehouse_id?"error":null,class:"required"},{default:a(()=>[g("span",W_,[t(S,{value:n.formData.warehouse_id,"onUpdate:value":o[2]||(o[2]=V=>n.formData.warehouse_id=V),placeholder:e.$t("common.select_default_text",[e.$t(`${n.orderPageObject.langKey}.warehouse`)]),allowClear:!0,optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.warehouses,V=>(r(),w(D,{key:V.xid,value:V.xid,title:V.name},{default:a(()=>[u(s(V.name),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder"]),t(P,{onOnAddSuccess:n.warehouseAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})):(r(),w(C,{key:1,xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(F,{orderPageObject:n.orderPageObject,rules:n.rules,usersList:[],editOrderDisable:!1,onOnSuccess:o[3]||(o[3]=V=>n.formData.user_id=V)},null,8,["orderPageObject","rules"])]),_:1})),t(C,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(k,{label:e.$t(`${n.orderPageObject.langKey}.${n.orderPageObject.langKey}_date`),name:"order_date",help:n.rules.order_date?n.rules.order_date.message:null,validateStatus:n.rules.order_date?"error":null,class:"required"},{default:a(()=>[t(O,{dateTime:n.formData.order_date,onDateTimeChanged:o[4]||(o[4]=V=>n.formData.order_date=V)},null,8,["dateTime"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(E,{gutter:16},{default:a(()=>[t(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("product.product"),name:"orderSearchTerm",help:n.rules.product_items?n.rules.product_items.message:null,validateStatus:n.rules.product_items?"error":null},{default:a(()=>[g("span",j_,[t(S,{value:null,searchValue:e.orderSearchTerm,"show-search":"","filter-option":!1,placeholder:e.$t("product.search_scan_product"),style:{width:"100%"},"not-found-content":e.productFetching?void 0:null,onSearch:o[5]||(o[5]=V=>{e.orderSearchTerm=V,n.fetchProducts(V)}),size:"large","option-label-prop":"label",onFocus:o[6]||(o[6]=V=>e.products=[]),onSelect:n.searchValueSelected,onInputKeyDown:n.inputValueChanged},Qe({suffixIcon:a(()=>[t(U)]),default:a(()=>[(r(!0),$(I,null,G(e.products,V=>(r(),w(D,{key:V.xid,value:V.xid,label:V.name,product:V},{default:a(()=>[u(" => "+s(V.name),1)]),_:2},1032,["value","label","product"]))),128))]),_:2},[e.productFetching?{name:"notFoundContent",fn:a(()=>[t(K,{size:"small"})]),key:"0"}:void 0]),1032,["searchValue","placeholder","not-found-content","onSelect","onInputKeyDown"]),t(z,{size:"large"})])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(E,{gutter:16},{default:a(()=>[t(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(x,{"row-key":V=>V.xid,dataSource:n.selectedProducts,columns:n.orderItemColumns,pagination:!1},{bodyCell:a(({column:V,record:ne})=>[V.dataIndex==="name"?(r(),$(I,{key:0},[u(s(ne.name)+" ",1),o[17]||(o[17]=g("br",null,null,-1)),g("small",null,[t(M,{code:""},{default:a(()=>[u(s(e.$t("product.avl_qty"))+" "+s(`${ne.stock_quantity}${ne.unit_short_name}`),1)]),_:2},1024)])],64)):A("",!0),V.dataIndex==="unit_quantity"?(r(),w(R,{key:1,id:"inputNumber",value:ne.quantity,"onUpdate:value":te=>ne.quantity=te,onChange:te=>n.quantityChanged(ne),min:0},null,8,["value","onUpdate:value","onChange"])):A("",!0),V.dataIndex==="single_unit_price"?(r(),$(I,{key:2},[u(s(n.formatAmountCurrency(ne.single_unit_price)),1)],64)):A("",!0),V.dataIndex==="total_discount"?(r(),$(I,{key:3},[u(s(n.formatAmountCurrency(ne.total_discount)),1)],64)):A("",!0),V.dataIndex==="total_tax"?(r(),$(I,{key:4},[u(s(n.formatAmountCurrency(ne.total_tax)),1)],64)):A("",!0),V.dataIndex==="subtotal"?(r(),$(I,{key:5},[u(s(n.formatAmountCurrency(ne.subtotal)),1)],64)):A("",!0),V.dataIndex==="action"?(r(),$(I,{key:6},[t(d,{type:"primary",onClick:te=>n.editItem(ne),style:{"margin-left":"4px"}},{icon:a(()=>[t(q)]),_:1},8,["onClick"]),t(d,{type:"primary",onClick:te=>n.showDeleteConfirm(ne),style:{"margin-left":"4px"}},{icon:a(()=>[t(L)]),_:1},8,["onClick"])],64)):A("",!0)]),summary:a(()=>[t(Y,null,{default:a(()=>[t(j,{"col-span":4}),t(j,null,{default:a(()=>[u(s(e.$t("product.subtotal")),1)]),_:1}),t(j,null,{default:a(()=>[u(s(n.formatAmountCurrency(n.productsAmount.tax)),1)]),_:1}),t(j,{"col-span":2},{default:a(()=>[u(s(n.formatAmountCurrency(n.productsAmount.subtotal)),1)]),_:1})]),_:1})]),_:1},8,["row-key","dataSource","columns"])]),_:1})]),_:1}),t(E,{gutter:16,class:"mt-30"},{default:a(()=>[t(C,{xs:24,sm:24,md:16,lg:16},{default:a(()=>[t(E,{gutter:16},{default:a(()=>[t(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("warehouse.terms_condition"),name:"terms_condition",help:n.rules.terms_condition?n.rules.terms_condition.message:null,validateStatus:n.rules.terms_condition?"error":null},{default:a(()=>[t(B,{value:n.formData.terms_condition,"onUpdate:value":o[7]||(o[7]=V=>n.formData.terms_condition=V),placeholder:e.$t("warehouse.terms_condition"),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(E,{gutter:16},{default:a(()=>[t(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("stock.notes"),name:"notes",help:n.rules.notes?n.rules.notes.message:null,validateStatus:n.rules.notes?"error":null},{default:a(()=>[t(B,{value:n.formData.notes,"onUpdate:value":o[8]||(o[8]=V=>n.formData.notes=V),placeholder:e.$t("stock.notes"),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1}),t(C,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[n.orderPageObject.type!="quotations"?(r(),w(E,{key:0,gutter:16},{default:a(()=>[t(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("stock.status"),name:"order_status",help:n.rules.order_status?n.rules.order_status.message:null,validateStatus:n.rules.order_status?"error":null,class:"required"},{default:a(()=>[t(S,{value:n.formData.order_status,"onUpdate:value":o[9]||(o[9]=V=>n.formData.order_status=V),placeholder:e.$t("common.select_default_text",[e.$t("stock.status")]),allowClear:!0},{default:a(()=>[(r(!0),$(I,null,G(n.allOrderStatus,V=>(r(),w(D,{key:V.key,value:V.key},{default:a(()=>[u(s(V.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),t(E,{gutter:16},{default:a(()=>[t(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("stock.order_tax"),name:"tax_id",help:n.rules.tax_id?n.rules.tax_id.message:null,validateStatus:n.rules.tax_id?"error":null},{default:a(()=>[g("span",H_,[t(S,{value:n.formData.tax_id,"onUpdate:value":o[10]||(o[10]=V=>n.formData.tax_id=V),placeholder:e.$t("common.select_default_text",[e.$t("stock.order_tax")]),allowClear:!0,onChange:n.taxChanged,optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.taxes,V=>(r(),w(D,{key:V.xid,value:V.xid,title:V.name,tax:V},{default:a(()=>[u(s(V.name)+" ("+s(V.rate)+"%) ",1)]),_:2},1032,["value","title","tax"]))),128))]),_:1},8,["value","placeholder","onChange"]),t(N,{onOnAddSuccess:n.taxAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(E,{gutter:16},{default:a(()=>[t(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("stock.discount"),name:"discount",help:n.rules.discount?n.rules.discount.message:null,validateStatus:n.rules.discount?"error":null},{default:a(()=>[t(R,{value:n.formData.discount,"onUpdate:value":o[11]||(o[11]=V=>n.formData.discount=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.discount")]),onChange:n.recalculateFinalTotal,min:"0",style:{width:"100%"}},{addonBefore:a(()=>[u(s(n.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder","onChange"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(E,{gutter:16},{default:a(()=>[t(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("stock.shipping"),name:"shipping",help:n.rules.shipping?n.rules.shipping.message:null,validateStatus:n.rules.shipping?"error":null},{default:a(()=>[t(R,{value:n.formData.shipping,"onUpdate:value":o[12]||(o[12]=V=>n.formData.shipping=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.shipping")]),onChange:n.recalculateFinalTotal,min:"0",style:{width:"100%"}},{addonBefore:a(()=>[u(s(n.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder","onChange"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(E,{gutter:16,class:"mt-10"},{default:a(()=>[t(C,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[u(s(e.$t("stock.order_tax")),1)]),_:1}),t(C,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[u(s(n.formatAmountCurrency(n.formData.tax_amount)),1)]),_:1})]),_:1}),t(E,{gutter:16,class:"mt-10"},{default:a(()=>[t(C,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[u(s(e.$t("stock.discount")),1)]),_:1}),t(C,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[u(s(n.formatAmountCurrency(n.formData.discount)),1)]),_:1})]),_:1}),t(E,{gutter:16,class:"mt-10"},{default:a(()=>[t(C,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[u(s(e.$t("stock.shipping")),1)]),_:1}),t(C,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[u(s(n.formatAmountCurrency(n.formData.shipping)),1)]),_:1})]),_:1}),t(E,{gutter:16,class:"mt-10"},{default:a(()=>[t(C,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[u(s(e.$t("stock.grand_total")),1)]),_:1}),t(C,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[u(s(n.formatAmountCurrency(n.formData.subtotal)),1)]),_:1})]),_:1}),t(E,{gutter:16,class:"mt-20 mb-20"},{default:a(()=>[t(d,{type:"primary",loading:n.loading,onClick:n.onSubmit,block:""},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("common.save")),1)]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(ce,{open:n.addEditVisible,closable:!1,centered:!0,title:n.addEditPageTitle,onOk:n.onAddEditSubmit},{footer:a(()=>[t(d,{key:"submit",type:"primary",loading:n.addEditFormSubmitting,onClick:n.onAddEditSubmit},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(d,{key:"back",onClick:n.onAddEditClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(H,{layout:"vertical"},{default:a(()=>[t(E,{gutter:16},{default:a(()=>[t(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("product.unit_price"),name:"unit_price",help:n.addEditRules.unit_price?n.addEditRules.unit_price.message:null,validateStatus:n.addEditRules.unit_price?"error":null},{default:a(()=>[t(R,{value:n.addEditFormData.unit_price,"onUpdate:value":o[13]||(o[13]=V=>n.addEditFormData.unit_price=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.unit_price")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[u(s(n.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(E,{gutter:16},{default:a(()=>[t(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("product.discount"),name:"discount_rate",help:n.addEditRules.discount_rate?n.addEditRules.discount_rate.message:null,validateStatus:n.addEditRules.discount_rate?"error":null},{default:a(()=>[t(R,{value:n.addEditFormData.discount_rate,"onUpdate:value":o[14]||(o[14]=V=>n.addEditFormData.discount_rate=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.discount")]),min:"0",style:{width:"100%"}},{addonAfter:a(()=>[...o[18]||(o[18]=[u("%",-1)])]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(E,{gutter:16},{default:a(()=>[t(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("product.tax"),name:"tax_id",help:n.addEditRules.tax_id?n.addEditRules.tax_id.message:null,validateStatus:n.addEditRules.tax_id?"error":null},{default:a(()=>[g("span",N_,[t(S,{value:n.addEditFormData.tax_id,"onUpdate:value":o[15]||(o[15]=V=>n.addEditFormData.tax_id=V),placeholder:e.$t("common.select_default_text",[e.$t("product.tax")]),allowClear:!0,optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.taxes,V=>(r(),w(D,{key:V.xid,value:V.xid,title:V.name},{default:a(()=>[u(s(V.name)+" ("+s(V.rate)+"%) ",1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder"]),t(N,{onOnAddSuccess:n.taxAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(E,{gutter:16},{default:a(()=>[t(C,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(k,{label:e.$t("product.tax_type"),name:"tax_type",help:n.addEditRules.tax_type?n.addEditRules.tax_type.message:null,validateStatus:n.addEditRules.tax_type?"error":null},{default:a(()=>[t(S,{value:n.addEditFormData.tax_type,"onUpdate:value":o[16]||(o[16]=V=>n.addEditFormData.tax_type=V),placeholder:e.$t("common.select_default_text",[e.$t("product.tax_type")]),allowClear:!0},{default:a(()=>[(r(!0),$(I,null,G(n.taxTypes,V=>(r(),w(D,{key:V.key,value:V.key},{default:a(()=>[u(s(V.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])],64)}const Mt=W(L_,[["render",Y_]]),G_={components:{EyeOutlined:tt,PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,ExclamationCircleOutlined:Ae,SearchOutlined:ut,SaveOutlined:ve,BarcodeOutlined:ma,TaxAddButton:Ha,WarehouseAddButton:Bt,ProductAddButton:Ga,DateTimePicker:ya,AdminPageHeader:ge,UserSearch:Po},setup(){const{addEditRequestAdmin:e,loading:o,rules:c}=be(),{appSetting:n,formatAmount:v,formatAmountCurrency:h,taxTypes:m,orderStatus:d,purchaseOrderStatus:i,salesOrderStatus:p,salesReturnStatus:_,purchaseReturnStatus:f,permsArray:y,selectedWarehouse:b}=X(),{orderItemColumns:k}=_a(),{state:C,orderType:D,orderPageObject:S,route:P,selectedProducts:F,selectedProductIds:O,formData:E,productsAmount:U,taxes:K,setTaxes:z,recalculateValues:M,fetchProducts:R,searchValueSelected:q,quantityChanged:L,recalculateFinalTotal:j,showDeleteConfirm:Y,taxChanged:x,editItem:B,addEditVisible:N,addEditFormData:H,addEditFormSubmitting:J,addEditRules:se,addEditPageTitle:ce,onAddEditSubmit:V,onAddEditClose:ne,removedOrderItemsIds:te,calculateProductAmount:me,inputValueChanged:_e}=To(),{t:de}=ae(),ye=T([]),Fe=T([]),st=T([]),Q=P.params.id,$e=qe(),Te=T([]),Be="taxes?limit=10000",ct="units?limit=10000",pt=`warehouses?filters=id ne "${b.value.xid}"&hashable=${b.value.xid}&limit=10000`,re=T(!1);ee(()=>{const xe=axiosAdmin.get(`${D.value}/${Q}`),Ft=axiosAdmin.get(Be),ka=axiosAdmin.get(ct),aa=axiosAdmin.get(pt);Promise.all([xe,Ft,ka,aa]).then(([na,Ht,oa,wa])=>{const Ke=na.data;E.value={invoice_number:Ke.order.invoice_number,order_date:Ke.order.order_date,user_id:Ke.order.x_user_id,warehouse_id:Ke.order.x_warehouse_id,notes:Ke.order.notes,terms_condition:Ke.order.terms_condition,order_status:Ke.order.order_status,tax_id:Ke.order.x_tax_id,tax_rate:Ke.order.tax_rate,tax_amount:Ke.order.tax_amount,discount:Ke.order.discount?Ke.order.discount:0,shipping:Ke.order.shipping?Ke.order.shipping:0,subtotal:Ke.order.total},O.value=Ke.ids,F.value=Ke.items,me(),st.value=Ke.user,K.value=Ht.data,Fe.value=oa.data,ye.value=wa.data,Ke.order.payment_status!="unpaid"&&(re.value=!0)}),D.value=="purchases"?Te.value=i:D.value=="sales"?Te.value=p:D.value=="sales-returns"?Te.value=_:D.value=="purchase-returns"?Te.value=f:D.value=="quotations"?Te.value=[]:D.value=="stock-transfers"&&(Te.value=p)});const we=()=>{const xe={...E.value,total:E.value.subtotal,total_items:F.value.length,product_items:F.value,removed_items:te.value,_method:"PUT"};e({url:`${D.value}/${Q}`,data:xe,successMessage:de(`${S.value.langKey}.updated`),success:Ft=>{$e.push({name:`admin.stock.${D.value}.index`})}})},Re=()=>{axiosAdmin.get(ct).then(xe=>{Fe.value=xe.data})},He=()=>{axiosAdmin.get(Be).then(xe=>{K.value=xe.data})},Je=()=>{axiosAdmin.get(pt).then(xe=>{ye.value=xe.data})};return{...vt(C),formData:E,productsAmount:U,loading:o,rules:c,users:st,warehouses:ye,taxes:K,onSubmit:we,fetchProducts:R,searchValueSelected:q,selectedProducts:F,showDeleteConfirm:Y,quantityChanged:L,formatAmountCurrency:h,taxChanged:x,recalculateFinalTotal:j,appSetting:n,editItem:B,orderPageObject:S,orderItemColumns:k,addEditVisible:N,addEditFormData:H,addEditFormSubmitting:J,addEditRules:se,addEditPageTitle:ce,onAddEditSubmit:V,onAddEditClose:ne,allOrderStatus:Te,taxTypes:m,permsArray:y,unitAdded:Re,taxAdded:He,warehouseAdded:Je,editOrderDisable:re,inputValueChanged:_e}}},X_={style:{display:"flex"}},J_={style:{display:"flex"}},Q_={key:0},Z_={key:1},x_={style:{display:"flex"}},ef={style:{display:"flex"}};function tf(e,o,c,n,v,h){const m=l("SaveOutlined"),d=l("a-button"),i=l("a-page-header"),p=l("router-link"),_=l("a-breadcrumb-item"),f=l("a-breadcrumb"),y=l("AdminPageHeader"),b=l("a-alert"),k=l("a-input"),C=l("a-form-item"),D=l("a-col"),S=l("a-select-option"),P=l("a-select"),F=l("WarehouseAddButton"),O=l("UserSearch"),E=l("DateTimePicker"),U=l("a-row"),K=l("SearchOutlined"),z=l("a-spin"),M=l("ProductAddButton"),R=l("a-typography-text"),q=l("a-input-number"),L=l("EditOutlined"),j=l("DeleteOutlined"),Y=l("a-table-summary-cell"),x=l("a-table-summary-row"),B=l("a-table"),N=l("a-textarea"),H=l("TaxAddButton"),J=l("a-form"),se=l("a-card"),ce=l("a-modal");return r(),$(I,null,[t(y,null,{header:a(()=>[t(i,{title:e.$t(`menu.${n.orderPageObject.menuKey}`),onBack:o[0]||(o[0]=()=>e.$router.go(-1)),class:"p-0"},{extra:a(()=>[t(d,{type:"primary",loading:n.loading,onClick:n.onSubmit,block:""},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("common.save")),1)]),_:1},8,["loading","onClick"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(f,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(_,null,{default:a(()=>[t(p,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(_,null,{default:a(()=>[u(s(n.orderPageObject.type=="sales"||n.orderPageObject.type=="sales-returns"||n.orderPageObject.type=="quotations"?e.$t("menu.sales"):e.$t("menu.purchases")),1)]),_:1}),t(_,null,{default:a(()=>[t(p,{to:{name:`admin.stock.${n.orderPageObject.type}.index`}},{default:a(()=>[u(s(e.$t(`menu.${n.orderPageObject.menuKey}`)),1)]),_:1},8,["to"])]),_:1}),t(_,null,{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1})]),_:1})]),_:1}),t(se,{class:"page-content-container"},{default:a(()=>[n.editOrderDisable?(r(),w(b,{key:0,description:e.$t("messages.not_able_to_edit_order"),type:"warning",class:"mb-30",showIcon:""},null,8,["description"])):A("",!0),t(J,{layout:"vertical"},{default:a(()=>[t(U,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(C,{label:e.$t("stock.invoice_number"),name:"invoice_number",help:n.rules.invoice_number?n.rules.invoice_number.message:null,validateStatus:n.rules.invoice_number?"error":null},{default:a(()=>[t(k,{value:n.formData.invoice_number,"onUpdate:value":o[1]||(o[1]=V=>n.formData.invoice_number=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.invoice_number")]),disabled:n.editOrderDisable},null,8,["value","placeholder","disabled"])]),_:1},8,["label","help","validateStatus"])]),_:1}),n.orderPageObject.type=="stock-transfers"?(r(),w(D,{key:0,xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(C,{label:e.$t(`${n.orderPageObject.langKey}.warehouse`),name:"warehouse_id",help:n.rules.warehouse_id?n.rules.warehouse_id.message:null,validateStatus:n.rules.warehouse_id?"error":null,class:"required"},{default:a(()=>[g("span",X_,[t(P,{value:n.formData.warehouse_id,"onUpdate:value":o[2]||(o[2]=V=>n.formData.warehouse_id=V),placeholder:e.$t("common.select_default_text",[e.$t(`${n.orderPageObject.langKey}.warehouse`)]),allowClear:!0,optionFilterProp:"title","show-search":"",disabled:n.editOrderDisable},{default:a(()=>[(r(!0),$(I,null,G(n.warehouses,V=>(r(),w(S,{key:V.xid,value:V.xid,title:V.name},{default:a(()=>[u(s(V.name),1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder","disabled"]),t(F,{onOnAddSuccess:n.warehouseAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})):(r(),w(D,{key:1,xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(O,{orderPageObject:n.orderPageObject,rules:n.rules,usersList:n.users,editOrderDisable:n.editOrderDisable,onOnSuccess:o[3]||(o[3]=V=>n.formData.user_id=V)},null,8,["orderPageObject","rules","usersList","editOrderDisable"])]),_:1})),t(D,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(C,{label:e.$t(`${n.orderPageObject.langKey}.${n.orderPageObject.langKey}_date`),name:"order_date",help:n.rules.order_date?n.rules.order_date.message:null,validateStatus:n.rules.order_date?"error":null},{default:a(()=>[n.formData.order_date?(r(),w(E,{key:0,dateTime:n.formData.order_date,onDateTimeChanged:o[4]||(o[4]=V=>n.formData.order_date=V),disabled:n.editOrderDisable},null,8,["dateTime","disabled"])):A("",!0)]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(U,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(C,{label:e.$t("product.product"),name:"orderSearchTerm",help:n.rules.product_items?n.rules.product_items.message:null,validateStatus:n.rules.product_items?"error":null},{default:a(()=>[g("span",J_,[t(P,{value:null,searchValue:e.orderSearchTerm,"show-search":"","filter-option":!1,placeholder:e.$t("product.search_scan_product"),style:{width:"100%"},"not-found-content":e.productFetching?void 0:null,onSearch:o[5]||(o[5]=V=>{e.orderSearchTerm=V,n.fetchProducts(V)}),size:"large","option-label-prop":"label",onFocus:o[6]||(o[6]=V=>e.products=[]),onSelect:n.searchValueSelected,disabled:n.editOrderDisable,onInputKeyDown:n.inputValueChanged},Qe({suffixIcon:a(()=>[t(K)]),default:a(()=>[(r(!0),$(I,null,G(e.products,V=>(r(),w(S,{key:V.xid,value:V.xid,label:V.name,product:V},{default:a(()=>[u(" => "+s(V.name),1)]),_:2},1032,["value","label","product"]))),128))]),_:2},[e.productFetching?{name:"notFoundContent",fn:a(()=>[t(z,{size:"small"})]),key:"0"}:void 0]),1032,["searchValue","placeholder","not-found-content","onSelect","disabled","onInputKeyDown"]),t(M,{size:"large"})])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(U,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(B,{"row-key":V=>V.xid,dataSource:n.selectedProducts,columns:n.orderItemColumns,pagination:!1},{bodyCell:a(({column:V,record:ne})=>[V.dataIndex==="name"?(r(),$(I,{key:0},[u(s(ne.name)+" ",1),o[17]||(o[17]=g("br",null,null,-1)),g("small",null,[t(R,{code:""},{default:a(()=>[u(s(e.$t("product.avl_qty"))+" "+s(`${ne.stock_quantity}${ne.unit_short_name}`),1)]),_:2},1024)])],64)):A("",!0),V.dataIndex==="unit_quantity"?(r(),w(q,{key:1,id:"inputNumber",value:ne.quantity,"onUpdate:value":te=>ne.quantity=te,onChange:te=>n.quantityChanged(ne),min:0,disabled:n.editOrderDisable},null,8,["value","onUpdate:value","onChange","disabled"])):A("",!0),V.dataIndex==="single_unit_price"?(r(),$(I,{key:2},[u(s(n.formatAmountCurrency(ne.single_unit_price)),1)],64)):A("",!0),V.dataIndex==="discount_amount"?(r(),$(I,{key:3},[u(s(n.formatAmountCurrency(ne.discount_amount)),1)],64)):A("",!0),V.dataIndex==="total_tax"?(r(),$(I,{key:4},[u(s(n.formatAmountCurrency(ne.total_tax)),1)],64)):A("",!0),V.dataIndex==="subtotal"?(r(),$(I,{key:5},[u(s(n.formatAmountCurrency(ne.subtotal)),1)],64)):A("",!0),V.dataIndex==="action"?(r(),$(I,{key:6},[n.editOrderDisable?(r(),$("div",Q_,"-")):(r(),$("div",Z_,[t(d,{type:"primary",onClick:te=>n.editItem(ne),style:{"margin-left":"4px"}},{icon:a(()=>[t(L)]),_:1},8,["onClick"]),t(d,{type:"primary",onClick:te=>n.showDeleteConfirm(ne),style:{"margin-left":"4px"}},{icon:a(()=>[t(j)]),_:1},8,["onClick"])]))],64)):A("",!0)]),summary:a(()=>[t(x,null,{default:a(()=>[t(Y,{"col-span":4}),t(Y,null,{default:a(()=>[u(s(e.$t("product.subtotal")),1)]),_:1}),t(Y,null,{default:a(()=>[u(s(n.formatAmountCurrency(n.productsAmount.tax)),1)]),_:1}),t(Y,{"col-span":2},{default:a(()=>[u(s(n.formatAmountCurrency(n.productsAmount.subtotal)),1)]),_:1})]),_:1})]),_:1},8,["row-key","dataSource","columns"])]),_:1})]),_:1}),t(U,{gutter:16,class:"mt-30"},{default:a(()=>[t(D,{xs:24,sm:24,md:16,lg:16},{default:a(()=>[t(U,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(C,{label:e.$t("warehouse.terms_condition"),name:"terms_condition",help:n.rules.terms_condition?n.rules.terms_condition.message:null,validateStatus:n.rules.terms_condition?"error":null},{default:a(()=>[t(N,{value:n.formData.terms_condition,"onUpdate:value":o[7]||(o[7]=V=>n.formData.terms_condition=V),placeholder:e.$t("warehouse.terms_condition"),"auto-size":{minRows:2,maxRows:3},disabled:n.editOrderDisable},null,8,["value","placeholder","disabled"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(U,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(C,{label:e.$t("stock.notes"),name:"notes",help:n.rules.notes?n.rules.notes.message:null,validateStatus:n.rules.notes?"error":null},{default:a(()=>[t(N,{value:n.formData.notes,"onUpdate:value":o[8]||(o[8]=V=>n.formData.notes=V),placeholder:e.$t("common.select_default_text",[e.$t("stock.notes")]),rows:5,disabled:n.editOrderDisable},null,8,["value","placeholder","disabled"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1}),t(D,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[n.orderPageObject.type!="quotations"?(r(),w(U,{key:0,gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(C,{label:e.$t("stock.status"),name:"order_status",help:n.rules.order_status?n.rules.order_status.message:null,validateStatus:n.rules.order_status?"error":null},{default:a(()=>[t(P,{value:n.formData.order_status,"onUpdate:value":o[9]||(o[9]=V=>n.formData.order_status=V),placeholder:e.$t("common.select_default_text",[e.$t("stock.status")]),allowClear:!0},{default:a(()=>[(r(!0),$(I,null,G(n.allOrderStatus,V=>(r(),w(S,{key:V.key,value:V.key},{default:a(()=>[u(s(V.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),t(U,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(C,{label:e.$t("stock.order_tax"),name:"tax_id",help:n.rules.tax_id?n.rules.tax_id.message:null,validateStatus:n.rules.tax_id?"error":null},{default:a(()=>[g("span",x_,[t(P,{value:n.formData.tax_id,"onUpdate:value":o[10]||(o[10]=V=>n.formData.tax_id=V),placeholder:e.$t("common.select_default_text",[e.$t("stock.order_tax")]),allowClear:!0,onChange:n.taxChanged,optionFilterProp:"title","show-search":"",disabled:n.editOrderDisable},{default:a(()=>[(r(!0),$(I,null,G(n.taxes,V=>(r(),w(S,{key:V.xid,value:V.xid,title:V.name,tax:V},{default:a(()=>[u(s(V.name)+" ("+s(V.rate)+"%) ",1)]),_:2},1032,["value","title","tax"]))),128))]),_:1},8,["value","placeholder","onChange","disabled"]),t(H,{onOnAddSuccess:n.taxAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(U,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(C,{label:e.$t("stock.discount"),name:"discount",help:n.rules.discount?n.rules.discount.message:null,validateStatus:n.rules.discount?"error":null},{default:a(()=>[t(q,{value:n.formData.discount,"onUpdate:value":o[11]||(o[11]=V=>n.formData.discount=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.discount")]),onChange:n.recalculateFinalTotal,min:"0",style:{width:"100%"},disabled:n.editOrderDisable},{addonBefore:a(()=>[u(s(n.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder","onChange","disabled"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(U,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(C,{label:e.$t("stock.shipping"),name:"shipping",help:n.rules.shipping?n.rules.shipping.message:null,validateStatus:n.rules.shipping?"error":null},{default:a(()=>[t(q,{value:n.formData.shipping,"onUpdate:value":o[12]||(o[12]=V=>n.formData.shipping=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.shipping")]),onChange:n.recalculateFinalTotal,min:"0",style:{width:"100%"},disabled:n.editOrderDisable},{addonBefore:a(()=>[u(s(n.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder","onChange","disabled"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(U,{gutter:16,class:"mt-10"},{default:a(()=>[t(D,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[u(s(e.$t("stock.order_tax")),1)]),_:1}),t(D,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[u(s(n.formatAmountCurrency(n.formData.tax_amount)),1)]),_:1})]),_:1}),t(U,{gutter:16,class:"mt-10"},{default:a(()=>[t(D,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[u(s(e.$t("stock.discount")),1)]),_:1}),t(D,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[u(s(n.formatAmountCurrency(n.formData.discount)),1)]),_:1})]),_:1}),t(U,{gutter:16,class:"mt-10"},{default:a(()=>[t(D,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[u(s(e.$t("stock.shipping")),1)]),_:1}),t(D,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[u(s(n.formatAmountCurrency(n.formData.shipping)),1)]),_:1})]),_:1}),t(U,{gutter:16,class:"mt-10"},{default:a(()=>[t(D,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[u(s(e.$t("stock.grand_total")),1)]),_:1}),t(D,{xs:12,sm:12,md:12,lg:12},{default:a(()=>[u(s(n.formatAmountCurrency(n.formData.subtotal)),1)]),_:1})]),_:1}),t(U,{gutter:16,class:"mt-20 mb-20"},{default:a(()=>[t(d,{type:"primary",loading:n.loading,onClick:n.onSubmit,block:""},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("common.save")),1)]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(ce,{open:n.addEditVisible,closable:!1,centered:!0,title:n.addEditPageTitle,onOk:n.onAddEditSubmit},{footer:a(()=>[t(d,{key:"submit",type:"primary",loading:n.addEditFormSubmitting,onClick:n.onAddEditSubmit},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(d,{key:"back",onClick:n.onAddEditClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(J,{layout:"vertical"},{default:a(()=>[t(U,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(C,{label:e.$t("product.unit_price"),name:"unit_price",help:n.addEditRules.unit_price?n.addEditRules.unit_price.message:null,validateStatus:n.addEditRules.unit_price?"error":null},{default:a(()=>[t(q,{value:n.addEditFormData.unit_price,"onUpdate:value":o[13]||(o[13]=V=>n.addEditFormData.unit_price=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.unit_price")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[u(s(n.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(U,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(C,{label:e.$t("product.discount"),name:"discount_rate",help:n.addEditRules.discount_rate?n.addEditRules.discount_rate.message:null,validateStatus:n.addEditRules.discount_rate?"error":null},{default:a(()=>[t(q,{value:n.addEditFormData.discount_rate,"onUpdate:value":o[14]||(o[14]=V=>n.addEditFormData.discount_rate=V),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.discount")]),min:"0",style:{width:"100%"}},{addonAfter:a(()=>[...o[18]||(o[18]=[u("%",-1)])]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(U,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(C,{label:e.$t("product.tax"),name:"tax_id",help:n.addEditRules.tax_id?n.addEditRules.tax_id.message:null,validateStatus:n.addEditRules.tax_id?"error":null},{default:a(()=>[g("span",ef,[t(P,{value:n.addEditFormData.tax_id,"onUpdate:value":o[15]||(o[15]=V=>n.addEditFormData.tax_id=V),placeholder:e.$t("common.select_default_text",[e.$t("product.tax")]),allowClear:!0,optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.taxes,V=>(r(),w(S,{key:V.xid,value:V.xid,title:V.name},{default:a(()=>[u(s(V.name)+" ("+s(V.rate)+"%) ",1)]),_:2},1032,["value","title"]))),128))]),_:1},8,["value","placeholder"]),t(H,{onOnAddSuccess:n.taxAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(U,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(C,{label:e.$t("product.tax_type"),name:"tax_type",help:n.addEditRules.tax_type?n.addEditRules.tax_type.message:null,validateStatus:n.addEditRules.tax_type?"error":null},{default:a(()=>[t(P,{value:n.addEditFormData.tax_type,"onUpdate:value":o[16]||(o[16]=V=>n.addEditFormData.tax_type=V),placeholder:e.$t("common.select_default_text",[e.$t("product.tax_type")]),allowClear:!0},{default:a(()=>[(r(!0),$(I,null,G(n.taxTypes,V=>(r(),w(S,{key:V.key,value:V.key},{default:a(()=>[u(s(V.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])],64)}const qt=W(G_,[["render",tf]]),af={components:{PlusOutlined:le,DeleteOutlined:fe,OrderTable:ea,DateRangePicker:rt,AdminPageHeader:ge},setup(){const{formatAmountCurrency:e,orderType:o,orderPageObject:c,orderStatus:n,permsArray:v}=X(),h=Ze(),m=T([]),d=T(null),i=T([]),p=T(null),_=T({payment_status:"all",user_id:void 0,dates:[],searchColumn:"invoice_number",searchString:""});ee(()=>{f()});const f=()=>{const y=axiosAdmin.get(`${c.value.userType}?limit=10000`);Promise.all([y]).then(([b])=>{m.value=b.data})};return ue(()=>h.meta.orderType,(y,b)=>{(y=="purchases"||y=="purchase-returns"||y=="sales"||y=="sales-returns"||y=="quotations")&&(o.value=h.meta.orderType,_.value={payment_status:"all",user_id:void 0,dates:[],searchColumn:"invoice_number",searchString:""},f(),d.value.resetPicker())}),{orderPageObject:c,permsArray:v,orderStatus:n,formatAmountCurrency:e,users:m,filters:_,orderType:o,serachDateRangePicker:d,selectedRowIds:i,orderTableRef:p}}};function nf(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("PlusOutlined"),y=l("a-button"),b=l("DeleteOutlined"),k=l("a-space"),C=l("a-col"),D=l("a-input-search"),S=l("a-select-option"),P=l("a-select"),F=l("DateRangePicker"),O=l("a-row"),E=l("admin-page-filters"),U=l("a-tab-pane"),K=l("a-tabs"),z=l("OrderTable"),M=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t(`menu.${n.orderPageObject.menuKey}`),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(n.orderPageObject.type=="sales"||n.orderPageObject.type=="sales-returns"||n.orderPageObject.type=="quotations"?e.$t("menu.sales"):e.$t("menu.purchases")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t(`menu.${n.orderPageObject.menuKey}`)),1)]),_:1})]),_:1})]),_:1}),t(E,null,{default:a(()=>[t(O,{gutter:[16,16]},{default:a(()=>[t(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(k,null,{default:a(()=>[n.permsArray.includes(`${n.orderPageObject.permission}_create`)||n.permsArray.includes("admin")?(r(),w(d,{key:0,to:{name:`admin.stock.${n.orderPageObject.type}.create`}},{default:a(()=>[t(y,{type:"primary"},{default:a(()=>[t(f),u(" "+s(e.$t(`${n.orderPageObject.langKey}.add`)),1)]),_:1})]),_:1},8,["to"])):A("",!0),n.selectedRowIds.length>0&&(n.permsArray.includes(`${n.orderPageObject.permission}_view`)||n.permsArray.includes("admin"))?(r(),w(y,{key:1,type:"primary",onClick:n.orderTableRef.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(b)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(O,{gutter:[16,16],justify:"end"},{default:a(()=>[t(C,{xs:24,sm:24,md:12,lg:8,xl:6},{default:a(()=>[t(D,{style:{width:"100%"},value:n.filters.searchString,"onUpdate:value":o[0]||(o[0]=R=>n.filters.searchString=R),"show-search":"",placeholder:e.$t("common.placeholder_search_text",[e.$t("stock.invoice_number")])},null,8,["value","placeholder"])]),_:1}),t(C,{xs:24,sm:24,md:8,lg:8,xl:6},{default:a(()=>[t(P,{value:n.filters.user_id,"onUpdate:value":o[1]||(o[1]=R=>n.filters.user_id=R),placeholder:e.$t("common.select_default_text",[e.$t(`${n.orderPageObject.langKey}.user`)]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.users,R=>(r(),w(S,{key:R.xid,title:R.name,value:R.xid},{default:a(()=>[u(s(R.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1}),t(C,{xs:24,sm:24,md:8,lg:8,xl:6},{default:a(()=>[t(F,{ref:"serachDateRangePicker",onDateTimeChanged:o[2]||(o[2]=R=>n.filters.dates=R)},null,512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(M,null,{default:a(()=>[t(O,null,{default:a(()=>[t(C,{span:24},{default:a(()=>[t(K,{activeKey:n.filters.payment_status,"onUpdate:activeKey":o[3]||(o[3]=R=>n.filters.payment_status=R)},{default:a(()=>[t(U,{key:"all",tab:`${e.$t("common.all")} ${e.$t("menu."+n.orderPageObject.menuKey)}`},null,8,["tab"]),(r(!0),$(I,null,G(n.orderStatus,R=>(r(),w(U,{key:R.key,tab:`${R.value}`},null,8,["tab"]))),128))]),_:1},8,["activeKey"])]),_:1})]),_:1}),t(z,{ref:"orderTableRef",orderType:n.orderType,filters:n.filters,tableSize:"middle",bordered:!0,selectable:!0,onOnRowSelection:o[4]||(o[4]=R=>n.selectedRowIds=R)},null,8,["orderType","filters"])]),_:1})],64)}const Gt=W(af,[["render",nf]]);It.div`
    border-radius: 10px;
    background-color: #fff;
    position: relative;
	width: 100%;

    @media only screen and (max-width: 767px){
        max-width: 350px;
        margin: 0 auto;
    }
    &.list-view{
        max-width: 100%;
        .product-single-price__offer{
            @media only screen and (max-width: 991px) and (min-width: 768px){
                display: block;
            }
        }
    }
    .product-list{
        background-color: #fff;
        padding: 20px;
        border-radius: 10px;
        figure{
            @media only screen and (max-width: 1199px){
            }
            @media only screen and (max-width: 991px){
                margin: 0 0 20px;
            }
            img{
                border-radius: 10px;
            }
        }
        .product-single-description{
            p{
                font-size: 15px;
            }
        }
        .product-single-title{
            font-size: 18px;
            margin: 25px 0 16px;
            @media only screen and (max-width: 1199px){
                margin: 0 0 16px;
            }
        }
        .product-single-info{
            margin-top: 25px;
            @media only screen and (max-width: 1199px){
                margin-top: 0;
            }
        }
        .product-single-price__new{
            font-size: 16px;
        }
        .product-single-action{
            flex-flow: column;
            align-items: flex-start;
            margin: 28px 0 0 0;
            button{
                min-width: 132px;
                margin: 0;
                padding: 0px 14px;
                height: 38px;
            }
            .btn-cart{
                margin: 0 0 10px;
            }
            .ant-btn-sm{
                height: 38px;
            }
        }
        .btn-heart{
            @media only screen and (max-width: 1599px){
                top: 0;
            }
            @media only screen and (max-width: 1199px){
                top: -4px;
            }
            @media only screen and (max-width: 991){
                top: 0;
            }
        }
    }
    figure{
        margin-bottom: 0;
        img{
            width: 100px;
        }
    }
    figcaption{
        padding: 20px 20px 26px;
    }
    .quantity-box{
        position: absolute;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        height: 15px;
        top: 1px;
        background-color: #fff;
		padding: 0 6px;
		left: 1px;
    }
    .product-single-title{
        margin-bottom: 10px;
        font-size: 15px;
        font-weight: 500;

    }
    .product-single-price{
        margin-bottom: 5px;
        del{
            margin: 0 5px;
        }
    }
    .product-single-price__new{
        font-weight: 600;
    }
    .product-single-price__offer{
        font-weight: 500;
        font-size: 12px;
    }
    .product-single-rating{
        font-size: 12px;
        font-weight: 500;
        display: flex;
        flex-wrap: wrap;
        align-items: center;

        .ant-rate-star{
            div{
                transform: none !important;
            }
        }
        .total-reviews{
            font-weight: 400;
          
        }
        svg{
            width: 13px;
        }
    }
    .product-single-action{
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        margin: 20px -5px -5px -5px;
        button{
            font-size: 12px;
            margin: 5px;
        }


        .ant-btn-sm{
            font-size: 12px;
            padding: 0px 18.065px;
            height: 36px;
        }
    }
`;const of=It.div`
    max-width: 650px;
    margin: 0 auto;
    .ant-card{
        margin-bottom: 0 !important;
    }

    .ant-form-item{
        margin-bottom: 0;
    }

    .summary-table-title{
        font-size: 18px;
        font-weight: 500;
        margin-bottom: 25px;
      
    }
    .order-summary-inner{
        padding-bottom: 5px;
        @media only screen and (max-width: 1599px){
            max-width: 600px;
            margin: 0 auto;
        }
        .ant-form-item-control{
            line-height: 2.2;
        }
        .ant-form-item-control-wrapper{
            width: 100%;
        }
        .ant-select{
            .ant-select-selection-item{
                font-weight: 500;
            }
        }
        .ant-select-single:not(.ant-select-customize-input) .ant-select-selector{
            height: 30px !important;
        }
    }
    .invoice-summary-inner{
        .summary-list{
            margin: 22px 0;
            li{
                &:not(:last-child){
                    margin-bottom: 12px;
                }
            }
        }
      
    }

    .summary-list{
		padding: 0;
        li{
            display: flex;
            justify-content: space-between;
            &:not(:last-child){
                margin-bottom: 18px;
            }
            span{
                font-weight: 500;
            }
          
        }
    }
    .ant-select-focused.ant-select-single{
        .ant-select-selector{
            box-shadow: 0 0 !important;
        }
    }
    .ant-select-single{
        margin-top: 18px;
        .ant-select-selection-search-input{
            height: fit-content;
        }
        .ant-select-selector{
            padding: 0 !important;
            border: 0 none !important;
            
        }
       
    }
    .promo-apply-form{
        display: flex;
        align-items: flex-end;
        margin: 5px 0 18px;
        @media only screen and (max-width: 479px){
            flex-flow: column;
            align-items: flex-start;
        }
        .ant-form-item{
            margin-bottom: 0;
        }
        .ant-row{
            flex: auto;
            flex-flow: column;
        }
        .ant-form-item-label{
            text-align: 'right';
            line-height: 30px;
            label{
                font-weight: 400;
                margin-bottom: 4px;
                height: fit-content;
                
            }
        }
        .ant-form-item-control-wrapper{
            display: flex;
            width: 100%;
            @media only screen and (max-width: 479px){
                flex-flow: column;
            }
            .ant-form-item-control{
                width: 100%;
            }
            .ant-form-item-children{
                display: block;
                margin: '0 6px 0 0';
                height: auto;
                @media only screen and (max-width: 479px){
                    margin: '0 6px 10px 0';
                }
            }
            input{
                height: 40px;
                @media only screen and (max-width: 479px){
                    width: 100% !important;
                }
            }
            button{
                height: 40px;
            }
        }
    }
    .summary-total{
        display: inline-flex;
        justify-content: space-between;
        width: 100%;
        .summary-total-label{
            font-size: 16px;
            font-weight: 500;
          
        }
        .summary-total-amount{
            font-size: 18px;
            font-weight: 600;
          
        }
    }
    .btn-proceed{
        font-size: 15px;
        font-weight: 500;
        width: 100%;
        height: 50px;
        border-radius: 8px;
        margin-top: 22px;
        @media only screen and (max-width: 575px){
            font-size: 13px;
        }
        a{
            display: flex;
            align-items: center;
        }
        i,
        svg{
            'margin-left' : 6px;
            color: #fff;
        }
    }
`,lf=()=>{const{t:e}=ae();ke();const o=T([]);T([]);const c=T([]),n=T([]),v=T([]),h=T([]),m=T({}),d=T(),i=T(),p=T({}),_=T({user_id:void 0,tax_id:void 0,category_id:void 0,brand_id:void 0,tax_id:void 0,tax_rate:0,tax_amount:0,discount_type:"percentage",discount_value:0,discount:0,shipping:0,subtotal:0}),f=[{title:"#",dataIndex:"sn"},{title:e("product.name"),dataIndex:"name"},{title:e("product.quantity"),dataIndex:"unit_quantity"},{title:e("product.subtotal"),dataIndex:"subtotal"},{title:e("common.action"),dataIndex:"action"}],y="customers?limit=10000",b=()=>{const C=axiosAdmin.get("taxes?limit=10000"),D=axiosAdmin.get(y),S=axiosAdmin.get("categories?limit=10000"),P=axiosAdmin.get("brands?limit=10000"),F=axiosAdmin.post("pos/products",{brand_id:_.value.brand_id,category_id:_.value.category_id}),O=axiosAdmin.get("default-walkin-customer");Promise.all([C,D,F,S,P,O]).then(([E,U,K,z,M,R])=>{o.value=E.data,c.value=U.data,v.value=z.data,n.value=M.data,h.value=K.data.products;var q=at(c.value,["xid",R.data.customer.xid]);q&&(m.value=q,_.value={..._.value,user_id:q.xid}),k()})},k=()=>{var C=1;Ce(o.value,D=>{C==1&&(p.value=D,_.value.tax_id=D.xid,i.value=D.rate,d.value=D.xid),C+=1})};return{taxes:o,customers:c,brands:n,categories:v,productLists:h,formData:_,customerUrl:y,orderItemColumns:f,getPreFetchData:b,posDefaultCustomer:m,taxObject:p,fixedTaxRateId:d,fixedTaxRate:i}};const sf={props:["product"],setup(e){const{formatAmountCurrency:o}=X();return{formatAmountCurrency:o}}},rf={key:0,class:"product-pos"},df={class:"product-pos-top"},uf={href:"javascript:void(0)"},mf={class:"quantity-box",to:"#"},cf=["src"],pf={class:"product-pos-bottom"},_f={class:"product-title"},ff={class:"product-details"},gf={class:"product-price"};function yf(e,o,c,n,v,h){return c.product&&c.product.xid?(r(),$("div",rf,[g("div",df,[g("a",uf,[g("span",mf,s(c.product.stock_quantity)+" "+s(c.product.unit.short_name),1),g("img",{src:c.product.image_url,class:"img-fit"},null,8,cf)])]),g("div",pf,[g("div",null,[g("h5",_f,s(c.product.name),1)]),g("div",ff,[g("div",gf,[g("span",null,s(n.formatAmountCurrency(c.product.subtotal)),1)])])])])):A("",!0)}const hf=W(sf,[["render",yf]]),vf={__name:"PaymentMethods",emits:["select","mpesa"],setup(e){return(o,c)=>{const n=l("a-button"),v=l("a-col"),h=l("a-row");return r(),w(h,{gutter:16,class:"mt-20"},{default:a(()=>[t(v,{span:8},{default:a(()=>[t(n,{block:"",type:"dashed",onClick:c[0]||(c[0]=m=>o.$emit("mpesa"))},{default:a(()=>[...c[1]||(c[1]=[u(" M-Pesa ",-1)])]),_:1})]),_:1})]),_:1})}}},bf={style:{"margin-top":"16px","text-align":"right"}},kf={key:1,style:{"text-align":"center",padding:"24px"}},wf={key:2,style:{"text-align":"center",padding:"24px"}},Cf={__name:"MpesaModal",props:{visible:Boolean,amount:Number},emits:["send","close","cancelPolling"],setup(e,{expose:o,emit:c}){const n=e,v=c,h=T("input"),m=T(""),d=T(!1),i=T(!1),p=T(""),_=T(null),f=()=>{h.value==="input"&&!d.value&&b()},y=()=>{h.value==="polling"&&S()},b=()=>{m.value&&(d.value=!0,v("send",{phone:m.value,amount:n.amount}))},k=()=>{d.value=!1,h.value="polling"},C=(F,O="")=>{i.value=F,p.value=O||(F?"Transaction completed.":"Transaction was not completed."),h.value="result",d.value=!1},D=()=>{h.value="input",d.value=!1},S=()=>{v("cancelPolling"),D()},P=()=>{h.value==="polling"&&S(),v("close"),setTimeout(D,300)};return ue(()=>n.visible,F=>{F&&ca(()=>{var O;return(O=_.value)==null?void 0:O.focus()})}),o({startPolling:k,stopPolling:C}),(F,O)=>{const E=l("a-input"),U=l("a-form-item"),K=l("a-alert"),z=l("a-button"),M=l("a-form"),R=l("a-spin"),q=l("a-result"),L=l("a-modal");return r(),w(L,{title:"M-Pesa Payment",open:e.visible,footer:null,onCancel:P,onKeydown:[sn(f,["enter"]),sn(y,["esc"])]},{default:a(()=>[h.value==="input"?(r(),w(M,{key:0,layout:"vertical"},{default:a(()=>[t(U,{label:"Phone Number",extra:"Enter number in format 2547XXXXXXXX"},{default:a(()=>[t(E,{onPressEnter:b,size:"medium",value:m.value,"onUpdate:value":O[0]||(O[0]=j=>m.value=j),placeholder:"2547XXXXXXXX",disabled:d.value,ref_key:"phoneInput",ref:_},null,8,["value","disabled"])]),_:1}),t(K,{type:"info",message:`Total Amount: KES ${e.amount}`,"show-icon":""},null,8,["message"]),g("div",bf,[t(z,{onClick:P},{default:a(()=>[...O[1]||(O[1]=[u("Cancel",-1)])]),_:1}),t(z,{loading:d.value,type:"primary",style:{"margin-left":"8px"},onClick:b},{default:a(()=>[u(s(d.value?"Requesting...":"Pay Now"),1)]),_:1},8,["loading"])])]),_:1})):h.value==="polling"?(r(),$("div",kf,[t(R,{size:"large"}),O[3]||(O[3]=g("h3",{style:{"margin-top":"16px"}},"Waiting for PIN entry...",-1)),O[4]||(O[4]=g("p",null,"Please check your phone and enter your M-Pesa PIN.",-1)),t(z,{danger:"",ghost:"",onClick:S,style:{"margin-top":"8px"}},{default:a(()=>[...O[2]||(O[2]=[u(" Stop Waiting (Esc) ",-1)])]),_:1})])):h.value==="result"?(r(),$("div",wf,[t(q,{status:i.value?"success":"error",title:i.value?"Payment Successful!":"Payment Failed","sub-title":p.value},{extra:a(()=>[t(z,{size:"large",type:"primary",onClick:P},{default:a(()=>[...O[5]||(O[5]=[u("Close",-1)])]),_:1}),i.value?A("",!0):(r(),w(z,{key:0,size:"large",onClick:D},{default:a(()=>[...O[6]||(O[6]=[u("Try Again",-1)])]),_:1}))]),_:1},8,["status","title","sub-title"])])):A("",!0)]),_:1},8,["open"])}}};const Sf={props:["visible","data","selectedProducts"],emits:["closed","success"],components:{CheckOutlined:ht,PlusOutlined:le,LeftOutlined:Bn,RightOutlined:pa,DeleteOutlined:fe,PaymentMethods:vf,MpesaModal:Cf},setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n,rules:v}=be(),{appSetting:h,formatAmountCurrency:m}=X(),d=T([]),i=T({payment_mode_id:void 0,amount:0,notes:""}),{t:p}=ae(),_=T([]),f=T(!1);let y=null,b=!1;const k=T(null),C=T([{title:p("payments.payment_mode"),dataIndex:"payment_mode"},{title:p("payments.amount"),dataIndex:"amount"},{title:p("common.action"),dataIndex:"action"}]),D=T(!1),S=T(null),P=()=>{f.value=!0},F=Y=>{b=!1,c({url:"pos/payment/stkpush",data:Y,success:x=>{console.log(x.CheckoutRequestID),k.value.startPolling(),O(x.CheckoutRequestID),D.value=!1}})},O=Y=>{if(E(),b){console.log("Payment already completed, skipping poll");return}const x=60;let B=0;const N=async()=>{if(b){console.log("Payment already completed, stopping poll"),E();return}try{const H=await _t.get("/api/v1/pos/payment/mpesa/check-status",{params:{checkout_request_id:Y}});if(console.log("Payment status check attempt:",B+1,H.data),H.data.success){const J=H.data.status;if(console.log(J),J==="completed"){b=!0,E(!0);return}else if(J==="failed"){E();return}else B++,console.log("Payment still processing, attempts:",B),B<x&&!b?y=setTimeout(N,5e3):(console.log("Payment polling timeout or stopped"),processing.value=!1,E(!1))}else B++,B<x&&!b?y=setTimeout(N,5e3):(errorMessage.value=H.data.message||"Unable to verify payment status.",processing.value=!1,E(!1))}catch(H){console.error("Status check error:",H),B++,B<x&&!b?y=setTimeout(N,5e3):(processing.value=!1,E())}};console.log("Starting payment polling..."),y=setTimeout(N,1e4)},E=(Y=!1)=>{y&&(k.value.stopPolling(Y),clearTimeout(y),y=null,console.log("Polling stopped"))};ee(()=>{axiosAdmin.get("payment-modes").then(Y=>{d.value=Y.data})});const U=()=>{i.value={payment_mode_id:void 0,amount:0,notes:""},_.value=[],o("closed")},K=()=>{c({url:"pos/payment",data:i.value,success:Y=>{_.value=[..._.value,{...i.value,id:Math.random().toString(36).slice(2)}],i.value={payment_mode_id:void 0,amount:0,notes:""},D.value=!1}})},z=()=>{const Y={all_payments:_.value,product_items:e.selectedProducts,details:e.data};c({url:"pos/save",data:Y,successMessage:e.successMessage,success:x=>{i.value={payment_mode_id:void 0,amount:0,notes:""},_.value=[],D.value=!1,o("success",x.order)}})},M=Y=>{alert("dsdsd"),console.log(Y),S.value=Y},R=()=>{i.value={payment_mode_id:void 0,amount:0,notes:""},D.value=!1},q=Y=>{var x=at(d.value,["xid",Y]);return x?x.name:"-"},L=Y=>{var x=et(_.value,B=>B.id!=Y);_.value=x},j=pe(()=>{var Y=Ma(_.value,x=>parseFloat(x.amount));return Y+parseFloat(i.value.amount)});return{loading:n,rules:v,drawerClosed:U,paymentModes:d,formData:i,appSetting:h,formatAmountCurrency:m,onSubmit:K,openMpesa:P,sendMpesa:F,selectMode:M,mpesaVisible:f,stopPolling:E,allPaymentRecords:_,paymentRecordsColumns:C,showAddForm:D,mpesaStkPushModal:k,completeOrder:z,goBack:R,getPaymentModeName:q,deletePayment:L,totalEnteredAmount:j,drawerWidth:window.innerWidth<=991?"90%":"50%"}}},$f={class:"checkout-layout"},Df={class:"summary-panel"},Af={class:"summary-card"},Tf={class:"summary-item"},Ef={class:"label"},Of={class:"value"},If={class:"summary-item"},Pf={class:"label"},Uf={class:"value total"},Ff={class:"summary-item highlight"},Mf={class:"label"},qf={class:"value success"},Rf={class:"label"},Kf={class:"value"},Vf={key:0,class:"sidebar-actions mt-24"},zf={class:"controls-panel"},Lf={class:"section-header"},Bf={key:0,class:"payment-methods-wrapper"},Wf={class:"table-section mt-24"},jf={key:0,class:"mode-tag"},Hf={key:1,class:"amount-text"},Nf={key:1,class:"form-wrapper"};function Yf(e,o,c,n,v,h){const m=l("a-divider"),d=l("RightOutlined"),i=l("a-button"),p=l("PlusOutlined"),_=l("LeftOutlined"),f=l("PaymentMethods"),y=l("DeleteOutlined"),b=l("a-table"),k=l("a-select-option"),C=l("a-select"),D=l("a-form-item"),S=l("a-col"),P=l("a-input-number"),F=l("a-textarea"),O=l("a-row"),E=l("a-form"),U=l("MpesaModal"),K=l("a-drawer");return r(),w(K,{title:e.$t("payments.order_payment"),width:n.drawerWidth,maskClosable:!1,open:c.visible,onClose:n.drawerClosed,class:"modern-payment-drawer"},{default:a(()=>[g("div",$f,[g("div",Df,[g("div",Af,[g("div",Tf,[g("span",Ef,s(e.$t("stock.total_items")),1),g("span",Of,s(c.selectedProducts.length),1)]),t(m),g("div",If,[g("span",Pf,s(e.$t("stock.payable_amount")),1),g("span",Uf,s(n.formatAmountCurrency(c.data.subtotal)),1)]),g("div",Ff,[g("span",Mf,s(e.$t("stock.paying_amount")),1),g("span",qf,s(n.formatAmountCurrency(n.totalEnteredAmount)),1)]),g("div",{class:kt(["summary-item status-box",n.totalEnteredAmount<c.data.subtotal?"due":"change"])},[g("span",Rf,s(n.totalEnteredAmount<=c.data.subtotal?e.$t("payments.due_amount"):e.$t("stock.change_return")),1),g("span",Kf,s(n.formatAmountCurrency(Math.abs(c.data.subtotal-n.totalEnteredAmount))),1)],2)]),n.showAddForm?A("",!0):(r(),$("div",Vf,[t(i,{block:"",type:"primary",size:"large",class:"action-btn checkout-btn",onClick:n.completeOrder},{icon:a(()=>[t(d)]),default:a(()=>[u(s(e.$t("stock.complete_order"))+" ",1)]),_:1},8,["onClick"]),t(i,{block:"",size:"large",class:"action-btn add-btn mt-12",onClick:o[0]||(o[0]=()=>n.showAddForm=!0)},{icon:a(()=>[t(p)]),default:a(()=>[u(" "+s(e.$t("payments.add")),1)]),_:1})]))]),g("div",zf,[g("div",Lf,[g("h3",null,s(n.showAddForm?e.$t("payments.add"):e.$t("payments.payment_mode")),1),n.showAddForm?(r(),w(i,{key:0,type:"link",onClick:n.goBack,class:"back-link"},{default:a(()=>[t(_),u(" "+s(e.$t("common.back")),1)]),_:1},8,["onClick"])):A("",!0)]),n.showAddForm?(r(),$("div",Nf,[t(E,{layout:"vertical",class:"payment-form"},{default:a(()=>[t(O,{gutter:16},{default:a(()=>[t(S,{span:12},{default:a(()=>[t(D,{label:e.$t("payments.payment_mode")},{default:a(()=>[t(C,{value:n.formData.payment_mode_id,"onUpdate:value":o[1]||(o[1]=z=>n.formData.payment_mode_id=z),size:"large"},{default:a(()=>[(r(!0),$(I,null,G(n.paymentModes,z=>(r(),w(k,{key:z.xid,value:z.xid},{default:a(()=>[u(s(z.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["label"])]),_:1}),t(S,{span:12},{default:a(()=>[t(D,{label:e.$t("stock.paying_amount")},{default:a(()=>[t(P,{value:n.formData.amount,"onUpdate:value":o[2]||(o[2]=z=>n.formData.amount=z),size:"large",style:{width:"100%"},prefix:n.appSetting.currency.symbol},null,8,["value","prefix"])]),_:1},8,["label"])]),_:1}),t(S,{span:24},{default:a(()=>[t(D,{label:e.$t("payments.notes")},{default:a(()=>[t(F,{value:n.formData.notes,"onUpdate:value":o[3]||(o[3]=z=>n.formData.notes=z),rows:3},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1}),t(i,{type:"primary",size:"large",block:"",onClick:n.onSubmit,loading:n.loading},{default:a(()=>[...o[6]||(o[6]=[u(" Confirm Payment ",-1)])]),_:1},8,["onClick","loading"])]),_:1})])):(r(),$("div",Bf,[t(f,{onSelect:n.selectMode,onMpesa:n.openMpesa},null,8,["onSelect","onMpesa"]),g("div",Wf,[o[5]||(o[5]=g("h4",{class:"sub-title"},"Recent Transactions",-1)),t(b,{dataSource:n.allPaymentRecords,columns:n.paymentRecordsColumns,pagination:!1,class:"modern-table"},{bodyCell:a(({column:z,record:M})=>[z.dataIndex==="payment_mode"?(r(),$("span",jf,s(n.getPaymentModeName(M.payment_mode_id)),1)):A("",!0),z.dataIndex==="amount"?(r(),$("span",Hf,s(n.formatAmountCurrency(M.amount)),1)):A("",!0),z.dataIndex==="action"?(r(),w(i,{key:2,type:"text",danger:"",onClick:R=>n.deletePayment(M.id)},{icon:a(()=>[t(y)]),_:1},8,["onClick"])):A("",!0)]),_:1},8,["dataSource","columns"])])]))])]),t(U,{ref:"mpesaStkPushModal",visible:n.mpesaVisible,amount:c.data.subtotal,onSend:n.sendMpesa,onClose:o[4]||(o[4]=z=>n.mpesaVisible=!1)},null,8,["visible","amount","onSend"])]),_:1},8,["title","width","open","onClose"])}const Gf=W(Sf,[["render",Yf],["__scopeId","data-v-9dc0ee08"]]),Xf=window.config.pos_invoice_css,Jf=Z({props:["visible","order"],emits:["closed","success"],components:{PrinterOutlined:Fa,BarcodeGenerator:vo},setup(e,{emit:o}){const{formatAmountCurrency:c,formatDate:n,selectedWarehouse:v}=X();return{onClose:()=>{o("closed")},formatDate:n,selectedWarehouse:v,formatAmountCurrency:c,printInvoice:()=>{var d=document.getElementById("pos-invoice").innerHTML,i=window.open("","","height=500, width=500");i.document.write(`<link rel="stylesheet" href="${Xf}"><html><body>`),i.document.write(d),i.document.write("</body></html>"),i.document.close(),i.print()}}}}),Qf={id:"pos-invoice"},Zf={key:0,style:{"max-width":"400px",margin:"0px auto"}},xf={class:"invoice-header"},e1=["src","alt"],t1={class:"company-details"},a1={class:"company-address"},n1={style:{"margin-bottom":"0px"}},o1={class:"tax-invoice-details"},l1={class:"tax-invoice-title"},s1={class:"invoice-customer-details"},r1={style:{width:"50%"}},d1={style:{width:"50%"}},i1={style:{width:"50%"}},u1={style:{width:"50%"}},m1={class:"tax-invoice-items"},c1={style:{width:"100%"}},p1={style:{background:"#eee"}},_1={style:{width:"25%"}},f1={key:0},g1={style:{"text-align":"right"}},y1={class:"item-row-other"},h1=["colspan"],v1={colspan:"2",style:{"text-align":"right"}},b1={class:"item-row-other"},k1=["colspan"],w1={colspan:"2",style:{"text-align":"right"}},C1={class:"item-row-other"},S1=["colspan"],$1={colspan:"2",style:{"text-align":"right"}},D1={class:"tax-invoice-totals"},A1={style:{width:"100%"}},T1={style:{width:"30%"}},E1={style:{"margin-bottom":"0px"}},O1={style:{width:"30%"}},I1={style:{"margin-bottom":"0px"}},P1={style:{width:"40%","text-align":"center"}},U1={style:{"margin-bottom":"0px"}},F1={class:"paid-amount-deatils"},M1={style:{width:"100%"}},q1={style:{background:"#eee"}},R1={style:{width:"50%"}},K1={style:{width:"50%"}},V1={class:"paid-amount-row"},z1={style:{width:"100%"}},L1={style:{"text-align":"center"}},B1={style:{width:"100%"}},W1={key:0,style:{"margin-bottom":"0px"}},j1={key:0},H1={key:1,style:{"margin-bottom":"0px"}},N1={key:0,class:"discount-details"},Y1={class:"barcode-details"},G1={class:"thanks-details"},X1={class:"footer-button"};function J1(e,o,c,n,v,h){const m=l("BarcodeGenerator"),d=l("PrinterOutlined"),i=l("a-button"),p=l("a-modal");return r(),w(p,{open:e.visible,centered:!0,maskClosable:!1,title:e.$t("common.print_invoice"),width:"400px",onCancel:e.onClose},{footer:a(()=>[g("div",X1,[t(i,{type:"primary",onClick:e.printInvoice},{icon:a(()=>[t(d)]),default:a(()=>[u(" "+s(e.$t("common.print_invoice")),1)]),_:1},8,["onClick"])])]),default:a(()=>[g("div",Qf,[e.order&&e.order.xid?(r(),$("div",Zf,[g("div",xf,[g("img",{class:"invoice-logo",src:e.selectedWarehouse.logo_url,alt:e.selectedWarehouse.name},null,8,e1)]),g("div",t1,[g("h2",null,s(e.selectedWarehouse.name),1),g("p",a1,s(e.selectedWarehouse.address),1),g("h4",n1,s(e.$t("common.phone"))+": "+s(e.selectedWarehouse.phone),1),g("h4",null,s(e.$t("common.email"))+": "+s(e.selectedWarehouse.email),1)]),g("div",o1,[g("h3",l1,s(e.$t("sales.tax_invoice")),1),g("table",s1,[g("tr",null,[g("td",r1,s(e.$t("sales.invoice"))+" : "+s(e.order.invoice_number),1),g("td",d1,s(e.$t("common.date"))+" : "+s(e.formatDate(e.order.order_date)),1)]),g("tr",null,[g("td",i1,s(e.$t("stock.customer"))+" : "+s(e.order.user.name),1),g("td",u1,s(e.$t("stock.sold_by"))+" : "+s(e.order.staff_member.name),1)])])]),g("div",m1,[g("table",c1,[g("thead",p1,[o[0]||(o[0]=g("td",{style:{width:"5%"}},"#",-1)),g("td",_1,s(e.$t("common.item")),1),g("td",{style:Ye({width:e.selectedWarehouse.show_mrp_on_invoice?"10%":"25%"})},s(e.$t("common.qty")),5),e.selectedWarehouse.show_mrp_on_invoice?(r(),$("td",{key:0,style:Ye({width:(e.selectedWarehouse.show_mrp_on_invoice,"20%")})},s(e.$t("product.mrp")),5)):A("",!0),g("td",{style:Ye({width:e.selectedWarehouse.show_mrp_on_invoice?"20%":"25%"})},s(e.$t("common.rate")),5),g("td",{style:Ye({width:e.selectedWarehouse.show_mrp_on_invoice?"20%":"25%",textAlign:"right"})},s(e.$t("common.total")),5)]),g("tbody",null,[(r(!0),$(I,null,G(e.order.items,(_,f)=>(r(),$("tr",{class:"item-row",key:_.xid},[g("td",null,s(f+1),1),g("td",null,s(_.product.name),1),g("td",null,s(_.quantity+""+_.unit.short_name),1),e.selectedWarehouse.show_mrp_on_invoice?(r(),$("td",f1,s(_.mrp?e.formatAmountCurrency(_.mrp):"-"),1)):A("",!0),g("td",null,s(e.formatAmountCurrency(_.unit_price)),1),g("td",g1,s(e.formatAmountCurrency(_.subtotal)),1)]))),128)),g("tr",y1,[g("td",{colspan:e.selectedWarehouse.show_mrp_on_invoice?4:3,style:{"text-align":"right"}},s(e.$t("stock.order_tax")),9,h1),g("td",v1,s(e.formatAmountCurrency(e.order.tax_amount)),1)]),g("tr",b1,[g("td",{colspan:e.selectedWarehouse.show_mrp_on_invoice?4:3,style:{"text-align":"right"}},s(e.$t("stock.discount")),9,k1),g("td",w1,s(e.formatAmountCurrency(e.order.discount)),1)]),g("tr",C1,[g("td",{colspan:e.selectedWarehouse.show_mrp_on_invoice?4:3,style:{"text-align":"right"}},s(e.$t("stock.shipping")),9,S1),g("td",$1,s(e.formatAmountCurrency(e.order.shipping)),1)])])])]),g("div",D1,[g("table",A1,[g("tr",null,[g("td",T1,[g("h3",E1,s(e.$t("common.items"))+": "+s(e.order.total_items),1)]),g("td",O1,[g("h3",I1,s(e.$t("common.qty"))+": "+s(e.order.total_quantity),1)]),g("td",P1,[g("h3",U1,s(e.$t("common.total"))+": "+s(e.formatAmountCurrency(e.order.total)),1)])])])]),g("div",F1,[g("table",M1,[g("thead",q1,[g("td",R1,s(e.$t("payments.paid_amount")),1),g("td",K1,s(e.$t("payments.due_amount")),1)]),g("tbody",null,[g("tr",V1,[g("td",null,s(e.formatAmountCurrency(e.order.paid_amount)),1),g("td",null,s(e.formatAmountCurrency(e.order.due_amount)),1)])])])]),g("div",null,[g("table",z1,[g("tr",L1,[g("td",B1,[e.order.order_payments?(r(),$("h4",W1,[u(s(e.$t("invoice.payment_mode"))+": ",1),(r(!0),$(I,null,G(e.order.order_payments,_=>(r(),$("span",{key:_.xid,style:{"margin-right":"5px"}},[u(s(e.formatAmountCurrency(_.amount))+" (",1),_.payment&&_.payment.payment_mode&&_.payment.payment_mode.name?(r(),$("span",j1,s(_.payment.payment_mode.name),1)):A("",!0),o[1]||(o[1]=u(" ) ",-1))]))),128))])):(r(),$("h3",H1,s(e.$t("invoice.payment_mode"))+": - ",1))])])])]),e.selectedWarehouse.show_discount_tax_on_invoice?(r(),$("div",N1,[g("p",null,s(e.$t("invoice.total_discount_on_mrp"))+" : "+s(e.formatAmountCurrency(e.order.saving_on_mrp)),1),g("p",null,s(e.$t("invoice.total_discount"))+" : "+s(e.order.saving_percentage)+"% ",1),g("p",null,s(e.$t("invoice.total_tax"))+" : "+s(e.formatAmountCurrency(e.order.total_tax_on_items)),1)])):A("",!0),g("div",Y1,[t(m,{value:e.order.invoice_number+"",height:25,width:1,fontSize:15,elementTag:"svg"},null,8,["value"])]),g("div",G1,[g("h3",null,s(e.$t("invoice.thanks_message")),1)])])):A("",!0)])]),_:1},8,["open","title","onCancel"])}const Q1=W(Jf,[["render",J1]]);const Z1=Z({props:["formData","brands","categories"],emits:["changed"],components:{ContainerOutlined:kl},setup(e,{emit:o}){return{reFetchProducts:()=>{o("changed")},getCategoryName:v=>v.length>9?v.substring(0,8)+"..":v}}}),x1=["onClick"];function eg(e,o,c,n,v,h){const m=l("ContainerOutlined"),d=l("a-avatar"),i=l("a-tooltip"),p=l("a-col"),_=l("a-row");return r(),w(_,{gutter:[16,16]},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24,xl:24,class:"pos-style-1-category-scroll"},{default:a(()=>[g("div",{onClick:o[0]||(o[0]=()=>{e.formData.category_id=void 0,e.reFetchProducts()}),class:"pos-style-1-category-box"},[t(d,{shape:"square",size:"large",style:{backgroundColor:"#fff",color:"black",verticalAlign:"middle",marginTop:"5px"}},{icon:a(()=>[t(m)]),_:1}),g("p",null,s(e.$t("common.all")),1)]),(r(!0),$(I,null,G(e.categories,f=>(r(),$("div",{key:f.xid,onClick:()=>{e.formData.category_id=f.xid,e.reFetchProducts()},class:"pos-style-1-category-box"},[t(i,{title:f.name},{default:a(()=>[t(d,{size:"large",src:f.image_url,style:{verticalAlign:"middle",marginTop:"5px"}},null,8,["src"]),g("p",null,s(e.getCategoryName(f.name)),1)]),_:2},1032,["title"])],8,x1))),128))]),_:1})]),_:1})}const tg=W(Z1,[["render",eg]]),ag=Z({props:["formData","brands","categories"],emits:["changed"],setup(e,{emit:o}){return{reFetchProducts:()=>{o("changed")}}}});function ng(e,o,c,n,v,h){const m=l("a-select-option"),d=l("a-select"),i=l("a-col"),p=l("a-input-group"),_=l("a-row");return r(),w(_,{gutter:[16,16]},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[t(d,{value:e.formData.brand_id,"onUpdate:value":o[0]||(o[0]=f=>e.formData.brand_id=f),placeholder:e.$t("common.select_default_text",[e.$t("product.brand")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:e.reFetchProducts},{default:a(()=>[(r(!0),$(I,null,G(e.brands,f=>(r(),w(m,{key:f.xid,title:f.name,value:f.xid},{default:a(()=>[u(s(f.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),t(i,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[t(p,{compact:""},{default:a(()=>[t(d,{value:e.formData.category_id,"onUpdate:value":o[1]||(o[1]=f=>e.formData.category_id=f),placeholder:e.$t("common.select_default_text",[e.$t("product.category")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:e.reFetchProducts},{default:a(()=>[(r(!0),$(I,null,G(e.categories,f=>(r(),w(m,{key:f.xid,title:f.name,value:f.xid},{default:a(()=>[u(s(f.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})]),_:1})]),_:1})}const og=W(ag,[["render",ng]]);const lg={class:"shortcut-grid"},sg={class:"shortcut-desc"},rg={class:"shortcut-keys"},dg={__name:"ShortcutModal",props:{helpVisible:Boolean},emits:["handleClose"],setup(e,{emit:o}){const c=o,n=[{desc:"Complete Sale / Checkout",keys:["F10","Numpad +"]},{desc:"Trigger M-PESA Push",keys:["F5"]},{desc:"Create Quotation",keys:["F7"]},{desc:"Toggle Fullscreen",keys:"Double Space"},{desc:"Suspend Sale",keys:["F8"]},{desc:"Restore Sales",keys:["F9"]},{desc:"Search Products",keys:["F1"]},{desc:"Show this Help",keys:["?"]}],v=()=>{c("closeHelpModal")};return(h,m)=>{const d=l("a-modal");return r(),w(d,{open:e.helpVisible,title:"Keyboard Shortcuts",footer:null,width:"600px",onCancel:v},{default:a(()=>[g("div",lg,[(r(),$(I,null,G(n,i=>g("div",{key:i.key,class:"shortcut-row"},[g("span",sg,s(i.desc),1),g("div",rg,[(r(!0),$(I,null,G(i.keys,p=>(r(),$("kbd",{key:p},s(p),1))),128))])])),64))])]),_:1},8,["open"])}}},ig=W(dg,[["__scopeId","data-v-e4a014bb"]]);const ug={components:{ArrowLeftOutlined:wl,FullscreenOutlined:Cl,FullscreenExitOutlined:Sl,FileTextOutlined:Gn,PauseCircleOutlined:$l,HistoryOutlined:Zn,CreditCardOutlined:Dl,PlusOutlined:le,SearchOutlined:ut,EditOutlined:De,DeleteOutlined:fe,SaveOutlined:ve,SettingOutlined:St,PosLayout1:tg,PosLayout2:og,ProductCardNew:hf,OrderSummary:of,PayNow:Gf,CustomerAddButton:Io,InvoiceModal:Q1,ShortcutModal:ig},setup(){const{taxes:e,customers:o,brands:c,categories:n,productLists:v,orderItemColumns:h,formData:m,customerUrl:d,getPreFetchData:i,posDefaultCustomer:p}=lf(),_=T([]),f=T(null),y=T([]),b=T([]),k=T(!1),C=T(1),D=Se({orderSearchTerm:void 0,productFetching:!1,products:[]}),{formatAmount:S,formatAmountCurrency:P,appSetting:F,taxTypes:O,permsArray:E}=X(),{t:U}=ae(),K=T(!1),z=T(!1),M=T({}),R=T([]),q=T(""),L=T(!1),j=T(!1),Y=T({}),x=T([]),B=T(!1);T(null);const N=T(1);let H;const J=[{title:"Token",dataIndex:"token",key:"token"},{title:"Subtotal",dataIndex:"subtotal",key:"subtotal"},{title:"Date",dataIndex:"created_at",key:"created_at"},{title:"Action",dataIndex:"action",key:"action"}];ee(()=>{i(),i(),Re(),Ke(),window.addEventListener("keydown",na)}),qa(()=>{window.removeEventListener("keydown",na),clearInterval(H)});const se=()=>{axiosAdmin.post("pos/products",{brand_id:m.value.brand_id,category_id:m.value.category_id}).then(oe=>{v.value=oe.data.products})},ce=wt(oe=>{V(oe)},300),V=oe=>{if(D.products=[],oe!=""){D.productFetching=!0;let he="search-product";axiosAdmin.post(he,{order_type:"sales",search_term:oe}).then(Ie=>{Ie.data.length==1?te("",{product:Ie.data[0]}):D.products=Ie.data,D.productFetching=!1})}},ne=oe=>{ca(()=>{oe.keyCode==13&&V(oe.target.value)})},te=(oe,he)=>{const Ie=he.product;me(Ie)},me=oe=>{if(yt(y.value,oe.xid)){const Ne=at(_.value,["xid",oe.xid]);if(Ne&&Ne.quantity<Ne.stock_quantity){const ze=[];var Ie={};_.value.map(dt=>{var Dt=dt.quantity;dt.xid==oe.xid&&(Dt+=1,dt.quantity=Dt,Ie=dt),ze.push(dt)}),_.value=ze;var he=new Audio(F.value.beep_audio_url);he.play(),D.orderSearchTerm=void 0,D.products=[],de(Ie)}else D.orderSearchTerm=void 0,D.products=[],Ee.error(U("common.out_of_stock"))}else{y.value.push(oe.xid),_.value.push({...oe,sn:_.value.length+1,unit_price:S(oe.unit_price),tax_amount:S(oe.tax_amount),subtotal:S(oe.subtotal)}),D.orderSearchTerm=void 0,D.products=[],ye();var he=new Audio(F.value.beep_audio_url);he.play()}},_e=oe=>{var he=parseFloat(oe.quantity),Ie=parseFloat(oe.stock_quantity);const Ne=parseFloat(oe.unit_price);he=he>Ie?Ie:he;const ze=oe.discount_rate,tn=ze>0?ze/100*Ne:0,dt=Ne-tn;var Dt=0,an=dt,la=Ne;return oe.tax_rate>0&&(oe.tax_type=="inclusive"?(la=dt*100/(100+oe.tax_rate),Dt=la*(oe.tax_rate/100)):(Dt=dt*(oe.tax_rate/100),an=dt+Dt,la=dt)),{...oe,total_discount:tn*he,subtotal:an*he,quantity:he,total_tax:Dt*he,max_quantity:Ie,single_unit_price:la}},de=oe=>{const he=[];_.value.map(Ie=>{if(Ie.xid==oe.xid){const Ne=_e(oe);he.push(Ne)}else he.push(Ie)}),_.value=he,ye()},ye=()=>{let oe=0;_.value.map(ze=>{oe+=ze.subtotal});var he=0;m.value.discount_type=="percentage"?he=m.value.discount_value!=""?parseFloat(m.value.discount_value)*oe/100:0:m.value.discount_type=="fixed"&&(he=m.value.discount_value!=""?parseFloat(m.value.discount_value):0);const Ie=m.value.tax_rate!=""?parseFloat(m.value.tax_rate):0;oe=oe-he;const Ne=oe*(Ie/100);oe=oe+parseFloat(m.value.shipping),m.value.subtotal=S(oe+Ne),m.value.tax_amount=S(Ne),m.value.discount=he},Fe=oe=>{const he=[];let Ie=1;_.value.map(ze=>{ze.item_id!=null&&(b.value=[...b.value,ze.item_id]),ze.xid!=oe.xid&&(he.push({...ze,sn:Ie,single_unit_price:S(ze.single_unit_price),tax_amount:S(ze.tax_amount),subtotal:S(ze.subtotal)}),Ie++)}),_.value=he;const Ne=y.value.filter(ze=>ze!=oe.xid);y.value=Ne,ye()},st=(oe,he)=>{m.value.tax_rate=oe==null?0:he.tax.rate,ye()},Q=oe=>{M.value={id:oe.xid,discount_rate:oe.discount_rate,unit_price:oe.unit_price,tax_id:oe.x_tax_id,tax_type:oe.tax_type==null?void 0:oe.tax_type},K.value=!0,q.value=oe.name},$e=()=>{L.value=!0},Te=()=>{L.value=!1},Be=()=>{_.value=[],y.value=[],m.value={...m.value,tax_id:void 0,category_id:void 0,brand_id:void 0,tax_id:void 0,tax_rate:0,tax_amount:0,discount_value:0,discount:0,shipping:0,subtotal:0},ye()},ct=()=>{const oe=_.value.filter(ze=>ze.xid==M.value.id),he=e.value.filter(ze=>ze.xid==M.value.tax_id),Ie=M.value.tax_type!=null?M.value.tax_type:"exclusive",Ne={...oe[0],discount_rate:parseFloat(M.value.discount_rate),unit_price:parseFloat(M.value.unit_price),tax_id:M.value.tax_id,tax_rate:he[0]?he[0].rate:0,tax_type:Ie};de(Ne),pt()},pt=()=>{M.value={},K.value=!1},re=()=>{axiosAdmin.get(d).then(oe=>{o.value=oe.data})},we=oe=>{Be();var he=p.value&&p.value.xid?p.value.xid:void 0;m.value={...m.value,user_id:he},se(),L.value=!1,Y.value=oe,j.value=!0},Re=()=>{const oe=localStorage.getItem("suspendedSales");x.value=oe?JSON.parse(oe):[];const he=localStorage.getItem("suspendTokenCounter");x.value=oe?JSON.parse(oe):[],N.value=he?parseInt(he):1},He=()=>{if(_.value.length===0){Ee.warning("Cart is empty");return}const oe={id:`SUS-${Date.now()}`,token:N.value,customer_id:m.value.user_id,items:JSON.parse(JSON.stringify(_.value)),formData:JSON.parse(JSON.stringify(m.value)),subtotal:m.value.subtotal,created_at:new Date().toLocaleString()};x.value.push(oe),localStorage.setItem("suspendedSales",JSON.stringify(x.value)),N.value++,localStorage.setItem("suspendTokenCounter",N.value),Be(),Ee.success(`Sale suspended  Token #${oe.token}`)},Je=()=>{Re(),B.value=!0},xe=oe=>{_.value=JSON.parse(JSON.stringify(oe.items)),m.value=JSON.parse(JSON.stringify(oe.formData)),x.value=x.value.filter(he=>he.id!==oe.id),localStorage.setItem("suspendedSales",JSON.stringify(x.value)),B.value=!1,ye(),Ee.success("Sale restored successfully")},Ft=oe=>{x.value=x.value.filter(he=>he.id!==oe),localStorage.setItem("suspendedSales",JSON.stringify(x.value)),Ee.success("Suspended sale deleted")},ka=()=>{k.value=!1};let aa=0;const na=oe=>{const he=["F1","F5","F7","F8","F9","F10"];if(oe.code==="Space"){if(oe.target.tagName==="INPUT"||oe.target.tagName==="TEXTAREA")return;const Ie=new Date().getTime();Ie-aa<250&&(oe.preventDefault(),en()),aa=Ie}switch(he.includes(oe.key)&&oe.preventDefault(),oe.key){case"F1":f.value.focus();break;case"F5":openMpesa();break;case"F7":createQuotation();break;case"F8":He();break;case"F9":Je();break;case"F10":m.value.subtotal>0&&$e();break;case"?":oe.target.tagName!=="INPUT"&&oe.target.tagName!=="TEXTAREA"&&(k.value=!0);break;case"Escape":k.value=!1;break}},Ht=T(!1),oa=T(ot().format("HH:mm:ss")),wa=T(ot().format("ddd, D MMM YYYY")),Ke=()=>{H=setInterval(()=>{oa.value=ot().format("HH:mm:ss")},1e3)},en=()=>{document.fullscreenElement?(document.exitFullscreen(),Ht.value=!1):(document.documentElement.requestFullscreen(),Ht.value=!0)};return{isFullScreen:Ht,currentTime:oa,currentDate:wa,clockInterval:H,startClock:Ke,toggleFullScreen:en,taxes:e,customers:o,categories:n,brands:c,productLists:v,formData:m,reFetchProducts:se,selectSaleProduct:me,taxChanged:st,quantityChanged:de,recalculateFinalTotal:ye,payNow:$e,payNowVisible:L,payNowClosed:Te,resetPos:Be,appSetting:F,permsArray:E,...vt(D),fetchProducts:ce,searchValueSelected:te,selectedProducts:_,orderItemColumns:h,formatAmount:S,formatAmountCurrency:P,containerStyle:{height:window.innerHeight-110+"px",overflow:"scroll","overflow-y":"scroll"},customerAdded:re,editItem:Q,addEditVisible:K,addEditFormData:M,addEditFormSubmitting:z,addEditRules:R,addEditPageTitle:q,onAddEditSubmit:ct,onAddEditClose:pt,taxTypes:O,showDeleteConfirm:Fe,payNowSuccess:we,printInvoiceModalVisible:j,printInvoiceOrder:Y,postLayout:C,innerWidth:window.innerWidth,inputValueChanged:ne,suspendedSales:x,showSuspendModal:B,suspendSale:He,openSuspendedSales:Je,restoreSale:xe,suspendColumns:J,deleteSuspendedSale:Ft,helpVisible:k,closeHelpModal:ka,productSearchInput:f}}},mg={class:"pos-header-container"},cg={class:"header-left"},pg={class:"header-titles"},_g={class:"pos-title"},fg={class:"header-center"},gg={class:"pos-clock"},yg={class:"time"},hg={class:"date"},vg={class:"header-right"},bg={class:"pos-left-wrapper"},kg={class:"pos-left-header"},wg={class:"bill-filters"},Cg={style:{display:"flex"}},Sg={key:0},$g={style:{display:"flex"}},Dg={class:"pos-left-content"},Ag={class:"bill-body"},Tg={class:"bill-table"},Eg={class:"pos-footer-bar"},Og={class:"bill-footer"},Ig={class:"footer-top-actions"},Pg={class:"left-meta"},Ug={class:"meta-item"},Fg={class:"meta-item"},Mg={class:"footer-main-row"},qg={class:"grand-total-section"},Rg={class:"total-label"},Kg={class:"total-amount"},Vg={class:"checkout-section"},zg={class:"btn-content"},Lg={class:"btn-text"},Bg={class:"pos1-left-wrapper"},Wg={class:"pos-left-header"},jg={class:"bill-filters"},Hg={style:{display:"flex"}},Ng={class:"pos-left-content"},Yg={class:"bill-body"},Gg={class:"bill-table"},Xg={class:"pos-left-footer"},Jg={class:"bill-footer"},Qg={style:{right:0,bottom:2,width:"100%",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},Zg={style:{right:0,bottom:20,width:"100%",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},xg={class:"pos-grand-total"},ey={class:"pos-grand-total"};function ty(e,o,c,n,v,h){const m=l("ArrowLeftOutlined"),d=l("a-button"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("QuestionCircleOutlined"),f=l("a-tooltip"),y=l("FullscreenExitOutlined"),b=l("FullscreenOutlined"),k=l("a-divider"),C=l("LogoutOutlined"),D=l("a-space"),S=l("a-select-option"),P=l("a-select"),F=l("CustomerAddButton"),O=l("a-col"),E=l("a-row"),U=l("SearchOutlined"),K=l("a-spin"),z=l("a-card"),M=l("a-typography-text"),R=l("a-input-number"),q=l("EditOutlined"),L=l("DeleteOutlined"),j=l("a-table"),Y=l("a-form-item"),x=l("a-input-group"),B=l("FileTextOutlined"),N=l("PauseCircleOutlined"),H=l("HistoryOutlined"),J=l("CreditCardOutlined"),se=l("PosLayout1"),ce=l("PosLayout2"),V=l("ProductCardNew"),ne=l("a-result"),te=l("perfect-scrollbar"),me=l("a-form"),_e=l("SaveOutlined"),de=l("a-modal"),ye=l("PayNow"),Fe=l("InvoiceModal"),st=l("ShortcutModal");return r(),$(I,null,[g("div",mg,[g("div",cg,[t(d,{type:"text",class:"back-btn",onClick:o[0]||(o[0]=()=>e.$router.go(-1))},{icon:a(()=>[t(m)]),_:1}),g("div",pg,[g("h1",_g,s(e.$t("menu.pos")),1),t(p,{separator:"",class:"modern-breadcrumb"},{default:a(()=>[t(i,null,{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.stock_management")),1)]),_:1}),t(i,{class:"active"},{default:a(()=>[u(s(e.$t("menu.pos")),1)]),_:1})]),_:1})])]),g("div",fg,[g("div",gg,[g("span",yg,s(n.currentTime),1),g("span",hg,s(n.currentDate),1)])]),g("div",vg,[t(D,{size:12},{default:a(()=>[t(f,{title:"Keyboard Shortcuts (?)"},{default:a(()=>[t(d,{onClick:o[1]||(o[1]=Q=>n.helpVisible=!0),class:"action-icon-btn"},{icon:a(()=>[t(_)]),_:1})]),_:1}),t(f,{title:n.isFullScreen?"Exit Fullscreen":"Enter Fullscreen"},{default:a(()=>[t(d,{onClick:n.toggleFullScreen,class:"action-icon-btn"},{icon:a(()=>[n.isFullScreen?(r(),w(y,{key:0})):(r(),w(b,{key:1}))]),_:1},8,["onClick"])]),_:1},8,["title"]),t(k,{type:"vertical"}),t(d,{type:"primary",danger:"",ghost:"",onClick:o[2]||(o[2]=()=>e.$router.push({name:"admin.dashboard.index"}))},{icon:a(()=>[t(C)]),default:a(()=>[o[23]||(o[23]=u(" Exit POS ",-1))]),_:1})]),_:1})])]),t(me,{layout:"vertical"},{default:a(()=>[n.innerWidth>=768?(r(),w(E,{key:0,gutter:[8,8],class:"mt-5",style:{margin:"10px 16px 0"}},{default:a(()=>[t(O,{xs:24,sm:24,md:24,lg:10,xl:10},{default:a(()=>[g("div",bg,[g("div",kg,[t(z,{class:"left-pos-top",style:{marginBottom:"10px"}},{default:a(()=>[g("div",wg,[t(E,{gutter:16},{default:a(()=>[t(O,{xs:24,sm:24,md:24,lg:24,xl:24},{default:a(()=>[g("span",Cg,[t(P,{value:n.formData.user_id,"onUpdate:value":o[3]||(o[3]=Q=>n.formData.user_id=Q),placeholder:e.$t("user.walk_in_customer"),style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.customers,Q=>(r(),w(S,{key:Q.xid,title:Q.name,value:Q.xid},{default:a(()=>[u(s(Q.name)+" ",1),Q.phone&&Q.phone!=""?(r(),$("span",Sg,[o[24]||(o[24]=g("br",null,null,-1)),u(" "+s(Q.phone),1)])):A("",!0)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"]),t(F,{onOnAddSuccess:n.customerAdded},null,8,["onOnAddSuccess"])])]),_:1})]),_:1}),t(E,{class:"mt-10 mb-10"},{default:a(()=>[t(O,{xs:24,sm:24,md:24,lg:24,xl:24},{default:a(()=>[g("span",$g,[t(P,{ref:"productSearchInput",value:null,searchValue:e.orderSearchTerm,"show-search":"","filter-option":!1,placeholder:e.$t("product.search_scan_product"),style:{width:"100%"},"not-found-content":e.productFetching?void 0:null,onSearch:o[4]||(o[4]=Q=>{e.orderSearchTerm=Q,n.fetchProducts(Q)}),"option-label-prop":"label",onFocus:o[5]||(o[5]=Q=>e.products=[]),onSelect:n.searchValueSelected,onInputKeyDown:n.inputValueChanged},Qe({suffixIcon:a(()=>[t(U)]),default:a(()=>[(r(!0),$(I,null,G(e.products,Q=>(r(),w(S,{key:Q.xid,value:Q.xid,label:Q.name,product:Q},{default:a(()=>[u(" => "+s(Q.name),1)]),_:2},1032,["value","label","product"]))),128))]),_:2},[e.productFetching?{name:"notFoundContent",fn:a(()=>[t(K,{size:"small"})]),key:"0"}:void 0]),1032,["searchValue","placeholder","not-found-content","onSelect","onInputKeyDown"])])]),_:1})]),_:1})])]),_:1})]),g("div",Dg,[t(z,{class:"left-pos-middle-table",style:{marginBottom:"10px"}},{default:a(()=>[g("div",Ag,[g("div",Tg,[t(E,{class:"mt-10 mb-20"},{default:a(()=>[t(O,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(j,{"row-key":Q=>Q.xid,dataSource:n.selectedProducts,columns:n.orderItemColumns,pagination:!1,size:"middle"},{bodyCell:a(({column:Q,record:$e})=>[Q.dataIndex==="name"?(r(),$(I,{key:0},[u(s($e.name)+" ",1),o[25]||(o[25]=g("br",null,null,-1)),g("small",null,[t(M,{code:""},{default:a(()=>[u(s(e.$t("product.avl_qty"))+" "+s(`${$e.stock_quantity}${$e.unit_short_name}`),1)]),_:2},1024)])],64)):A("",!0),Q.dataIndex==="unit_quantity"?(r(),w(R,{key:1,id:"inputNumber",value:$e.quantity,"onUpdate:value":Te=>$e.quantity=Te,min:0,onChange:Te=>n.quantityChanged($e)},null,8,["value","onUpdate:value","onChange"])):A("",!0),Q.dataIndex==="subtotal"?(r(),$(I,{key:2},[u(s(n.formatAmountCurrency($e.subtotal)),1)],64)):A("",!0),Q.dataIndex==="action"?(r(),$(I,{key:3},[t(d,{type:"primary",onClick:Te=>n.editItem($e),style:{"margin-left":"4px","margin-top":"4px"}},{icon:a(()=>[t(q)]),_:1},8,["onClick"]),t(d,{type:"primary",onClick:Te=>n.showDeleteConfirm($e),style:{"margin-left":"4px","margin-top":"4px"}},{icon:a(()=>[t(L)]),_:1},8,["onClick"])],64)):A("",!0)]),_:1},8,["row-key","dataSource","columns"])]),_:1})]),_:1})])])]),_:1})]),g("div",Eg,[g("div",Og,[t(E,{gutter:[16,16]},{default:a(()=>[t(O,{xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[t(Y,{label:e.$t("stock.order_tax")},{default:a(()=>[t(P,{value:n.formData.tax_id,"onUpdate:value":o[6]||(o[6]=Q=>n.formData.tax_id=Q),placeholder:e.$t("common.select_default_text",[e.$t("stock.order_tax")]),allowClear:!0,style:{width:"100%"},onChange:n.taxChanged},{default:a(()=>[(r(!0),$(I,null,G(n.taxes,Q=>(r(),w(S,{key:Q.xid,value:Q.xid,tax:Q},{default:a(()=>[u(s(Q.name)+" ("+s(Q.rate)+"%) ",1)]),_:2},1032,["value","tax"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1},8,["label"])]),_:1}),t(O,{xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[t(Y,{label:e.$t("stock.discount")},{default:a(()=>[t(x,{compact:""},{default:a(()=>[t(P,{value:n.formData.discount_type,"onUpdate:value":o[7]||(o[7]=Q=>n.formData.discount_type=Q),onChange:n.recalculateFinalTotal,style:{width:"30%"}},{default:a(()=>[t(S,{value:"percentage"},{default:a(()=>[...o[26]||(o[26]=[u(" % ",-1)])]),_:1}),t(S,{value:"fixed"},{default:a(()=>[u(s(n.appSetting.currency.symbol),1)]),_:1})]),_:1},8,["value","onChange"]),t(R,{value:n.formData.discount_value,"onUpdate:value":o[8]||(o[8]=Q=>n.formData.discount_value=Q),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.discount")]),onChange:n.recalculateFinalTotal,min:"0",style:{width:"70%"}},null,8,["value","placeholder","onChange"])]),_:1})]),_:1},8,["label"])]),_:1}),t(O,{xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[t(Y,{label:e.$t("stock.shipping")},{default:a(()=>[t(R,{value:n.formData.shipping,"onUpdate:value":o[9]||(o[9]=Q=>n.formData.shipping=Q),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.shipping")]),onChange:n.recalculateFinalTotal,min:"0",style:{width:"100%"}},{addonBefore:a(()=>[u(s(n.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder","onChange"])]),_:1},8,["label"])]),_:1})]),_:1})]),g("div",Ig,[g("div",Pg,[g("span",Ug,[g("strong",null,s(e.$t("product.tax"))+":",1),u(" "+s(n.formatAmountCurrency(n.formData.tax_amount)),1)]),t(k,{type:"vertical"}),g("span",Fg,[g("strong",null,s(e.$t("product.discount"))+":",1),u(" "+s(n.formatAmountCurrency(n.formData.discount)),1)])]),t(D,null,{default:a(()=>[t(d,{class:"btn-quotation",onClick:e.createQuotation},{icon:a(()=>[t(B)]),default:a(()=>[u(" "+s(e.$t("stock.quotation")||"Quotation")+" ",1),o[27]||(o[27]=g("span",{class:"shortcut-badge"},"F7",-1))]),_:1},8,["onClick"]),t(d,{class:"btn-suspend",onClick:n.suspendSale},{icon:a(()=>[t(N)]),default:a(()=>[o[28]||(o[28]=u(" Suspend ",-1)),o[29]||(o[29]=g("span",{class:"shortcut-badge"},"F8",-1))]),_:1},8,["onClick"]),t(d,{class:"btn-restore",onClick:n.openSuspendedSales},{icon:a(()=>[t(H)]),default:a(()=>[o[30]||(o[30]=u(" Restore ",-1)),o[31]||(o[31]=g("span",{class:"shortcut-badge"},"F9",-1))]),_:1},8,["onClick"])]),_:1})]),g("div",Mg,[g("div",qg,[g("span",Rg,s(e.$t("stock.grand_total")),1),g("span",Kg,s(n.formatAmountCurrency(n.formData.subtotal)),1)]),g("div",Vg,[t(D,{size:16},{default:a(()=>[t(d,{onClick:n.resetPos,danger:"",type:"text",size:"large"},{default:a(()=>[u(s(e.$t("stock.reset")),1)]),_:1},8,["onClick"]),t(d,{type:"primary",size:"large",class:"pay-now-btn",disabled:n.formData.subtotal<=0||!n.formData.user_id,onClick:n.payNow},{icon:a(()=>[t(J)]),default:a(()=>[g("div",zg,[g("span",Lg,s(e.$t("stock.pay_now")),1),o[32]||(o[32]=g("span",{class:"btn-shortcut"},"F10",-1))])]),_:1},8,["disabled","onClick"])]),_:1})])])])])]),_:1}),t(O,{class:"right-pos-sidebar",xs:24,sm:24,md:24,lg:14,xl:14},{default:a(()=>[t(te,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:a(()=>[n.postLayout==1?(r(),w(se,{key:0,brands:n.brands,categories:n.categories,formData:n.formData,onChanged:n.reFetchProducts},null,8,["brands","categories","formData","onChanged"])):(r(),w(ce,{key:1,brands:n.brands,categories:n.categories,formData:n.formData,onChanged:n.reFetchProducts},null,8,["brands","categories","formData","onChanged"])),n.productLists.length>0?(r(),w(E,{key:2,gutter:30},{default:a(()=>[(r(!0),$(I,null,G(n.productLists,Q=>(r(),w(O,{key:Q.xid,xxl:6,lg:6,md:12,xs:24,onClick:$e=>n.selectSaleProduct(Q)},{default:a(()=>[t(V,{product:Q},null,8,["product"])]),_:2},1032,["onClick"]))),128))]),_:1})):(r(),w(E,{key:3},{default:a(()=>[t(O,{span:24},{default:a(()=>[t(ne,{title:e.$t("stock.no_product_found"),style:{marginTop:"20%"}},null,8,["title"])]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})):(r(),w(E,{key:1,gutter:[8,8],class:"mt-5",style:{margin:"10px 16px 0"}},{default:a(()=>[t(O,{span:24},{default:a(()=>[g("div",Bg,[g("div",Wg,[n.postLayout==1?(r(),w(se,{key:0,brands:n.brands,categories:n.categories,formData:n.formData,onChanged:n.reFetchProducts},null,8,["brands","categories","formData","onChanged"])):(r(),w(ce,{key:1,brands:n.brands,categories:n.categories,formData:n.formData,onChanged:n.reFetchProducts},null,8,["brands","categories","formData","onChanged"])),t(z,{class:"pos1-bill-filters"},{default:a(()=>[g("div",jg,[t(E,{gutter:18},{default:a(()=>[t(O,{xs:14,sm:14,md:24,lg:24,xl:24},{default:a(()=>[g("span",Hg,[t(P,{value:n.formData.user_id,"onUpdate:value":o[10]||(o[10]=Q=>n.formData.user_id=Q),placeholder:e.$t("user.walk_in_customer"),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.customers,Q=>(r(),w(S,{key:Q.xid,title:Q.name,value:Q.xid},{default:a(()=>[u(s(Q.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"]),t(F,{onOnAddSuccess:n.customerAdded},null,8,["onOnAddSuccess"])])]),_:1}),t(O,{xs:10,sm:10,md:24,lg:24,xl:24},{default:a(()=>[t(P,{value:null,searchValue:e.orderSearchTerm,"show-search":"","filter-option":!1,placeholder:e.$t("common.select_default_text",[e.$t("product.product")]),style:{width:"100%"},"not-found-content":e.productFetching?void 0:null,onSearch:o[11]||(o[11]=Q=>{e.orderSearchTerm=Q,n.fetchProducts(Q)}),"option-label-prop":"label",onFocus:o[12]||(o[12]=Q=>e.products=[]),onSelect:n.searchValueSelected,onInputKeyDown:n.inputValueChanged},Qe({suffixIcon:a(()=>[t(U)]),default:a(()=>[(r(!0),$(I,null,G(e.products,Q=>(r(),w(S,{key:Q.id,value:Q.id,label:Q.name,product:Q},{default:a(()=>[u(" => "+s(Q.name),1)]),_:2},1032,["value","label","product"]))),128))]),_:2},[e.productFetching?{name:"notFoundContent",fn:a(()=>[t(K,{size:"small"})]),key:"0"}:void 0]),1032,["searchValue","placeholder","not-found-content","onSelect","onInputKeyDown"])]),_:1})]),_:1})])]),_:1})]),g("div",Ng,[n.productLists.length>0?(r(),w(E,{key:0,gutter:30,class:"pos1-products-lists"},{default:a(()=>[(r(!0),$(I,null,G(n.productLists,Q=>(r(),w(O,{key:Q.xid,xxl:8,lg:8,md:8,sm:12,xs:12,onClick:$e=>n.selectSaleProduct(Q)},{default:a(()=>[t(V,{product:Q},null,8,["product"])]),_:2},1032,["onClick"]))),128))]),_:1})):A("",!0),t(z,{class:"left-pos1-middle-table mt-10 mb-10"},{default:a(()=>[g("div",Yg,[g("div",Gg,[t(E,{class:"mt-5 mb-5"},{default:a(()=>[t(O,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(j,{"row-key":Q=>Q.xid,dataSource:n.selectedProducts,columns:n.orderItemColumns,pagination:!1,size:"middle"},{bodyCell:a(({column:Q,record:$e})=>[Q.dataIndex==="name"?(r(),$(I,{key:0},[u(s($e.name)+" ",1),o[33]||(o[33]=g("br",null,null,-1)),g("small",null,[t(M,{code:""},{default:a(()=>[u(s(e.$t("product.avl_qty"))+" "+s(`${$e.stock_quantity}${$e.unit_short_name}`),1)]),_:2},1024)])],64)):A("",!0),Q.dataIndex==="unit_quantity"?(r(),w(R,{key:1,id:"inputNumber",value:$e.quantity,"onUpdate:value":Te=>$e.quantity=Te,min:0,onChange:Te=>n.quantityChanged($e)},null,8,["value","onUpdate:value","onChange"])):A("",!0),Q.dataIndex==="subtotal"?(r(),$(I,{key:2},[u(s(n.formatAmountCurrency($e.subtotal)),1)],64)):A("",!0),Q.dataIndex==="action"?(r(),$(I,{key:3},[t(d,{type:"primary",onClick:Te=>n.editItem($e),style:{"margin-left":"4px","margin-top":"4px"}},{icon:a(()=>[t(q)]),_:1},8,["onClick"]),t(d,{type:"primary",onClick:Te=>n.showDeleteConfirm($e),style:{"margin-left":"4px","margin-top":"4px"}},{icon:a(()=>[t(L)]),_:1},8,["onClick"])],64)):A("",!0)]),_:1},8,["row-key","dataSource","columns"])]),_:1})]),_:1})])])]),_:1})]),g("div",Xg,[t(z,null,{default:a(()=>[g("div",Jg,[t(E,{gutter:[16]},{default:a(()=>[t(O,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(Y,{label:e.$t("stock.order_tax")},{default:a(()=>[t(P,{value:n.formData.tax_id,"onUpdate:value":o[13]||(o[13]=Q=>n.formData.tax_id=Q),placeholder:e.$t("common.select_default_text",[e.$t("stock.order_tax")]),allowClear:!0,style:{width:"100%"},onChange:n.taxChanged},{default:a(()=>[(r(!0),$(I,null,G(n.taxes,Q=>(r(),w(S,{key:Q.xid,value:Q.xid,tax:Q},{default:a(()=>[u(s(Q.name)+" ("+s(Q.rate)+"%) ",1)]),_:2},1032,["value","tax"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1},8,["label"])]),_:1}),t(O,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(Y,{label:e.$t("stock.discount")},{default:a(()=>[t(x,{compact:""},{default:a(()=>[t(P,{value:n.formData.discount_type,"onUpdate:value":o[14]||(o[14]=Q=>n.formData.discount_type=Q),onChange:n.recalculateFinalTotal,style:{width:"30%"}},{default:a(()=>[t(S,{value:"percentage"},{default:a(()=>[...o[34]||(o[34]=[u(" % ",-1)])]),_:1}),t(S,{value:"fixed"},{default:a(()=>[u(s(n.appSetting.currency.symbol),1)]),_:1})]),_:1},8,["value","onChange"]),t(R,{value:n.formData.discount_value,"onUpdate:value":o[15]||(o[15]=Q=>n.formData.discount_value=Q),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.discount")]),onChange:n.recalculateFinalTotal,min:"0",style:{width:"70%"}},null,8,["value","placeholder","onChange"])]),_:1})]),_:1},8,["label"])]),_:1}),t(O,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(Y,{label:e.$t("stock.shipping")},{default:a(()=>[t(R,{value:n.formData.shipping,"onUpdate:value":o[16]||(o[16]=Q=>n.formData.shipping=Q),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock.shipping")]),onChange:n.recalculateFinalTotal,min:"0",style:{width:"100%"}},{addonBefore:a(()=>[u(s(n.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder","onChange"])]),_:1},8,["label"])]),_:1})]),_:1})])]),_:1}),g("div",Qg,[t(E,{gutter:16,style:{"margin-bottom":"10px"},justify:"end"},{default:a(()=>[t(O,null,{default:a(()=>[t(D,null,{default:a(()=>[t(d,{type:"default",style:{background:"#faad14",color:"#fff",border:"none"},onClick:n.suspendSale},{default:a(()=>[...o[35]||(o[35]=[u(" Suspend ",-1)])]),_:1},8,["onClick"]),t(d,{type:"default",style:{background:"#389e0d",color:"#fff",border:"none"},onClick:n.openSuspendedSales},{default:a(()=>[...o[36]||(o[36]=[u(" Restore ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),g("div",Zg,[t(E,{gutter:16},{default:a(()=>[t(O,{xxl:12,lg:10,md:10,sm:10,xs:10},{default:a(()=>[t(E,{gutter:16,style:{background:"#dbdbdb",padding:"5px"}},{default:a(()=>[t(O,{span:12},{default:a(()=>[g("span",xg,s(e.$t("common.total")),1)]),_:1}),t(O,{span:12},{default:a(()=>[g("span",ey,s(n.formatAmountCurrency(n.formData.subtotal)),1)]),_:1})]),_:1})]),_:1}),t(O,{xxl:4,lg:6,md:6,sm:0,xs:0,class:"mt-10"},{default:a(()=>[t(M,null,{default:a(()=>[u(s(e.$t("product.tax"))+" : "+s(n.formatAmountCurrency(n.formData.tax_amount))+" | "+s(e.$t("product.discount"))+" : "+s(n.formatAmountCurrency(n.formData.discount)),1)]),_:1})]),_:1}),t(O,{xxl:8,lg:8,md:8,sm:14,xs:14},{default:a(()=>[t(D,null,{default:a(()=>[t(d,{type:"primary",onClick:n.payNow,disabled:n.formData.subtotal<=0||n.formData.user_id==null||n.formData.user_id==""||!n.formData.user_id},{default:a(()=>[u(s(e.$t("stock.pay_now")),1)]),_:1},8,["onClick","disabled"]),t(d,{onClick:n.resetPos},{default:a(()=>[u(s(e.$t("stock.reset")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})])])])]),_:1})]),_:1}))]),_:1}),t(de,{open:n.addEditVisible,closable:!1,centered:!0,title:n.addEditPageTitle,onOk:n.onAddEditSubmit},{footer:a(()=>[t(d,{key:"submit",type:"primary",loading:n.addEditFormSubmitting,onClick:n.onAddEditSubmit},{icon:a(()=>[t(_e)]),default:a(()=>[u(" "+s(e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(d,{key:"back",onClick:n.onAddEditClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(me,{layout:"vertical"},{default:a(()=>[t(E,{gutter:16},{default:a(()=>[t(O,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(Y,{label:e.$t("product.unit_price"),name:"unit_price",help:n.addEditRules.unit_price?n.addEditRules.unit_price.message:null,validateStatus:n.addEditRules.unit_price?"error":null},{default:a(()=>[t(R,{value:n.addEditFormData.unit_price,"onUpdate:value":o[17]||(o[17]=Q=>n.addEditFormData.unit_price=Q),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.unit_price")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[u(s(n.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(E,{gutter:16},{default:a(()=>[t(O,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(Y,{label:e.$t("product.discount"),name:"discount_rate",help:n.addEditRules.discount_rate?n.addEditRules.discount_rate.message:null,validateStatus:n.addEditRules.discount_rate?"error":null},{default:a(()=>[t(R,{value:n.addEditFormData.discount_rate,"onUpdate:value":o[18]||(o[18]=Q=>n.addEditFormData.discount_rate=Q),placeholder:e.$t("common.placeholder_default_text",[e.$t("product.discount")]),min:"0",style:{width:"100%"}},{addonAfter:a(()=>[...o[37]||(o[37]=[u("%",-1)])]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(E,{gutter:16},{default:a(()=>[t(O,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(Y,{label:e.$t("product.tax"),name:"tax_id",help:n.addEditRules.tax_id?n.addEditRules.tax_id.message:null,validateStatus:n.addEditRules.tax_id?"error":null},{default:a(()=>[t(P,{value:n.addEditFormData.tax_id,"onUpdate:value":o[19]||(o[19]=Q=>n.addEditFormData.tax_id=Q),placeholder:e.$t("common.select_default_text",[e.$t("product.tax")]),allowClear:!0},{default:a(()=>[(r(!0),$(I,null,G(n.taxes,Q=>(r(),w(S,{key:Q.xid,value:Q.xid},{default:a(()=>[u(s(Q.name)+" ("+s(Q.rate)+"%) ",1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(E,{gutter:16},{default:a(()=>[t(O,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(Y,{label:e.$t("product.tax_type"),name:"tax_type",help:n.addEditRules.tax_type?n.addEditRules.tax_type.message:null,validateStatus:n.addEditRules.tax_type?"error":null},{default:a(()=>[t(P,{value:n.addEditFormData.tax_type,"onUpdate:value":o[20]||(o[20]=Q=>n.addEditFormData.tax_type=Q),placeholder:e.$t("common.select_default_text",[e.$t("product.tax_type")]),allowClear:!0},{default:a(()=>[(r(!0),$(I,null,G(n.taxTypes,Q=>(r(),w(S,{key:Q.key,value:Q.key},{default:a(()=>[u(s(Q.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"]),t(ye,{visible:n.payNowVisible,onClosed:n.payNowClosed,onSuccess:n.payNowSuccess,data:n.formData,selectedProducts:n.selectedProducts},null,8,["visible","onClosed","onSuccess","data","selectedProducts"]),t(Fe,{visible:n.printInvoiceModalVisible,order:n.printInvoiceOrder,onClosed:o[21]||(o[21]=Q=>n.printInvoiceModalVisible=!1)},null,8,["visible","order"]),t(de,{open:n.showSuspendModal,"onUpdate:open":o[22]||(o[22]=Q=>n.showSuspendModal=Q),title:"Suspended Sales (F8)",width:"700px",footer:null},{default:a(()=>[t(j,{columns:n.suspendColumns,dataSource:n.suspendedSales,rowKey:"id"},{bodyCell:a(({column:Q,record:$e})=>[Q.dataIndex=="action"?(r(),w(D,{key:0},{default:a(()=>[t(d,{type:"primary",onClick:Te=>n.restoreSale($e)},{default:a(()=>[...o[38]||(o[38]=[u(" Restore ",-1)])]),_:1},8,["onClick"]),t(d,{danger:"",onClick:Te=>n.deleteSuspendedSale($e.id)},{default:a(()=>[...o[39]||(o[39]=[u(" Delete ",-1)])]),_:1},8,["onClick"])]),_:2},1024)):A("",!0)]),_:1},8,["columns","dataSource"])]),_:1},8,["open"]),t(st,{onCloseHelpModal:n.closeHelpModal,"help-visible":n.helpVisible},null,8,["onCloseHelpModal","help-visible"])],64)}const ay=W(ug,[["render",ty],["__scopeId","data-v-e5c90ecf"]]),ny=Z({props:["productData"],emits:["valueSuccess","valueChanged"],components:{SearchOutlined:ut},setup(e,{emit:o}){const c=Se({searchTerm:[],fetching:!1,products:[]});ee(()=>{n(e)});const n=m=>{m.productData&&m.productData.product?(c.products=[{xid:m.productData.x_product_id,name:m.productData.product.name}],c.searchTerm=m.productData.x_product_id):(c.searchTerm=[],c.products=[]),o("valueSuccess")},v=(m,d)=>{o("valueChanged",m),o("valueSuccess")},h=wt(m=>{if(c.products=[],m!=""){c.fetching=!0;const d=`name lk "%${m}%" or item_code lk "%${m}%"`;let i=`products?fields=xid,name&filters=${encodeURIComponent(d)}&limit=10`;axiosAdmin.get(i).then(p=>{c.products=p.data,c.fetching=!1})}},300);return ue(e,(m,d)=>{n(m)}),{...vt(c),fetchProducts:h,valueChanged:v}}});function oy(e,o,c,n,v,h){const m=l("SearchOutlined"),d=l("a-spin"),i=l("a-select-option"),p=l("a-select");return r(),w(p,{value:e.searchTerm,"onUpdate:value":o[0]||(o[0]=_=>e.searchTerm=_),"show-search":"","filter-option":!1,placeholder:e.$t("product.search_scan_product"),style:{width:"100%"},"not-found-content":e.fetching?void 0:null,onSearch:e.fetchProducts,"option-label-prop":"label",onChange:e.valueChanged,allowClear:!0},Qe({suffixIcon:a(()=>[t(m)]),default:a(()=>[(r(!0),$(I,null,G(e.products,_=>(r(),w(i,{key:_.xid,value:_.xid,label:_.name,product:_},{default:a(()=>[u(s(_.name),1)]),_:2},1032,["value","label","product"]))),128))]),_:2},[e.fetching?{name:"notFoundContent",fn:a(()=>[t(d,{size:"small"})]),key:"0"}:void 0]),1032,["value","placeholder","not-found-content","onSearch","onChange"])}const Ut=W(ny,[["render",oy]]),Uo=()=>{const e="stock-adjustments",o="stock-adjustments?fields=xid,product_id,x_product_id,product{id,xid,name,image,image_url},quantity,adjustment_type",c=["product_id"],{t:n}=ae(),v={product_id:void 0,quantity:1,notes:"",adjustment_type:"add"},h=[{title:n("product.product"),dataIndex:"product_id"},{title:n("stock_adjustment.quantity"),dataIndex:"quantity"},{title:n("common.action"),dataIndex:"action"}],m=[{key:"add",value:n("stock_adjustment.adjustment_add")},{key:"subtract",value:n("stock_adjustment.adjustment_subtract")}],d=Se({product_id:void 0});return{url:o,addEditUrl:e,hashableColumns:c,initData:v,columns:h,adjustmentTypes:m,filters:d}},ly=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],emits:["addEditSuccess","closed"],components:{PlusOutlined:le,LoadingOutlined:Oe,SaveOutlined:ve,ProductAddButton:Ga,ProductSearchInput:Ut},setup(e,{emit:o}){const{permsArray:c,selectedWarehouse:n}=X(),{addEditRequestAdmin:v,loading:h,rules:m}=be(),{adjustmentTypes:d}=Uo(),i=T("-");return{loading:h,rules:m,onClose:()=>{m.value={},o("closed")},onSubmit:()=>{v({url:e.url,data:e.formData,successMessage:e.successMessage,success:y=>{o("addEditSuccess",y.xid)}})},adjustmentTypes:d,stockValue:i,getStockValue:()=>{e.formData.product_id!=""?axiosAdmin.post("product-warehouse-stock",{warehouse_id:n.value.id,product_id:e.formData.product_id}).then(y=>{i.value=y.data.stock}):i.value="-"},permsArray:c}}}),sy={style:{display:"flex"}};function ry(e,o,c,n,v,h){const m=l("ProductSearchInput"),d=l("ProductAddButton"),i=l("a-form-item"),p=l("a-col"),_=l("a-row"),f=l("a-input-number"),y=l("a-select-option"),b=l("a-select"),k=l("a-textarea"),C=l("a-form"),D=l("SaveOutlined"),S=l("a-button"),P=l("a-modal");return r(),w(P,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(S,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(D)]),default:a(()=>[u(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(S,{key:"back",onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(C,{layout:"vertical"},{default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(i,{label:e.$t("product.product"),name:"orderSearchTerm",help:e.rules.product_id?e.rules.product_id.message:null,validateStatus:e.rules.product_id?"error":null,class:"required"},{default:a(()=>[g("span",sy,[t(m,{onValueChanged:o[0]||(o[0]=F=>e.formData.product_id=F),onValueSuccess:e.getStockValue,productData:e.data},null,8,["onValueSuccess","productData"]),t(d)])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(i,{label:e.$t("stock_adjustment.current_stock")},{default:a(()=>[u(s(e.stockValue),1)]),_:1},8,["label"])]),_:1}),t(p,{xs:24,sm:24,md:9,lg:9},{default:a(()=>[t(i,{label:e.$t("stock_adjustment.quantity"),name:"quantity",help:e.rules.quantity?e.rules.quantity.message:null,validateStatus:e.rules.quantity?"error":null,class:"required"},{default:a(()=>[t(f,{value:e.formData.quantity,"onUpdate:value":o[1]||(o[1]=F=>e.formData.quantity=F),placeholder:e.$t("common.placeholder_default_text",[e.$t("stock_adjustment.quantity")]),min:1},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:9,lg:9},{default:a(()=>[t(i,{label:e.$t("stock_adjustment.adjustment_type"),name:"adjustment_type",help:e.rules.adjustment_type?e.rules.adjustment_type.message:null,validateStatus:e.rules.adjustment_type?"error":null},{default:a(()=>[t(b,{value:e.formData.adjustment_type,"onUpdate:value":o[2]||(o[2]=F=>e.formData.adjustment_type=F),placeholder:e.$t("common.select_default_text",[e.$t("stock_adjustment.adjustment_type")])},{default:a(()=>[(r(!0),$(I,null,G(e.adjustmentTypes,F=>(r(),w(y,{key:F.key,value:F.key},{default:a(()=>[u(s(F.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(i,{label:e.$t("stock_adjustment.notes"),name:"notes",help:e.rules.notes?e.rules.notes.message:null,validateStatus:e.rules.notes?"error":null},{default:a(()=>[t(k,{value:e.formData.notes,"onUpdate:value":o[3]||(o[3]=F=>e.formData.notes=F),placeholder:e.$t("stock_adjustment.notes")},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const dy=W(ly,[["render",ry]]),iy={components:{PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,AddEdit:dy,ProductSearchInput:Ut,AdminPageHeader:ge},setup(){const{url:e,addEditUrl:o,hashableColumns:c,initData:n,columns:v,filters:h}=Uo(),m=Ve(),{permsArray:d,selectedWarehouse:i}=X();ee(()=>{m.crudUrl.value=o,m.langKey.value="stock_adjustment",m.initData.value={...n},m.formData.value={...n},m.hashableColumns.value=[...c],p()});const p=()=>{m.tableUrl.value={url:e,filters:h},m.fetch({page:1})};return ue(i,(_,f)=>{p()}),{columns:v,permsArray:d,...m,filters:h,reFetchDatatable:p}}},uy={class:"table-responsive"};function my(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("PlusOutlined"),y=l("a-button"),b=l("DeleteOutlined"),k=l("a-space"),C=l("a-col"),D=l("ProductSearchInput"),S=l("a-row"),P=l("admin-page-filters"),F=l("AddEdit"),O=l("a-avatar"),E=l("a-badge"),U=l("a-typography-text"),K=l("EditOutlined"),z=l("a-table"),M=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.stock_adjustment"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.stock_adjustment")),1)]),_:1})]),_:1})]),_:1}),t(P,null,{default:a(()=>[t(S,{gutter:[16,16]},{default:a(()=>[t(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(k,null,{default:a(()=>[n.permsArray.includes("stock_adjustments_create")||n.permsArray.includes("admin")?(r(),w(y,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(f),u(" "+s(e.$t("stock_adjustment.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("stock_adjustments_delete")||n.permsArray.includes("admin"))?(r(),w(y,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(b)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(S,{gutter:[16,16],justify:"end"},{default:a(()=>[t(C,{xs:24,sm:24,md:12,lg:12,xl:6},{default:a(()=>[t(D,{onValueChanged:o[0]||(o[0]=R=>{n.filters.product_id=R,n.reFetchDatatable()})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(M,null,{default:a(()=>[t(F,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(S,null,{default:a(()=>[t(C,{span:24},{default:a(()=>[g("div",uy,[t(z,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:R=>({disabled:!1,name:R.xid})},columns:n.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:R,record:q})=>[R.dataIndex==="product_id"?(r(),w(E,{key:0},{default:a(()=>[t(O,{shape:"square",src:q.product.image_url},null,8,["src"]),u(" "+s(q.product.name),1)]),_:2},1024)):A("",!0),R.dataIndex==="quantity"?(r(),$(I,{key:1},[q.adjustment_type=="add"?(r(),w(U,{key:0,type:"success",strong:""},{default:a(()=>[u(" +"+s(q.quantity),1)]),_:2},1024)):(r(),w(U,{key:1,type:"danger",strong:""},{default:a(()=>[u(" -"+s(q.quantity),1)]),_:2},1024))],64)):A("",!0),R.dataIndex==="action"?(r(),$(I,{key:2},[n.permsArray.includes("stock_adjustments_edit")||n.permsArray.includes("admin")?(r(),w(y,{key:0,type:"primary",onClick:L=>e.editItem(q),style:{"margin-left":"4px"}},{icon:a(()=>[t(K)]),_:1},8,["onClick"])):A("",!0),n.permsArray.includes("stock_adjustments_delete")||n.permsArray.includes("admin")?(r(),w(y,{key:1,type:"primary",onClick:L=>e.showDeleteConfirm(q.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(b)]),_:1},8,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const cy=W(iy,[["render",my]]),Fo=()=>{const{t:e}=ae(),o=Ze(),c=["payment_mode_id","user_id"],{dayjs:n}=X(),v=T(o.meta.paymentType),h=T(o.meta.menuParent),m=T(`payment-${v.value}`),d=T({payment_type:v.value,date:n().format("YYYY-MM-DD"),amount:"",payment_mode_id:void 0,user_id:void 0,notes:""}),i=[{title:e("payments.date"),dataIndex:"date"},{title:e("payments.transaction_number"),dataIndex:"payment_number"},{title:e("payments.user"),dataIndex:"user_id"},{title:e("payments.amount"),dataIndex:"amount"},{title:e("common.action"),dataIndex:"action"}],p=[{key:"payment_number",value:e("payments.transaction_number")}],_=[{title:e("stock.invoice_number"),dataIndex:"invoice_number"},{title:e("common.date"),dataIndex:"date"},{title:e("payments.invoice_amount"),dataIndex:"amount"},{title:e("common.action"),dataIndex:"action"}];return{addEditUrl:m,initData:d,columns:i,filterableColumns:p,hashableColumns:c,settleInvoiceColumns:_,paymentType:v,menuParent:h}},py=Z({props:["userId","amount"],setup(e,{emit:o}){const{settleInvoiceColumns:c,paymentType:n}=Fo(),{addEditRequestAdmin:v,loading:h,rules:m}=be(),{formatDate:d,disabledDate:i,appSetting:p,formatAmountCurrency:_}=X(),f=T([]),y=T(0),b=T(0);ee(()=>{C()});const k=()=>{v({url:e.url,data:e.formData,successMessage:e.successMessage,success:P=>{o("addEditSuccess",P.xid)}})},C=()=>{axiosAdmin.post("user-invoices",{user_id:e.userId,payment_type:n.value}).then(P=>{const F=P.data.invoices;var O=e.amount,E=0;Ce(F,U=>{U.due_amount<=O?(U.paying_amount=U.due_amount,O=parseFloat(O)-parseFloat(U.due_amount),E=parseFloat(E)+parseFloat(U.due_amount)):U.due_amount>O&&(U.paying_amount=O,E=parseFloat(E)+parseFloat(O),O=0)}),y.value=E,b.value=parseFloat(e.amount)-parseFloat(E),f.value=F})},D=P=>{const F=f.value;var O=0;Ce(F,U=>{O+=parseFloat(U.paying_amount)}),P.paying_amount>P.due_amount?P.paying_amount=P.due_amount:O>e.amount&&(P.paying_amount=parseFloat(e.amount)-(O-parseFloat(P.paying_amount))),P.paying_amount||(P.paying_amount=0);var E=0;Ce(F,U=>{E+=parseFloat(U.paying_amount)}),y.value=E,b.value=parseFloat(e.amount)-parseFloat(E)},S=()=>{m.value={},o("closed")};return ue(e,(P,F)=>{C()}),{loading:h,rules:m,onClose:S,onSubmit:k,invoices:f,settleInvoiceColumns:c,setteledAmount:y,unUsedAmount:b,inputValueChanged:D,appSetting:p,formatDate:d,disabledDate:i,formatAmountCurrency:_}}}),_y={class:"table-responsive"};function fy(e,o,c,n,v,h){const m=l("a-typography-text"),d=l("a-input-number"),i=l("a-table-summary-cell"),p=l("a-table-summary-row"),_=l("a-table-summary"),f=l("a-table"),y=l("a-col"),b=l("a-row");return r(),w(b,null,{default:a(()=>[t(y,{span:24},{default:a(()=>[g("div",_y,[t(f,{columns:e.settleInvoiceColumns,"row-key":k=>k.xid,"data-source":e.invoices,pagination:!1},{bodyCell:a(({column:k,record:C})=>[k.dataIndex==="date"?(r(),$(I,{key:0},[u(s(e.formatDate(C.order_date)),1)],64)):A("",!0),k.dataIndex==="amount"?(r(),$(I,{key:1},[u(s(e.formatAmountCurrency(C.total))+" ",1),o[0]||(o[0]=g("br",null,null,-1)),g("small",null,[t(m,{type:"danger"},{default:a(()=>[u(" ("+s(e.$t("common.pending"))+": "+s(e.formatAmountCurrency(C.due_amount))+") ",1)]),_:2},1024)])],64)):A("",!0),k.dataIndex==="action"?(r(),w(d,{key:2,addonBefore:e.appSetting.currency.symbol,value:C.paying_amount,"onUpdate:value":D=>C.paying_amount=D,placeholder:"0",min:0,onBlur:D=>e.inputValueChanged(C)},null,8,["addonBefore","value","onUpdate:value","onBlur"])):A("",!0)]),summary:a(()=>[t(_,{fixed:""},{default:a(()=>[t(p,null,{default:a(()=>[t(i,{"col-span":3},{default:a(()=>[t(m,{strong:""},{default:a(()=>[u(s(e.$t("payments.unused_amount"))+" : ",1)]),_:1}),u(" "+s(e.formatAmountCurrency(e.unUsedAmount?e.unUsedAmount:0)),1)]),_:1}),t(i,{"col-span":2},{default:a(()=>[u(s(e.formatAmountCurrency(e.setteledAmount?e.setteledAmount:0)),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["columns","row-key","data-source"]),o[1]||(o[1]=g("br",null,null,-1))])]),_:1})]),_:1})}const gy=W(py,[["render",fy]]),yy=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:le,LoadingOutlined:Oe,SaveOutlined:ve,UserInfo:Xe,PaymentModeAddButton:io,SettleInvoices:gy,DateTimePicker:ya},setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n,rules:v}=be(),{disabledDate:h,appSetting:m,formatAmountCurrency:d,dayjs:i}=X(),p=T([]),_=T([]),f="customer-suppliers",y="payment-modes?limit=10000",b=T(null),k=T({});ee(()=>{const P=axiosAdmin.post(f),F=axiosAdmin.get(y);Promise.all([P,F]).then(([O,E])=>{_.value=O.data,p.value=E.data})});const C=()=>{const P=[];e.addEditType=="add"&&b.value&&b.value.invoices&&Ce(b.value.invoices,F=>{P.push({order_id:F.xid,amount:F.paying_amount})}),c({url:e.url,data:{...k.value,invoices:P},successMessage:e.successMessage,success:F=>{o("addEditSuccess",F.xid)}})},D=()=>{axiosAdmin.get("payment-modes?limit=10000").then(P=>{p.value=P.data})},S=()=>{v.value={},o("closed")};return ue(()=>e.visible,(P,F)=>{P&&(e.addEditType=="add"?k.value={...e.formData,date:i().utc().format("YYYY-MM-DDTHH:mm:ssZ")}:k.value={...e.formData})}),{loading:n,rules:v,onClose:S,onSubmit:C,users:_,paymentModes:p,paymentModeAdded:D,settleInvoiceRef:b,appSetting:m,disabledDate:h,formatAmountCurrency:d,drawerWidth:window.innerWidth<=991?"90%":"45%",newFormData:k}}}),hy={style:{display:"flex"}},vy={key:1},by={key:2};function ky(e,o,c,n,v,h){const m=l("UserInfo"),d=l("a-select-option"),i=l("a-select"),p=l("a-form-item"),_=l("a-col"),f=l("a-row"),y=l("a-input"),b=l("DateTimePicker"),k=l("PaymentModeAddButton"),C=l("a-textarea"),D=l("a-divider"),S=l("a-typography-paragraph"),P=l("SettleInvoices"),F=l("a-form"),O=l("SaveOutlined"),E=l("a-button"),U=l("a-space"),K=l("a-drawer");return r(),w(K,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[t(U,null,{default:a(()=>[t(E,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(O)]),default:a(()=>[u(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(E,{key:"back",onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),_:1})]),default:a(()=>[t(F,{layout:"vertical"},{default:a(()=>[t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(p,{label:e.$t("payments.user"),name:"user_id",help:e.rules.user_id?e.rules.user_id.message:null,validateStatus:e.rules.user_id?"error":null,class:"required"},{default:a(()=>[t(i,{value:e.newFormData.user_id,"onUpdate:value":o[0]||(o[0]=z=>e.newFormData.user_id=z),placeholder:e.$t("common.select_default_text",[e.$t("payments.user")]),allowClear:!0,"option-label-prop":"label",optionFilterProp:"label","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(e.users,z=>(r(),w(d,{key:z.xid,value:z.xid,label:z.name},{default:a(()=>[t(m,{user:z,size:"small"},null,8,["user"])]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),e.addEditType=="add"?(r(),w(f,{key:0,gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(p,{label:e.$t("payments.amount"),name:"amount",help:e.rules.amount?e.rules.amount.message:null,validateStatus:e.rules.amount?"error":null,class:"required"},{default:a(()=>[t(y,{prefix:e.appSetting.currency.symbol,value:e.newFormData.amount,"onUpdate:value":o[1]||(o[1]=z=>e.newFormData.amount=z),placeholder:e.$t("common.placeholder_default_text",[e.$t("payments.amount")])},null,8,["prefix","value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(p,{label:e.$t("payments.date"),name:"date",help:e.rules.date?e.rules.date.message:null,validateStatus:e.rules.date?"error":null,class:"required"},{default:a(()=>[t(b,{dateTime:e.newFormData.date,onDateTimeChanged:o[2]||(o[2]=z=>e.newFormData.date=z)},null,8,["dateTime"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(p,{label:e.$t("payments.payment_mode"),name:"payment_mode_id",help:e.rules.payment_mode_id?e.rules.payment_mode_id.message:null,validateStatus:e.rules.payment_mode_id?"error":null,class:"required"},{default:a(()=>[g("span",hy,[t(i,{value:e.newFormData.payment_mode_id,"onUpdate:value":o[3]||(o[3]=z=>e.newFormData.payment_mode_id=z),placeholder:e.$t("common.select_default_text",[e.$t("payments.payment_mode")]),allowClear:!0},{default:a(()=>[(r(!0),$(I,null,G(e.paymentModes,z=>(r(),w(d,{key:z.xid,value:z.xid},{default:a(()=>[u(s(z.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),t(k,{onOnAddSuccess:e.paymentModeAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(p,{label:e.$t("payments.notes"),name:"notes",help:e.rules.notes?e.rules.notes.message:null,validateStatus:e.rules.notes?"error":null},{default:a(()=>[t(C,{value:e.newFormData.notes,"onUpdate:value":o[4]||(o[4]=z=>e.newFormData.notes=z),placeholder:e.$t("common.placeholder_default_text",[e.$t("payments.notes")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(D,{class:"mt-0"}),e.addEditType=="add"?(r(),$("div",vy,[t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(p,null,{default:a(()=>[t(S,{type:"warning",strong:""},{default:a(()=>[g("blockquote",null,s(e.$t("payments.settle_invoice_using_payment")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e.newFormData.user_id?(r(),w(P,{key:0,ref:"settleInvoiceRef",userId:e.newFormData.user_id,amount:e.newFormData.amount},null,8,["userId","amount"])):A("",!0)])):(r(),$("div",by))]),_:1})]),_:1},8,["title","width","open","onClose"])}const wy=W(yy,[["render",ky]]),Cy={components:{PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,AddEdit:wy,AdminPageHeader:ge,UserInfo:Xe},setup(){const{addEditUrl:e,initData:o,columns:c,paymentType:n,menuParent:v,hashableColumns:h,filterableColumns:m}=Fo(),d=Ve(),{permsArray:i,formatAmountCurrency:p,selectedWarehouse:_,formatDate:f}=X(),y=Se({user_id:void 0}),b=T({}),k=Ze();ee(()=>{D(),C()});const C=()=>{d.tableUrl.value={url:`payment-${n.value}?fields=id,xid,date,amount,notes,payment_mode_id,payment_number,payment_type,payment_mode_id,x_payment_mode_id,paymentMode{id,xid,name},user_id,x_user_id,user{id,xid,name,profile_image,profile_image_url,user_type}`,filterString:`payment_type eq "${n.value}"`,filters:y},d.table.filterableColumns=m,d.fetch({page:1}),d.crudUrl.value=e.value,d.langKey.value="payments",d.initData.value={...o.value},d.formData.value={...o.value},d.hashableColumns.value=[...h]},D=()=>{const S=axiosAdmin.post("customer-suppliers");Promise.all([S]).then(([P])=>{b.value=P.data})};return ue(_,(S,P)=>{C()}),ue(()=>k.meta.paymentType,(S,P)=>{}),{columns:c,...d,permsArray:i,formatAmountCurrency:p,paymentType:n,menuParent:v,filters:y,users:b,setUrlData:C,filterableColumns:m,formatDate:f}}},Sy={class:"table-responsive"};function $y(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("PlusOutlined"),y=l("a-button"),b=l("DeleteOutlined"),k=l("a-space"),C=l("a-col"),D=l("a-select-option"),S=l("a-select"),P=l("a-input-search"),F=l("a-input-group"),O=l("a-row"),E=l("admin-page-filters"),U=l("AddEdit"),K=l("UserInfo"),z=l("EditOutlined"),M=l("a-table"),R=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t(`menu.payment_${n.paymentType}`),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t(`menu.${n.menuParent}`)),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t(`menu.payment_${n.paymentType}`)),1)]),_:1})]),_:1})]),_:1}),t(E,null,{default:a(()=>[t(O,{gutter:[16,16]},{default:a(()=>[t(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(k,null,{default:a(()=>[n.permsArray.includes(n.paymentType=="in"?"payment_in_create":"payment_out_create")||n.permsArray.includes("admin")?(r(),w(y,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(f),u(" "+s(e.$t("payments.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes(n.paymentType=="in"?"payment_in_delete":"payment_out_delete")||n.permsArray.includes("admin"))?(r(),w(y,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(b)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(O,{gutter:[16,16],justify:"end"},{default:a(()=>[t(C,{xs:24,sm:24,md:12,lg:6,xl:8},{default:a(()=>[t(F,{compact:""},{default:a(()=>[t(S,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":o[0]||(o[0]=q=>e.table.searchColumn=q),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),$(I,null,G(n.filterableColumns,q=>(r(),w(D,{key:q.key},{default:a(()=>[u(s(q.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(P,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":o[1]||(o[1]=q=>e.table.searchString=q),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1}),t(C,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(S,{value:n.filters.user_id,"onUpdate:value":o[2]||(o[2]=q=>n.filters.user_id=q),placeholder:e.$t("common.select_default_text",[e.$t("user.user")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":"",onChange:n.setUrlData},{default:a(()=>[(r(!0),$(I,null,G(n.users,q=>(r(),w(D,{key:q.xid,title:q.name,value:q.xid},{default:a(()=>[u(s(q.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(R,null,{default:a(()=>[t(U,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(O,null,{default:a(()=>[t(C,{span:24},{default:a(()=>[g("div",Sy,[t(M,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:q=>({disabled:!1,name:q.xid})},columns:n.columns,"row-key":q=>q.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:q,record:L})=>[q.dataIndex==="date"?(r(),$(I,{key:0},[u(s(n.formatDate(L.date)),1)],64)):A("",!0),q.dataIndex==="user_id"?(r(),w(K,{key:1,user:L.user},null,8,["user"])):A("",!0),q.dataIndex==="amount"?(r(),$(I,{key:2},[u(s(n.formatAmountCurrency(L.amount)),1)],64)):A("",!0),q.dataIndex==="action"?(r(),$(I,{key:3},[n.permsArray.includes(n.paymentType=="in"?"payment_in_edit":"payment_out_edit")||n.permsArray.includes("admin")?(r(),w(y,{key:0,type:"primary",onClick:j=>e.editItem(L),style:{"margin-left":"4px"}},{icon:a(()=>[t(z)]),_:1},8,["onClick"])):A("",!0),n.permsArray.includes(n.paymentType=="in"?"payment_in_delete":"payment_out_delete")||n.permsArray.includes("admin")?(r(),w(y,{key:1,type:"primary",onClick:j=>e.showDeleteConfirm(L.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(b)]),_:1},8,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const rn=W(Cy,[["render",$y]]),Dy=Z({setup(){return{appEnv:window.config.app_env}}}),Ay={key:0};function Ty(e,o,c,n,v,h){const m=l("a-alert");return e.appEnv!="envato"?(r(),$("div",Ay,[t(m,{message:"Online Store is in beta version",type:"warning","show-icon":"",class:"mb-20"},{description:a(()=>[...o[0]||(o[0]=[u(" This feature is in testing mode and right now not available in the script. But it will be available in upcoming release. Purchase the script before price hike up to $59 ",-1),g("a",{href:"https://1.envato.market/5bBAWb",target:"_blank"}," Buy Now From here ",-1)])]),_:1})])):A("",!0)}const Ey=W(Dy,[["render",Ty]]),Oy={components:{PlusOutlined:le,OrderTable:ea,DateRangePicker:rt,AdminPageHeader:ge,InBetaMode:Ey},setup(){const{formatAmountCurrency:e,orderType:o,orderPageObject:c,orderStatus:n,permsArray:v,selectedWarehouse:h}=X(),m=qe(),d=T(""),i=T([]),p=T(null),_=T({payment_status:"all",user_id:void 0,dates:[],searchColumn:"invoice_number",searchString:""});ee(()=>{f();const y=axiosAdmin.get(c.value.userType);Promise.all([y]).then(([b])=>{i.value=b.data})});const f=()=>{const y=m.resolve({name:"front.homepage",params:{warehouse:h.value.slug}});d.value=window.config.path+y.href};return ue(h,(y,b)=>{f(),_.value={order_status:"all",user_id:void 0,dates:[],searchColumn:"invoice_number",searchString:""},p.value.resetPicker()}),{orderPageObject:c,permsArray:v,orderStatus:n,formatAmountCurrency:e,users:i,filters:_,orderType:o,serachDateRangePicker:p,selectedWarehouse:h,storeUrl:d}}};function Iy(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("a-typography-text"),y=l("a-col"),b=l("a-input"),k=l("a-button"),C=l("a-input-group"),D=l("a-row"),S=l("a-input-search"),P=l("a-select-option"),F=l("a-select"),O=l("DateRangePicker"),E=l("admin-page-filters"),U=l("a-tab-pane"),K=l("a-tabs"),z=l("OrderTable"),M=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.online_orders"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.stock_management")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.online_orders")),1)]),_:1})]),_:1})]),_:1}),t(E,null,{default:a(()=>[t(D,{gutter:[16,16]},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(D,{gutter:[16,16]},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(f,{type:"warning",strong:"",style:{fontSize:"18px"}},{default:a(()=>[u(s(e.$t("online_orders.online_store_url")),1)]),_:1})]),_:1}),t(y,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[t(C,{compact:""},{default:a(()=>[t(b,{value:n.storeUrl,"onUpdate:value":o[0]||(o[0]=R=>n.storeUrl=R),style:{width:"calc(100% - 100px)"}},null,8,["value"]),t(d,{to:{name:"front.homepage",params:{warehouse:n.selectedWarehouse.slug}},target:"_blank"},{default:a(()=>[t(k,{type:"primary"},{default:a(()=>[u(s(e.$t("common.view")),1)]),_:1})]),_:1},8,["to"])]),_:1})]),_:1})]),_:1})]),_:1}),t(y,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(D,{gutter:[16,16],justify:"end"},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(S,{style:{width:"100%"},value:n.filters.searchString,"onUpdate:value":o[1]||(o[1]=R=>n.filters.searchString=R),"show-search":"",placeholder:e.$t("common.placeholder_search_text",[e.$t("stock.invoice_number")])},null,8,["value","placeholder"])]),_:1}),t(y,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(F,{value:n.filters.user_id,"onUpdate:value":o[2]||(o[2]=R=>n.filters.user_id=R),placeholder:e.$t("common.select_default_text",[e.$t(`${n.orderPageObject.langKey}.user`)]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.users,R=>(r(),w(P,{key:R.xid,title:R.name,value:R.xid},{default:a(()=>[u(s(R.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1}),t(y,{xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[t(O,{ref:"serachDateRangePicker",onDateTimeChanged:o[3]||(o[3]=R=>n.filters.dates=R)},null,512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(M,null,{default:a(()=>[t(D,null,{default:a(()=>[t(y,{span:24},{default:a(()=>[t(K,{activeKey:n.filters.order_status,"onUpdate:activeKey":o[4]||(o[4]=R=>n.filters.order_status=R)},{default:a(()=>[t(U,{key:"all",tab:`${e.$t("common.all")} ${e.$t("menu.online_orders")}`},null,8,["tab"]),t(U,{key:"pending",tab:e.$t("common.pending")},null,8,["tab"]),t(U,{key:"delivered",tab:e.$t("common.delivered")},null,8,["tab"]),t(U,{key:"cancelled",tab:e.$t("common.cancelled")},null,8,["tab"])]),_:1},8,["activeKey"])]),_:1})]),_:1}),t(z,{orderType:n.orderType,filters:n.filters,tableSize:"middle",bordered:!0,selectable:!0},null,8,["orderType","filters"])]),_:1})],64)}const Py=W(Oy,[["render",Iy]]),Uy={components:{PlusOutlined:le,DeleteOutlined:fe,OrderTable:ea,DateRangePicker:rt,AdminPageHeader:ge},setup(){const{formatAmountCurrency:e,orderType:o,orderPageObject:c,orderStatus:n,permsArray:v,selectedWarehouse:h}=X();qe();const m=T([]),d=T(null),i=T([]),p=T(null),_=T({payment_status:"all",warehouse_id:void 0,dates:[],searchColumn:"invoice_number",transfer_type:"transfered",searchString:""});return ee(()=>{const f=`warehouses?filters=id ne "${h.value.xid}"&hashable=${h.value.xid}&limit=10000`,y=axiosAdmin.get(f);Promise.all([y]).then(([b])=>{m.value=b.data})}),ue(h,(f,y)=>{_.value={order_status:"all",user_id:void 0,dates:[],searchColumn:"invoice_number",transfer_type:"transfered",searchString:""},d.value.resetPicker()}),{orderPageObject:c,permsArray:v,orderStatus:n,formatAmountCurrency:e,warehouses:m,filters:_,orderType:o,serachDateRangePicker:d,selectedRowIds:i,orderTableRef:p}}};function Fy(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("PlusOutlined"),y=l("a-button"),b=l("DeleteOutlined"),k=l("a-space"),C=l("a-col"),D=l("a-input-search"),S=l("a-select-option"),P=l("a-select"),F=l("DateRangePicker"),O=l("a-row"),E=l("admin-page-filters"),U=l("a-tab-pane"),K=l("a-tabs"),z=l("OrderTable"),M=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.stock_transfer"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.stock_transfer")),1)]),_:1})]),_:1})]),_:1}),t(E,null,{default:a(()=>[t(O,{gutter:[16,16]},{default:a(()=>[t(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(k,null,{default:a(()=>[(n.permsArray.includes("stock_transfers_create")||n.permsArray.includes("admin"))&&n.filters.transfer_type=="transfered"?(r(),w(d,{key:0,to:{name:"admin.stock.stock-transfers.create"}},{default:a(()=>[t(y,{type:"primary"},{default:a(()=>[t(f),u(" "+s(e.$t("stock_transfer.add")),1)]),_:1})]),_:1})):A("",!0),n.selectedRowIds.length>0&&(n.permsArray.includes("stock_transfers_delete")||n.permsArray.includes("admin"))?(r(),w(y,{key:1,type:"primary",onClick:n.orderTableRef.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(b)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(O,{gutter:[16,16],justify:"end"},{default:a(()=>[t(C,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(D,{style:{width:"100%"},value:n.filters.searchString,"onUpdate:value":o[0]||(o[0]=R=>n.filters.searchString=R),"show-search":"",placeholder:e.$t("common.placeholder_search_text",[e.$t("stock.invoice_number")])},null,8,["value","placeholder"])]),_:1}),n.filters.transfer_type=="transfered"?(r(),w(C,{key:0,xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(P,{value:n.filters.warehouse_id,"onUpdate:value":o[1]||(o[1]=R=>n.filters.warehouse_id=R),placeholder:e.$t("common.select_default_text",[e.$t("warehouse.warehouse")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.warehouses,R=>(r(),w(S,{key:R.xid,title:R.name,value:R.xid},{default:a(()=>[u(s(R.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1})):A("",!0),t(C,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(F,{ref:"serachDateRangePicker",onDateTimeChanged:o[2]||(o[2]=R=>n.filters.dates=R)},null,512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(M,null,{default:a(()=>[t(O,null,{default:a(()=>[t(C,{span:24},{default:a(()=>[t(K,{activeKey:n.filters.transfer_type,"onUpdate:activeKey":o[3]||(o[3]=R=>n.filters.transfer_type=R)},{default:a(()=>[t(U,{key:"transfered",tab:e.$t("stock_transfer.transfered")},null,8,["tab"]),t(U,{key:"received",tab:e.$t("stock_transfer.received")},null,8,["tab"])]),_:1},8,["activeKey"])]),_:1})]),_:1}),t(z,{ref:"orderTableRef",orderType:n.orderType,filters:n.filters,tableSize:"middle",bordered:!0,selectable:!0,onOnRowSelection:o[4]||(o[4]=R=>n.selectedRowIds=R)},null,8,["orderType","filters"])]),_:1})],64)}const My=W(Uy,[["render",Fy]]),qy=[{path:"/admin/stock/pos",component:ay,name:"admin.pos.index",meta:{requireAuth:!0,menuParent:"pos",menuKey:"pos",permission:"pos_view"}},{path:"/admin/stock/",component:()=>lt(()=>import("./Admin-3be1af1f.js"),["assets/Admin-3be1af1f.js","assets/vendor-4a6eb15a.js"]),children:[{path:"adjustments",component:cy,name:"admin.stock_adjustments.index",meta:{requireAuth:!0,menuParent:"stock_adjustment",menuKey:"stock_adjustment",permission:"stock_adjustments_view"}},{path:"purchases/edit/:id",component:qt,name:"admin.stock.purchases.edit",meta:{requireAuth:!0,menuParent:"purchases",menuKey:e=>"purchases",permission:e=>"purchases_edit",orderType:"purchases"}},{path:"purchases/create",component:Mt,name:"admin.stock.purchases.create",meta:{requireAuth:!0,menuParent:"purchases",menuKey:e=>"purchases",permission:e=>"purchases_create",orderType:"purchases"}},{path:"purchases",component:Gt,name:"admin.stock.purchases.index",meta:{requireAuth:!0,menuParent:"purchases",menuKey:e=>"purchases",permission:e=>"purchases_view",orderType:"purchases"}},{path:"purchase-returns/edit/:id",component:qt,name:"admin.stock.purchase-returns.edit",meta:{requireAuth:!0,menuParent:"purchases",menuKey:e=>"purchase_returns",permission:e=>"purchase_returns_edit",orderType:"purchase-returns"}},{path:"purchase-returns/create",component:Mt,name:"admin.stock.purchase-returns.create",meta:{requireAuth:!0,menuParent:"purchases",menuKey:e=>"purchase_returns",permission:e=>"purchase_returns_create",orderType:"purchase-returns"}},{path:"purchase-returns",component:Gt,name:"admin.stock.purchase-returns.index",meta:{requireAuth:!0,menuParent:"purchases",menuKey:e=>"purchase_returns",permission:e=>"purchase_returns_view",orderType:"purchase-returns"}},{path:"sales/edit/:id",component:qt,name:"admin.stock.sales.edit",meta:{requireAuth:!0,menuParent:"sales",menuKey:e=>"sales",permission:e=>"sales_edit",orderType:"sales"}},{path:"sales/create",component:Mt,name:"admin.stock.sales.create",meta:{requireAuth:!0,menuParent:"sales",menuKey:e=>"sales",permission:e=>"sales_create",orderType:"sales"}},{path:"sales",component:Gt,name:"admin.stock.sales.index",meta:{requireAuth:!0,menuParent:"sales",menuKey:e=>"sales",permission:e=>"sales_view",orderType:"sales"}},{path:"sales-returns/edit/:id",component:qt,name:"admin.stock.sales-returns.edit",meta:{requireAuth:!0,menuParent:"sales",menuKey:e=>"sales_returns",permission:e=>"sales_returns_edit",orderType:"sales-returns"}},{path:"sales-returns/create",component:Mt,name:"admin.stock.sales-returns.create",meta:{requireAuth:!0,menuParent:"sales",menuKey:e=>"sales_returns",permission:e=>"sales_returns_create",orderType:"sales-returns"}},{path:"sales-returns",component:Gt,name:"admin.stock.sales-returns.index",meta:{requireAuth:!0,menuParent:"sales",menuKey:e=>"sales_returns",permission:e=>"sales_returns_view",orderType:"sales-returns"}},{path:"quotations/edit/:id",component:qt,name:"admin.stock.quotations.edit",meta:{requireAuth:!0,menuParent:"sales",menuKey:e=>"quotations",permission:e=>"quotations_edit",orderType:"quotations"}},{path:"quotations/create",component:Mt,name:"admin.stock.quotations.create",meta:{requireAuth:!0,menuParent:"sales",menuKey:e=>"quotations",permission:e=>"quotations_create",orderType:"quotations"}},{path:"quotations",component:Gt,name:"admin.stock.quotations.index",meta:{requireAuth:!0,menuParent:"sales",menuKey:e=>"quotations",permission:e=>"quotations_view",orderType:"quotations"}},{path:"online-orders",component:Py,name:"admin.online_orders.index",meta:{requireAuth:!0,menuParent:"online_orders",menuKey:"online_orders",orderType:"online-orders"}},{path:"stock-transfers/edit/:id",component:qt,name:"admin.stock.stock-transfers.edit",meta:{requireAuth:!0,menuParent:"stock_transfer",menuKey:e=>"stock_transfer",permission:e=>"stock_transfers_edit",orderType:"stock-transfers"}},{path:"stock-transfers/create",component:Mt,name:"admin.stock.stock-transfers.create",meta:{requireAuth:!0,menuParent:"stock_transfer",menuKey:e=>"stock_transfer",permission:e=>"stock_transfers_create",orderType:"stock-transfers"}},{path:"stock-transfers",component:My,name:"admin.stock.stock-transfers.index",meta:{requireAuth:!0,menuParent:"stock_transfer",menuKey:e=>"stock_transfer",permission:e=>"stock_transfers_view",orderType:"stock-transfers"}}]},{path:"/admin/payment/",component:()=>lt(()=>import("./Admin-3be1af1f.js"),["assets/Admin-3be1af1f.js","assets/vendor-4a6eb15a.js"]),children:[{path:"in",component:rn,name:"admin.payments.in",meta:{requireAuth:!0,menuParent:"sales",menuKey:"payment_in",permission:"payment_in_view",paymentType:"in"}},{path:"out",component:rn,name:"admin.payments.out",meta:{requireAuth:!0,menuParent:"purchases",menuKey:"payment_out",permission:"payment_out_view",paymentType:"out"}}]}],Mo=()=>{const e="expense-categories",{t:o}=ae(),c={name:"",description:""},n=[{title:o("expense_category.name"),dataIndex:"name"},{title:o("expense_category.description"),dataIndex:"description"},{title:o("common.action"),dataIndex:"action"}],v=[{key:"name",value:o("common.name")}];return{addEditUrl:e,initData:c,columns:n,filterableColumns:v}},Ry=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:le,LoadingOutlined:Oe,SaveOutlined:ve},setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n,rules:v}=be();return{loading:n,rules:v,onClose:()=>{v.value={},o("closed")},onSubmit:()=>{c({url:e.url,data:e.formData,successMessage:e.successMessage,success:d=>{o("addEditSuccess",d.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Ky(e,o,c,n,v,h){const m=l("a-input"),d=l("a-form-item"),i=l("a-col"),p=l("a-row"),_=l("a-textarea"),f=l("a-form"),y=l("SaveOutlined"),b=l("a-button"),k=l("a-modal");return r(),w(k,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(b,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(y)]),default:a(()=>[u(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(b,{key:"back",onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(f,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("expense_category.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(m,{value:e.formData.name,"onUpdate:value":o[0]||(o[0]=C=>e.formData.name=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("expense_category.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("expense_category.description"),name:"description",help:e.rules.description?e.rules.description.message:null,validateStatus:e.rules.description?"error":null},{default:a(()=>[t(_,{value:e.formData.description,"onUpdate:value":o[1]||(o[1]=C=>e.formData.description=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("expense_category.description")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const qo=W(Ry,[["render",Ky]]),Vy={components:{PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,AddEdit:qo,AdminPageHeader:ge},setup(){const{addEditUrl:e,initData:o,columns:c,filterableColumns:n}=Mo(),v=Ve(),{permsArray:h}=X();return ee(()=>{v.tableUrl.value={url:"expense-categories?fields=id,xid,name,description"},v.table.filterableColumns=n,v.fetch({page:1}),v.crudUrl.value=e,v.langKey.value="expense_category",v.initData.value={...o},v.formData.value={...o}}),{columns:c,...v,filterableColumns:n,permsArray:h}}},zy={class:"table-responsive"};function Ly(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("PlusOutlined"),y=l("a-button"),b=l("DeleteOutlined"),k=l("a-space"),C=l("a-col"),D=l("a-select-option"),S=l("a-select"),P=l("a-input-search"),F=l("a-input-group"),O=l("a-row"),E=l("admin-page-filters"),U=l("AddEdit"),K=l("EditOutlined"),z=l("a-table"),M=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.expense_categories"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.expense_manager")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.expense_categories")),1)]),_:1})]),_:1})]),_:1}),t(E,null,{default:a(()=>[t(O,{gutter:[16,16]},{default:a(()=>[t(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(k,null,{default:a(()=>[n.permsArray.includes("expense_categories_create")||n.permsArray.includes("admin")?(r(),w(y,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(f),u(" "+s(e.$t("expense_category.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("expense_categories_delete")||n.permsArray.includes("admin"))?(r(),w(y,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(b)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(O,{gutter:[16,16],justify:"end"},{default:a(()=>[t(C,{xs:24,sm:24,md:12,lg:12,xl:10},{default:a(()=>[t(F,{compact:""},{default:a(()=>[t(S,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":o[0]||(o[0]=R=>e.table.searchColumn=R),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),$(I,null,G(n.filterableColumns,R=>(r(),w(D,{key:R.key},{default:a(()=>[u(s(R.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(P,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":o[1]||(o[1]=R=>e.table.searchString=R),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(M,null,{default:a(()=>[t(U,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(O,null,{default:a(()=>[t(C,{span:24},{default:a(()=>[g("div",zy,[t(z,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:R=>({disabled:!1,name:R.xid})},columns:n.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:R,record:q})=>[R.dataIndex==="action"?(r(),$(I,{key:0},[n.permsArray.includes("expense_categories_edit")||n.permsArray.includes("admin")?(r(),w(y,{key:0,type:"primary",onClick:L=>e.editItem(q),style:{"margin-left":"4px"}},{icon:a(()=>[t(K)]),_:1},8,["onClick"])):A("",!0),n.permsArray.includes("expense_categories_delete")||n.permsArray.includes("admin")?(r(),w(y,{key:1,type:"primary",onClick:L=>e.showDeleteConfirm(q.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(b)]),_:1},8,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const By=W(Vy,[["render",Ly]]),Wy=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:le,AddEdit:qo},setup(e,{emit:o}){const{permsArray:c}=X(),{initData:n,addEditUrl:v}=Mo(),h=T(!1),m=T("add"),d=T({...n});return{permsArray:c,visible:h,addEditType:m,addEditUrl:v,formData:d,addEditSuccess:()=>{h.value=!1,d.value={...n},o("onAddSuccess")},onClose:()=>{h.value=!1},showAdd:()=>{h.value=!0}}}}),jy={key:0};function Hy(e,o,c,n,v,h){const m=l("a-menu-item"),d=l("PlusOutlined"),i=l("a-button"),p=l("a-tooltip"),_=l("AddEdit");return e.permsArray.includes("expense_categories_create")||e.permsArray.includes("admin")?(r(),$("div",jy,[e.customType=="menu"?(r(),w(m,{onClick:e.showAdd,key:"expense_categories"},{icon:a(()=>[ie(e.$slots,"icon")]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick"])):(r(),$(I,{key:1},[e.tooltip?(r(),w(p,{key:0,placement:"topLeft",title:e.$t("expense_category.add"),"arrow-point-at-center":""},{default:a(()=>[t(i,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),w(i,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("expense_category.add"),successMessage:e.$t("expense_category.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const Ny=W(Wy,[["render",Hy]]),Yy=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:le,AddEdit:ha},setup(e,{emit:o}){const{permsArray:c}=X(),{staffMemberInitData:n,staffMemberAddEditUrl:v}=va(),h=T(!1),m=T("add"),d=T({...n});return{permsArray:c,visible:h,addEditType:m,staffMemberAddEditUrl:v,formData:d,addEditSuccess:()=>{h.value=!1,d.value={...n},o("onAddSuccess")},onClose:()=>{h.value=!1},showAdd:()=>{h.value=!0}}}}),Gy={key:0};function Xy(e,o,c,n,v,h){const m=l("a-menu-item"),d=l("PlusOutlined"),i=l("a-button"),p=l("a-tooltip"),_=l("AddEdit");return e.permsArray.includes("users_create")||e.permsArray.includes("admin")?(r(),$("div",Gy,[e.customType=="menu"?(r(),w(m,{onClick:e.showAdd,key:"staff_members"},{icon:a(()=>[ie(e.$slots,"icon")]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick"])):(r(),$(I,{key:1},[e.tooltip?(r(),w(p,{key:0,placement:"topLeft",title:e.$t("staff_member.add"),"arrow-point-at-center":""},{default:a(()=>[t(i,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),w(i,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.staffMemberAddEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,addEditData:e.formData,data:e.formData,pageTitle:e.$t("staff_member.add"),successMessage:e.$t("staff_member.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","addEditData","data","pageTitle","successMessage"])])):A("",!0)}const Jy=W(Yy,[["render",Xy]]);const Qy=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:le,LoadingOutlined:Oe,UserInfo:Xe,SaveOutlined:ve,ExpenseCategoryAddButton:Ny,StaffAddButton:Jy,UploadFile:_o,DateTimePicker:ya},setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n,rules:v}=be(),h=T({}),m=T({}),{appSetting:d,disabledDate:i,permsArray:p,dayjs:_}=X(),f="expense-categories?limit=10000",y="users?limit=10000",b=T({});ee(()=>{const P=axiosAdmin.get(f),F=axiosAdmin.get(y);Promise.all([P,F]).then(([O,E])=>{h.value=O.data,m.value=E.data})});const k=()=>{c({url:e.url,data:b.value,successMessage:e.successMessage,success:P=>{o("addEditSuccess",P.xid)}})},C=()=>{v.value={},o("closed")},D=()=>{axiosAdmin.get(f).then(P=>{h.value=P.data})},S=()=>{axiosAdmin.get(y).then(P=>{m.value=P.data})};return ue(()=>e.visible,(P,F)=>{P&&(e.addEditType=="add"?b.value={...e.formData,date:_().utc().format("YYYY-MM-DDTHH:mm:ssZ")}:b.value={...e.formData})}),{loading:n,rules:v,onClose:C,onSubmit:k,disabledDate:i,permsArray:p,expenseCategories:h,staffMembers:m,drawerWidth:window.innerWidth<=991?"90%":"45%",appSetting:d,expenseCategoryAdded:D,staffMemberAdded:S,newFormData:b}}}),Zy={style:{display:"flex"}},xy={style:{display:"flex"}};function eh(e,o,c,n,v,h){const m=l("a-select-option"),d=l("a-select"),i=l("ExpenseCategoryAddButton"),p=l("a-form-item"),_=l("a-col"),f=l("UserInfo"),y=l("StaffAddButton"),b=l("a-row"),k=l("DateTimePicker"),C=l("a-input-number"),D=l("UploadFile"),S=l("a-textarea"),P=l("a-form"),F=l("SaveOutlined"),O=l("a-button"),E=l("a-drawer");return r(),w(E,{title:e.pageTitle,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[t(O,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:a(()=>[t(F)]),default:a(()=>[u(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),t(O,{onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(P,{layout:"vertical"},{default:a(()=>[t(b,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:e.permsArray.includes("admin")?12:24,lg:e.permsArray.includes("admin")?12:24},{default:a(()=>[t(p,{label:e.$t("expense.expense_category"),name:"expense_category_id",help:e.rules.expense_category_id?e.rules.expense_category_id.message:null,validateStatus:e.rules.expense_category_id?"error":null,class:"required"},{default:a(()=>[g("span",Zy,[t(d,{value:e.newFormData.expense_category_id,"onUpdate:value":o[0]||(o[0]=U=>e.newFormData.expense_category_id=U),placeholder:e.$t("common.select_default_text",[e.$t("expense.expense_category")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(e.expenseCategories,U=>(r(),w(m,{key:U.xid,value:U.xid,label:U.name},{default:a(()=>[u(s(U.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"]),t(i,{onOnAddSuccess:e.expenseCategoryAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["md","lg"]),e.permsArray.includes("admin")?(r(),w(_,{key:0,xs:24,sm:24,md:e.permsArray.includes("admin")?12:24,lg:e.permsArray.includes("admin")?12:24},{default:a(()=>[t(p,{label:e.$t("expense.created_by_user"),name:"user_id",help:e.rules.user_id?e.rules.user_id.message:null,validateStatus:e.rules.user_id?"error":null},{default:a(()=>[g("span",xy,[t(d,{value:e.newFormData.user_id,"onUpdate:value":o[1]||(o[1]=U=>e.newFormData.user_id=U),placeholder:e.$t("common.select_default_text",[e.$t("expense.user")]),allowClear:!0,"option-label-prop":"label",optionFilterProp:"label","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(e.staffMembers,U=>(r(),w(m,{key:U.xid,value:U.xid,label:U.name},{default:a(()=>[t(f,{user:U,size:"small"},null,8,["user"])]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"]),t(y,{onOnAddSuccess:e.staffMemberAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["md","lg"])):A("",!0)]),_:1}),t(b,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(p,{label:e.$t("expense.date"),name:"date",help:e.rules.date?e.rules.date.message:null,validateStatus:e.rules.date?"error":null,class:"required"},{default:a(()=>[t(k,{dateTime:e.newFormData.date,onDateTimeChanged:o[2]||(o[2]=U=>e.newFormData.date=U)},null,8,["dateTime"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(p,{label:e.$t("expense.amount"),name:"amount",help:e.rules.amount?e.rules.amount.message:null,validateStatus:e.rules.amount?"error":null,class:"required"},{default:a(()=>[t(C,{value:e.newFormData.amount,"onUpdate:value":o[3]||(o[3]=U=>e.newFormData.amount=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("expense.amount")]),min:"0",style:{width:"100%"}},{addonBefore:a(()=>[u(s(e.appSetting.currency.symbol),1)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(b,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(p,{label:e.$t("expense.bill"),name:"bill",help:e.rules.bill?e.rules.bill.message:null,validateStatus:e.rules.bill?"error":null},{default:a(()=>[t(D,{acceptFormat:"image/*,.pdf",formData:e.newFormData,folder:"expenses",uploadField:"bill",onOnFileUploaded:o[4]||(o[4]=U=>{e.newFormData.bill=U.file,e.newFormData.bill_url=U.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(b,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(p,{label:e.$t("expense.notes"),name:"notes",help:e.rules.notes?e.rules.notes.message:null,validateStatus:e.rules.notes?"error":null},{default:a(()=>[t(S,{value:e.newFormData.notes,"onUpdate:value":o[5]||(o[5]=U=>e.newFormData.notes=U),placeholder:e.$t("common.placeholder_default_text",[e.$t("expense.notes")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])}const th=W(Qy,[["render",eh]]),ah=()=>{const{t:e}=ae(),o="expenses",c=T("expenses?fields=id,xid,bill,bill_url,expense_category_id,x_expense_category_id,expenseCategory{id,xid,name},amount,user_id,x_user_id,user{id,xid,name},notes,date"),n=["user_id","expense_category_id"],v=Se({expenseCategories:[],staffMembers:[]}),h={expense_category_id:void 0,amount:"",bill:void 0,bill_url:void 0,date:void 0,user_id:void 0,notes:""},m=[{title:e("expense.expense_category"),dataIndex:"expense_category_id"},{title:e("expense.amount"),dataIndex:"amount"},{title:e("expense.date"),dataIndex:"date"},{title:e("expense.created_by_user"),dataIndex:"user_id"},{title:e("common.action"),dataIndex:"action"}],d=Se({expense_category_id:void 0,user_id:void 0});return{url:c,addEditUrl:o,initData:h,columns:m,filters:d,hashableColumns:n,preFetchData:v,getPreFetchData:()=>{const p=axiosAdmin.get("expense-categories?limit=10000"),_=axiosAdmin.get("users?limit=10000");Promise.all([p,_]).then(([f,y])=>{v.expenseCategories=f.data,v.staffMembers=y.data})}}},nh={components:{PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,AddEdit:th,AdminPageHeader:ge,DateRangePicker:rt},setup(){const{url:e,addEditUrl:o,initData:c,columns:n,filters:v,preFetchData:h,getPreFetchData:m,hashableColumns:d}=ah(),i=Ve(),{appSetting:p,permsArray:_,formatDate:f,selectedWarehouse:y,formatAmountCurrency:b}=X(),k=T({dates:[]});ee(()=>{m(),i.crudUrl.value=o,i.langKey.value="expense",i.initData.value={...c},i.formData.value={...c},i.hashableColumns.value=[...d],C()});const C=()=>{i.tableUrl.value={url:e,filters:v,extraFilters:k},i.fetch({page:1})};return ue(y,(D,S)=>{C()}),{columns:n,appSetting:p,formatDate:f,...i,filters:v,extraFilters:k,preFetchData:h,reFetchDatatable:C,permsArray:_,formatAmountCurrency:b}}},oh={class:"table-responsive"};function lh(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("PlusOutlined"),y=l("a-button"),b=l("DeleteOutlined"),k=l("a-space"),C=l("a-col"),D=l("a-select-option"),S=l("a-select"),P=l("DateRangePicker"),F=l("a-row"),O=l("admin-page-filters"),E=l("AddEdit"),U=l("EditOutlined"),K=l("a-table"),z=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.expenses"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.expense_manager")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.expenses")),1)]),_:1})]),_:1})]),_:1}),t(O,null,{default:a(()=>[t(F,{gutter:[16,16]},{default:a(()=>[t(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(k,null,{default:a(()=>[n.permsArray.includes("expenses_create")||n.permsArray.includes("admin")?(r(),w(y,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(f),u(" "+s(e.$t("expense.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("expenses_delete")||n.permsArray.includes("admin"))?(r(),w(y,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(b)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(F,{gutter:[16,16],justify:"end"},{default:a(()=>[t(C,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(S,{value:n.filters.expense_category_id,"onUpdate:value":o[0]||(o[0]=M=>n.filters.expense_category_id=M),"show-search":"",style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("expense.expense_category")]),onChange:n.reFetchDatatable,allowClear:!0,optionFilterProp:"label"},{default:a(()=>[(r(!0),$(I,null,G(n.preFetchData.expenseCategories,M=>(r(),w(D,{key:M.xid,value:M.xid,label:M.name},{default:a(()=>[u(s(M.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),t(C,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(S,{value:n.filters.user_id,"onUpdate:value":o[1]||(o[1]=M=>n.filters.user_id=M),"show-search":"",style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("expense.user")]),onChange:n.reFetchDatatable,allowClear:!0,optionFilterProp:"label"},{default:a(()=>[(r(!0),$(I,null,G(n.preFetchData.staffMembers,M=>(r(),w(D,{key:M.xid,value:M.xid,label:M.name},{default:a(()=>[u(s(M.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),t(C,{xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[t(P,{onDateTimeChanged:o[2]||(o[2]=M=>{n.extraFilters.dates=M,n.reFetchDatatable()})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(z,null,{default:a(()=>[t(E,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(F,{class:"mt-20"},{default:a(()=>[t(C,{span:24},{default:a(()=>[g("div",oh,[t(K,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:M=>({disabled:!1,name:M.xid})},columns:n.columns,"row-key":M=>M.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:M,text:R,record:q})=>{var L;return[M.dataIndex==="expense_category_id"?(r(),$(I,{key:0},[u(s(q.expense_category.name),1)],64)):A("",!0),M.dataIndex==="user_id"?(r(),$(I,{key:1},[u(s((L=q.user)==null?void 0:L.name),1)],64)):A("",!0),M.dataIndex==="amount"?(r(),$(I,{key:2},[u(s(n.formatAmountCurrency(R)),1)],64)):A("",!0),M.dataIndex==="date"?(r(),$(I,{key:3},[u(s(n.formatDate(q.date)),1)],64)):A("",!0),M.dataIndex==="action"?(r(),$(I,{key:4},[n.permsArray.includes("expenses_edit")||n.permsArray.includes("admin")?(r(),w(y,{key:0,type:"primary",onClick:j=>e.editItem(q),style:{"margin-left":"4px"}},{icon:a(()=>[t(U)]),_:1},8,["onClick"])):A("",!0),n.permsArray.includes("expenses_delete")||n.permsArray.includes("admin")?(r(),w(y,{key:1,type:"primary",onClick:j=>e.showDeleteConfirm(q.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(b)]),_:1},8,["onClick"])):A("",!0)],64)):A("",!0)]}),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const sh=W(nh,[["render",lh]]),rh=[{path:"/",component:()=>lt(()=>import("./Admin-3be1af1f.js"),["assets/Admin-3be1af1f.js","assets/vendor-4a6eb15a.js"]),children:[{path:"/admin/expense-categories",component:By,name:"admin.expense_categories.index",meta:{requireAuth:!0,menuParent:"expense_manager",menuKey:e=>"expense_categories",permission:"expense_categories_view"}},{path:"/admin/expenses",component:sh,name:"admin.expenses.index",meta:{requireAuth:!0,menuParent:"expense_manager",menuKey:e=>"expenses",permission:"expenses_view"}}]}],dh=Z({props:["amount"],components:{ArrowDownOutlined:Ua,ArrowUpOutlined:Pa},setup(){const{formatAmountCurrency:e}=X();return{formatAmountCurrency:e}}}),ih={key:0};function uh(e,o,c,n,v,h){const m=l("ArrowUpOutlined"),d=l("a-typography-text"),i=l("a-tooltip"),p=l("ArrowDownOutlined");return e.amount<0?(r(),w(i,{key:0,title:e.$t("payments.you_will_pay")},{default:a(()=>[t(d,null,{default:a(()=>[t(m,{style:{color:"red"}}),u(" "+s(e.formatAmountCurrency(Math.abs(e.amount))),1)]),_:1})]),_:1},8,["title"])):(r(),w(i,{key:1,title:e.$t("payments.you_will_receive")},{default:a(()=>[t(d,null,{default:a(()=>[e.amount>0?(r(),$("span",ih,[t(p,{style:{color:"green"}})])):A("",!0),u(" "+s(e.formatAmountCurrency(e.amount)),1)]),_:1})]),_:1},8,["title"]))}const Xa=W(dh,[["render",uh]]),mh=()=>{const{t:e}=ae(),o=["user_id"],c=[{key:"name",value:e("user.name")}],n=[{title:e("payments.date"),dataIndex:"date"},{title:e("payments.transaction_number"),dataIndex:"transaction_number"},{title:e("payments.payment_type"),dataIndex:"payment_type"},{title:e("payments.user"),dataIndex:"user_id"},{title:e("payments.amount"),dataIndex:"amount"}];return{transactionsFilterableColumns:c,transactionsColumns:n,transactionsHashableColumns:o}},ch=Z({props:{user_id:null,result_type:{default:"all",type:String}},components:{UserInfo:Xe},setup(e){const{transactionsColumns:o,transactionsHashableColumns:c}=mh(),{formatDate:n,formatAmountCurrency:v}=X(),h=Ge();ee(()=>{m(e)});const m=d=>{const i={},p={result_type:d.result_type};d.user_id&&d.user_id!=null&&(p.user_id=d.user_id),h.tableUrl.value={url:"warehouse-history?fields=id,xid,date,type,amount,transaction_number,user_id,x_user_id,user{id,xid,name,profile_image,profile_image_url,user_type}",filters:i,extraFilters:p},h.hashable.value=[...c],h.table.sorter={field:"date",order:"asc"},h.fetch({page:1})};return ue(e,(d,i)=>{m(d)}),{transactionsColumns:o,...h,formatDate:n,formatAmountCurrency:v}}}),ph={key:0,class:"table-responsive"};function _h(e,o,c,n,v,h){const m=l("UserInfo"),d=l("a-table"),i=l("a-col"),p=l("a-row");return r(),w(p,null,{default:a(()=>[t(i,{span:24},{default:a(()=>[e.table.loading?A("",!0):(r(),$("div",ph,[t(d,{columns:e.transactionsColumns,"row-key":_=>_.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange},{bodyCell:a(({column:_,record:f})=>[_.dataIndex==="date"?(r(),$(I,{key:0},[u(s(e.formatDate(f.date)),1)],64)):A("",!0),_.dataIndex==="payment_type"?(r(),$(I,{key:1},[u(s(f.type),1)],64)):A("",!0),_.dataIndex==="user_id"?(r(),w(m,{key:2,user:f.user},null,8,["user"])):A("",!0),_.dataIndex==="amount"?(r(),$(I,{key:3},[u(s(e.formatAmountCurrency(f.amount)),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])]))]),_:1})]),_:1})}const fh=W(ch,[["render",_h]]),gh=Z({props:["user"],components:{Transactions:fh},setup(){return{activeKey:T("transactions")}}});function yh(e,o,c,n,v,h){const m=l("Transactions"),d=l("a-tab-pane"),i=l("a-tabs");return r(),w(i,{activeKey:e.activeKey,"onUpdate:activeKey":o[0]||(o[0]=p=>e.activeKey=p)},{default:a(()=>[t(d,{key:"transactions",tab:e.$t("payments.transactions")},{default:a(()=>[t(m,{user_id:e.user.xid,result_type:e.user.user_type=="staff_members"?"staff_member":"customer_supplier"},null,8,["user_id","result_type"])]),_:1},8,["tab"])]),_:1},8,["activeKey"])}const hh=W(gh,[["render",yh]]);const vh=Z({props:["user","visible"],emits:["closed"],components:{UserBalance:Xa,UserDetails:hh},setup(e,{emit:o}){const{formatAmountCurrency:c}=X();return ae(),{formatAmountCurrency:c,onClose:()=>{o("closed")},drawerWidth:window.innerWidth<=991?"90%":"60%"}}}),bh={class:"user-details"};function kh(e,o,c,n,v,h){const m=l("a-image"),d=l("a-col"),i=l("a-descriptions-item"),p=l("UserBalance"),_=l("a-descriptions"),f=l("a-row"),y=l("UserDetails"),b=l("a-drawer");return r(),w(b,{title:e.user.name,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},maskClosable:!1,onClose:e.onClose},{default:a(()=>[g("div",bh,[t(f,{gutter:[16,16]},{default:a(()=>[t(d,{xs:24,sm:24,md:4,lg:4},{default:a(()=>[t(m,{src:e.user.profile_image_url},null,8,["src"])]),_:1}),t(d,{xs:24,sm:24,md:20,lg:20},{default:a(()=>[t(_,{title:e.$t(`user.${e.user.user_type}_details`),layout:"vertical",contentStyle:{fontWeight:500,marginBottom:"20px"}},{default:a(()=>[t(i,{label:e.$t("user.name")},{default:a(()=>[u(s(e.user.name),1)]),_:1},8,["label"]),t(i,{label:e.$t("user.email")},{default:a(()=>[u(s(e.user.email),1)]),_:1},8,["label"]),t(i,{label:e.$t("user.phone")},{default:a(()=>[u(s(e.user.phone?e.user.phone:"-"),1)]),_:1},8,["label"]),e.user.details?(r(),w(i,{key:0,label:e.$t("user.opening_balance")},{default:a(()=>[t(p,{amount:e.user.details.opening_balance_type=="pay"?-`${e.user.details.opening_balance}`:e.user.details.opening_balance},null,8,["amount"])]),_:1},8,["label"])):A("",!0),t(i,{label:e.$t("user.billing_address"),span:2},{default:a(()=>[u(s(e.user.address?e.user.address:"-"),1)]),_:1},8,["label"]),e.user.details?(r(),w(i,{key:1,label:e.$t("user.credit_period")},{default:a(()=>[u(s(e.user.details.credit_period?`${e.user.details.credit_period} day(s)`:"-"),1)]),_:1},8,["label"])):A("",!0),e.user.details?(r(),w(i,{key:2,label:e.$t("user.credit_limit")},{default:a(()=>[u(s(e.user.details.credit_limit?e.formatAmountCurrency(e.user.details.credit_limit):"-"),1)]),_:1},8,["label"])):A("",!0),e.user.details?(r(),w(i,{key:3,label:e.$t("common.balance")},{default:a(()=>[e.user.details&&e.user.details.due_amount?(r(),w(p,{key:0,amount:e.user.details.due_amount},null,8,["amount"])):A("",!0)]),_:1},8,["label"])):A("",!0),e.user.user_type!="staff_members"?(r(),w(i,{key:4,label:e.$t("user.tax_number")},{default:a(()=>[u(s(e.user.tax_number?e.user.tax_number:"-"),1)]),_:1},8,["label"])):A("",!0)]),_:1},8,["title"])]),_:1})]),_:1})]),t(y,{user:e.user},null,8,["user"])]),_:1},8,["title","width","open","onClose"])}const wh=W(vh,[["render",kh]]),Ch={components:{EyeOutlined:tt,PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,UserOutlined:Zt,ArrowUpOutlined:Pa,ArrowDownOutlined:Ua,AddEdit:ha,UserInfo:Xe,StateWidget:ro,AdminPageHeader:ge,UserBalance:Xa,UserView:wh,ImportUsers:Lt},setup(){const{t:e}=ae(),{statusColors:o,userStatus:c,permsArray:n,formatDateTime:v,user:h,selectedWarehouse:m}=X(),{supplierInitData:d,customerInitData:i,staffMemberInitData:p,columns:_,supplierCustomerColumns:f,filterableColumns:y}=va(),b=Ve(),k=Ze(),C=T(k.meta.menuKey),D="?fields=id,xid,user_type,name,email,profile_image,profile_image_url,is_walkin_customer,phone,address,shipping_address,status,tax_number,created_at,details{opening_balance,opening_balance_type,credit_period,credit_limit,due_amount,warehouse_id,x_warehouse_id},details:warehouse{id,xid,name},role_id,role{id,xid,name,display_name},warehouse_id,x_warehouse_id,warehouse{xid,name},userWarehouses{user_id,x_user_id,warehouse_id,x_warehouse_id}",S=T(void 0),P=T("all"),F=T("all"),O=T([]),E=T(""),U=T(""),K=T("");ee(()=>{M(),b.table.filterableColumns=y,z()});const z=()=>{C.value=="suppliers"?(b.initData.value={...d},b.formData.value={...d},b.langKey.value="supplier",O.value=f,E.value=window.config.supplier_sample_file,U.value=e("supplier.import_suppliers"),K.value="suppliers/import"):C.value=="customers"?(b.initData.value={...i},b.formData.value={...i},b.langKey.value="customer",O.value=f,E.value=window.config.customer_sample_file,U.value=e("customer.import_customers"),K.value="customers/import"):(b.initData.value={...p},b.formData.value={...p},b.langKey.value="staff_member",O.value=_,E.value=window.config.staff_member_sample_file,U.value=e("staff_member.import_staff_members"),K.value="users/import"),b.restFormData()},M=()=>{b.crudUrl.value=C.value;var R="",q={};S.value!=null&&S.value!="all"&&(R+=`status eq "${S.value}"`),F.value!=null&&F.value!="all"&&C.value!="users"&&(q.search_due_type=F.value),b.tableUrl.value={url:`${C.value}${D}`,filterString:R,extraFilters:q},b.fetch({page:1})};return ue(()=>k.meta.menuKey,(R,q)=>{(k.meta.menuKey=="users"||k.meta.menuKey=="customers"||k.meta.menuKey=="suppliers")&&(C.value=k.meta.menuKey,S.value=void 0,b.table.searchColumn=void 0,b.table.searchString="",F.value="all",M(),z())}),ue(m,(R,q)=>{M()}),{statusColors:o,userStatus:c,filterableColumns:y,userType:C,tableColumns:O,searchStatus:S,setUrlData:M,searchDueType:F,activeTabKey:P,...b,permsArray:n,formatDateTime:v,user:h,sampleFileUrl:E,importPageTitle:U,importUrl:K}}},Sh={class:"table-responsive"};function $h(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("PlusOutlined"),y=l("a-button"),b=l("ImportUsers"),k=l("a-space"),C=l("DeleteOutlined"),D=l("a-col"),S=l("a-select-option"),P=l("a-select"),F=l("a-input-search"),O=l("a-input-group"),E=l("a-row"),U=l("admin-page-filters"),K=l("AddEdit"),z=l("a-tab-pane"),M=l("a-tabs"),R=l("user-info"),q=l("a-tag"),L=l("UserBalance"),j=l("EyeOutlined"),Y=l("EditOutlined"),x=l("a-table"),B=l("UserView"),N=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t(`menu.${e.langKey}s`),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.parties")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t(`menu.${e.langKey}s`)),1)]),_:1})]),_:1})]),_:1}),t(U,null,{default:a(()=>[t(E,{gutter:[16,16]},{default:a(()=>[t(D,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(k,null,{default:a(()=>[n.permsArray.includes(`${n.userType}_create`)||n.permsArray.includes("admin")?(r(),w(k,{key:0},{default:a(()=>[t(y,{type:"primary",onClick:e.addItem},{default:a(()=>[t(f),u(" "+s(e.$t(`${e.langKey}.add`)),1)]),_:1},8,["onClick"]),t(b,{pageTitle:n.importPageTitle,sampleFileUrl:n.sampleFileUrl,importUrl:n.importUrl,onOnUploadSuccess:n.setUrlData},null,8,["pageTitle","sampleFileUrl","importUrl","onOnUploadSuccess"])]),_:1})):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes(`${n.userType}_delete`)||n.permsArray.includes("admin"))?(r(),w(y,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(C)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(D,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(E,{gutter:[16,16],justify:"end"},{default:a(()=>[t(D,{xs:24,sm:24,md:12,lg:8,xl:8},{default:a(()=>[t(O,{compact:""},{default:a(()=>[t(P,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":o[0]||(o[0]=H=>e.table.searchColumn=H),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),$(I,null,G(n.filterableColumns,H=>(r(),w(S,{key:H.key},{default:a(()=>[u(s(H.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(F,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":o[1]||(o[1]=H=>e.table.searchString=H),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1}),n.userType&&n.userType!="users"?(r(),w(D,{key:0,xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(P,{value:n.searchStatus,"onUpdate:value":o[2]||(o[2]=H=>n.searchStatus=H),onChange:n.setUrlData,"show-search":"",style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("user.status")]),allowClear:!0,optionFilterProp:"label"},{default:a(()=>[(r(!0),$(I,null,G(n.userStatus,H=>(r(),w(S,{key:H.key,value:H.key,label:H.value},{default:a(()=>[u(s(H.value),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","onChange","placeholder"])]),_:1})):A("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t(N,null,{default:a(()=>[t(K,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,addEditData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","addEditData","data","pageTitle","successMessage"]),n.userType&&n.userType=="users"?(r(),w(E,{key:0},{default:a(()=>[t(D,{span:24},{default:a(()=>[t(M,{activeKey:n.searchStatus,"onUpdate:activeKey":o[3]||(o[3]=H=>n.searchStatus=H),onChange:n.setUrlData},{default:a(()=>[t(z,{key:"all",tab:`${e.$t("common.all")} ${e.$t("menu.users")}`},null,8,["tab"]),(r(!0),$(I,null,G(n.userStatus,H=>(r(),w(z,{key:H.key,tab:`${H.value} ${e.$t("menu.users")}`},null,8,["tab"]))),128))]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1})):A("",!0),n.userType&&n.userType!="users"?(r(),w(E,{key:1},{default:a(()=>[t(D,{span:24},{default:a(()=>[t(M,{activeKey:n.searchDueType,"onUpdate:activeKey":o[4]||(o[4]=H=>n.searchDueType=H),onChange:n.setUrlData},{default:a(()=>[t(z,{key:"all",tab:`${e.$t("common.all")}`},null,8,["tab"]),t(z,{key:"receive",tab:`${e.$t("user.to_receive")}`},null,8,["tab"]),t(z,{key:"pay",tab:`${e.$t("user.to_pay")}`},null,8,["tab"])]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1})):A("",!0),t(E,{gutter:[15,15]},{default:a(()=>[t(D,{span:24},{default:a(()=>[g("div",Sh,[t(x,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:H=>({disabled:!!(n.user.xid==H.xid||H.is_walkin_customer),name:H.xid})},columns:n.tableColumns,"row-key":H=>H.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:H,text:J,record:se})=>{var ce;return[H.dataIndex==="name"?(r(),w(R,{key:0,user:se},null,8,["user"])):A("",!0),H.dataIndex==="status"?(r(),w(q,{key:1,color:n.statusColors[J]},{default:a(()=>[u(s(e.$t(`common.${J}`)),1)]),_:2},1032,["color"])):A("",!0),H.dataIndex==="created_at"?(r(),$(I,{key:2},[u(s(n.formatDateTime(se.created_at)),1)],64)):A("",!0),H.dataIndex==="balance"?(r(),w(L,{key:3,amount:(ce=se.details)==null?void 0:ce.due_amount},null,8,["amount"])):A("",!0),H.dataIndex==="action"?(r(),$(I,{key:4},[t(y,{type:"primary",onClick:V=>e.viewItem(se),style:{"margin-left":"4px"}},{icon:a(()=>[t(j)]),_:1},8,["onClick"]),n.permsArray.includes(`${n.userType}_edit`)||n.permsArray.includes("admin")?(r(),w(y,{key:0,type:"primary",onClick:V=>e.editItem(se),style:{"margin-left":"4px"}},{icon:a(()=>[t(Y)]),_:1},8,["onClick"])):A("",!0),(n.permsArray.includes(`${n.userType}_delete`)||n.permsArray.includes("admin"))&&n.user.xid!=se.xid&&!se.is_walkin_customer?(r(),w(y,{key:1,type:"primary",onClick:V=>e.showDeleteConfirm(se.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(C)]),_:1},8,["onClick"])):A("",!0)],64)):A("",!0)]}),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1}),t(B,{user:e.viewData,visible:e.detailsVisible,onClosed:e.onCloseDetails},null,8,["user","visible","onClosed"])]),_:1})],64)}const Sa=W(Ch,[["render",$h]]),Dh=[{path:"/",component:()=>lt(()=>import("./Admin-3be1af1f.js"),["assets/Admin-3be1af1f.js","assets/vendor-4a6eb15a.js"]),children:[{path:"/admin/users",component:Sa,name:"admin.users.index",meta:{requireAuth:!0,menuParent:"users",menuKey:"users",permission:"users_view"}},{path:"/admin/customers",component:Sa,name:"admin.customers.index",meta:{requireAuth:!0,menuParent:"parties",menuKey:"customers",permission:"customers_view"}},{path:"/admin/suppliers",component:Sa,name:"admin.suppliers.index",meta:{requireAuth:!0,menuParent:"parties",menuKey:"suppliers",permission:"suppliers_view"}}]}];const Ja=e=>{const o=e=="admin"?"currencies?fields=id,xid,name,symbol,position,code":"superadmin/currencies?fields=id,xid,name,symbol,position,code",c=e=="admin"?"currencies":"superadmin/currencies",{t:n}=ae(),v={name:"",symbol:"",position:"",code:""},h=[{title:n("currency.name"),dataIndex:"name"},{title:n("currency.symbol"),dataIndex:"symbol"},{title:n("currency.position"),dataIndex:"position"},{title:n("currency.code"),dataIndex:"code"},{title:n("common.action"),dataIndex:"action"}],m=[{key:"name",value:n("common.name")}];return{url:o,addEditUrl:c,initData:v,columns:h,filterableColumns:m}},Ah=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],emits:["addEditSuccess"],components:{PlusOutlined:le,LoadingOutlined:Oe,SaveOutlined:ve},setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n,rules:v}=be(),{appSetting:h}=X(),m=ke();return{loading:n,rules:v,onClose:()=>{v.value={},o("closed")},onSubmit:()=>{c({url:e.url,data:e.formData,successMessage:e.successMessage,success:p=>{h.value.currency&&h.value.currency.xid==p.xid&&m.dispatch("auth/updateApp"),o("addEditSuccess",p.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Th(e,o,c,n,v,h){const m=l("a-input"),d=l("a-form-item"),i=l("a-col"),p=l("a-row"),_=l("a-radio"),f=l("a-radio-group"),y=l("a-form"),b=l("SaveOutlined"),k=l("a-button"),C=l("a-modal");return r(),w(C,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(k,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(b)]),default:a(()=>[u(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(k,{key:"back",onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(y,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("currency.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(m,{value:e.formData.name,"onUpdate:value":o[0]||(o[0]=D=>e.formData.name=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("currency.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("currency.symbol"),name:"symbol",help:e.rules.symbol?e.rules.symbol.message:null,validateStatus:e.rules.symbol?"error":null,class:"required"},{default:a(()=>[t(m,{value:e.formData.symbol,"onUpdate:value":o[1]||(o[1]=D=>e.formData.symbol=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("currency.symbol")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("currency.position"),name:"position",help:e.rules.position?e.rules.position.message:null,validateStatus:e.rules.position?"error":null},{default:a(()=>[t(f,{value:e.formData.position,"onUpdate:value":o[2]||(o[2]=D=>e.formData.position=D)},{default:a(()=>[t(_,{value:"front"},{default:a(()=>[u(s(e.$t("currency.front"))+" ("+s(e.$t("currency.front_position_example"))+") ",1)]),_:1}),t(_,{value:"behind"},{default:a(()=>[u(s(e.$t("currency.behind"))+" ("+s(e.$t("currency.behind_position_example"))+") ",1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("currency.code"),name:"code",help:e.rules.code?e.rules.code.message:null,validateStatus:e.rules.code?"error":null,class:"required"},{default:a(()=>[t(m,{value:e.formData.code,"onUpdate:value":o[3]||(o[3]=D=>e.formData.code=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("currency.code")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Qa=W(Ah,[["render",Th]]),Eh=Z({props:{panelType:{type:String,default:"admin"},btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"}},emits:["onAddSuccess"],components:{PlusOutlined:le,AddEdit:Qa},setup(e,{emit:o}){const{permsArray:c}=X(),{initData:n,addEditUrl:v}=Ja(e.panelType),h=T(!1),m=T("add"),d=T({...n});return{permsArray:c,visible:h,addEditType:m,addEditUrl:v,formData:d,addEditSuccess:()=>{h.value=!1,d.value={...n},o("onAddSuccess")},onClose:()=>{h.value=!1},showAdd:()=>{h.value=!0}}}}),Oh={key:0};function Ih(e,o,c,n,v,h){const m=l("a-menu-item"),d=l("PlusOutlined"),i=l("a-button"),p=l("a-tooltip"),_=l("AddEdit");return e.panelType=="admin"&&(e.permsArray.includes("currencies_create")||e.permsArray.includes("admin"))||e.panelType=="superadmin"?(r(),$("div",Oh,[e.customType=="menu"?(r(),w(m,{onClick:e.showAdd,key:"categories"},{icon:a(()=>[ie(e.$slots,"icon")]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick"])):(r(),$(I,{key:1},[e.tooltip?(r(),w(p,{key:0,placement:"topLeft",title:e.$t("currency.add"),"arrow-point-at-center":""},{default:a(()=>[t(i,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),w(i,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("currency.add"),successMessage:e.$t("currency.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const Ro=W(Eh,[["render",Ih]]),Ko=()=>{const e=Ue("langs?fields=id,xid,name,image,image_url,key,enabled"),o=Ue("langs"),{t:c}=ae(),n={name:"",key:"",image:void 0,image_url:void 0,enabled:!0},v=[{title:c("langs.name"),dataIndex:"name"},{title:c("langs.key"),dataIndex:"key"},{title:c("langs.enabled"),dataIndex:"enabled"},{title:c("common.action"),dataIndex:"action"}],h=[{key:"name",value:c("langs.name")}];return{url:e,addEditUrl:o,initData:n,columns:v,filterableColumns:h}},Ph=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:le,LoadingOutlined:Oe,SaveOutlined:ve,Upload:mt},setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n,rules:v}=be(),h=ke();return{loading:n,rules:v,onClose:()=>{v.value={},o("closed")},onSubmit:()=>{c({url:e.url,data:e.formData,successMessage:e.successMessage,success:i=>{o("addEditSuccess",i.xid),h.dispatch("auth/updateAllLangs")}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Uh(e,o,c,n,v,h){const m=l("a-input"),d=l("a-form-item"),i=l("a-col"),p=l("a-row"),_=l("Upload"),f=l("a-form"),y=l("SaveOutlined"),b=l("a-button"),k=l("a-modal");return r(),w(k,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(b,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(y)]),default:a(()=>[u(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(b,{key:"back",onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(f,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("langs.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(m,{value:e.formData.name,"onUpdate:value":o[0]||(o[0]=C=>e.formData.name=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("langs.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("langs.key"),name:"key",help:e.rules.key?e.rules.key.message:null,validateStatus:e.rules.key?"error":null,class:"required"},{default:a(()=>[t(m,{value:e.formData.key,"onUpdate:value":o[1]||(o[1]=C=>e.formData.key=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("langs.key")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,null,{default:a(()=>[t(i,{span:24},{default:a(()=>[t(d,{label:e.$t("langs.flag"),name:"image",help:e.rules.image?e.rules.image.message:null,validateStatus:e.rules.image?"error":null},{default:a(()=>[t(_,{formData:e.formData,folder:"langs",onOnFileUploaded:o[2]||(o[2]=C=>{e.formData.image=C.file,e.formData.image_url=C.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Vo=W(Ph,[["render",Uh]]),Fh=Z({props:{btnType:{default:"default"},tooltip:{default:!0},customType:{default:"button"},panelType:{default:"admin"}},emits:["onAddSuccess"],components:{PlusOutlined:le,AddEdit:Vo},setup(e,{emit:o}){const{permsArray:c}=X(),{initData:n,addEditUrl:v}=Ko(),h=T(!1),m=T("add"),d=T({...n});return{permsArray:c,visible:h,addEditType:m,addEditUrl:v,formData:d,addEditSuccess:()=>{h.value=!1,d.value={...n},o("onAddSuccess")},onClose:()=>{h.value=!1},showAdd:()=>{h.value=!0}}}}),Mh={key:0};function qh(e,o,c,n,v,h){const m=l("a-menu-item"),d=l("PlusOutlined"),i=l("a-button"),p=l("a-tooltip"),_=l("AddEdit");return e.permsArray.includes("translations_create")||e.permsArray.includes("admin")||e.panelType=="superadmin"?(r(),$("div",Mh,[e.customType=="menu"?(r(),w(m,{onClick:e.showAdd,key:"categories"},{icon:a(()=>[ie(e.$slots,"icon")]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick"])):(r(),$(I,{key:1},[e.tooltip?(r(),w(p,{key:0,placement:"topLeft",title:e.$t("langs.add"),"arrow-point-at-center":""},{default:a(()=>[t(i,{onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"])]),_:3},8,["title"])):(r(),w(i,{key:1,onClick:e.showAdd,class:"ml-5 no-border-radius",type:e.btnType},{icon:a(()=>[t(d)]),default:a(()=>[ie(e.$slots,"default")]),_:3},8,["onClick","type"]))],64)),t(_,{addEditType:e.addEditType,visible:e.visible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onClose,formData:e.formData,data:e.formData,pageTitle:e.$t("langs.add"),successMessage:e.$t("langs.created")},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"])])):A("",!0)}const Za=W(Fh,[["render",qh]]);const Rh=Z({components:{LaptopOutlined:Al,UserOutlined:Zt,TranslationOutlined:Tl,ShopOutlined:El,ShoppingCartOutlined:$t,SolutionOutlined:Ol,ScheduleOutlined:Il,DollarOutlined:Pl,AccountBookOutlined:Ul,AppstoreAddOutlined:Jn,ApartmentOutlined:Fl,FolderOpenOutlined:Ml,MailOutlined:xn,HistoryOutlined:Zn,FormOutlined:Xn,DatabaseOutlined:ql},setup(){const{appSetting:e,user:o,permsArray:c,appModules:n,appType:v}=X(),h=Ze();ke();const m=T([]);return ee(()=>{const d=typeof h.meta.menuKey=="function"?h.meta.menuKey(h):h.meta.menuKey;m.value=[d.replace("-","_")]}),ue(h,(d,i)=>{const p=typeof d.meta.menuKey=="function"?d.meta.menuKey(d):d.meta.menuKey;m.value=[p.replace("-","_")]}),{permsArray:c,selectedKeys:m,appType:v}}}),Kh={class:"setting-sidebar"};function Vh(e,o,c,n,v,h){const m=l("LaptopOutlined"),d=l("a-menu-item"),i=l("UserOutlined"),p=l("TranslationOutlined"),_=l("ShopOutlined"),f=l("SolutionOutlined"),y=l("ScheduleOutlined"),b=l("DollarOutlined"),k=l("AccountBookOutlined"),C=l("ApartmentOutlined"),D=l("FormOutlined"),S=l("AppstoreAddOutlined"),P=l("FolderOpenOutlined"),F=l("MailOutlined"),O=l("DatabaseOutlined"),E=l("HistoryOutlined"),U=l("a-menu"),K=l("perfect-scrollbar");return r(),$("div",Kh,[t(K,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:a(()=>[t(U,{selectedKeys:e.selectedKeys,"onUpdate:selectedKeys":o[17]||(o[17]=z=>e.selectedKeys=z)},{default:a(()=>[e.permsArray.includes("companies_edit")||e.permsArray.includes("admin")?(r(),w(d,{key:"company",onClick:o[0]||(o[0]=z=>e.$router.push({name:"admin.settings.company.index"}))},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("menu.company")),1)]),_:1})):A("",!0),t(d,{key:"profile",onClick:o[1]||(o[1]=z=>e.$router.push({name:"admin.settings.profile.index"}))},{icon:a(()=>[t(i)]),default:a(()=>[u(" "+s(e.$t("menu.profile")),1)]),_:1}),e.appType=="non-saas"&&(e.permsArray.includes("translations_view")||e.permsArray.includes("admin"))?(r(),w(d,{key:"translations",onClick:o[2]||(o[2]=z=>e.$router.push({name:"admin.settings.translations.index"}))},{icon:a(()=>[t(p)]),default:a(()=>[u(" "+s(e.$t("menu.translations")),1)]),_:1})):A("",!0),e.permsArray.includes("warehouses_view")||e.permsArray.includes("admin")?(r(),w(d,{key:"warehouses",onClick:o[3]||(o[3]=z=>e.$router.push({name:"admin.settings.warehouses.index"}))},{icon:a(()=>[t(_)]),default:a(()=>[u(" "+s(e.$t("menu.warehouses")),1)]),_:1})):A("",!0),e.permsArray.includes("roles_view")||e.permsArray.includes("admin")?(r(),w(d,{key:"roles",onClick:o[4]||(o[4]=z=>e.$router.push({name:"admin.settings.roles.index"}))},{icon:a(()=>[t(f)]),default:a(()=>[u(" "+s(e.$t("menu.roles")),1)]),_:1})):A("",!0),e.permsArray.includes("taxes_view")||e.permsArray.includes("admin")?(r(),w(d,{key:"taxes",onClick:o[5]||(o[5]=z=>e.$router.push({name:"admin.settings.taxes.index"}))},{icon:a(()=>[t(y)]),default:a(()=>[u(" "+s(e.$t("menu.taxes")),1)]),_:1})):A("",!0),e.permsArray.includes("currencies_view")||e.permsArray.includes("admin")?(r(),w(d,{key:"currencies",onClick:o[6]||(o[6]=z=>e.$router.push({name:"admin.settings.currencies.index"}))},{icon:a(()=>[t(b)]),default:a(()=>[u(" "+s(e.$t("menu.currencies")),1)]),_:1})):A("",!0),e.permsArray.includes("payment_modes_view")||e.permsArray.includes("admin")?(r(),w(d,{key:"payment_modes",onClick:o[7]||(o[7]=z=>e.$router.push({name:"admin.settings.payment_modes.index"}))},{icon:a(()=>[t(k)]),default:a(()=>[u(" "+s(e.$t("menu.payment_modes")),1)]),_:1})):A("",!0),e.permsArray.includes("payment_providers_view")||e.permsArray.includes("admin")?(r(),w(d,{key:"payment_providers",onClick:o[8]||(o[8]=z=>e.$router.push({name:"admin.settings.payment_providers.index"}))},{icon:a(()=>[t(k)]),default:a(()=>[u(" "+s(e.$t("menu.payment_providers")),1)]),_:1})):A("",!0),e.permsArray.includes("units_view")||e.permsArray.includes("admin")?(r(),w(d,{key:"units",onClick:o[9]||(o[9]=z=>e.$router.push({name:"admin.settings.units.index"}))},{icon:a(()=>[t(C)]),default:a(()=>[u(" "+s(e.$t("menu.units")),1)]),_:1})):A("",!0),e.permsArray.includes("custom_fields_view")||e.permsArray.includes("admin")?(r(),w(d,{key:"custom_fields",onClick:o[10]||(o[10]=z=>e.$router.push({name:"admin.settings.custom_fields.index"}))},{icon:a(()=>[t(D)]),default:a(()=>[u(" "+s(e.$t("menu.custom_fields")),1)]),_:1})):A("",!0),e.appType=="non-saas"?(r(),$(I,{key:10},[e.permsArray.includes("admin")?(r(),w(d,{key:"modules",onClick:o[11]||(o[11]=z=>e.$router.push({name:"admin.settings.modules.index"}))},{icon:a(()=>[t(S)]),default:a(()=>[u(" "+s(e.$t("menu.modules")),1)]),_:1})):A("",!0),e.permsArray.includes("storage_edit")||e.permsArray.includes("admin")?(r(),w(d,{key:"storage_settings",onClick:o[12]||(o[12]=z=>e.$router.push({name:"admin.settings.storage.index"}))},{icon:a(()=>[t(P)]),default:a(()=>[u(" "+s(e.$t("menu.storage_settings")),1)]),_:1})):A("",!0),e.permsArray.includes("email_edit")||e.permsArray.includes("admin")?(r(),w(d,{key:"email_settings",onClick:o[13]||(o[13]=z=>e.$router.push({name:"admin.settings.email.index"}))},{icon:a(()=>[t(F)]),default:a(()=>[u(" "+s(e.$t("menu.email_settings")),1)]),_:1})):A("",!0),e.permsArray.includes("database_backup")||e.permsArray.includes("admin")?(r(),w(d,{key:"database_backup",onClick:o[14]||(o[14]=z=>e.$router.push({name:"admin.settings.database_backup.index"}))},{icon:a(()=>[t(O)]),default:a(()=>[u(" "+s(e.$t("menu.database_backup")),1)]),_:1})):A("",!0),e.permsArray.includes("update_app")||e.permsArray.includes("admin")?(r(),w(d,{key:"update_app",onClick:o[15]||(o[15]=z=>e.$router.push({name:"admin.settings.update_app.index"}))},{icon:a(()=>[t(E)]),default:a(()=>[u(" "+s(e.$t("menu.update_app")),1)]),_:1})):A("",!0)],64)):A("",!0),e.appType=="saas"&&(e.permsArray.includes("email_edit")||e.permsArray.includes("admin"))?(r(),w(d,{key:"email_settings",onClick:o[16]||(o[16]=z=>e.$router.push({name:"admin.settings.email.index"}))},{icon:a(()=>[t(F)]),default:a(()=>[u(" "+s(e.$t("menu.email_settings")),1)]),_:1})):A("",!0)]),_:1},8,["selectedKeys"])]),_:1})])}const je=W(Rh,[["render",Vh]]),zh=Z({emits:["success"],components:{PlusOutlined:le,LoadingOutlined:Oe,SaveOutlined:ve,SettingOutlined:St},setup(e,{emit:o}){const{appSetting:c,addMenus:n}=X(),{addEditRequestAdmin:v,loading:h,rules:m}=be(),{t:d}=ae(),i=T(c.value.shortcut_menus),p=T(n.value),_=T(!1),f=ke(),y=()=>{const C={position:i.value,shortcut_menus_settings:p.value};v({url:"companies/update-create-menu",data:C,successMessage:d("company.menu_setting_updated"),success:D=>{o("success",i.value),f.dispatch("auth/updateApp"),_.value=!1}})},b=()=>{m.value={},_.value=!0},k=()=>{m.value={},_.value=!1};return ue(c,(C,D)=>{i.value=C.shortcut_menus}),{visible:_,loading:h,rules:m,onClose:k,openDrawer:b,onSubmit:y,createMenuPosition:i,createMenus:p,drawerWidth:window.innerWidth<=991?"90%":"35%"}}});function Lh(e,o,c,n,v,h){const m=l("SettingOutlined"),d=l("a-button"),i=l("a-select-option"),p=l("a-select"),_=l("a-form-item"),f=l("a-col"),y=l("a-row"),b=l("a-checkbox"),k=l("a-checkbox-group"),C=l("a-form"),D=l("SaveOutlined"),S=l("a-drawer");return r(),$(I,null,[t(d,{type:"primary",onClick:e.openDrawer},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("company.shortcut_menu_setting")),1)]),_:1},8,["onClick"]),t(S,{title:e.$t("company.shortcut_menu_setting"),width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[t(d,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"},loading:e.loading},{icon:a(()=>[t(D)]),default:a(()=>[u(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),t(d,{onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(C,{layout:"vertical"},{default:a(()=>[t(y,{gutter:16},{default:a(()=>[t(f,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(_,{label:e.$t("company.shortcut_menu_Placement"),name:"shortcut_menus",help:e.rules.shortcut_menus?e.rules.shortcut_menus.message:null,validateStatus:e.rules.shortcut_menus?"error":null,class:"required"},{default:a(()=>[t(p,{value:e.createMenuPosition,"onUpdate:value":o[0]||(o[0]=P=>e.createMenuPosition=P),placeholder:e.$t("common.select_default_text",[e.$t("company.shortcut_menu_Placement")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[t(i,{key:"top_bottom",value:"top_bottom"},{default:a(()=>[u(s(e.$t("company.top_and_bottom")),1)]),_:1}),t(i,{key:"top",value:"top"},{default:a(()=>[u(s(e.$t("company.top_header")),1)]),_:1}),t(i,{key:"bottom",value:"bottom"},{default:a(()=>[u(s(e.$t("company.bottom_corner")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(y,{gutter:16},{default:a(()=>[t(f,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(_,{label:e.$t("company.shortcut_menu_setting"),name:"shortcut_menus",help:e.rules.createMenus?e.rules.shortcut_menus.message:null,validateStatus:e.rules.shortcut_menus?"error":null},{default:a(()=>[t(k,{value:e.createMenus,"onUpdate:value":o[1]||(o[1]=P=>e.createMenus=P),style:{width:"100%"}},{default:a(()=>[t(y,{gutter:[16,10]},{default:a(()=>[t(f,{span:24},{default:a(()=>[t(b,{value:"staff_member"},{default:a(()=>[u(s(e.$t("topbar_add_button.add_staff_member")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"customer"},{default:a(()=>[u(s(e.$t("topbar_add_button.add_customer")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"supplier"},{default:a(()=>[u(s(e.$t("topbar_add_button.add_supplier")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"brand"},{default:a(()=>[u(s(e.$t("topbar_add_button.add_brand")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"category"},{default:a(()=>[u(s(e.$t("topbar_add_button.add_category")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"product"},{default:a(()=>[u(s(e.$t("topbar_add_button.add_product")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"sales"},{default:a(()=>[u(s(e.$t("topbar_add_button.add_sales")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"purchase"},{default:a(()=>[u(s(e.$t("topbar_add_button.add_purchase")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"expense_category"},{default:a(()=>[u(s(e.$t("topbar_add_button.add_expense_cateogory")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"expense"},{default:a(()=>[u(s(e.$t("topbar_add_button.add_expense")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"currency"},{default:a(()=>[u(s(e.$t("topbar_add_button.add_currency")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"warehouse"},{default:a(()=>[u(s(e.$t("topbar_add_button.add_warehouse")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"unit"},{default:a(()=>[u(s(e.$t("topbar_add_button.add_unit")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"language"},{default:a(()=>[u(s(e.$t("topbar_add_button.add_language")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"role"},{default:a(()=>[u(s(e.$t("topbar_add_button.add_role")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"tax"},{default:a(()=>[u(s(e.$t("topbar_add_button.add_tax")),1)]),_:1})]),_:1}),t(f,{span:24},{default:a(()=>[t(b,{value:"payment_mode"},{default:a(()=>[u(s(e.$t("topbar_add_button.add_payment_mode")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])],64)}const zo=W(zh,[["render",Lh]]),Bh={components:{EyeOutlined:tt,PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,ExclamationCircleOutlined:Ae,SaveOutlined:ve,SettingOutlined:St,ColorPicker:eo,Upload:mt,CurrencyAddButton:Ro,WarehouseAddButton:Bt,SettingSidebar:je,AdminPageHeader:ge,CreateMenuSetting:zo,LanguageAddButton:Za},setup(){const{addEditRequestAdmin:e,loading:o,rules:c}=be(),{permsArray:n,appSetting:v,dayjsObject:h,appType:m}=X(),{t:d}=ae(),i=ke(),p=T({}),_=T([]),f=T([]),y=T([]),b=T([]),k=T([]),C=T([]),D=v.value,S="currencies?limit=10000",P="warehouses?limit=10000",F="timezones",O="all-langs",E=T("linear-gradient(0deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%)"),U=window.config.theme_mode;ee(()=>{const j=axiosAdmin.get(P),Y=axiosAdmin.get(S),x=axiosAdmin.get(F),B=axiosAdmin.get(O);Promise.all([j,Y,x,B]).then(([N,H,J,se])=>{f.value=N.data,_.value=H.data,y.value=J.data.timezones,b.value=J.data.date_formates,k.value=J.data.time_formates,C.value=se.data.langs,K()})});const K=()=>{p.value={name:D.name,short_name:D.short_name,email:D.email,phone:D.phone,address:D.address,left_sidebar_theme:D.left_sidebar_theme,dark_logo:D.dark_logo,dark_logo_url:D.dark_logo_url,light_logo:D.light_logo,light_logo_url:D.light_logo_url,small_dark_logo:D.small_dark_logo,small_light_logo:D.small_light_logo,small_dark_logo_url:D.small_dark_logo_url,small_light_logo_url:D.small_light_logo_url,login_image:D.login_image,login_image_url:D.login_image_url,shortcut_menus:D.shortcut_menus,rtl:D.rtl,currency_id:D.x_currency_id,lang_id:D.x_lang_id,warehouse_id:D.x_warehouse_id,primary_color:D.primary_color,timezone:D.timezone,date_format:D.date_format,time_format:D.time_format,auto_detect_timezone:D.auto_detect_timezone,app_debug:D.app_debug,update_app_notification:D.update_app_notification,_method:"PUT"}};return{appType:m,permsArray:n,formData:p,loading:o,rules:c,warehouses:f,currencies:_,allLangs:C,onSubmit:()=>{e({url:`companies/${D.xid}`,data:p.value,successMessage:d("company.updated"),success:j=>{i.dispatch("auth/updateApp")}})},currencyAdded:()=>{axiosAdmin.get(S).then(j=>{_.value=j.data})},warehouseAdded:()=>{axiosAdmin.get(P).then(j=>{f.value=j.data})},gradientColor:E,timezones:y,dateFormats:b,timeFormats:k,dayjsObject:h,appThemeMode:U,addMenuSettingUpdated:j=>{p.value.shortcut_menus=j},languageAdded:()=>{axiosAdmin.get(O).then(j=>{C.value=j.data.langs})}}}},Wh={style:{display:"flex"}},jh={style:{display:"flex"}},Hh={style:{display:"flex"}};function Nh(e,o,c,n,v,h){const m=l("SaveOutlined"),d=l("a-button"),i=l("CreateMenuSetting"),p=l("a-space"),_=l("a-page-header"),f=l("router-link"),y=l("a-breadcrumb-item"),b=l("a-breadcrumb"),k=l("AdminPageHeader"),C=l("SettingSidebar"),D=l("a-col"),S=l("a-input"),P=l("a-form-item"),F=l("a-row"),O=l("a-textarea"),E=l("a-select-option"),U=l("a-select"),K=l("color-picker"),z=l("Upload"),M=l("CurrencyAddButton"),R=l("WarehouseAddButton"),q=l("LanguageAddButton"),L=l("a-switch"),j=l("a-form"),Y=l("a-card"),x=l("admin-page-table-content");return r(),$(I,null,[t(k,null,{header:a(()=>[t(_,{title:e.$t("menu.company"),class:"p-0"},Qe({_:2},[n.permsArray.includes("companies_edit")||n.permsArray.includes("admin")?{name:"extra",fn:a(()=>[t(p,null,{default:a(()=>[t(d,{type:"primary",onClick:n.onSubmit},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick"]),t(i,{onSuccess:n.addMenuSettingUpdated},null,8,["onSuccess"])]),_:1})]),key:"0"}:void 0]),1032,["title"])]),breadcrumb:a(()=>[t(b,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(y,null,{default:a(()=>[t(f,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(y,null,{default:a(()=>[u(s(e.$t("menu.settings")),1)]),_:1}),t(y,null,{default:a(()=>[u(s(e.$t("menu.company")),1)]),_:1})]),_:1})]),_:1}),t(F,null,{default:a(()=>[t(D,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(C)]),_:1}),t(D,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(x,null,{default:a(()=>[t(Y,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[t(j,{layout:"vertical"},{default:a(()=>[t(F,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(P,{label:e.$t("company.name"),name:"name",help:n.rules.name?n.rules.name.message:null,validateStatus:n.rules.name?"error":null,class:"required"},{default:a(()=>[t(S,{value:n.formData.name,"onUpdate:value":o[0]||(o[0]=B=>n.formData.name=B),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(D,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(P,{label:e.$t("company.short_name"),name:"short_name",help:n.rules.short_name?n.rules.short_name.message:null,validateStatus:n.rules.short_name?"error":null,class:"required"},{default:a(()=>[t(S,{value:n.formData.short_name,"onUpdate:value":o[1]||(o[1]=B=>n.formData.short_name=B),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.short_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(F,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(P,{label:e.$t("company.email"),name:"email",help:n.rules.email?n.rules.email.message:null,validateStatus:n.rules.email?"error":null,class:"required"},{default:a(()=>[t(S,{value:n.formData.email,"onUpdate:value":o[2]||(o[2]=B=>n.formData.email=B),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(D,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(P,{label:e.$t("company.phone"),name:"phone",help:n.rules.phone?n.rules.phone.message:null,validateStatus:n.rules.phone?"error":null,class:"required"},{default:a(()=>[t(S,{value:n.formData.phone,"onUpdate:value":o[3]||(o[3]=B=>n.formData.phone=B),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(F,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(P,{label:e.$t("company.address"),name:"address",help:n.rules.address?n.rules.address.message:null,validateStatus:n.rules.address?"error":null},{default:a(()=>[t(O,{value:n.formData.address,"onUpdate:value":o[4]||(o[4]=B=>n.formData.address=B),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.address")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(F,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(P,{label:e.$t("company.left_sidebar_theme"),name:"left_sidebar_theme",help:n.rules.left_sidebar_theme?n.rules.left_sidebar_theme.message:null,validateStatus:n.rules.left_sidebar_theme?"error":null},{default:a(()=>[t(U,{value:n.formData.left_sidebar_theme,"onUpdate:value":o[5]||(o[5]=B=>n.formData.left_sidebar_theme=B),placeholder:e.$t("common.select_default_text",[e.$t("company.left_sidebar_theme")])},{default:a(()=>[t(E,{key:"dark",value:"dark"},{default:a(()=>[u(s(e.$t("company.dark")),1)]),_:1}),n.appThemeMode!="dark"?(r(),w(E,{key:"light",value:"light"},{default:a(()=>[u(s(e.$t("company.light")),1)]),_:1})):A("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(D,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(P,{label:e.$t("company.primary_color"),name:"primary_color",help:n.rules.primary_color?n.rules.primary_color.message:null,validateStatus:n.rules.primary_color?"error":null},{default:a(()=>[t(K,{pureColor:n.formData.primary_color,"onUpdate:pureColor":o[6]||(o[6]=B=>n.formData.primary_color=B),format:"hex",useType:"pure",gradientColor:n.gradientColor,"onUpdate:gradientColor":o[7]||(o[7]=B=>n.gradientColor=B)},null,8,["pureColor","gradientColor"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(F,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(P,{label:e.$t("company.dark_logo"),name:"dark_logo",help:n.rules.dark_logo?n.rules.dark_logo.message:null,validateStatus:n.rules.dark_logo?"error":null},{default:a(()=>[t(z,{formData:n.formData,folder:"company",imageField:"dark_logo",onOnFileUploaded:o[8]||(o[8]=B=>{n.formData.dark_logo=B.file,n.formData.dark_logo_url=B.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(D,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(P,{label:e.$t("company.light_logo"),name:"light_logo",help:n.rules.light_logo?n.rules.light_logo.message:null,validateStatus:n.rules.light_logo?"error":null},{default:a(()=>[t(z,{formData:n.formData,folder:"company",imageField:"light_logo",onOnFileUploaded:o[9]||(o[9]=B=>{n.formData.light_logo=B.file,n.formData.light_logo_url=B.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(D,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(P,{label:e.$t("company.small_dark_logo"),name:"small_dark_logo",help:n.rules.small_dark_logo?n.rules.small_dark_logo.message:null,validateStatus:n.rules.small_dark_logo?"error":null},{default:a(()=>[t(z,{formData:n.formData,folder:"company",imageField:"small_dark_logo",onOnFileUploaded:o[10]||(o[10]=B=>{n.formData.small_dark_logo=B.file,n.formData.small_dark_logo_url=B.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(D,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(P,{label:e.$t("company.small_light_logo"),name:"small_light_logo",help:n.rules.small_light_logo?n.rules.small_light_logo.message:null,validateStatus:n.rules.small_light_logo?"error":null},{default:a(()=>[t(z,{formData:n.formData,folder:"company",imageField:"small_light_logo",onOnFileUploaded:o[11]||(o[11]=B=>{n.formData.small_light_logo=B.file,n.formData.small_light_logo_url=B.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(F,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(P,{label:e.$t("company.currency"),name:"currency_id",help:n.rules.currency_id?n.rules.currency_id.message:null,validateStatus:n.rules.currency_id?"error":null,class:"required"},{default:a(()=>[g("span",Wh,[t(U,{value:n.formData.currency_id,"onUpdate:value":o[12]||(o[12]=B=>n.formData.currency_id=B),placeholder:e.$t("common.select_default_text",[e.$t("company.currency")]),optionFilterProp:"label","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.currencies,B=>(r(),w(E,{key:B.xid,value:B.xid},{default:a(()=>[u(s(`${B.name} (${B.symbol})`),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),t(M,{onOnAddSuccess:n.currencyAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(D,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(P,{label:e.$t("warehouse.warehouse"),name:"warehouse_id",help:n.rules.warehouse_id?n.rules.warehouse_id.message:null,validateStatus:n.rules.warehouse_id?"error":null,class:"required"},{default:a(()=>[g("span",jh,[t(U,{value:n.formData.warehouse_id,"onUpdate:value":o[13]||(o[13]=B=>n.formData.warehouse_id=B),placeholder:e.$t("common.select_default_text",[e.$t("warehouse.warehouse")]),optionFilterProp:"label","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.warehouses,B=>(r(),w(E,{key:B.xid,value:B.xid,label:B.name},{default:a(()=>[u(s(B.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"]),t(R,{onOnAddSuccess:n.warehouseAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(F,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(P,{label:e.$t("company.layout"),name:"rtl",help:n.rules.rtl?n.rules.rtl.message:null,validateStatus:n.rules.rtl?"error":null,class:"required"},{default:a(()=>[t(U,{value:n.formData.rtl,"onUpdate:value":o[14]||(o[14]=B=>n.formData.rtl=B),placeholder:e.$t("common.select_default_text",[e.$t("company.layout")]),optionFilterProp:"label","show-search":""},{default:a(()=>[t(E,{key:"rtl",value:1},{default:a(()=>[u(s(e.$t("company.rtl")),1)]),_:1}),t(E,{key:"ltr",value:0},{default:a(()=>[u(s(e.$t("company.ltr")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(D,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(P,{label:e.$t("company.shortcut_menu_Placement"),name:"shortcut_menus",help:n.rules.shortcut_menus?n.rules.shortcut_menus.message:null,validateStatus:n.rules.shortcut_menus?"error":null,class:"required"},{default:a(()=>[t(U,{value:n.formData.shortcut_menus,"onUpdate:value":o[15]||(o[15]=B=>n.formData.shortcut_menus=B),placeholder:e.$t("common.select_default_text",[e.$t("company.shortcut_menu_Placement")]),optionFilterProp:"label","show-search":""},{default:a(()=>[t(E,{key:"top_bottom",value:"top_bottom"},{default:a(()=>[u(s(e.$t("company.top_and_bottom")),1)]),_:1}),t(E,{key:"top",value:"top"},{default:a(()=>[u(s(e.$t("company.top_header")),1)]),_:1}),t(E,{key:"bottom",value:"bottom"},{default:a(()=>[u(s(e.$t("company.bottom_corner")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(D,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(P,{label:e.$t("company.language"),name:"lang_id",help:n.rules.lang_id?n.rules.lang_id.message:null,validateStatus:n.rules.lang_id?"error":null,class:"required"},{default:a(()=>[g("span",Hh,[t(U,{value:n.formData.lang_id,"onUpdate:value":o[16]||(o[16]=B=>n.formData.lang_id=B),placeholder:e.$t("common.select_default_text",[e.$t("company.language")]),optionFilterProp:"label","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.allLangs,B=>(r(),w(E,{key:B.xid,value:B.xid},{default:a(()=>[u(s(B.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),t(q,{onOnAddSuccess:n.languageAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(F,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:4,lg:4},{default:a(()=>[t(P,{label:e.$t("company.auto_detect_timezone"),name:"auto_detect_timezone",help:n.rules.auto_detect_timezone?n.rules.auto_detect_timezone.message:null,validateStatus:n.rules.auto_detect_timezone?"error":null},{default:a(()=>[t(L,{checked:n.formData.auto_detect_timezone,"onUpdate:checked":o[17]||(o[17]=B=>n.formData.auto_detect_timezone=B),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(D,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(P,{label:e.$t("company.default_timezone"),name:"timezone",help:n.rules.timezone?n.rules.timezone.message:null,validateStatus:n.rules.timezone?"error":null,class:"required"},{default:a(()=>[t(U,{value:n.formData.timezone,"onUpdate:value":o[18]||(o[18]=B=>n.formData.timezone=B),placeholder:e.$t("common.select_default_text",[e.$t("company.default_timezone")]),optionFilterProp:"value","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.timezones,(B,N)=>(r(),w(E,{key:N,value:B},{default:a(()=>[u(s(B),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),n.appType=="non-saas"?(r(),w(D,{key:0,xs:24,sm:24,md:4,lg:4},{default:a(()=>[t(P,{label:e.$t("company.app_debug"),name:"app_debug",help:n.rules.app_debug?n.rules.app_debug.message:null,validateStatus:n.rules.app_debug?"error":null},{default:a(()=>[t(L,{checked:n.formData.app_debug,"onUpdate:checked":o[19]||(o[19]=B=>n.formData.app_debug=B),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})):A("",!0),n.appType=="non-saas"?(r(),w(D,{key:1,xs:24,sm:24,md:4,lg:4},{default:a(()=>[t(P,{label:e.$t("company.update_app_notification"),name:"update_app_notification",help:n.rules.update_app_notification?n.rules.update_app_notification.message:null,validateStatus:n.rules.update_app_notification?"error":null},{default:a(()=>[t(L,{checked:n.formData.update_app_notification,"onUpdate:checked":o[20]||(o[20]=B=>n.formData.update_app_notification=B),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})):A("",!0)]),_:1}),t(F,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(P,{label:e.$t("company.date_format"),name:"date_format",help:n.rules.date_format?n.rules.date_format.message:null,validateStatus:n.rules.date_format?"error":null,class:"required"},{default:a(()=>[t(U,{value:n.formData.date_format,"onUpdate:value":o[21]||(o[21]=B=>n.formData.date_format=B),placeholder:e.$t("common.select_default_text",[e.$t("company.date_format")]),optionFilterProp:"value","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.dateFormats,(B,N)=>(r(),w(E,{key:N,value:B},{default:a(()=>[u(s(`(${N}) => `+n.dayjsObject().format(B)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(D,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(P,{label:e.$t("company.time_format"),name:"time_format",help:n.rules.time_format?n.rules.time_format.message:null,validateStatus:n.rules.time_format?"error":null,class:"required"},{default:a(()=>[t(U,{value:n.formData.time_format,"onUpdate:value":o[22]||(o[22]=B=>n.formData.time_format=B),placeholder:e.$t("common.select_default_text",[e.$t("company.time_format")]),optionFilterProp:"value","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.timeFormats,(B,N)=>(r(),w(E,{key:N,value:N},{default:a(()=>[u(s(`(${B}) => `+n.dayjsObject().format(N)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),n.appType=="non-saas"?(r(),w(F,{key:0,gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(P,{label:e.$t("company.login_image"),name:"login_image",help:n.rules.login_image?n.rules.login_image.message:null,validateStatus:n.rules.login_image?"error":null},{default:a(()=>[t(z,{formData:n.formData,folder:"company",imageField:"login_image",onOnFileUploaded:o[23]||(o[23]=B=>{n.formData.login_image=B.file,n.formData.login_image_url=B.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),t(F,{gutter:16},{default:a(()=>[t(D,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(P,null,{default:a(()=>[t(d,{type:"primary",onClick:n.onSubmit,loading:n.loading},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Yh=W(Bh,[["render",Nh]]),Gh={components:{EyeOutlined:tt,PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,ExclamationCircleOutlined:Ae,SaveOutlined:ve,Upload:mt,SettingSidebar:je,AdminPageHeader:ge},setup(){const{addEditRequestAdmin:e,loading:o,rules:c}=be(),{t:n}=ae(),v=ke(),h=T({}),m=T({}),d=v.state.auth.user;return ee(()=>{h.value={name:d.name,email:d.email,password:"",phone:d.phone,profile_image:d.profile_image,profile_image_url:d.profile_image_url}}),{loading:o,rules:c,formData:h,currencies:m,onSubmit:()=>{e({url:"profile",data:h.value,successMessage:n("user.profile_updated"),success:p=>{v.commit("auth/updateUser",p.user)}})}}}},Xh={class:"small-text-message"};function Jh(e,o,c,n,v,h){const m=l("SaveOutlined"),d=l("a-button"),i=l("a-page-header"),p=l("router-link"),_=l("a-breadcrumb-item"),f=l("a-breadcrumb"),y=l("AdminPageHeader"),b=l("SettingSidebar"),k=l("a-col"),C=l("a-input"),D=l("a-form-item"),S=l("a-row"),P=l("Upload"),F=l("a-textarea"),O=l("a-form"),E=l("a-card"),U=l("admin-page-table-content");return r(),$(I,null,[t(y,null,{header:a(()=>[t(i,{title:e.$t("menu.profile"),class:"p-0"},{extra:a(()=>[t(d,{type:"primary",onClick:n.onSubmit},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(f,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(_,null,{default:a(()=>[t(p,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(_,null,{default:a(()=>[u(s(e.$t("menu.settings")),1)]),_:1}),t(_,null,{default:a(()=>[u(s(e.$t("menu.profile")),1)]),_:1})]),_:1})]),_:1}),t(S,null,{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(b)]),_:1}),t(k,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(U,null,{default:a(()=>[t(E,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[t(O,{layout:"vertical"},{default:a(()=>[t(S,{gutter:16},{default:a(()=>[t(k,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(D,{label:e.$t("user.name"),name:"name",help:n.rules.name?n.rules.name.message:null,validateStatus:n.rules.name?"error":null,class:"required"},{default:a(()=>[t(C,{value:n.formData.name,"onUpdate:value":o[0]||(o[0]=K=>n.formData.name=K),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(k,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(D,{label:e.$t("user.email"),name:"email",help:n.rules.email?n.rules.email.message:null,validateStatus:n.rules.email?"error":null,class:"required"},{default:a(()=>[t(C,{value:n.formData.email,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email")]),disabled:""},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(S,{gutter:16},{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(D,{label:e.$t("user.password"),name:"password",help:n.rules.password?n.rules.password.message:null,validateStatus:n.rules.password?"error":null},{default:a(()=>[t(C,{value:n.formData.password,"onUpdate:value":o[1]||(o[1]=K=>n.formData.password=K),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.password")]),type:"password",autocomplete:"off"},null,8,["value","placeholder"]),g("small",Xh,s(e.$t("user.password_blank")),1)]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(S,{gutter:16},{default:a(()=>[t(k,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(D,{label:e.$t("user.phone"),name:"phone",help:n.rules.phone?n.rules.phone.message:null,validateStatus:n.rules.phone?"error":null},{default:a(()=>[t(C,{value:n.formData.phone,"onUpdate:value":o[2]||(o[2]=K=>n.formData.phone=K),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(S,{gutter:16},{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(D,{label:e.$t("user.profile_image"),name:"profile_image",help:n.rules.profile_image?n.rules.profile_image.message:null,validateStatus:n.rules.profile_image?"error":null},{default:a(()=>[t(P,{formData:n.formData,folder:"user",imageField:"profile_image",onOnFileUploaded:o[3]||(o[3]=K=>{n.formData.profile_image=K.file,n.formData.profile_image_url=K.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(S,{gutter:16},{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(D,{label:e.$t("user.address"),name:"address",help:n.rules.address?n.rules.address.message:null,validateStatus:n.rules.address?"error":null},{default:a(()=>[t(F,{value:n.formData.address,"onUpdate:value":o[4]||(o[4]=K=>n.formData.address=K),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.address")]),rows:4},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(S,{gutter:16},{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(D,null,{default:a(()=>[t(d,{type:"primary",onClick:n.onSubmit,loading:n.loading},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Qh=W(Gh,[["render",Jh]]),Zh={props:{panelType:{type:String,default:"admin"}},components:{EditOutlined:De,DeleteOutlined:fe,AddEdit:Vo,DownloadOutlined:Ot},setup(){const{addEditRequestAdmin:e,loading:o}=be(),{permsArray:c,downloadLangCsvUrl:n}=X(),{url:v,addEditUrl:h,initData:m,columns:d,filterableColumns:i}=Ko(),p=Ve(),{t:_}=ae();return ee(()=>{p.tableUrl.value={url:v},p.table.filterableColumns=i,p.fetch({page:1}),p.crudUrl.value=h,p.langKey.value="langs",p.initData.value={...m},p.formData.value={...m}}),{permsArray:c,downloadLangCsvUrl:n,columns:d,...p,filterableColumns:i,changeLangStatus:y=>{e({url:Ue(`langs/${y.xid}`),data:{name:y.name,key:y.key,enabled:y.enabled,_method:"PUT"},successMessage:_("langs.status_updated"),success:b=>{}})},loading:o}}},xh={class:"table-responsive"};function ev(e,o,c,n,v,h){const m=l("DeleteOutlined"),d=l("a-button"),i=l("a-space"),p=l("a-col"),_=l("a-select-option"),f=l("a-select"),y=l("a-input-search"),b=l("a-input-group"),k=l("a-row"),C=l("admin-page-filters"),D=l("AddEdit"),S=l("a-avatar"),P=l("a-list-item-meta"),F=l("a-list-item"),O=l("a-switch"),E=l("EditOutlined"),U=l("DownloadOutlined"),K=l("a-typography-link"),z=l("a-table"),M=l("admin-page-table-content");return r(),$(I,null,[t(C,null,{default:a(()=>[t(k,{gutter:[16,16]},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(i,null,{default:a(()=>[ie(e.$slots,"actionButtons"),e.table.selectedRowKeys.length>0&&(c.panelType||n.permsArray.includes("translations_edit")||n.permsArray.includes("admin"))?(r(),w(d,{key:0,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:3})]),_:3}),t(p,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(k,{gutter:[16,16],justify:"end"},{default:a(()=>[t(p,{xs:24,sm:24,md:16,lg:12,xl:10},{default:a(()=>[t(b,{compact:""},{default:a(()=>[t(f,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":o[0]||(o[0]=R=>e.table.searchColumn=R),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),$(I,null,G(n.filterableColumns,R=>(r(),w(_,{key:R.key},{default:a(()=>[u(s(R.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(y,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":o[1]||(o[1]=R=>e.table.searchString=R),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:3})]),_:3}),t(M,null,{default:a(()=>[t(D,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(k,null,{default:a(()=>[t(p,{span:24},{default:a(()=>[g("div",xh,[t(z,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:R=>({disabled:!((c.panelType=="admin"&&(n.permsArray.includes("translations_delete")||n.permsArray.includes("admin"))||c.panelType=="superadmin")&&R.key!="en"),name:R.xid})},columns:n.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading||n.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:R,record:q})=>[R.dataIndex==="name"?(r(),w(F,{key:0},{default:a(()=>[t(P,null,{title:a(()=>[u(s(q.name),1)]),avatar:a(()=>[t(S,{shape:"square",size:"small",src:q.image_url},null,8,["src"])]),_:2},1024)]),_:2},1024)):A("",!0),R.dataIndex==="enabled"?(r(),w(O,{key:1,checked:q.enabled,"onUpdate:checked":L=>q.enabled=L,checkedValue:1,unCheckedValue:0,onChange:L=>n.changeLangStatus(q),size:"small",disabled:c.panelType=="admin"&&!(n.permsArray.includes("translations_edit")||n.permsArray.includes("admin"))||q.key=="en"},null,8,["checked","onUpdate:checked","onChange","disabled"])):A("",!0),R.dataIndex==="action"?(r(),$(I,{key:2},[(c.panelType=="admin"&&(n.permsArray.includes("translations_edit")||n.permsArray.includes("admin"))||c.panelType=="superadmin")&&q.key!="en"?(r(),w(d,{key:0,type:"primary",onClick:L=>e.editItem(q),style:{"margin-left":"4px"}},{icon:a(()=>[t(E)]),_:1},8,["onClick"])):A("",!0),(c.panelType=="admin"&&(n.permsArray.includes("translations_delete")||n.permsArray.includes("admin"))||c.panelType=="superadmin")&&q.key!="en"?(r(),w(d,{key:1,type:"primary",onClick:L=>e.showDeleteConfirm(q.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(m)]),_:1},8,["onClick"])):A("",!0),t(K,{href:`${n.downloadLangCsvUrl}/${q.xid}`,target:"_blank"},{default:a(()=>[t(d,{type:"primary",style:{"margin-left":"4px"}},{icon:a(()=>[t(U)]),_:1})]),_:1},8,["href"])],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const tv=W(Zh,[["render",ev]]),av={components:{PlusOutlined:le,SettingSidebar:je,AdminPageHeader:ge,LanguageSettings:tv,ImportTranslation:Lt},setup(){const{permsArray:e,appType:o}=X(),c=T(null),n=window.config.translatioins_sample_file;return{permsArray:e,appType:o,langSettingRef:c,addItem:()=>{c.value.addItem()},sampleFileUrl:n}}};function nv(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("SettingSidebar"),y=l("a-col"),b=l("PlusOutlined"),k=l("a-button"),C=l("ImportTranslation"),D=l("a-space"),S=l("LanguageSettings"),P=l("a-row");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.languages"),onBack:o[0]||(o[0]=()=>e.$router.push({name:"admin.settings.translations.index"})),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.settings")),1)]),_:1}),t(i,null,{default:a(()=>[t(d,{to:{name:"admin.settings.translations.index"}},{default:a(()=>[u(s(e.$t("menu.translations")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.languages")),1)]),_:1})]),_:1})]),_:1}),t(P,null,{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(y,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(S,{ref:"langSettingRef"},{actionButtons:a(()=>[n.permsArray.includes("translations_create")||n.permsArray.includes("admin")?(r(),w(D,{key:0},{default:a(()=>[t(k,{type:"primary",onClick:n.addItem},{default:a(()=>[t(b),u(" "+s(e.$t("langs.add")),1)]),_:1},8,["onClick"]),n.appType=="non-saas"?(r(),w(C,{key:0,pageTitle:e.$t("translations.import_translations"),sampleFileUrl:n.sampleFileUrl,importUrl:"translations/import"},null,8,["pageTitle","sampleFileUrl"])):A("",!0)]),_:1})):A("",!0)]),_:1},512)]),_:1})]),_:1})],64)}const ov=W(av,[["render",nv]]),lv=Z({props:["x_warehouse_id","status"],emits:["success"],setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n}=be(),{t:v}=ae();return{changeStatus:m=>{const d={warehouse_id:e.x_warehouse_id,status:m?1:0};c({url:"warehouses/update-online-store-status",data:d,successMessage:v("warehouse.online_store_status_updated"),success:i=>{o("success"),store.dispatch("auth/updateAllWarehouses")}})},loading:n}}});function sv(e,o,c,n,v,h){const m=l("a-switch");return r(),w(m,{checked:e.status==1,size:"small",onClick:e.changeStatus,loading:e.loading},null,8,["checked","onClick","loading"])}const Lo=W(lv,[["render",sv]]),rv={components:{PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,AddEdit:Ya,SettingSidebar:je,AdminPageHeader:ge,OnlineStoreStatus:Lo},setup(){const{permsArray:e,appSetting:o}=X(),{url:c,addEditUrl:n,initData:v,columns:h,filterableColumns:m}=Na(),d=Ve();return ee(()=>{d.tableUrl.value={url:c},d.table.filterableColumns=m,d.fetch({page:1}),d.crudUrl.value=n,d.langKey.value="warehouse",d.initData.value={...v},d.formData.value={...v}}),{appSetting:o,permsArray:e,columns:h,...d,filterableColumns:m}}},dv={class:"table-responsive"};function iv(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("SettingSidebar"),y=l("a-col"),b=l("PlusOutlined"),k=l("a-button"),C=l("DeleteOutlined"),D=l("a-space"),S=l("a-select-option"),P=l("a-select"),F=l("a-input-search"),O=l("a-input-group"),E=l("a-row"),U=l("admin-page-filters"),K=l("AddEdit"),z=l("a-image"),M=l("OnlineStoreStatus"),R=l("EditOutlined"),q=l("a-table"),L=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.warehouses"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.settings")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.warehouses")),1)]),_:1})]),_:1})]),_:1}),t(E,null,{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(y,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(U,null,{default:a(()=>[t(E,{gutter:[16,16]},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(D,null,{default:a(()=>[n.permsArray.includes("warehouses_create")||n.permsArray.includes("admin")?(r(),w(k,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(b),u(" "+s(e.$t("warehouse.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("warehouses_delete")||n.permsArray.includes("admin"))?(r(),w(k,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(C)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(y,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(E,{gutter:[16,16],justify:"end"},{default:a(()=>[t(y,{xs:24,sm:24,md:16,lg:12,xl:10},{default:a(()=>[t(O,{compact:""},{default:a(()=>[t(P,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":o[0]||(o[0]=j=>e.table.searchColumn=j),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),$(I,null,G(n.filterableColumns,j=>(r(),w(S,{key:j.key},{default:a(()=>[u(s(j.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(F,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":o[1]||(o[1]=j=>e.table.searchString=j),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(L,null,{default:a(()=>[t(K,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(E,null,{default:a(()=>[t(y,{span:24},{default:a(()=>[g("div",dv,[t(q,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:j=>({disabled:!((n.permsArray.includes("warehouses_delete")||n.permsArray.includes("admin"))&&n.appSetting.x_warehouse_id!=j.xid),name:j.xid})},columns:n.columns,"row-key":j=>j.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:j,record:Y})=>[j.dataIndex==="logo"?(r(),w(z,{key:0,width:48,src:Y.logo_url},null,8,["src"])):A("",!0),j.dataIndex==="online_store_enabled"?(r(),$(I,{key:1},[t(M,{status:Y.online_store_enabled,x_warehouse_id:Y.xid,onSuccess:e.fetch},null,8,["status","x_warehouse_id","onSuccess"]),Y.online_store_enabled==1?(r(),$(I,{key:0},[o[2]||(o[2]=g("br",null,null,-1)),t(d,{to:{name:"front.homepage",params:{warehouse:Y.slug}},target:"_blank"},{default:a(()=>[t(k,{type:"link",class:"p-0 mt-5"},{default:a(()=>[u(s(e.$t("warehouse.view_online_store")),1)]),_:1})]),_:1},8,["to"])],64)):A("",!0)],64)):A("",!0),j.dataIndex==="action"?(r(),$(I,{key:2},[n.permsArray.includes("warehouses_edit")||n.permsArray.includes("admin")?(r(),w(k,{key:0,type:"primary",onClick:x=>e.editItem(Y),style:{"margin-left":"4px"}},{icon:a(()=>[t(R)]),_:1},8,["onClick"])):A("",!0),(n.permsArray.includes("warehouses_delete")||n.permsArray.includes("admin"))&&n.appSetting.x_warehouse_id!=Y.xid?(r(),w(k,{key:1,type:"primary",onClick:x=>e.showDeleteConfirm(Y.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(C)]),_:1},8,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const uv=W(rv,[["render",iv]]);const mv={components:{PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,AddEdit:Oo,SettingSidebar:je,AdminPageHeader:ge},setup(){const{permsArray:e}=X(),{url:o,addEditUrl:c,initData:n,columns:v,filterableColumns:h,preFetchData:m,getPreFetchData:d}=Eo(),i=Ve();return ee(()=>{d(),i.tableUrl.value={url:o,filters:""},i.table.filterableColumns=h,i.fetch({page:1}),i.crudUrl.value=c,i.langKey.value="role",i.initData.value={...n},i.formData.value={...n}}),{permsArray:e,columns:v,...i,filterableColumns:h,preFetchData:m}}},cv={class:"table-responsive"};function pv(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("SettingSidebar"),y=l("a-col"),b=l("PlusOutlined"),k=l("a-button"),C=l("DeleteOutlined"),D=l("a-space"),S=l("a-row"),P=l("admin-page-filters"),F=l("AddEdit"),O=l("EditOutlined"),E=l("a-table"),U=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.roles"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.settings")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.roles")),1)]),_:1})]),_:1})]),_:1}),t(S,null,{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(y,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(P,null,{default:a(()=>[t(S,{gutter:[16,16]},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(D,null,{default:a(()=>[n.permsArray.includes("roles_create")||n.permsArray.includes("admin")?(r(),w(k,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(b),u(" "+s(e.$t("role.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("roles_delete")||n.permsArray.includes("admin"))?(r(),w(k,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(C)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t(U,null,{default:a(()=>[t(F,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(S,null,{default:a(()=>[t(y,{span:24},{default:a(()=>[g("div",cv,[t(E,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:K=>({disabled:!((n.permsArray.includes("roles_delete")||n.permsArray.includes("admin"))&&K.name!="admin"),name:K.xid})},columns:n.columns,"row-key":K=>K.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:K,record:z})=>[K.dataIndex==="action"?(r(),$(I,{key:0},[(n.permsArray.includes("roles_edit")||n.permsArray.includes("admin"))&&z.name!="admin"?(r(),w(k,{key:0,type:"primary",onClick:M=>e.editItem(z),style:{"margin-left":"4px"}},{icon:a(()=>[t(O)]),_:1},8,["onClick"])):A("",!0),(n.permsArray.includes("roles_delete")||n.permsArray.includes("admin"))&&z.name!="admin"?(r(),w(k,{key:1,type:"primary",onClick:M=>e.showDeleteConfirm(z.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(C)]),_:1},8,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const _v=W(mv,[["render",pv]]),fv={components:{PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,AddEdit:So,SettingSidebar:je,AdminPageHeader:ge,ExclamationCircleOutlined:Ae},setup(){const{permsArray:e}=X(),{url:o,addEditUrl:c,initData:n,columns:v,filterableColumns:h,hashableColumns:m}=Co(),d=Ve();ae(),ee(()=>{d.crudUrl.value=c,d.langKey.value="tax",d.initData.value={...n},d.formData.value={...n},d.hashableColumns.value=[...m],d.table.filterableColumns=h,i()});const i=()=>{d.tableUrl.value={url:o},d.fetch({page:1})};return{permsArray:e,columns:v,...d,filterableColumns:h}}},gv={class:"table-responsive"},yv={key:0},hv={key:1};function vv(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("SettingSidebar"),y=l("a-col"),b=l("PlusOutlined"),k=l("a-button"),C=l("DeleteOutlined"),D=l("a-space"),S=l("a-select-option"),P=l("a-select"),F=l("a-input-search"),O=l("a-input-group"),E=l("a-row"),U=l("admin-page-filters"),K=l("AddEdit"),z=l("EditOutlined"),M=l("a-table"),R=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.taxes"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.settings")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.taxes")),1)]),_:1})]),_:1})]),_:1}),t(E,null,{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(y,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(U,null,{default:a(()=>[t(E,{gutter:[16,16]},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(D,null,{default:a(()=>[n.permsArray.includes("taxes_create")||n.permsArray.includes("admin")?(r(),w(k,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(b),u(" "+s(e.$t("tax.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("taxes_delete")||n.permsArray.includes("admin"))?(r(),w(k,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(C)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(y,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(E,{gutter:[16,16],justify:"end"},{default:a(()=>[t(y,{xs:24,sm:24,md:16,lg:12,xl:10},{default:a(()=>[t(O,{compact:""},{default:a(()=>[t(P,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":o[0]||(o[0]=q=>e.table.searchColumn=q),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),$(I,null,G(n.filterableColumns,q=>(r(),w(S,{key:q.key},{default:a(()=>[u(s(q.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(F,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":o[1]||(o[1]=q=>e.table.searchString=q),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(R,null,{default:a(()=>[t(K,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(E,null,{default:a(()=>[t(y,{span:24},{default:a(()=>[g("div",gv,[t(M,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:q=>({disabled:!((n.permsArray.includes("taxes_delete")||n.permsArray.includes("admin"))&&(!q.children||q.children.length==0)),name:q.xid})},columns:n.columns,"row-key":q=>q.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:q,record:L})=>[q.dataIndex==="tax_type"?(r(),$(I,{key:0},[u(s(L.tax_type=="single"?e.$t("tax.single"):e.$t("tax.multiple")),1)],64)):A("",!0),q.dataIndex==="rate"?(r(),$(I,{key:1},[L.tax_type=="single"?(r(),$("span",yv,[t(E,{gutter:[16,16],style:{"margin-top":"10px"}},{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[u(s(L.rate+"%"),1)]),_:2},1024)]),_:2},1024)])):(r(),$("span",hv,[(r(!0),$(I,null,G(L.multiple_tax,j=>(r(),w(E,{gutter:[16,16],key:j.xid,style:{"margin-top":"10px"}},{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:24,style:{"margin-top":"5px"}},{default:a(()=>[u(s(`${j.name}:  ${j.rate}%`),1)]),_:2},1024)]),_:2},1024))),128))]))],64)):A("",!0),q.dataIndex==="action"?(r(),$(I,{key:2},[n.permsArray.includes("taxes_edit")||n.permsArray.includes("admin")?(r(),w(k,{key:0,type:"primary",onClick:j=>e.editItem(L),style:{"margin-left":"4px"}},{icon:a(()=>[t(z)]),_:1},8,["onClick"])):A("",!0),(n.permsArray.includes("taxes_delete")||n.permsArray.includes("admin"))&&(!L.children||L.children.length==0)?(r(),w(k,{key:1,type:"primary",onClick:j=>e.showDeleteConfirm(L.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(C)]),_:1},8,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const bv=W(fv,[["render",vv]]),kv={props:{panelType:{type:String,default:"admin"}},components:{EditOutlined:De,DeleteOutlined:fe,AddEdit:Qa},setup(e){const{permsArray:o,appSetting:c}=X(),{url:n,addEditUrl:v,initData:h,columns:m,filterableColumns:d}=Ja(e.panelType),i=Ve();return ee(()=>{i.tableUrl.value={url:n},i.table.filterableColumns=d,i.fetch({page:1}),i.crudUrl.value=v,i.langKey.value="currency",i.initData.value={...h},i.formData.value={...h}}),{permsArray:o,appSetting:c,columns:m,...i,filterableColumns:d}}},wv={class:"table-responsive"};function Cv(e,o,c,n,v,h){const m=l("DeleteOutlined"),d=l("a-button"),i=l("a-space"),p=l("a-col"),_=l("a-select-option"),f=l("a-select"),y=l("a-input-search"),b=l("a-input-group"),k=l("a-row"),C=l("admin-page-filters"),D=l("AddEdit"),S=l("EditOutlined"),P=l("a-table"),F=l("admin-page-table-content");return r(),$(I,null,[t(C,null,{default:a(()=>[t(k,{gutter:[16,16]},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(i,null,{default:a(()=>[ie(e.$slots,"actionButtons"),e.table.selectedRowKeys.length>0&&(c.panelType=="superadmin"||n.permsArray.includes("currencies_delete")||n.permsArray.includes("admin"))?(r(),w(d,{key:0,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:3})]),_:3}),t(p,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(k,{gutter:[16,16],justify:"end"},{default:a(()=>[t(p,{xs:24,sm:24,md:16,lg:12,xl:10},{default:a(()=>[t(b,{compact:""},{default:a(()=>[t(f,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":o[0]||(o[0]=O=>e.table.searchColumn=O),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),$(I,null,G(n.filterableColumns,O=>(r(),w(_,{key:O.key},{default:a(()=>[u(s(O.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(y,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":o[1]||(o[1]=O=>e.table.searchString=O),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:3})]),_:3}),t(F,null,{default:a(()=>[t(D,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(k,null,{default:a(()=>[t(p,{span:24},{default:a(()=>[g("div",wv,[t(P,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:O=>({disabled:!((c.panelType=="admin"&&(n.permsArray.includes("currencies_delete")||n.permsArray.includes("admin"))||c.panelType=="superadmin")&&n.appSetting.x_currency_id!=O.xid),name:O.xid})},columns:n.columns,"row-key":O=>O.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:O,record:E})=>[O.dataIndex==="action"?(r(),$(I,{key:0},[c.panelType=="admin"&&(n.permsArray.includes("currencies_edit")||n.permsArray.includes("admin"))||c.panelType=="superadmin"?(r(),w(d,{key:0,type:"primary",onClick:U=>e.editItem(E),style:{"margin-left":"4px"}},{icon:a(()=>[t(S)]),_:1},8,["onClick"])):A("",!0),(c.panelType=="admin"&&(n.permsArray.includes("currencies_delete")||n.permsArray.includes("admin"))||c.panelType=="superadmin")&&n.appSetting.x_currency_id!=E.xid?(r(),w(d,{key:1,type:"primary",onClick:U=>e.showDeleteConfirm(E.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(m)]),_:1},8,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const Sv=W(kv,[["render",Cv]]),$v={components:{PlusOutlined:le,SettingSidebar:je,AdminPageHeader:ge,CurrencySettings:Sv},setup(){const{permsArray:e}=X(),o=T(null);return{permsArray:e,currencySettingRef:o,addItem:()=>{o.value.addItem()}}}};function Dv(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("SettingSidebar"),y=l("a-col"),b=l("PlusOutlined"),k=l("a-button"),C=l("CurrencySettings"),D=l("a-row");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.currencies"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.settings")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.currencies")),1)]),_:1})]),_:1})]),_:1}),t(D,null,{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(y,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(C,{ref:"currencySettingRef"},{actionButtons:a(()=>[n.permsArray.includes("currencies_create")||n.permsArray.includes("admin")?(r(),w(k,{key:0,type:"primary",onClick:n.addItem},{default:a(()=>[t(b),u(" "+s(e.$t("currency.add")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1},512)]),_:1})]),_:1})],64)}const Av=W($v,[["render",Dv]]),Tv={components:{PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,AddEdit:wo,SettingSidebar:je,AdminPageHeader:ge},setup(){const{permsArray:e}=X(),{url:o,addEditUrl:c,initData:n,columns:v,filterableColumns:h}=ko(),m=Ve();return ee(()=>{m.tableUrl.value={url:o},m.table.filterableColumns=h,m.fetch({page:1}),m.crudUrl.value=c,m.langKey.value="unit",m.initData.value={...n},m.formData.value={...n}}),{permsArray:e,columns:v,...m,filterableColumns:h}}},Ev={class:"table-responsive"};function Ov(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("SettingSidebar"),y=l("a-col"),b=l("PlusOutlined"),k=l("a-button"),C=l("DeleteOutlined"),D=l("a-space"),S=l("a-select-option"),P=l("a-select"),F=l("a-input-search"),O=l("a-input-group"),E=l("a-row"),U=l("admin-page-filters"),K=l("AddEdit"),z=l("EditOutlined"),M=l("a-table"),R=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.units"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.settings")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.units")),1)]),_:1})]),_:1})]),_:1}),t(E,null,{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(y,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(U,null,{default:a(()=>[t(E,{gutter:[16,16]},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(D,null,{default:a(()=>[n.permsArray.includes("units_create")||n.permsArray.includes("admin")?(r(),w(k,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(b),u(" "+s(e.$t("unit.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("units_delete")||n.permsArray.includes("admin"))?(r(),w(k,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(C)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(y,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(E,{gutter:[16,16],justify:"end"},{default:a(()=>[t(y,{xs:24,sm:24,md:16,lg:12,xl:10},{default:a(()=>[t(O,{compact:""},{default:a(()=>[t(P,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":o[0]||(o[0]=q=>e.table.searchColumn=q),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),$(I,null,G(n.filterableColumns,q=>(r(),w(S,{key:q.key},{default:a(()=>[u(s(q.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(F,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":o[1]||(o[1]=q=>e.table.searchString=q),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(R,null,{default:a(()=>[t(K,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(E,null,{default:a(()=>[t(y,{span:24},{default:a(()=>[g("div",Ev,[t(M,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:q=>({disabled:!(q.is_deletable&&(n.permsArray.includes("units_delete")||n.permsArray.includes("admin"))),name:q.xid})},columns:n.columns,"row-key":q=>q.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:q,record:L})=>[q.dataIndex==="action"?(r(),$(I,{key:0},[n.permsArray.includes("units_edit")||n.permsArray.includes("admin")?(r(),w(k,{key:0,type:"primary",onClick:j=>e.editItem(L),style:{"margin-left":"4px"}},{icon:a(()=>[t(z)]),_:1},8,["onClick"])):A("",!0),L.is_deletable&&(n.permsArray.includes("units_delete")||n.permsArray.includes("admin"))?(r(),w(k,{key:1,type:"primary",onClick:j=>e.showDeleteConfirm(L.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(C)]),_:1},8,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Iv=W(Tv,[["render",Ov]]),Pv={components:{PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,AddEdit:ja,SettingSidebar:je,AdminPageHeader:ge},setup(){const{permsArray:e}=X(),{url:o,addEditUrl:c,initData:n,columns:v,filterableColumns:h}=Wa(),m=Ve();return ee(()=>{m.tableUrl.value={url:o},m.table.filterableColumns=h,m.fetch({page:1}),m.crudUrl.value=c,m.langKey.value="payment_mode",m.initData.value={...n},m.formData.value={...n}}),{permsArray:e,columns:v,...m,filterableColumns:h}}},Uv={class:"table-responsive"};function Fv(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("SettingSidebar"),y=l("a-col"),b=l("PlusOutlined"),k=l("a-button"),C=l("DeleteOutlined"),D=l("a-space"),S=l("a-select-option"),P=l("a-select"),F=l("a-input-search"),O=l("a-input-group"),E=l("a-row"),U=l("admin-page-filters"),K=l("AddEdit"),z=l("EditOutlined"),M=l("a-table"),R=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.payment_modes"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.settings")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.payment_modes")),1)]),_:1})]),_:1})]),_:1}),t(E,null,{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(y,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(U,null,{default:a(()=>[t(E,{gutter:[16,16]},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(D,null,{default:a(()=>[n.permsArray.includes("payment_modes_create")||n.permsArray.includes("admin")?(r(),w(k,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(b),u(" "+s(e.$t("payment_mode.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("payment_modes_delete")||n.permsArray.includes("admin"))?(r(),w(k,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(C)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(y,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(E,{gutter:[16,16],justify:"end"},{default:a(()=>[t(y,{xs:24,sm:24,md:16,lg:12,xl:10},{default:a(()=>[t(O,{compact:""},{default:a(()=>[t(P,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":o[0]||(o[0]=q=>e.table.searchColumn=q),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),$(I,null,G(n.filterableColumns,q=>(r(),w(S,{key:q.key},{default:a(()=>[u(s(q.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(F,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":o[1]||(o[1]=q=>e.table.searchString=q),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(R,null,{default:a(()=>[t(K,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(E,null,{default:a(()=>[t(y,{span:24},{default:a(()=>[g("div",Uv,[t(M,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:q=>({disabled:!1,name:q.xid})},columns:n.columns,"row-key":q=>q.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:q,record:L})=>[q.dataIndex==="mode_type"?(r(),$(I,{key:0},[u(s(e.$t(`payment_mode.${L.mode_type}`)),1)],64)):A("",!0),q.dataIndex==="action"?(r(),$(I,{key:1},[n.permsArray.includes("payment_modes_edit")||n.permsArray.includes("admin")?(r(),w(k,{key:0,type:"primary",onClick:j=>e.editItem(L),style:{"margin-left":"4px"}},{icon:a(()=>[t(z)]),_:1},8,["onClick"])):A("",!0),n.permsArray.includes("payment_modes_delete")||n.permsArray.includes("admin")?(r(),w(k,{key:1,type:"primary",onClick:j=>e.showDeleteConfirm(L.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(C)]),_:1},8,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Mv=W(Pv,[["render",Fv]]),qv=()=>{const e="custom-fields?fields=id,xid,name,value,type",o="custom-fields",{t:c}=ae(),n={name:"",value:"",type:"text"},v=[{title:c("custom_field.name"),dataIndex:"name"},{title:c("common.action"),dataIndex:"action"}],h=[{key:"name",value:c("custom_field.name")}];return{url:e,addEditUrl:o,initData:n,columns:v,filterableColumns:h}},Rv=Z({props:["formData","data","visible","url","addEditType","pageTitle","successMessage"],components:{PlusOutlined:le,LoadingOutlined:Oe,SaveOutlined:ve},setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n,rules:v}=be();return{loading:n,rules:v,onClose:()=>{v.value={},o("closed")},onSubmit:()=>{c({url:e.url,data:e.formData,successMessage:e.successMessage,success:d=>{o("addEditSuccess",d.xid)}})},drawerWidth:window.innerWidth<=991?"90%":"45%"}}});function Kv(e,o,c,n,v,h){const m=l("a-input"),d=l("a-form-item"),i=l("a-col"),p=l("a-row"),_=l("a-form"),f=l("SaveOutlined"),y=l("a-button"),b=l("a-modal");return r(),w(b,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(y,{key:"submit",type:"primary",loading:e.loading,onClick:e.onSubmit},{icon:a(()=>[t(f)]),default:a(()=>[u(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(y,{key:"back",onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(_,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("custom_field.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null,class:"required"},{default:a(()=>[t(m,{value:e.formData.name,"onUpdate:value":o[0]||(o[0]=k=>e.formData.name=k),placeholder:e.$t("common.placeholder_default_text",[e.$t("custom_field.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const Vv=W(Rv,[["render",Kv]]),zv={components:{PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,AddEdit:Vv,SettingSidebar:je,AdminPageHeader:ge},setup(){const{permsArray:e}=X(),{url:o,addEditUrl:c,initData:n,columns:v,filterableColumns:h}=qv(),m=Ve();return ee(()=>{m.tableUrl.value={url:o},m.table.filterableColumns=h,m.fetch({page:1}),m.crudUrl.value=c,m.langKey.value="custom_field",m.initData.value={...n},m.formData.value={...n}}),{permsArray:e,columns:v,...m,filterableColumns:h}}},Lv={class:"table-responsive"};function Bv(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("SettingSidebar"),y=l("a-col"),b=l("PlusOutlined"),k=l("a-button"),C=l("DeleteOutlined"),D=l("a-space"),S=l("a-select-option"),P=l("a-select"),F=l("a-input-search"),O=l("a-input-group"),E=l("a-row"),U=l("admin-page-filters"),K=l("AddEdit"),z=l("EditOutlined"),M=l("a-table"),R=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.custom_fields"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.settings")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.custom_fields")),1)]),_:1})]),_:1})]),_:1}),t(E,null,{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(y,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(U,null,{default:a(()=>[t(E,{gutter:[16,16]},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(D,null,{default:a(()=>[n.permsArray.includes("custom_fields_create")||n.permsArray.includes("admin")?(r(),w(k,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(b),u(" "+s(e.$t("custom_field.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("custom_fields_delete")||n.permsArray.includes("admin"))?(r(),w(k,{key:1,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(C)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(y,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(E,{gutter:[16,16],justify:"end"},{default:a(()=>[t(y,{xs:24,sm:24,md:16,lg:12,xl:10},{default:a(()=>[t(O,{compact:""},{default:a(()=>[t(P,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":o[0]||(o[0]=q=>e.table.searchColumn=q),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),$(I,null,G(n.filterableColumns,q=>(r(),w(S,{key:q.key},{default:a(()=>[u(s(q.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(F,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":o[1]||(o[1]=q=>e.table.searchString=q),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(R,null,{default:a(()=>[t(K,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),t(E,null,{default:a(()=>[t(y,{span:24},{default:a(()=>[g("div",Lv,[t(M,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:q=>({disabled:!1,name:q.xid})},columns:n.columns,"row-key":q=>q.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:q,record:L})=>[q.dataIndex==="action"?(r(),$(I,{key:0},[n.permsArray.includes("custom_fields_edit")||n.permsArray.includes("admin")?(r(),w(k,{key:0,type:"primary",onClick:j=>e.editItem(L),style:{"margin-left":"4px"}},{icon:a(()=>[t(z)]),_:1},8,["onClick"])):A("",!0),n.permsArray.includes("custom_fields_delete")||n.permsArray.includes("admin")?(r(),w(k,{key:1,type:"primary",onClick:j=>e.showDeleteConfirm(L.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(C)]),_:1},8,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Wv=W(zv,[["render",Bv]]),jv=Z({emits:["fetchTranslationsSuccesss"],components:{SyncOutlined:Ct},setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n}=be(),{t:v}=ae();return{loading:n,refetchTranslations:()=>{c({url:Ue("translations/refetch"),data:{},successMessage:v("translations.fetched_successfully"),success:m=>{o("fetchTranslationsSuccesss")}})}}}});function Hv(e,o,c,n,v,h){const m=l("SyncOutlined"),d=l("a-button");return r(),w(d,{onClick:e.refetchTranslations,loading:e.loading,style:{width:"100%"}},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("translations.fetch_new_translations")),1)]),_:1},8,["onClick","loading"])}const Nv=W(jv,[["render",Hv]]);function Yv(e={locale:"en",warnHtmlMessage:!1}){const o=Rl(e);return Gv(o,e.locale),o}function Gv(e,o){e.mode==="legacy"?e.global.locale=o:e.global.locale.value=o,document.querySelector("html").setAttribute("lang",o)}async function Xv(e,o){const c=await axiosBase.get("lang-trans");Bo(c,e,o)}function Bo(e,o,c){const n={};return e.data.data.map(v=>{n[v.key]={},v.translations.map(h=>{n[v.key][h.group]==null&&(n[v.key][h.group]={}),n[v.key][h.group][h.key]=h.value})}),o.global.setLocaleMessage(c,n[c]),ca()}const Jv={components:{FetchNewTranslation:Nv,LangAddButton:Za,EditOutlined:De,CheckOutlined:ht},setup(){const{permsArray:e}=X(),o=T([]),c=T([]),n=T([]),v=T(void 0),h=T([]),m=ke(),d=pe(()=>m.state.auth.lang),i=Se({data:[]}),p=Se({}),_=T(0),f=(S,P)=>{p[S[`${P}_id`]]={id:S[`${P}_id`],value:S[P]}},y=S=>{axiosAdmin.post(Ue(`translations/${S}`),{value:p[S].value,_method:"PUT"}).then(()=>{C(),delete p[S]})};var b={};const k=()=>{const S=[{title:"Group",key:"group",dataIndex:"group",fixed:"left"}],P=[];o.value.map(U=>{S.push({title:U.name,key:U.key,dataIndex:U.key}),P.push({key:U.key})}),n.value=P,c.value=S;const F=[];o.value.map(U=>{b[U.key]={},U.translations.map(K=>{b[U.key][K.group]==null&&(b[U.key][K.group]={},U.key=="en"&&F.push(K.group)),b[U.key][K.group][K.key]={id:K.xid,value:K.value}})}),v.value===void 0&&(v.value=F[0]);const O=b.en[v.value],E=[];Object.keys(O).forEach(U=>{const K={};S.map(z=>{z.key=="group"?K[z.key]=U:(K[z.key]=b[z.key][v.value][U]&&b[z.key][v.value][U].value?b[z.key][v.value][U].value:"",K[`${z.key}_id`]=b[z.key][v.value][U]&&b[z.key][v.value][U].id?b[z.key][v.value][U].id:"")}),E.push(K)}),h.value=F,i.data=E};ee(()=>{C()});const C=()=>{axiosAdmin.get("lang-trans").then(S=>{o.value=S.data.data,Bo(S,i18n,d.value),k()})};return{columns:c,table:i,editableData:p,activeTab:_,langKeys:n,group:v,groupKeys:h,getData:C,edit:f,save:y,permsArray:e,langAdded:()=>{C()}}}},Qv={key:0,class:"editable-cell"},Zv={key:0,class:"editable-cell-input-wrapper"},xv={key:1,class:"editable-cell-text-wrapper"};function eb(e,o,c,n,v,h){const m=l("a-col"),d=l("a-select-option"),i=l("a-select"),p=l("FetchNewTranslation"),_=l("a-row"),f=l("admin-page-filters"),y=l("a-input"),b=l("check-outlined"),k=l("edit-outlined"),C=l("a-table"),D=l("admin-page-table-content");return r(),$(I,null,[t(f,null,{default:a(()=>[t(_,{gutter:[16,16]},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:10,xl:12},{default:a(()=>[ie(e.$slots,"actionButtons")]),_:3}),t(m,{xs:24,sm:24,md:12,lg:14,xl:12},{default:a(()=>[t(_,{gutter:[16,16],justify:"end"},{default:a(()=>[t(m,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[t(i,{value:n.group,"onUpdate:value":o[0]||(o[0]=S=>n.group=S),"show-search":"",placeholder:"Select group...",style:{width:"100%"},onChange:n.getData},{default:a(()=>[(r(!0),$(I,null,G(n.groupKeys,S=>(r(),w(d,{key:S,value:S},{default:a(()=>[u(s(S),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","onChange"])]),_:1}),t(m,{xs:24,sm:24,md:12,lg:12,xl:8},{default:a(()=>[t(p,{onFetchTranslationsSuccesss:n.getData},null,8,["onFetchTranslationsSuccesss"])]),_:1})]),_:1})]),_:1})]),_:3})]),_:3}),t(D,null,{default:a(()=>[t(C,{columns:n.columns,"row-key":S=>S.group,"data-source":n.table.data,pagination:!1,bordered:"",size:"middle"},{bodyCell:a(({column:S,text:P,record:F})=>[(r(!0),$(I,null,G(n.langKeys,O=>(r(),$(I,{key:O},[S.dataIndex===O.key?(r(),$("div",Qv,[n.editableData[F[`${O.key}_id`]]?(r(),$("div",Zv,[t(y,{value:n.editableData[F[`${O.key}_id`]].value,"onUpdate:value":E=>n.editableData[F[`${O.key}_id`]].value=E,onPressEnter:E=>n.save(F[`${O.key}_id`])},null,8,["value","onUpdate:value","onPressEnter"]),t(b,{class:"editable-cell-icon-check",onClick:E=>n.save(F[`${O.key}_id`])},null,8,["onClick"])])):(r(),$("div",xv,[u(s(P||" ")+" ",1),t(k,{class:"editable-cell-icon",onClick:E=>n.edit(F,O.key)},null,8,["onClick"])]))])):A("",!0)],64))),128))]),_:1},8,["columns","row-key","data-source"])]),_:1})],64)}const tb=W(Jv,[["render",eb]]),ab={components:{EyeOutlined:tt,SettingSidebar:je,AdminPageHeader:ge,TranslationsSettings:tb,LangAddButton:Za,ImportTranslation:Lt},setup(){const{permsArray:e,appType:o}=X(),c=T(null),n=window.config.translatioins_sample_file;return{langAdded:()=>{c.value.getData()},appType:o,permsArray:e,transSettingRef:c,sampleFileUrl:n}}};function nb(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("SettingSidebar"),y=l("a-col"),b=l("LangAddButton"),k=l("ImportTranslation"),C=l("EyeOutlined"),D=l("a-button"),S=l("a-space"),P=l("TranslationsSettings"),F=l("a-row");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.translations"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.settings")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.translations")),1)]),_:1})]),_:1})]),_:1}),t(F,null,{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(y,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(P,{ref:"transSettingRef"},{actionButtons:a(()=>[t(S,null,{default:a(()=>[n.permsArray.includes("translations_create")||n.permsArray.includes("admin")?(r(),w(b,{key:0,onOnAddSuccess:n.langAdded,btnType:"primary",tooltip:!1},{default:a(()=>[u(s(e.$t("langs.add")),1)]),_:1},8,["onOnAddSuccess"])):A("",!0),n.appType=="non-saas"?(r(),w(k,{key:1,pageTitle:e.$t("translations.import_translations"),sampleFileUrl:n.sampleFileUrl,importUrl:"translations/import",onOnUploadSuccess:n.langAdded},null,8,["pageTitle","sampleFileUrl","onOnUploadSuccess"])):A("",!0),t(D,{type:"primary",onClick:o[0]||(o[0]=O=>e.$router.push({name:"admin.settings.langs.index"}))},{default:a(()=>[t(C),u(" "+s(e.$t("langs.view_all_langs")),1)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})],64)}const ob=W(ab,[["render",nb]]),lb=Z({props:["module"],emits:["updateSuccess"],setup(e,{emit:o}){const c=T(!1),n=T(!1),v=ke(),{t:h}=ae();return ee(()=>{!e.module.verified||e.module.other_domain_verified?c.value=!1:c.value=e.module.status}),{checked:c,loading:n,updateStatus:(d,i)=>{axiosAdmin.post(Ue("modules/update-status"),{verified_name:e.module.verified_name,checked:d}).then(p=>{Me.success({placement:"bottomRight",message:h("common.success"),description:h("module.module_status_updated")}),v.commit("auth/updateActiveModules",p.data.enabled_modules),window.config.modules=p.data.enabled_modules,o("updateSuccess")})}}}}),sb={key:0},rb=["innerHTML"],db={key:1};function ib(e,o,c,n,v,h){const m=l("a-switch"),d=l("a-tooltip");return e.module.verified&&e.module.installed?(r(),$("span",sb,[t(d,null,Qe({default:a(()=>[t(m,{checked:e.checked,"onUpdate:checked":o[0]||(o[0]=i=>e.checked=i),loading:e.loading,onChange:e.updateStatus,disabled:!e.module.verified||e.module.other_domain_verified,size:"small"},null,8,["checked","loading","onChange","disabled"])]),_:2},[!e.module.verified||e.module.other_domain_verified?{name:"title",fn:a(()=>[g("span",{innerHTML:e.$t("messages.first_verify_module_message")},null,8,rb)]),key:"0"}:void 0]),1024)])):(r(),$("span",db," - "))}const ub=W(lb,[["render",ib]]),mb=Z({props:["module"],emits:["verifySuccess"],components:{CheckOutlined:ht,InfoCircleOutlined:Kt},setup(e,{emit:o}){const c=T(!1),n=window.location.host,{rules:v,purchaseCode:h,errorMessage:m,successMessage:d,loading:i,verifyPurchase:p,productName:_,version:f}=Ba();return ee(()=>{_.value=e.module.verified_name,f.value=e.module.current_version}),{visible:c,showModal:()=>{c.value=!0},handleCancel:()=>{h.value="",c.value=!1},domain:n,rules:v,purchaseCode:h,loading:i,verify:()=>p({success:C=>{o("verifySuccess"),h.value="",c.value=!1}}),errorMessage:m,successMessage:d}}}),cb={key:0},pb=["innerHTML"],_b=["innerHTML"];function fb(e,o,c,n,v,h){const m=l("a-tag"),d=l("a-button"),i=l("a-typography-text"),p=l("a-alert"),_=l("a-col"),f=l("a-row"),y=l("InfoCircleOutlined"),b=l("a-typography-link"),k=l("a-typography-paragraph"),C=l("a-form-item"),D=l("a-input"),S=l("a-form"),P=l("CheckOutlined"),F=l("a-modal");return r(),$(I,null,[e.module.other_domain_verified?(r(),$("div",cb,[t(m,{color:"red"},{default:a(()=>[u(s(e.$t("messages.other_domain_linked")),1)]),_:1}),o[2]||(o[2]=g("br",null,null,-1)),t(d,{type:"link",class:"p-0 mt-10",onClick:e.showModal},{default:a(()=>[u(s(e.$t("module.verify_purchase_code")),1)]),_:1},8,["onClick"])])):e.module.verified?(r(),w(i,{key:1,type:"success",strong:""},{default:a(()=>[u(s(e.$t("module.verified")),1)]),_:1})):e.module.is_free?(r(),w(i,{key:2,type:"success",strong:""},{default:a(()=>[...o[3]||(o[3]=[u(" - ",-1)])]),_:1})):(r(),w(d,{key:3,type:"link",class:"p-0",onClick:e.showModal},{default:a(()=>[u(s(e.$t("module.verify_purchase_code")),1)]),_:1},8,["onClick"])),t(F,{open:e.visible,"onUpdate:open":o[1]||(o[1]=O=>e.visible=O),title:e.$t("module.verify_purchase_code"),maskClosable:!1,onCancel:e.handleCancel},{footer:a(()=>[t(d,{key:"submit",type:"primary",onClick:e.verify,loading:e.loading},{icon:a(()=>[t(P)]),default:a(()=>[u(" "+s(e.$t("common.verify")),1)]),_:1},8,["onClick","loading"]),t(d,{key:"back",onClick:e.handleCancel},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[e.successMessage!=""?(r(),w(p,{key:0,class:"mb-10",type:"success","show-icon":"",banner:""},{message:a(()=>[g("span",{innerHTML:e.successMessage},null,8,pb)]),_:1})):A("",!0),e.errorMessage!=""?(r(),w(p,{key:1,class:"mb-10",type:"error","show-icon":"",banner:""},{message:a(()=>[g("span",{innerHTML:e.errorMessage},null,8,_b)]),_:1})):A("",!0),e.module.other_domain_verified&&e.errorMessage==""?(r(),w(f,{key:2,class:"mb-10"},{default:a(()=>[t(_,{span:24},{default:a(()=>[t(p,{type:"error","show-icon":""},{message:a(()=>[u(s(e.$t("messages.other_domain_linked_with_purchase_code")),1)]),_:1})]),_:1})]),_:1})):A("",!0),t(f,{class:"mb-10"},{default:a(()=>[t(_,{span:24},{default:a(()=>[t(k,null,{default:a(()=>[g("blockquote",null,[t(b,{href:"https://help.market.envato.com/hc/en-us/articles/202822600-Where-Is-My-Purchase-Code-",target:"_blank"},{default:a(()=>[t(y),u(" "+s(e.$t("messages.click_here_to_find_purchase_code")),1)]),_:1})])]),_:1})]),_:1})]),_:1}),t(S,{layout:"vertical"},{default:a(()=>[t(C,{label:e.$t("common.domain"),name:"domain"},{default:a(()=>[t(i,{strong:""},{default:a(()=>[u(s(e.domain),1)]),_:1})]),_:1},8,["label"]),t(C,{label:e.$t("common.purchase_code"),name:"purchase_code",help:e.rules.purchase_code?e.rules.purchase_code.message:null,validateStatus:e.rules.purchase_code?"error":null,class:"required"},{default:a(()=>[t(D,{value:e.purchaseCode,"onUpdate:value":o[0]||(o[0]=O=>e.purchaseCode=O),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.purchase_code")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1},8,["open","title","onCancel"])],64)}const gb=W(mb,[["render",fb]]),yb=Z({props:["module","downloading","downloadPercentage","extracting"],emits:["install"],components:{DownloadOutlined:Ot,ShoppingCartOutlined:$t,ReloadOutlined:to,SyncOutlined:Ct,CheckCircleOutlined:Ra,InfoOutlined:ao,CheckOutlined:ht},setup(e,{emit:o}){const{t:c}=ae(),n=T(!1),v=T("");return qe(),{install:()=>{Le.confirm({title:c("common.install"),icon:t(Ae),content:c("messages.are_you_sure_install_message"),okText:c("common.yes"),okType:"danger",cancelText:c("common.no"),onOk(){v.value=c("common.installing")+"...",o("install",e.module.verified_name),n.value=!0},onCancel(){}})},update:()=>{Le.confirm({title:c("common.update"),icon:t(Ae),content:c("messages.are_you_sure_update_message"),okText:c("common.yes"),okType:"danger",cancelText:c("common.no"),onOk(){v.value=c("common.updating")+"...",o("install",e.module.verified_name),n.value=!0},onCancel(){}})},installUpdateModalVisible:n,closeInstallUpdateModal:()=>{n.value=!1,window.location.reload()}}}});function hb(e,o,c,n,v,h){const m=l("DownloadOutlined"),d=l("a-button"),i=l("ReloadOutlined"),p=l("ShoppingCartOutlined"),_=l("a-typography-text"),f=l("SyncOutlined"),y=l("CheckCircleOutlined"),b=l("a-progress"),k=l("a-col"),C=l("a-row"),D=l("InfoOutlined"),S=l("CheckOutlined"),P=l("a-modal");return r(),$(I,null,[e.module.is_free&&!e.module.installed||e.module.verified&&!e.module.installed?(r(),w(d,{key:0,type:"link",class:"p-0",onClick:e.install},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("common.install")),1)]),_:1},8,["onClick"])):(e.module.is_free||e.module.verified)&&e.module.installed&&e.module.current_version!=e.module.version?(r(),w(d,{key:1,type:"link",class:"p-0",onClick:e.update},{icon:a(()=>[t(i)]),default:a(()=>[u(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick"])):!e.module.is_free&&!e.module.verified?(r(),w(d,{key:2,type:"link",href:e.module.buy_now_url,class:"p-0",target:"_blank"},{icon:a(()=>[t(p)]),default:a(()=>[u(" "+s(e.$t("common.buy_now")),1)]),_:1},8,["href"])):(r(),w(_,{key:3,type:"success",strong:""},{default:a(()=>[...o[1]||(o[1]=[u(" - ",-1)])]),_:1})),t(P,{open:e.installUpdateModalVisible,"onUpdate:open":o[0]||(o[0]=F=>e.installUpdateModalVisible=F),title:e.$t("common.installing"),maskClosable:!1,closable:!1,footer:null},{default:a(()=>[t(C,{class:"mb-10"},{default:a(()=>[t(k,{span:24},{default:a(()=>[e.downloadPercentage<100?(r(),w(_,{key:0},{default:a(()=>[t(f,{spin:""}),u(" "+s(e.$t("messages.downloading_started_message")),1)]),_:1})):(r(),w(_,{key:1,strong:"",type:"success"},{default:a(()=>[t(y),u(" "+s(e.$t("module.downloading_completed")),1)]),_:1})),e.downloadPercentage<100?(r(),w(b,{key:2,percent:e.downloadPercentage},null,8,["percent"])):A("",!0)]),_:1})]),_:1}),t(C,{class:"mb-10"},{default:a(()=>[t(k,{span:24},{default:a(()=>[e.extracting==""?(r(),w(_,{key:0,type:"secondary"},{default:a(()=>[t(D),u(" "+s(e.$t("module.extract_zip_file")),1)]),_:1})):A("",!0),e.extracting=="started"?(r(),w(_,{key:1},{default:a(()=>[t(f,{spin:""}),u(" "+s(e.$t("messages.file_extracting_message")),1)]),_:1})):A("",!0),e.extracting=="completed"?(r(),w(_,{key:2,strong:"",type:"success"},{default:a(()=>[t(y),u(" "+s(e.$t("module.file_extracted")),1)]),_:1})):A("",!0)]),_:1})]),_:1}),e.extracting=="completed"?(r(),w(C,{key:0,class:"mt-10 mb-10"},{default:a(()=>[t(k,{span:24},{default:a(()=>[t(d,{type:"primary",onClick:e.closeInstallUpdateModal,block:""},{default:a(()=>[t(S),u(" "+s(e.$t("messages.installation_success")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})):A("",!0)]),_:1},8,["open","title"])],64)}const vb=W(yb,[["render",hb]]);const bb=Z({components:{ModuleStatus:ub,VerifyModule:gb,ModuleAction:vb,LeftCircleOutlined:Ka,RightCircleOutlined:Va},setup(){const{t:e}=ae();ke();const o=window.config.app_env,{allModules:c,dataLoading:n,getModuleData:v,offers:h,settings:m,install:d,downloading:i,downloadPercentage:p,extracting:_}=Ba(),f=[{title:e("module.name"),dataIndex:"name",width:"25%"},{title:e("module.verified"),dataIndex:"verified",width:"15%"},{title:e("module.current_version"),dataIndex:"current_version"},{title:e("module.latest_version"),dataIndex:"version"},{title:e("module.status"),dataIndex:"status"},{title:e("common.action"),dataIndex:"action"}];return ee(()=>{v()}),{modulesTableColumns:f,allModules:c,getModuleData:v,installModule:b=>{d(b)},dataLoading:n,offers:h,settings:m,downloading:i,downloadPercentage:p,extracting:_,appEnv:o}}}),kb={class:"custom-slick-arrow",style:{left:"10px","z-index":"1"}},wb={class:"custom-slick-arrow",style:{right:"10px"}},Cb=["src"],Sb={key:0,class:"table-responsive"},$b={key:1};function Db(e,o,c,n,v,h){const m=l("left-circle-outlined"),d=l("right-circle-outlined"),i=l("a-typography-link"),p=l("a-carousel"),_=l("a-col"),f=l("a-row"),y=l("a-avatar"),b=l("a-list-item-meta"),k=l("a-list-item"),C=l("a-list"),D=l("VerifyModule"),S=l("ModuleStatus"),P=l("ModuleAction"),F=l("a-table"),O=l("admin-page-table-content");return r(),$(I,null,[e.offers&&e.offers.length>0?(r(),w(f,{key:0},{default:a(()=>[t(_,{span:24},{default:a(()=>[t(p,{arrows:""},{prevArrow:a(()=>[g("div",kb,[t(m)])]),nextArrow:a(()=>[g("div",wb,[t(d)])]),default:a(()=>[(r(!0),$(I,null,G(e.offers,E=>(r(),$("div",{key:E.id},[t(i,{href:E.url,target:"_blank"},{default:a(()=>[g("img",{src:E.image_url,style:Ye({width:e.settings.width,height:e.settings.height}),preview:!1},null,12,Cb)]),_:2},1032,["href"])]))),128))]),_:1})]),_:1})]),_:1})):A("",!0),t(O,null,{default:a(()=>[t(f,{class:"mt-20 mb-20"},{default:a(()=>[t(_,{span:24},{default:a(()=>[e.allModules?(r(),$("div",Sb,[t(F,{columns:e.modulesTableColumns,"row-key":E=>E.verified_name,"data-source":e.allModules,pagination:!1,bordered:"",size:"middle",loading:e.dataLoading},{bodyCell:a(({column:E,record:U})=>[E.dataIndex=="name"?(r(),w(C,{key:0},{default:a(()=>[t(k,null,{default:a(()=>[t(b,{description:U.description},{title:a(()=>[u(s(U.name),1)]),avatar:a(()=>[t(y,{src:U.image_url},null,8,["src"])]),_:2},1032,["description"])]),_:2},1024)]),_:2},1024)):A("",!0),E.dataIndex=="verified"?(r(),w(D,{key:1,module:U,onVerifySuccess:e.getModuleData},null,8,["module","onVerifySuccess"])):A("",!0),E.dataIndex=="status"?(r(),w(S,{key:2,module:U,status:U.status,moduleName:U.verified_name,onUpdateSuccess:e.getModuleData},null,8,["module","status","moduleName","onUpdateSuccess"])):A("",!0),E.dataIndex=="action"?(r(),$(I,{key:3},[e.appEnv=="envato"?(r(),w(P,{key:0,module:U,onInstall:e.installModule,downloadPercentage:e.downloadPercentage,downloading:e.downloading,extracting:e.extracting},null,8,["module","onInstall","downloadPercentage","downloading","extracting"])):(r(),$("span",$b,"-"))],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","loading"])])):A("",!0)]),_:1})]),_:1})]),_:1})],64)}const Ab=W(bb,[["render",Db]]),Tb=Z({components:{LeftCircleOutlined:Ka,RightCircleOutlined:Va,SettingSidebar:je,AdminPageHeader:ge,ModuleSetting:Ab},setup(){return{}}});function Eb(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("SettingSidebar"),y=l("a-col"),b=l("ModuleSetting"),k=l("a-row");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.modules"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.settings")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.modules")),1)]),_:1})]),_:1})]),_:1}),t(k,null,{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(y,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(b)]),_:1})]),_:1})],64)}const Ob=W(Tb,[["render",Eb]]),Ib={components:{SaveOutlined:ve},setup(){const{addEditRequestAdmin:e,loading:o,rules:c}=be(),{t:n}=ae(),v=T({}),h=T([]);return ee(()=>{axiosAdmin.get(Ue("settings/storage")).then(d=>{v.value=d.data.storage,h.value=d.data.regions})}),{loading:o,rules:c,awsRegions:h,formData:v,onSubmit:()=>{e({url:Ue("settings/storage/update"),data:v.value,successMessage:n("storage_settings.updated"),success:d=>{}})}}}},Pb={key:0};function Ub(e,o,c,n,v,h){const m=l("a-select-option"),d=l("a-select"),i=l("a-form-item"),p=l("a-col"),_=l("a-row"),f=l("a-input"),y=l("a-input-password"),b=l("SaveOutlined"),k=l("a-button"),C=l("a-form");return r(),w(C,{layout:"vertical"},{default:a(()=>[t(_,{gutter:16},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(i,{label:e.$t("storage_settings.storage"),name:"filesystem",help:n.rules.filesystem?n.rules.filesystem.message:null,validateStatus:n.rules.filesystem?"error":null},{default:a(()=>[t(d,{value:n.formData.filesystem,"onUpdate:value":o[0]||(o[0]=D=>n.formData.filesystem=D),placeholder:e.$t("common.select_default_text",[e.$t("storage_settings.storage")])},{default:a(()=>[t(m,{key:"local",value:"local"},{default:a(()=>[u(s(e.$t("storage_settings.local")),1)]),_:1}),t(m,{key:"aws",value:"aws"},{default:a(()=>[u(s(e.$t("storage_settings.aws")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),n.formData.filesystem=="aws"?(r(),$("div",Pb,[t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("storage_settings.aws_key"),name:"key",help:n.rules.key?n.rules.key.message:null,validateStatus:n.rules.key?"error":null,class:"required"},{default:a(()=>[t(f,{value:n.formData.key,"onUpdate:value":o[1]||(o[1]=D=>n.formData.key=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("storage_settings.aws_key")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("storage_settings.aws_secret"),name:"secret",help:n.rules.secret?n.rules.secret.message:null,validateStatus:n.rules.secret?"error":null,class:"required"},{default:a(()=>[t(y,{value:n.formData.secret,"onUpdate:value":o[2]||(o[2]=D=>n.formData.secret=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("storage_settings.aws_secret")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("storage_settings.aws_region"),name:"region",help:n.rules.region?n.rules.region.message:null,validateStatus:n.rules.region?"error":null},{default:a(()=>[t(d,{value:n.formData.region,"onUpdate:value":o[3]||(o[3]=D=>n.formData.region=D),placeholder:e.$t("common.select_default_text",[e.$t("storage_settings.aws_region")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.awsRegions,(D,S)=>(r(),w(m,{key:S,value:S,label:D},{default:a(()=>[u(s(D),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("storage_settings.aws_bucket"),name:"bucket",help:n.rules.bucket?n.rules.bucket.message:null,validateStatus:n.rules.bucket?"error":null,class:"required"},{default:a(()=>[t(f,{value:n.formData.bucket,"onUpdate:value":o[4]||(o[4]=D=>n.formData.bucket=D),placeholder:e.$t("common.placeholder_default_text",[e.$t("storage_settings.aws_bucket")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})])):A("",!0),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(i,null,{default:a(()=>[t(k,{type:"primary",onClick:n.onSubmit,loading:n.loading},{icon:a(()=>[t(b)]),default:a(()=>[u(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})]),_:1})}const Fb=W(Ib,[["render",Ub]]),Mb={components:{SettingSidebar:je,AdminPageHeader:ge,StorageSettings:Fb,SaveOutlined:ve},setup(){const e=T(null);return{onSubmit:()=>{e.value.onSubmit()},settingRef:e}}};function qb(e,o,c,n,v,h){const m=l("SaveOutlined"),d=l("a-button"),i=l("a-page-header"),p=l("router-link"),_=l("a-breadcrumb-item"),f=l("a-breadcrumb"),y=l("AdminPageHeader"),b=l("SettingSidebar"),k=l("a-col"),C=l("StorageSettings"),D=l("a-card"),S=l("admin-page-table-content"),P=l("a-row");return r(),$(I,null,[t(y,null,{header:a(()=>[t(i,{title:e.$t("menu.storage_settings"),class:"p-0"},{extra:a(()=>[t(d,{type:"primary",onClick:n.onSubmit,loading:!!(n.settingRef&&n.settingRef.loading)},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(f,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(_,null,{default:a(()=>[t(p,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(_,null,{default:a(()=>[u(s(e.$t("menu.settings")),1)]),_:1}),t(_,null,{default:a(()=>[u(s(e.$t("menu.storage_settings")),1)]),_:1})]),_:1})]),_:1}),t(P,null,{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(b)]),_:1}),t(k,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(S,null,{default:a(()=>[t(D,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[t(C,{ref:"settingRef"},null,512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Rb=W(Mb,[["render",qb]]),Kb=Z({props:["formData","verified"],components:{SendOutlined:Ia},setup(){const{addEditRequestAdmin:e,loading:o,rules:c}=be(),n=T(!1),v=T(""),h=T(""),{t:m}=ae();return{loading:o,rules:c,email:v,visible:n,showModal:()=>{n.value=!0},sendMail:()=>{h.value="",e({url:Ue("settings/email/send-test-mail"),data:{email:v.value},success:_=>{h.value="",_.status=="success"?Me.success({placement:"bottomRight",message:m("common.success"),description:m("mail_settings.test_mail_sent_successfully")}):h.value=_.message},error:_=>{h.value=""}})},handleCancel:()=>{n.value=!1,o.value=!1,v.value="",h.value="",c.value={}},errorMessage:h}}});function Vb(e,o,c,n,v,h){const m=l("SendOutlined"),d=l("a-button"),i=l("a-alert"),p=l("a-col"),_=l("a-row"),f=l("a-input"),y=l("a-form-item"),b=l("a-form"),k=l("a-modal");return r(),$(I,null,[e.formData.mail_driver=="mail"||e.formData.mail_driver=="smtp"?(r(),w(d,{key:0,onClick:e.showModal,disabled:!e.verified},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("mail_settings.send_test_mail")),1)]),_:1},8,["onClick","disabled"])):A("",!0),t(k,{open:e.visible,"onUpdate:open":o[1]||(o[1]=C=>e.visible=C),maskClosable:!1,title:e.$t("mail_settings.send_test_mail"),onCancel:e.handleCancel},{footer:a(()=>[t(d,{key:"submit",type:"primary",loading:e.loading,onClick:e.sendMail},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("common.send")),1)]),_:1},8,["loading","onClick"]),t(d,{key:"back",onClick:e.handleCancel},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(b,{layout:"vertical"},{default:a(()=>[e.errorMessage!=""?(r(),w(_,{key:0,gutter:16,class:"mb-20"},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(i,{message:e.errorMessage,type:"error","show-icon":""},null,8,["message"])]),_:1})]),_:1})):A("",!0),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(y,{label:e.$t("mail_settings.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null,class:"required"},{default:a(()=>[t(f,{value:e.email,"onUpdate:value":o[0]||(o[0]=C=>e.email=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("common.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onCancel"])],64)}const zb=W(Kb,[["render",Vb]]),Lb={components:{InfoCircleOutlined:Kt}};function Bb(e,o,c,n,v,h){const m=l("InfoCircleOutlined"),d=l("a-tooltip");return r(),w(d,null,{title:a(()=>[u(s(e.$t("mail_settings.notificaiton_will_be_sent_to_warehouse")),1)]),default:a(()=>[t(m)]),_:1})}const Wb=W(Lb,[["render",Bb]]);const jb={props:["sendMailSettings"],components:{TooltipWarehouse:Wb},setup(e){const{addEditRequestAdmin:o}=be(),{t:c}=ae(),n=T([]);return ee(()=>{n.value=e.sendMailSettings.credentials}),{settings:n,settingsChanged:h=>{o({url:Ue("settings/email/send-mail-settings"),data:{name_key:"warehouse",settings:h},success:m=>{Ee.success(c("mail_settings.send_mail_setting_saved"))}})}}}},Hb={class:"notificaiton-setting-bar"},Nb={style:{marginTop:"8px",paddingBottom:"14px"}};function Yb(e,o,c,n,v,h){const m=l("TooltipWarehouse"),d=l("a-typography-title"),i=l("a-col"),p=l("a-checkbox"),_=l("a-divider"),f=l("a-row"),y=l("a-checkbox-group"),b=l("a-card"),k=l("perfect-scrollbar");return r(),$("div",Hb,[t(k,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:a(()=>[t(b,{class:"page-content-container"},{title:a(()=>[g("div",Nb,s(e.$t("mail_settings.send_mail_for")),1)]),default:a(()=>[t(y,{value:n.settings,"onUpdate:value":o[0]||(o[0]=C=>n.settings=C),style:{width:"100%"},onChange:n.settingsChanged},{default:a(()=>[t(f,null,{default:a(()=>[t(i,{span:24,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[u(s(e.$t("menu.stock_adjustment"))+" ",1),t(m)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"stock_adjustment_create"},{default:a(()=>[u(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"stock_adjustment_update"},{default:a(()=>[u(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"stock_adjustment_delete"},{default:a(()=>[u(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[u(s(e.$t("menu.purchase_returns"))+" ",1),t(m)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"purchase_returns_create"},{default:a(()=>[u(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"purchase_returns_update"},{default:a(()=>[u(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"purchase_returns_delete"},{default:a(()=>[u(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[u(s(e.$t("menu.purchases"))+" ",1),t(m)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"purchases_create"},{default:a(()=>[u(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"purchases_update"},{default:a(()=>[u(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"purchases_delete"},{default:a(()=>[u(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[u(s(e.$t("menu.sales"))+" ",1),t(m)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_create"},{default:a(()=>[u(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_update"},{default:a(()=>[u(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_delete"},{default:a(()=>[u(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[u(s(e.$t("menu.sales_returns"))+" ",1),t(m)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_returns_create"},{default:a(()=>[u(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_returns_update"},{default:a(()=>[u(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_returns_delete"},{default:a(()=>[u(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[u(s(e.$t("menu.expenses"))+" ",1),t(m)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"expense_create"},{default:a(()=>[u(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"expense_update"},{default:a(()=>[u(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"expense_delete"},{default:a(()=>[u(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[u(s(e.$t("menu.staff_members"))+" ",1),t(m)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"staff_member_create"},{default:a(()=>[u(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"staff_member_update"},{default:a(()=>[u(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(i,{span:24,class:"mb-5"},{default:a(()=>[t(p,{value:"staff_member_delete"},{default:a(()=>[u(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_)]),_:1})]),_:1},8,["value","onChange"])]),_:1})]),_:1})])}const Gb=W(jb,[["render",Yb]]),Xb={components:{SaveOutlined:ve,TestMail:zb,SendMailSetting:Gb},setup(){const{addEditRequestAdmin:e,loading:o,rules:c}=be(),{appType:n}=X();be();const{t:v}=ae(),h=T({}),m=T(!1),d=T(""),i=T([]);return ee(()=>{axiosAdmin.get(Ue("settings/email")).then(_=>{h.value=_.data.settings,i.value=_.data.sendMailSettings,m.value=_.data.verified,d.value=_.data.verified?v("messages.stmp_success_message"):v("messages.stmp_error_message")})}),{appType:n,formData:h,rules:c,loading:o,onSubmit:()=>{e({url:Ue("settings/email/update"),data:h.value,successMessage:v("mail_settings.updated"),success:_=>{m.value=_.verified,d.value=_.verified?v("messages.stmp_success_message"):_.message}})},verified:m,verifiedMessage:d,warehouseSendMailSettings:i}}},Jb={key:0},Qb={key:0},Zb={key:1};function xb(e,o,c,n,v,h){const m=l("a-alert"),d=l("a-select-option"),i=l("a-select"),p=l("a-form-item"),_=l("a-col"),f=l("a-row"),y=l("a-input"),b=l("a-input-password"),k=l("SaveOutlined"),C=l("a-button"),D=l("TestMail"),S=l("a-space"),P=l("a-form"),F=l("a-card"),O=l("SendMailSetting");return r(),w(f,null,{default:a(()=>[t(_,{class:"settings-sidebar-content-container mt-20 mb-20",xs:24,sm:24,md:24,lg:n.appType=="saas"?24:18,xl:n.appType=="saas"?24:18},{default:a(()=>[n.formData.mail_driver=="smtp"?(r(),$("div",Jb,[n.verified?(r(),w(m,{key:0,description:n.verifiedMessage,type:"success","show-icon":""},null,8,["description"])):(r(),w(m,{key:1,description:n.verifiedMessage,type:"error","show-icon":""},null,8,["description"]))])):A("",!0),t(F,{class:"settings-sidebar-content-container"},{default:a(()=>[t(P,{layout:"vertical"},{default:a(()=>[t(f,{gutter:16},{default:a(()=>[t(_,{span:24},{default:a(()=>[t(p,{label:e.$t("mail_settings.mail_driver"),name:"mail_driver",help:n.rules.mail_driver?n.rules.mail_driver.message:null,validateStatus:n.rules.mail_driver?"error":null},{default:a(()=>[t(i,{value:n.formData.mail_driver,"onUpdate:value":o[0]||(o[0]=E=>n.formData.mail_driver=E),placeholder:e.$t("common.select_default_text",[e.$t("mail_settings.mail_driver")])},{default:a(()=>[t(d,{key:"none",value:"none"},{default:a(()=>[u(s(e.$t("mail_settings.none")),1)]),_:1}),t(d,{key:"smtp",value:"smtp"},{default:a(()=>[u(s(e.$t("mail_settings.smtp")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),n.formData.mail_driver=="mail"||n.formData.mail_driver=="smtp"?(r(),$("div",Qb,[t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(p,{label:e.$t("mail_settings.from_name"),name:"from_name",help:n.rules.from_name?n.rules.from_name.message:null,validateStatus:n.rules.from_name?"error":null,class:"required"},{default:a(()=>[t(y,{value:n.formData.from_name,"onUpdate:value":o[1]||(o[1]=E=>n.formData.from_name=E),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.from_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(p,{label:e.$t("mail_settings.from_email"),name:"from_email",help:n.rules.from_email?n.rules.from_email.message:null,validateStatus:n.rules.from_email?"error":null,class:"required"},{default:a(()=>[t(y,{value:n.formData.from_email,"onUpdate:value":o[2]||(o[2]=E=>n.formData.from_email=E),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.from_email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})])):A("",!0),n.formData.mail_driver=="smtp"?(r(),$("div",Zb,[t(f,{gutter:16},{default:a(()=>[n.formData.mail_driver=="smtp"?(r(),w(_,{key:0,xs:24,sm:24,md:24,lg:n.formData.mail_driver=="smtp"?12:24},{default:a(()=>[t(p,{label:e.$t("mail_settings.enable_mail_queue"),name:"enable_mail_queue",help:n.rules.enable_mail_queue?n.rules.enable_mail_queue.message:null,validateStatus:n.rules.enable_mail_queue?"error":null,class:"required"},{default:a(()=>[t(i,{value:n.formData.enable_mail_queue,"onUpdate:value":o[3]||(o[3]=E=>n.formData.enable_mail_queue=E),placeholder:e.$t("common.select_default_text",[e.$t("mail_settings.enable_mail_queue")]),allowClear:!0},{default:a(()=>[t(d,{key:"yes",value:"yes"},{default:a(()=>[u(s(e.$t("common.yes")),1)]),_:1}),t(d,{key:"no",value:"no"},{default:a(()=>[u(s(e.$t("common.no")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["lg"])):A("",!0),n.formData.mail_driver=="smtp"?(r(),w(_,{key:1,xs:24,sm:24,md:24,lg:n.formData.mail_driver=="smtp"?12:24},{default:a(()=>[t(p,{label:e.$t("mail_settings.host"),name:"host",help:n.rules.host?n.rules.host.message:null,validateStatus:n.rules.host?"error":null,class:"required"},{default:a(()=>[t(y,{value:n.formData.host,"onUpdate:value":o[4]||(o[4]=E=>n.formData.host=E),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.host")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1},8,["lg"])):A("",!0)]),_:1}),t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(p,{label:e.$t("mail_settings.port"),name:"port",help:n.rules.port?n.rules.port.message:null,validateStatus:n.rules.port?"error":null,class:"required"},{default:a(()=>[t(y,{value:n.formData.port,"onUpdate:value":o[5]||(o[5]=E=>n.formData.port=E),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.port")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(p,{label:e.$t("mail_settings.encryption"),name:"encryption",help:n.rules.encryption?n.rules.encryption.message:null,validateStatus:n.rules.encryption?"error":null},{default:a(()=>[t(i,{value:n.formData.encryption,"onUpdate:value":o[6]||(o[6]=E=>n.formData.encryption=E),placeholder:e.$t("common.select_default_text",[e.$t("mail_settings.encryption")]),allowClear:!0},{default:a(()=>[t(d,{key:"tls",value:"tls"},{default:a(()=>[...o[9]||(o[9]=[u(" tls ",-1)])]),_:1}),t(d,{key:"ssl",value:"ssl"},{default:a(()=>[...o[10]||(o[10]=[u(" ssl ",-1)])]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(p,{label:e.$t("mail_settings.username"),name:"username",help:n.rules.username?n.rules.username.message:null,validateStatus:n.rules.username?"error":null,class:"required"},{default:a(()=>[t(y,{value:n.formData.username,"onUpdate:value":o[7]||(o[7]=E=>n.formData.username=E),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.username")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(_,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(p,{label:e.$t("mail_settings.password"),name:"password",help:n.rules.password?n.rules.password.message:null,validateStatus:n.rules.password?"error":null,class:"required"},{default:a(()=>[t(b,{value:n.formData.password,"onUpdate:value":o[8]||(o[8]=E=>n.formData.password=E),placeholder:e.$t("common.placeholder_default_text",[e.$t("mail_settings.password")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})])):A("",!0),t(f,{gutter:16},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(p,null,{default:a(()=>[t(S,null,{default:a(()=>[t(C,{type:"primary",onClick:n.onSubmit,loading:n.loading},{icon:a(()=>[t(k)]),default:a(()=>[u(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick","loading"]),t(D,{formData:n.formData,verified:n.verified},null,8,["formData","verified"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["lg","xl"]),n.appType=="non-saas"?(r(),w(_,{key:0,class:"settings-sidebar-content-container mt-20 mb-20",xs:24,sm:24,md:24,lg:6,xl:6},{default:a(()=>[n.warehouseSendMailSettings&&n.warehouseSendMailSettings.xid?(r(),w(O,{key:0,sendMailSettings:n.warehouseSendMailSettings},null,8,["sendMailSettings"])):A("",!0)]),_:1})):A("",!0)]),_:1})}const ek=W(Xb,[["render",xb]]),tk={components:{SettingSidebar:je,AdminPageHeader:ge,EmailSettings:ek,SaveOutlined:ve},setup(){const e=T(null);return{onSubmit:()=>{e.value.onSubmit()},settingRef:e}}};function ak(e,o,c,n,v,h){const m=l("SaveOutlined"),d=l("a-button"),i=l("a-page-header"),p=l("router-link"),_=l("a-breadcrumb-item"),f=l("a-breadcrumb"),y=l("AdminPageHeader"),b=l("SettingSidebar"),k=l("a-col"),C=l("EmailSettings"),D=l("admin-page-table-content"),S=l("a-row");return r(),$(I,null,[t(y,null,{header:a(()=>[t(i,{title:e.$t("menu.email_settings"),class:"p-0"},{extra:a(()=>[t(d,{type:"primary",onClick:n.onSubmit,loading:!!(n.settingRef&&n.settingRef.loading)},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(f,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(_,null,{default:a(()=>[t(p,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(_,null,{default:a(()=>[u(s(e.$t("menu.settings")),1)]),_:1}),t(_,null,{default:a(()=>[u(s(e.$t("menu.email_settings")),1)]),_:1})]),_:1})]),_:1}),t(S,null,{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(b)]),_:1}),t(k,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(D,null,{default:a(()=>[t(C,{ref:"settingRef"},null,512)]),_:1})]),_:1})]),_:1})],64)}const nk=W(tk,[["render",ak]]),ok=()=>{const e=Ue("database-backups"),{t:o}=ae(),c=[{title:o("database_backup.file"),dataIndex:"name"},{title:o("database_backup.file_size"),dataIndex:"size"},{title:o("common.action"),dataIndex:"action"}];return{url:e,columns:c}},lk={components:{PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,ExclamationCircleOutlined:Ae},setup(){const{t:e}=ae(),{url:o,columns:c}=ok(),n=T([]);return ee(()=>{axiosAdmin.post(Ue("database-backups")).then(m=>{n.value=m.data.data})}),{columns:c,results:n,deleteBackup:m=>{Le.confirm({title:e("database_backup.delete_backup"),icon:t(Ae),content:e("database_backup.are_you_sure_delete_backup"),okText:e("common.yes"),okType:"danger",cancelText:e("common.no"),onOk(){axiosAdmin.post(Ue("delete-backup"),{file_name:m}).then(d=>{n.value=d.data.data})},onCancel(){}})},backupCreated:m=>{n.value=m.data}}}},sk={class:"table-responsive mt-20"};function rk(e,o,c,n,v,h){const m=l("a-col"),d=l("a-row"),i=l("admin-page-filters"),p=l("a-alert"),_=l("a-typography-link"),f=l("a-button"),y=l("a-space"),b=l("a-table"),k=l("admin-page-table-content");return r(),$(I,null,[t(i,null,{default:a(()=>[t(d,{gutter:[16,16]},{default:a(()=>[t(m,{span:24},{default:a(()=>[ie(e.$slots,"actionButtons")]),_:3})]),_:3})]),_:3}),t(k,null,{default:a(()=>[t(d,{class:"mt-20"},{default:a(()=>[t(m,{span:24},{default:a(()=>[t(p,{type:"warning",showIcon:"",message:e.$t("database_backup.backup_locaion_is")},null,8,["message"]),g("div",sk,[t(b,{columns:n.columns,"row-key":C=>C.id,"data-source":n.results,pagination:!1,bordered:"",size:"middle"},{bodyCell:a(({column:C,record:D})=>[C.dataIndex=="action"?(r(),w(y,{key:0},{default:a(()=>[t(_,{href:D.url,target:"_blank"},{default:a(()=>[u(s(e.$t("common.download")),1)]),_:1},8,["href"]),t(f,{type:"link",onClick:S=>n.deleteBackup(D.name)},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["onClick"])]),_:2},1024)):A("",!0)]),_:1},8,["columns","row-key","data-source"])])]),_:1})]),_:1})]),_:1})],64)}const dk=W(lk,[["render",rk]]),ik=Z({emits:["success"],components:{PlusOutlined:le,ExclamationCircleOutlined:Ae},setup(e,{emit:o}){const{t:c}=ae(),{addEditRequestAdmin:n,loading:v}=be();return{generateBack:()=>{Le.confirm({title:c("database_backup.generate_backup"),icon:t(Ae),content:c("database_backup.are_you_sure_generate_backup"),okText:c("common.yes"),okType:"danger",cancelText:c("common.no"),onOk(){n({url:Ue("generate-backups"),data:{},successMessage:c("database_backup.backup_generated_successfully"),success:m=>{o("success",m)}})},onCancel(){}})},loading:v}}});function uk(e,o,c,n,v,h){const m=l("PlusOutlined"),d=l("a-button");return r(),w(d,{type:"primary",onClick:e.generateBack,loading:e.loading},{default:a(()=>[t(m),u(" "+s(e.$t("database_backup.generate_backup")),1)]),_:1},8,["onClick","loading"])}const mk=W(ik,[["render",uk]]),ck=Z({components:{PlusOutlined:le,LoadingOutlined:Oe,SaveOutlined:ve,SettingOutlined:St},setup(){const e=T(!1);return{visible:e,onClose:()=>{e.value=!1},openDrawer:()=>{e.value=!0},drawerWidth:window.innerWidth<=991?"90%":"35%"}}});function pk(e,o,c,n,v,h){const m=l("SettingOutlined"),d=l("a-button"),i=l("a-alert"),p=l("a-col"),_=l("a-row"),f=l("a-typography-text"),y=l("a-typography-paragraph"),b=l("a-drawer");return r(),$(I,null,[t(d,{type:"primary",onClick:e.openDrawer},{icon:a(()=>[t(m)]),default:a(()=>[u(" "+s(e.$t("database_backup.settings")),1)]),_:1},8,["onClick"]),t(b,{title:e.$t("database_backup.backup_command_setting"),width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},maskClosable:!1,onClose:e.onClose},{footer:a(()=>[t(d,{onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(_,{gutter:16,class:"mb-10"},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(i,{type:"warning",showIcon:"",message:e.$t("database_backup.put_dump_path_command_on_env_file")},null,8,["message"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{span:24},{default:a(()=>[t(y,null,{default:a(()=>[g("blockquote",null,[t(f,{type:"warning"},{default:a(()=>[u(s(e.$t("database_backup.window_command_path")),1)]),_:1})]),g("blockquote",null,[t(f,{type:"warning"},{default:a(()=>[u(s(e.$t("database_backup.laragon_command_path")),1)]),_:1})]),g("blockquote",null,[t(f,{type:"warning"},{default:a(()=>[u(s(e.$t("database_backup.linux_command_path")),1)]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","open","onClose"])],64)}const _k=W(ck,[["render",pk]]),fk={components:{SettingSidebar:je,AdminPageHeader:ge,DatabaseSettings:dk,GenerateDbBackup:mk,BackupCommandSetting:_k},setup(){const e=T(null);return{backupCreated:c=>{e.value.backupCreated(c)},settingRef:e}}};function gk(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("SettingSidebar"),y=l("a-col"),b=l("GenerateDbBackup"),k=l("BackupCommandSetting"),C=l("a-space"),D=l("DatabaseSettings"),S=l("a-row");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.database_backup"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.settings")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.database_backup")),1)]),_:1})]),_:1})]),_:1}),t(S,null,{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(y,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(D,{ref:"settingRef"},{actionButtons:a(()=>[t(C,null,{default:a(()=>[t(b,{onSuccess:n.backupCreated},null,8,["onSuccess"]),t(k)]),_:1})]),_:1},512)]),_:1})]),_:1})],64)}const yk=W(fk,[["render",gk]]),hk=Z({components:{SyncOutlined:Ct},setup(){const e=T([]),o=Kl,{t:c}=ae(),n=T("fetching"),v=T([]),h=ke(),m=[{title:c("update_app.name"),dataIndex:"name",width:"40%"},{title:c("update_app.value"),dataIndex:"value"}];return ee(()=>{axiosAdmin(Ue("update-app")).then(i=>{const p=i.data.app_version;e.value=i.data.app_details,_t.post("https://envato.codeifly.com/product",{verified_name:window.config.product_name,domain:window.location.host}).then(_=>{v.value=_.data,v.value.product.other_domain_verified?Le.confirm({title:c("update_app.verify_failed"),icon:t(Ae),content:c("update_app.verified_with_other_domain"),okText:c("update_app.verify_again"),okType:"danger",cancelButtonProps:{disabled:!0},onOk(){h.dispatch("auth/logoutToRootUrl")}}):v.value.product.verified?v.value.product.version!=p?n.value="update_available":n.value="success":Le.confirm({title:c("update_app.verify_failed"),icon:t(Ae),content:c("update_app.verify_failed_message"),okText:c("update_app.verify_again"),okType:"danger",cancelButtonProps:{disabled:!0},onOk(){h.dispatch("auth/logoutToRootUrl")}})})})}),{tableColumns:m,appDetails:e,vueVersion:o,productStatus:n,product:v,updateApp:()=>{Le.confirm({title:c("common.install"),icon:t(Ae),content:c("messages.are_you_sure_install_message"),okText:c("common.yes"),okType:"danger",cancelText:c("common.no"),onOk(){installUpdateModalTitle.value=c("common.installing")+"...",emit("install",props.module.verified_name),installUpdateModalVisible.value=!0},onCancel(){}})}}}}),vk=["innerHTML"],bk={class:"table-responsive mt-10"},kk={key:1},wk={key:0},Ck={key:1};function Sk(e,o,c,n,v,h){const m=l("SyncOutlined"),d=l("a-alert"),i=l("a-typography-title"),p=l("a-table"),_=l("a-col"),f=l("a-row"),y=l("a-card");return r(),w(y,{class:"page-content-container mt-20 mb-20"},{default:a(()=>[t(f,{class:"mt-20"},{default:a(()=>[t(_,{span:24},{default:a(()=>[e.productStatus=="fetching"?(r(),w(d,{key:0,type:"info",showIcon:"",message:e.$t("messages.fetching_product_details")},{icon:a(()=>[t(m,{spin:""})]),default:a(()=>[g("span",{innerHTML:e.$t("messages.fetching_product_details")},null,8,vk)]),_:1},8,["message"])):A("",!0),e.productStatus=="success"?(r(),w(d,{key:1,type:"success",showIcon:"",message:e.$t("messages.product_is_upto_date")},null,8,["message"])):A("",!0),e.productStatus=="update_available"?(r(),w(d,{key:2,type:"warning",showIcon:"",message:e.$t("messages.new_app_version_avaialbe",[e.product.product.version])},null,8,["message"])):A("",!0),g("div",bk,[t(p,{columns:e.tableColumns,"row-key":b=>b.id,"data-source":e.appDetails,pagination:!1,showHeader:!1},{bodyCell:a(({column:b,record:k})=>[b.dataIndex=="name"?(r(),$(I,{key:0},[k.name=="app_details"?(r(),w(i,{key:0,level:5,strong:""},{default:a(()=>[u(s(e.$t("update_app.app_details")),1)]),_:1})):(r(),$("span",kk,s(e.$t(`update_app.${k.name}`)),1))],64)):A("",!0),b.dataIndex=="value"?(r(),$(I,{key:1},[k.name=="vue_version"?(r(),$("span",wk,s(e.vueVersion),1)):(r(),$("span",Ck,s(k.value),1))],64)):A("",!0)]),_:1},8,["columns","row-key","data-source"])])]),_:1})]),_:1})]),_:1})}const $k=W(hk,[["render",Sk]]),Dk=Z({props:["productStatus","product"],components:{DownloadOutlined:Ot,ShoppingCartOutlined:$t,ReloadOutlined:to,SyncOutlined:Ct,CheckCircleOutlined:Ra,InfoOutlined:ao,CheckOutlined:ht},setup(e,{emit:o}){const c=window.config.app_env,{t:n}=ae(),v=T(!1),h=T(""),m=T(!1),d=T(""),i=T(0),p=ke();var _;const f=()=>{Le.confirm({title:n("common.update"),icon:t(Ae),content:t("div",{style:"color:red;"},n("messages.are_you_sure_update_message")),okText:n("common.yes"),okType:"danger",cancelText:n("common.no"),onOk(){h.value=n("common.updating")+"...",y(e.product.name),v.value=!0},onCancel(){}})},y=C=>{m.value=!0,i.value=0,d.value="";const D={verified_name:C,domain:window.location.host};_=window.setInterval(function(){b()},1500),axiosAdmin.post(Ue("update-app/update"),D).then(S=>{m.value=!1,i.value=100,d.value="started";const P={...D,file_name:S.data.file_name};axiosAdmin.post(Ue("update-app/extract"),P).then(F=>{d.value="completed",_t.post("https://envato.codeifly.com/version-update",{verified_name:F.data.verified_name,version:F.data.version,domain:window.location.host}),p.commit("auth/updateActiveModules",F.data.enabled_modules),window.config.modules=F.data.enabled_modules,window.config.installed_modules=F.data.installed_modules}).catch(F=>{d.value="failed"})}).catch(S=>{m.value=!1,i.value=0,clearInterval(_)})},b=()=>{axiosAdmin(Ue("update-app/download-percentage")).then(C=>{i.value=parseInt(C.data.percentage),i.value>=100&&clearInterval(_)})};return{appEnv:c,updateApp:f,installUpdateModalVisible:v,closeInstallUpdateModal:()=>{v.value=!1,p.dispatch("auth/logoutToRootUrl")},downloadPercentage:i,downloading:m,extracting:d}}});function Ak(e,o,c,n,v,h){const m=l("SyncOutlined"),d=l("a-button"),i=l("a-typography-text"),p=l("CheckCircleOutlined"),_=l("a-progress"),f=l("a-col"),y=l("a-row"),b=l("InfoOutlined"),k=l("CheckOutlined"),C=l("a-modal");return r(),$(I,null,[e.productStatus=="update_available"&&e.appEnv=="envato"?(r(),w(d,{key:0,type:"primary",onClick:e.updateApp},{default:a(()=>[t(m),u(" "+s(e.$t("update_app.update_app")),1)]),_:1},8,["onClick"])):A("",!0),t(C,{open:e.installUpdateModalVisible,"onUpdate:open":o[0]||(o[0]=D=>e.installUpdateModalVisible=D),title:e.$t("common.installing"),maskClosable:!1,closable:!1,footer:null},{default:a(()=>[t(y,{class:"mb-10"},{default:a(()=>[t(f,{span:24},{default:a(()=>[e.downloadPercentage<100?(r(),w(i,{key:0},{default:a(()=>[t(m,{spin:""}),u(" "+s(e.$t("messages.downloading_started_message")),1)]),_:1})):(r(),w(i,{key:1,strong:"",type:"success"},{default:a(()=>[t(p),u(" "+s(e.$t("module.downloading_completed")),1)]),_:1})),e.downloadPercentage<100?(r(),w(_,{key:2,percent:e.downloadPercentage},null,8,["percent"])):A("",!0)]),_:1})]),_:1}),t(y,{class:"mb-10"},{default:a(()=>[t(f,{span:24},{default:a(()=>[e.extracting==""?(r(),w(i,{key:0,type:"secondary"},{default:a(()=>[t(b),u(" "+s(e.$t("module.extract_zip_file")),1)]),_:1})):A("",!0),e.extracting=="started"?(r(),w(i,{key:1},{default:a(()=>[t(m,{spin:""}),u(" "+s(e.$t("messages.file_extracting_message")),1)]),_:1})):A("",!0),e.extracting=="completed"?(r(),w(i,{key:2,strong:"",type:"success"},{default:a(()=>[t(p),u(" "+s(e.$t("module.file_extracted")),1)]),_:1})):A("",!0)]),_:1})]),_:1}),e.extracting=="completed"?(r(),w(y,{key:0,class:"mt-20 mb-10"},{default:a(()=>[t(f,{span:24},{default:a(()=>[t(d,{type:"primary",onClick:e.closeInstallUpdateModal,block:""},{default:a(()=>[t(k),u(" "+s(e.$t("messages.installation_success")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})):A("",!0)]),_:1},8,["open","title"])],64)}const Tk=W(Dk,[["render",Ak]]),Ek={components:{SettingSidebar:je,AdminPageHeader:ge,UpdateAppSettings:$k,InstallApp:Tk},setup(){return{settingRef:T(null)}}};function Ok(e,o,c,n,v,h){const m=l("InstallApp"),d=l("a-page-header"),i=l("router-link"),p=l("a-breadcrumb-item"),_=l("a-breadcrumb"),f=l("AdminPageHeader"),y=l("SettingSidebar"),b=l("a-col"),k=l("UpdateAppSettings"),C=l("admin-page-table-content"),D=l("a-row");return r(),$(I,null,[t(f,null,{header:a(()=>[t(d,{title:e.$t("menu.update_app"),class:"p-0"},{extra:a(()=>[n.settingRef?(r(),w(m,{key:0,productStatus:n.settingRef.productStatus,product:n.settingRef.product.product},null,8,["productStatus","product"])):A("",!0)]),_:1},8,["title"])]),breadcrumb:a(()=>[t(_,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(p,null,{default:a(()=>[t(i,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(p,null,{default:a(()=>[u(s(e.$t("menu.settings")),1)]),_:1}),t(p,null,{default:a(()=>[u(s(e.$t("menu.update_app")),1)]),_:1})]),_:1})]),_:1}),t(D,null,{default:a(()=>[t(b,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(y)]),_:1}),t(b,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(C,null,{default:a(()=>[t(k,{ref:"settingRef"},null,512)]),_:1})]),_:1})]),_:1})],64)}const Ik=W(Ek,[["render",Ok]]),At=window.config.app_type,Xt=At=="non-saas"?"admin":"superadmin",Pk=[{path:"translations",component:ob,name:`${Xt}.settings.translations.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"translations",permission:At=="non-saas"?"translations_view":"superadmin"}},{path:"modules",component:Ob,name:`${Xt}.settings.modules.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"modules",permission:At=="non-saas"?"modules_view":"superadmin"}},{path:"storage",component:Rb,name:`${Xt}.settings.storage.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"storage_settings",permission:At=="non-saas"?"storage_edit":"superadmin"}},{path:"email",component:nk,name:`${Xt}.settings.email.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"email_settings",permission:At=="non-saas"?"email_edit":"superadmin"}},{path:"database-backup",component:yk,name:"admin.settings.database_backup.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"database_backup",permission:At=="non-saas"?"database_backup":"superadmin"}},{path:"update-app",component:Ik,name:`${Xt}.settings.update_app.index`,meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"update_app",permission:At=="non-saas"?"update_app":"superadmin"}}],Uk={components:{InfoCircleOutlined:Kt}};function Fk(e,o,c,n,v,h){const m=l("InfoCircleOutlined"),d=l("a-tooltip");return r(),w(d,null,{title:a(()=>[u(s(e.$t("mail_settings.notificaiton_will_be_sent_to_warehouse")),1)]),default:a(()=>[t(m)]),_:1})}const Mk=W(Uk,[["render",Fk]]);const qk={props:["sendMailSettings"],components:{TooltipWarehouse:Mk},setup(e){const{addEditRequestAdmin:o}=be(),{t:c}=ae(),n=T([]);return ee(()=>{n.value=e.sendMailSettings.credentials}),{settings:n,settingsChanged:h=>{o({url:"settings/email/send-mail-settings",data:{name_key:"warehouse",settings:h},success:m=>{Ee.success(c("mail_settings.send_mail_setting_saved"))}})}}}},Rk={class:"notificaiton-setting-bar"},Kk={style:{marginTop:"8px",paddingBottom:"14px"}};function Vk(e,o,c,n,v,h){const m=l("TooltipWarehouse"),d=l("a-typography-title"),i=l("a-col"),p=l("a-checkbox"),_=l("a-divider"),f=l("a-row"),y=l("a-checkbox-group"),b=l("a-card"),k=l("perfect-scrollbar");return r(),$("div",Rk,[t(k,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:a(()=>[t(b,{class:"page-content-container"},{title:a(()=>[g("div",Kk,s(e.$t("mail_settings.send_mail_for")),1)]),default:a(()=>[t(y,{value:n.settings,"onUpdate:value":o[0]||(o[0]=C=>n.settings=C),style:{width:"100%",display:"inline-block"},onChange:n.settingsChanged},{default:a(()=>[t(f,null,{default:a(()=>[t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[u(s(e.$t("menu.stock_adjustment"))+" ",1),t(m)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"stock_adjustment_create"},{default:a(()=>[u(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"stock_adjustment_update"},{default:a(()=>[u(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"stock_adjustment_delete"},{default:a(()=>[u(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_)]),_:1}),t(f,null,{default:a(()=>[t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[u(s(e.$t("menu.purchase_returns"))+" ",1),t(m)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"purchase_returns_create"},{default:a(()=>[u(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"purchase_returns_update"},{default:a(()=>[u(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"purchase_returns_delete"},{default:a(()=>[u(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_)]),_:1}),t(f,null,{default:a(()=>[t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[u(s(e.$t("menu.purchases"))+" ",1),t(m)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"purchases_create"},{default:a(()=>[u(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"purchases_update"},{default:a(()=>[u(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"purchases_delete"},{default:a(()=>[u(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_)]),_:1}),t(f,null,{default:a(()=>[t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[u(s(e.$t("menu.sales"))+" ",1),t(m)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_create"},{default:a(()=>[u(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_update"},{default:a(()=>[u(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_delete"},{default:a(()=>[u(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_)]),_:1}),t(f,null,{default:a(()=>[t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[u(s(e.$t("menu.sales_returns"))+" ",1),t(m)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_returns_create"},{default:a(()=>[u(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_returns_update"},{default:a(()=>[u(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"sales_returns_delete"},{default:a(()=>[u(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_)]),_:1}),t(f,null,{default:a(()=>[t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[u(s(e.$t("menu.expenses"))+" ",1),t(m)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"expense_create"},{default:a(()=>[u(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"expense_update"},{default:a(()=>[u(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"expense_delete"},{default:a(()=>[u(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_)]),_:1}),t(f,null,{default:a(()=>[t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(d,{level:5},{default:a(()=>[u(s(e.$t("menu.staff_members"))+" ",1),t(m)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"staff_member_create"},{default:a(()=>[u(s(e.$t("common.on_create")),1)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"staff_member_update"},{default:a(()=>[u(s(e.$t("common.on_update")),1)]),_:1})]),_:1}),t(i,{xs:24,sm:24,md:6,lg:4,xl:4,class:"mb-5"},{default:a(()=>[t(p,{value:"staff_member_delete"},{default:a(()=>[u(s(e.$t("common.on_delete")),1)]),_:1})]),_:1}),t(_)]),_:1})]),_:1},8,["value","onChange"])]),_:1})]),_:1})])}const zk=W(qk,[["render",Vk]]),Lk={components:{SaveOutlined:ve,SettingSidebar:je,AdminPageHeader:ge,SendMailSetting:zk},setup(){const e=T([]);return ee(()=>{axiosAdmin.get("settings/email").then(o=>{e.value=o.data.sendMailSettings})}),{warehouseSendMailSettings:e}}};function Bk(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("SettingSidebar"),y=l("a-col"),b=l("SendMailSetting"),k=l("admin-page-table-content"),C=l("a-row");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.email_settings"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.settings")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.email_settings")),1)]),_:1})]),_:1})]),_:1}),t(C,null,{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(y,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(C,{class:"mt-20 mb-20"},{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:24,xl:24},{default:a(()=>[t(k,null,{default:a(()=>[n.warehouseSendMailSettings&&n.warehouseSendMailSettings.xid?(r(),w(b,{key:0,sendMailSettings:n.warehouseSendMailSettings},null,8,["sendMailSettings"])):A("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const Wk=W(Lk,[["render",Bk]]),jk=window.config.app_type,Hk=jk=="saas"?[{path:"email",component:Wk,name:"admin.settings.email.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"email_settings",permission:"email_edit"}}]:[...Pk],Nk=()=>{const{t:e}=ae(),o="payment-providers?fields=id,xid,name,is_active,payment_mode_name",c="payment-providers",n={name:"",code:"",payment_mode_id:null,env:"sandbox",is_active:!0,priority:1,config:{}},v=[{title:e("payment_provider.name"),dataIndex:"name"},{title:e("payment_provider.code"),dataIndex:"code"},{title:e("payment_provider.payment_mode"),dataIndex:"payment_mode_id"},{title:e("payment_provider.environment"),dataIndex:"env"},{title:e("common.status"),dataIndex:"is_active"},{title:e("common.action"),dataIndex:"action",width:120}],h=[{key:"name",value:e("payment_provider.name")},{key:"code",value:e("payment_provider.code")}];return{url:o,addEditUrl:c,initData:n,columns:v,filterableColumns:h}};const Yk=Z({name:"PaymentProviderModal",components:{SaveOutlined:ve},props:{visible:Boolean,formData:Object,url:String,addEditType:String,pageTitle:String,successMessage:String},setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n,rules:v}=be(),h={mpesa:[{key:"transaction_type",label:"MPESA Transaction Type",type:"select",required:!0,options:[{label:"Paybill",value:"paybill"},{label:"Till Number",value:"till"}]},{key:"consumer_key",label:"Consumer Key",type:"password",required:!0},{key:"consumer_secret",label:"Consumer Secret",type:"password",required:!0},{key:"shortcode",label:"Business Shortcode",type:"text",required:!0},{key:"passkey",label:"Passkey",type:"password",required:!0},{key:"callback_url",label:"Callback URL",type:"url",required:!0}],stripe:[{key:"public_key",label:"Public Key",type:"text",required:!0},{key:"secret_key",label:"Secret Key",type:"password",required:!0},{key:"webhook_secret",label:"Webhook Secret",type:"password",required:!1}],paystack:[{key:"public_key",label:"Public Key",type:"text",required:!0},{key:"secret_key",label:"Secret Key",type:"password",required:!0}],bank:[{key:"client_id",label:"Client ID",type:"text",required:!0},{key:"client_secret",label:"Client Secret",type:"password",required:!0},{key:"base_url",label:"API Base URL",type:"url",required:!0},{key:"account_number",label:"Account Number",type:"text",required:!0}]},m=pe(()=>h[e.formData.code]||[]);ue(()=>e.formData.code,()=>{e.formData.config=e.formData.config||{}});const d=pe(()=>m.value.filter(b=>{var k;return b.requiredIf?((k=e.formData.config)==null?void 0:k.transaction_type)===b.requiredIf:!0})),i=b=>{var k;return b.requiredIf&&((k=e.formData.config)==null?void 0:k.transaction_type)===b.requiredIf},p=T([]);ee(async()=>{p.value=await f()});const _=()=>{c({url:e.url,data:e.formData,successMessage:e.successMessage,success:b=>{o("addEditSuccess",b.xid)}})},f=async()=>{try{const b=await _t.get("/api/v1/payment-modes",{params:{fields:"id,xid,name,mode_type"}});return b.data.data||b.data}catch(b){return console.error("Failed to fetch payment modes",b),[]}};return{loading:n,rules:v,providerSchemas:h,currentSchema:m,onSubmit:_,onClose:()=>{v.value={},o("closed")},currentSchema:m,paymentModes:p,visibleSchema:d,isRequiredIf:i}}});function Gk(e,o,c,n,v,h){const m=l("a-select-option"),d=l("a-select"),i=l("a-form-item"),p=l("a-input"),_=l("a-col"),f=l("a-row"),y=l("a-radio-button"),b=l("a-radio-group"),k=l("a-input-number"),C=l("a-switch"),D=l("a-divider"),S=l("a-alert"),P=l("a-input-password"),F=l("a-form"),O=l("a-button"),E=l("SaveOutlined"),U=l("a-modal");return r(),w(U,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,width:"800px",onOk:e.onSubmit},{footer:a(()=>[t(O,{onClick:e.onClose},{default:a(()=>[...o[9]||(o[9]=[u(" Cancel ",-1)])]),_:1},8,["onClick"]),t(O,{type:"primary",loading:e.loading,onClick:e.onSubmit},{default:a(()=>[t(E),u(" "+s(e.addEditType==="add"?"Create":"Update"),1)]),_:1},8,["loading","onClick"])]),default:a(()=>[t(F,{layout:"vertical"},{default:a(()=>[t(i,{label:"Payment Mode",class:"required"},{default:a(()=>[t(d,{value:e.formData.payment_mode_id,"onUpdate:value":o[0]||(o[0]=K=>e.formData.payment_mode_id=K)},{default:a(()=>[(r(!0),$(I,null,G(e.paymentModes,K=>(r(),w(m,{key:K.xid,value:K.xid},{default:a(()=>[u(s(K.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),t(f,{gutter:16},{default:a(()=>[t(_,{span:12},{default:a(()=>[t(i,{label:"Provider Name",class:"required"},{default:a(()=>[t(p,{value:e.formData.name,"onUpdate:value":o[1]||(o[1]=K=>e.formData.name=K),placeholder:"e.g Stripe, Mpesa"},null,8,["value"])]),_:1})]),_:1}),t(_,{span:12},{default:a(()=>[t(i,{label:"Provider Code",class:"required"},{default:a(()=>[t(d,{value:e.formData.code,"onUpdate:value":o[2]||(o[2]=K=>e.formData.code=K),placeholder:"Select provider"},{default:a(()=>[(r(!0),$(I,null,G(e.providerSchemas,(K,z)=>(r(),w(m,{key:z,value:z},{default:a(()=>[u(s(z.toUpperCase()),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(f,{gutter:16},{default:a(()=>[t(_,{span:12},{default:a(()=>[t(i,{label:"Environment"},{default:a(()=>[t(b,{value:e.formData.mode_type,"onUpdate:value":o[3]||(o[3]=K=>e.formData.mode_type=K),"button-style":"solid"},{default:a(()=>[t(y,{value:"sandbox"},{default:a(()=>[...o[6]||(o[6]=[u("Sandbox",-1)])]),_:1}),t(y,{value:"live"},{default:a(()=>[...o[7]||(o[7]=[u("Live",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(_,{span:12},{default:a(()=>[t(i,{label:"Priority"},{default:a(()=>[t(k,{value:e.formData.priority,"onUpdate:value":o[4]||(o[4]=K=>e.formData.priority=K),min:1,style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(i,{label:"Active"},{default:a(()=>[t(C,{checked:e.formData.is_active,"onUpdate:checked":o[5]||(o[5]=K=>e.formData.is_active=K)},null,8,["checked"])]),_:1}),t(D,{orientation:"left"},{default:a(()=>[...o[8]||(o[8]=[u("Provider Configuration",-1)])]),_:1}),e.currentSchema.length?A("",!0):(r(),w(S,{key:0,type:"info","show-icon":"",message:"Select a provider to configure credentials",class:"mb-3"})),e.currentSchema.length?(r(),w(f,{key:1,gutter:16},{default:a(()=>[(r(!0),$(I,null,G(e.visibleSchema,K=>(r(),w(_,{key:K.key,span:12},{default:a(()=>[t(i,{label:K.label,class:kt({required:K.required||e.isRequiredIf(K)})},{default:a(()=>[K.type==="text"||K.type==="url"?(r(),w(p,{key:0,value:e.formData.config[K.key],"onUpdate:value":z=>e.formData.config[K.key]=z},null,8,["value","onUpdate:value"])):K.type==="password"?(r(),w(P,{key:1,value:e.formData.config[K.key],"onUpdate:value":z=>e.formData.config[K.key]=z},null,8,["value","onUpdate:value"])):K.type==="select"?(r(),w(d,{key:2,value:e.formData.config[K.key],"onUpdate:value":z=>e.formData.config[K.key]=z},{default:a(()=>[(r(!0),$(I,null,G(K.options,z=>(r(),w(m,{key:z.value,value:z.value},{default:a(()=>[u(s(z.label),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["value","onUpdate:value"])):A("",!0)]),_:2},1032,["label","class"])]),_:2},1024))),128))]),_:1})):A("",!0)]),_:1})]),_:1},8,["open","title","onOk"])}const Xk=W(Yk,[["render",Gk],["__scopeId","data-v-cb4e13fd"]]),Jk={components:{PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,AddEdit:Xk,SettingSidebar:je,AdminPageHeader:ge},setup(){const{permsArray:e}=X(),{url:o,addEditUrl:c,initData:n,columns:v,filterableColumns:h}=Nk(),m=Ve();return ee(()=>{m.tableUrl.value={url:o},m.table.filterableColumns=h,m.fetch({page:1}),m.crudUrl.value=c,m.langKey.value="payment_provider",m.initData.value={...n},m.formData.value={...n}}),{permsArray:e,columns:v,filterableColumns:h,...m}}};function Qk(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("SettingSidebar"),y=l("a-col"),b=l("PlusOutlined"),k=l("a-button"),C=l("DeleteOutlined"),D=l("a-space"),S=l("a-select-option"),P=l("a-select"),F=l("a-input-search"),O=l("a-input-group"),E=l("a-row"),U=l("admin-page-filters"),K=l("AddEdit"),z=l("a-tag"),M=l("EditOutlined"),R=l("a-table"),q=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.payment_providers"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.settings")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.payment_providers")),1)]),_:1})]),_:1})]),_:1}),t(E,null,{default:a(()=>[t(y,{lg:4,class:"bg-setting-sidebar"},{default:a(()=>[t(f)]),_:1}),t(y,{lg:20},{default:a(()=>[t(U,null,{default:a(()=>[t(E,{gutter:[16,16]},{default:a(()=>[t(y,{lg:10},{default:a(()=>[t(D,null,{default:a(()=>[n.permsArray.includes("payment_providers_create")||n.permsArray.includes("admin")?(r(),w(k,{key:0,type:"primary",onClick:e.addItem},{default:a(()=>[t(b),u(" "+s(e.$t("payment_provider.add")),1)]),_:1},8,["onClick"])):A("",!0),e.table.selectedRowKeys.length>0&&(n.permsArray.includes("payment_providers_delete")||n.permsArray.includes("admin"))?(r(),w(k,{key:1,danger:"",type:"primary",onClick:e.showSelectedDeleteConfirm},{default:a(()=>[t(C),u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(y,{lg:14},{default:a(()=>[t(E,{justify:"end"},{default:a(()=>[t(y,{lg:12},{default:a(()=>[t(O,{compact:""},{default:a(()=>[t(P,{style:{width:"30%"},value:e.table.searchColumn,"onUpdate:value":o[0]||(o[0]=L=>e.table.searchColumn=L)},{default:a(()=>[(r(!0),$(I,null,G(n.filterableColumns,L=>(r(),w(S,{key:L.key,value:L.key},{default:a(()=>[u(s(L.value),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"]),t(F,{style:{width:"70%"},value:e.table.searchString,"onUpdate:value":o[1]||(o[1]=L=>e.table.searchString=L),onSearch:e.onTableSearch,onChange:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onSearch","onChange","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(q,null,{default:a(()=>[t(K,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit},null,8,["addEditType","visible","url","formData","data","pageTitle","successMessage","onAddEditSuccess","onClosed"]),t(R,{bordered:"",size:"middle",columns:n.columns,"data-source":e.table.data,loading:e.table.loading,pagination:e.table.pagination,"row-key":L=>L.xid,"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange},onChange:e.handleTableChange},{bodyCell:a(({column:L,record:j})=>[L.dataIndex==="payment_mode_id"?(r(),$(I,{key:0},[u(s(j.payment_mode.name),1)],64)):A("",!0),L.dataIndex==="env"?(r(),w(z,{key:1,color:j.env==="live"?"green":"orange"},{default:a(()=>[u(s(j.env.toUpperCase()),1)]),_:2},1032,["color"])):A("",!0),L.dataIndex==="is_active"?(r(),w(z,{key:2,color:j.is_active?"green":"red"},{default:a(()=>[u(s(j.is_active?e.$t("common.active"):e.$t("common.inactive")),1)]),_:2},1032,["color"])):A("",!0),L.dataIndex==="action"?(r(),$(I,{key:3},[n.permsArray.includes("payment_providers_edit")||n.permsArray.includes("admin")?(r(),w(k,{key:0,type:"primary",onClick:Y=>e.editItem(j)},{default:a(()=>[t(M)]),_:1},8,["onClick"])):A("",!0),n.permsArray.includes("payment_providers_delete")||n.permsArray.includes("admin")?(r(),w(k,{key:1,danger:"",type:"primary",style:{"margin-left":"6px"},onClick:Y=>e.showDeleteConfirm(j.xid)},{default:a(()=>[t(C)]),_:1},8,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["columns","data-source","loading","pagination","row-key","row-selection","onChange"])]),_:1})]),_:1})]),_:1})],64)}const Zk=W(Jk,[["render",Qk]]),xk=[{path:"/admin/settings/",component:()=>lt(()=>import("./Admin-3be1af1f.js"),["assets/Admin-3be1af1f.js","assets/vendor-4a6eb15a.js"]),children:[{path:"company",component:Yh,name:"admin.settings.company.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"company",permission:"companies_edit"}},{path:"profile",component:Qh,name:"admin.settings.profile.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"profile"}},{path:"langs",component:ov,name:"admin.settings.langs.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"translations",permission:"translations_view"}},{path:"warehouses",component:uv,name:"admin.settings.warehouses.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"warehouses",permission:"warehouses_view"}},{path:"roles",component:_v,name:"admin.settings.roles.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"roles",permission:"roles_view"}},{path:"taxes",component:bv,name:"admin.settings.taxes.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"taxes",permission:"taxes_view"}},{path:"currencies",component:Av,name:"admin.settings.currencies.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"currencies",permission:"currencies_view"}},{path:"payment-modes",component:Mv,name:"admin.settings.payment_modes.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"payment_modes",permission:"payment_modes_view"}},{path:"payment-providers",component:Zk,name:"admin.settings.payment_providers.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"payment_providers",permission:"payment_providers_view"}},{path:"units",component:Iv,name:"admin.settings.units.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"units",permission:"units_view"}},{path:"custom-fields",component:Wv,name:"admin.settings.custom_fields.index",meta:{requireAuth:!0,menuParent:"settings",menuKey:e=>"custom_fields",permission:"custom_fields_view"}},...Hk]}],Wo=()=>{const{t:e}=ae(),{formatDate:o,formatAmountCurrency:c}=X(),n=["user_id"];return{paymentsColumns:[{title:e("payments.date"),dataIndex:"date",dbKey:"date",dataFormat:h=>o(h.date)},{title:e("payments.payment_number"),dataIndex:"payment_number",dbKey:"payment_number"},{title:e("payments.payment_type"),dataIndex:"payment_type",dbKey:"payment_type",dataFormat:h=>h.payment_type=="in"?e("menu.payment_in"):e("menu.payment_out")},{title:e("payments.user"),dataIndex:"user_id",dbKey:"user.name"},{title:e("payment_mode.mode_type"),dataIndex:"mode_type",dbKey:"payment_mode.name"},{title:e("payments.amount"),dataIndex:"amount",dbKey:"amount",dataFormat:h=>c(h.amount)}],paymentsHashableColumns:n}},e2=Z({props:{user_id:null,paymentMode:null,dates:{default:[],type:null}},components:{UserInfo:Xe},setup(e){const{paymentsColumns:o,paymentsHashableColumns:c}=Wo(),{formatDate:n,formatAmountCurrency:v,selectedWarehouse:h}=X(),m=Ge();ee(()=>{d(e)});const d=i=>{const p={};i.user_id&&i.user_id!=null&&(p.user_id=i.user_id),m.tableUrl.value={url:"payments?fields=id,xid,date,payment_type,amount,payment_number,user_id,x_user_id,user{id,xid,name,profile_image,profile_image_url,user_type},payment_mode_id,x_payment_mode_id,paymentMode{id,xid,name,mode_type}",filters:p,extraFilters:{dates:i.dates,payment_mode:i.paymentMode}},m.hashable.value=[...c],m.table.sorter={field:"date",order:"desc"},m.exportDetails.value={allowExport:!0,exportType:"payment_reports"},m.fetch({page:1})};return ue(e,(i,p)=>{d(i)}),ue(h,(i,p)=>{d(e)}),{paymentsColumns:o,...m,formatDate:n,formatAmountCurrency:v}}}),t2={key:0,class:"table-responsive"};function a2(e,o,c,n,v,h){const m=l("UserInfo"),d=l("a-table"),i=l("a-col"),p=l("a-row");return r(),w(p,null,{default:a(()=>[t(i,{span:24},{default:a(()=>[e.table.loading?A("",!0):(r(),$("div",t2,[t(d,{columns:e.paymentsColumns,"row-key":_=>_.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,id:"payment-reports-table",bordered:"",size:"middle"},{bodyCell:a(({column:_,record:f})=>[_.dataIndex==="date"?(r(),$(I,{key:0},[u(s(e.formatDate(f.date)),1)],64)):A("",!0),_.dataIndex==="payment_type"?(r(),$(I,{key:1},[u(s(f.payment_type=="in"?e.$t("menu.payment_in"):e.$t("menu.payment_out")),1)],64)):A("",!0),_.dataIndex==="mode_type"?(r(),$(I,{key:2},[u(s(f.payment_mode&&f.payment_mode.name?f.payment_mode.name:"-"),1)],64)):A("",!0),_.dataIndex==="user_id"?(r(),w(m,{key:3,user:f.user},null,8,["user"])):A("",!0),_.dataIndex==="amount"?(r(),$(I,{key:4},[u(s(e.formatAmountCurrency(f.amount)),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])]))]),_:1})]),_:1})}const jo=W(e2,[["render",a2]]),n2={props:["tableName","title"],components:{FilePdfOutlined:Vl},setup(e){const o=T(!1);return{downloadPdf:()=>{o.value=!0;var n=document.getElementById(`${e.tableName}`),v=n.getElementsByTagName("table").length,h=new zl;if(h.text(e.title,14,9),v==1)h.autoTable({html:`#${e.tableName} table`});else for(var m=0;m<v;m++)h.autoTable({html:`#${e.tableName} .tbl_result_${m} table`});h.save(`${e.tableName}.pdf`),o.value=!1},loading:o}}};function o2(e,o,c,n,v,h){const m=l("FilePdfOutlined"),d=l("a-button"),i=l("a-col");return r(),w(i,{span:24},{default:a(()=>[t(d,{type:"primary",onClick:n.downloadPdf,loading:n.loading},{default:a(()=>[t(m),u(" "+s(e.$t("common.pdf")),1)]),_:1},8,["onClick","loading"])]),_:1})}const l2=W(n2,[["render",o2]]),s2={props:["tableName"],components:{PrinterOutlined:Fa}};function r2(e,o,c,n,v,h){const m=l("PrinterOutlined"),d=l("a-button"),i=l("a-col"),p=Ll("print");return r(),w(i,{span:24},{default:a(()=>[Tt((r(),w(d,{type:"primary"},{default:a(()=>[t(m),u(" "+s(e.$t("common.print")),1)]),_:1})),[[p,`#${c.tableName}`]])]),_:1})}const d2=W(s2,[["render",r2]]),Ho=()=>{const e="products?fields=id,xid,name,image,image_url,item_code,unit_id,x_unit_id,unit{id,xid,short_name},details{product_id,x_product_id,current_stock,stock_quantitiy_alert}",{t:o}=ae(),c=["products.id"],n=[{title:o("product.product"),dataIndex:"name",dbKey:"name"},{title:o("product.item_code"),dataIndex:"item_code",dbKey:"item_code"},{title:o("product.current_stock"),dataIndex:"current_stock",dbKey:"details.current_stock",dataFormat:v=>`${v.details.current_stock} ${v.unit.short_name}`},{title:o("product.quantitiy_alert"),dataIndex:"stock_quantitiy_alert",dbKey:"details.current_stock",dataFormat:v=>`${v.details.stock_quantitiy_alert} ${v.unit.short_name}`}];return{url:e,stockAlertColumns:n,stockAlertHashableColumns:c}},No=()=>{const{t:e}=ae(),{formatDateTime:o,formatAmountCurrency:c}=X(),n=["staff_user_id"];return{salesSummaryColumns:[{title:e("stock.order_date"),dataIndex:"order_date",dbKey:"order_date",dataFormat:h=>o(h.order_date)},{title:e("stock.invoice_number"),dataIndex:"invoice_number",dbKey:"invoice_number"},{title:e("common.party"),dataIndex:"user_id",dbKey:"user.name"},{title:e("payments.amount"),dataIndex:"amount",dbKey:"total",dataFormat:h=>c(h.total)},{title:e("payments.payment_status"),dataIndex:"payment_status",dbKey:"payment_status"},{title:e("common.created_by"),dataIndex:"staff_user_id",dbKey:"staff_member.name"}],orderHashableColumns:n}},Yo=()=>{const{t:e}=ae(),o=["category_id","brand_id"],{formatAmountCurrency:c}=X(),n=[{title:e("product.product"),dataIndex:"name",dbKey:"name"},{title:e("product.item_code"),dataIndex:"item_code",dbKey:"item_code"},{title:e("product.category"),dataIndex:"category_id",dbKey:"category.name"},{title:e("product.brand"),dataIndex:"brand_id",dbKey:"brand.name"},{title:e("product.purchase_price"),dataIndex:"purchase_price",dbKey:"details.purchase_price",dataFormat:m=>c(m.details.purchase_price)},{title:e("product.sales_price"),dataIndex:"sales_price",dbKey:"details.sales_price",dataFormat:m=>c(m.details.sales_price)},{title:e("product.current_stock"),dataIndex:"current_stock",dbKey:"details.current_stock",dataFormat:m=>`${m.details.current_stock} ${m.unit.short_name}`}],v=[...n,{title:e("product.stock_value"),dataIndex:"stock_value"}],h=[...n,{title:e("product.by_purchase"),dataIndex:"stock_value",dbKey:"details.current_stock",dataFormat:m=>c(m.details.current_stock*m.details.purchase_price)},{title:e("product.by_sales"),dataIndex:"stock_value",dbKey:"details.current_stock",dataFormat:m=>c(m.details.current_stock*m.details.sales_price)}];return{hashableColumns:o,summaryColumns:v,exportColumns:h}},Go=()=>{const{t:e}=ae(),o=["product_id"],{formatAmountCurrency:c}=X();return{columns:[{title:e("product.product"),dataIndex:"name",dbKey:"name"},{title:e("product.item_code"),dataIndex:"item_code",dbKey:"item_code"},{title:e("product.category"),dataIndex:"category_id",dbKey:"category.name"},{title:e("product.brand"),dataIndex:"brand_id",dbKey:"brand.name"},{title:e("product.mrp"),dataIndex:"mrp",dbKey:"details.mrp",dataFormat:v=>c(v.details.mrp)},{title:e("product.sales_price"),dataIndex:"sales_price",dbKey:"details.sales_price",dataFormat:v=>c(v.details.sales_price)}],hashableColumns:o}},Xo=()=>{const{formatAmountCurrency:e}=X(),{t:o}=ae(),c=["product_id"];return{columns:[{title:o("product.product"),dataIndex:"name",dbKey:"name"},{title:o("product.item_code"),dataIndex:"item_code",dbKey:"item_code"},{title:o("product.unit_sold"),dataIndex:"unit_sold",dbKey:"unit_sold",dataFormat:v=>`${v.unit_sold} ${v.product.unit.short_name}`},{title:o("product.total_purchase_price"),dataIndex:"total_purchase_price",dbKey:"total_purchase_price",dataFormat:v=>e(v.unit_sold*v.product.details.purchase_price)},{title:o("product.total_sales_price"),dataIndex:"total_sales_price",dbKey:"total_sales_price",dataFormat:v=>e(v.total_sales_price)}],hashableColumns:c}},i2=()=>{const{t:e}=ae(),{formatAmountCurrency:o,formatDate:c}=X(),n=[{title:e("menu.sales"),dataIndex:"sales",dbKey:"sales",dataFormat:h=>o(h.sales)},{title:e("menu.purchases"),dataIndex:"purchases",dbKey:"purchases",dataFormat:h=>o(h.purchases)},{title:e("menu.purchase_returns"),dataIndex:"purchase_returns",dbKey:"purchase_returns",dataFormat:h=>o(h.purchase_returns)},{title:e("menu.sales_returns"),dataIndex:"sales_returns",dbKey:"sales_returns",dataFormat:h=>o(h.sales_returns)},{title:e("menu.expenses"),dataIndex:"expenses",dbKey:"expenses",dataFormat:h=>o(h.expenses)},{title:e("common.profit"),dataIndex:"profit",dbKey:"profit",dataFormat:h=>o(h.profit)}],v=[{title:e("common.date"),dataIndex:"date",dbKey:"date",dataFormat:h=>c(h.date)},{title:e("menu.sales"),dataIndex:"sales",dbKey:"sales",dataFormat:h=>o(h.result.sales)},{title:e("menu.purchases"),dataIndex:"purchases",dbKey:"purchases",dataFormat:h=>o(h.result.purchases)},{title:e("menu.purchase_returns"),dataIndex:"purchase_returns",dbKey:"purchase_returns",dataFormat:h=>o(h.result.purchase_returns)},{title:e("menu.sales_returns"),dataIndex:"sales_returns",dbKey:"sales_returns",dataFormat:h=>o(h.result.sales_returns)},{title:e("menu.expenses"),dataIndex:"expenses",dbKey:"expenses",dataFormat:h=>o(h.result.expenses)},{title:e("common.profit"),dataIndex:"profit",dbKey:"profit",dataFormat:h=>o(h.result.profit)}];return{columns:n,dateWiseColumns:v}},Jo=()=>{const e=T("customers"),{t:o}=ae(),{formatAmountCurrency:c}=X(),n=[{title:o("user.name"),dataIndex:"name",dbKey:"name"}],v=[{title:o("menu.purchases"),dataIndex:"user_details.purchase_order_count",dbKey:"details.purchase_order_count"},{title:o("menu.purchase_returns"),dataIndex:"user_details.purchase_return_count",dbKey:"details.purchase_return_count"},{title:o("menu.sales"),dataIndex:"user_details.sales_order_count",dbKey:"details.sales_order_count"},{title:o("menu.sales_returns"),dataIndex:"user_details.sales_return_count",dbKey:"details.sales_return_count"}],h=[{title:o("payments.total_amount"),dataIndex:"user_details.total_amount",dbKey:"details.total_amount",dataFormat:p=>c(p.details.total_amount)},{title:o("payments.paid_amount"),dataIndex:"user_details.paid_amount",dbKey:"details.paid_amount",dataFormat:p=>c(p.details.paid_amount)},{title:o("payments.due_amount"),dataIndex:"user_details.due_amount",dbKey:"details.due_amount",dataFormat:p=>c(p.details.due_amount)}],m=pe(()=>[...n,{title:e.value=="customers"?o("menu.sales"):o("menu.purchases"),children:[...v]},...h]),d=pe(()=>{var p=(e.value=="customers",v);return[...n,...p,...h]}),i=[{key:"name",value:o("common.name")},{key:"phone",value:o("user.phone")}];return{userType:e,columns:m,exportColumns:d,filterableColumns:i}},Qo=()=>{const{formatAmountCurrency:e,formatDate:o}=X(),c="expenses?fields=id,xid,bill,bill_url,expense_category_id,x_expense_category_id,expenseCategory{id,xid,name},amount,user_id,x_user_id,user{id,xid,name},notes,date",{t:n}=ae(),v=["user_id","expense_category_id"],h=[{title:n("expense.date"),dataIndex:"date",dbKey:"date",dataFormat:m=>o(m.date)},{title:n("expense.expense_category"),dataIndex:"expense_category_id",dbKey:"expense_category.name",dataFormat:m=>m.expense_category.name},{title:n("expense.created_by_user"),dataIndex:"user_id",dbKey:"user.name",dataFormat:m=>m.user.name},{title:n("expense.amount"),dataIndex:"amount",dbKey:"amount",dataFormat:m=>e(m.amount)}];return{url:c,expenseColumns:h,expenseHashableColumns:v}},u2=()=>{const e=Wo(),o=Ho(),c=No(),n=Yo(),v=Go(),h=Xo(),m=i2(),d=Jo(),i=Qo();return{getColumns:_=>{if(_=="payment_reports")return e.paymentsColumns;if(_=="stock_alert_reports")return o.stockAlertColumns;if(_=="sales_summary_reports")return c.salesSummaryColumns;if(_=="stock_summary_reports")return n.exportColumns;if(_=="rate_list_reports")return v.columns;if(_=="product_sales_summary_reports")return h.columns;if(_=="user_reports")return d.exportColumns.value;if(_=="profit_loss_reports")return m.columns;if(_=="profit_loss_reports_by_dates")return m.dateWiseColumns;if(_=="expense_reports")return i.expenseColumns}}},m2={props:{exportType:{type:String,default:""}},components:{FileExcelOutlined:Bl},setup(e){const o=ke(),{getColumns:c}=u2(),n=T(e.exportType+".xlsx"),v=T(e.exportType),h=()=>{var i=o.state.auth.allExportData,p=at(i,D=>D.export_type==e.exportType),_=c(e.exportType),f=p.data;let y=[],b=[];if(_.length===0||f.length===0)return;_.map(D=>{b.push(D.title)}),y.push(b),f.map(D=>{let S=[];_.map(P=>{let F=D[P.dbKey];P.dbKey.split(".").length>1&&(F=d(D,P.dbKey)),P.dataFormat&&typeof P.dataFormat=="function"?S.push(P.dataFormat(D)):S.push(F)}),y.push(S)});let k=Ca.book_new(),C=Ca.aoa_to_sheet(y);C["!cols"]=m(y),Ca.book_append_sheet(k,C,v.value),Wl(k,n.value)},m=i=>{let p=Object.keys(i[0]).map(_=>({width:_.length+2}));for(let _=0;_<i.length;_++){let f=Object.values(i[_]);for(let y=0;y<f.length;y++)f[y]!==null&&f[y].length>p[y].width&&(p[y].width=f[y].length+3)}return p},d=(i,p)=>{p=p.replace(/\[(\w+)\]/g,".$1"),p=p.replace(/^\./,"");let _=p.split(".");for(let f=0,y=_.length;f<y;++f){let b=_[f];if(b in i)i=i[b];else return}return i};return{exportExcel:h}}};function c2(e,o,c,n,v,h){const m=l("FileExcelOutlined"),d=l("a-button"),i=l("a-col");return r(),w(i,{span:24},{default:a(()=>[t(d,{type:"primary",onClick:n.exportExcel},{default:a(()=>[t(m),u(" "+s(e.$t("common.excel")),1)]),_:1},8,["onClick"])]),_:1})}const p2=W(m2,[["render",c2]]),_2={props:{tableName:{type:String,default:"reports"},title:{type:String,default:"Data"},exportType:{type:String,default:""}},components:{PdfTable:l2,PrintTable:d2,ExportExcel:p2},setup(e,{emit:o}){const{willSubscriptionModuleVisible:c}=X();return{willSubscriptionModuleVisible:c}}};function f2(e,o,c,n,v,h){const m=l("PdfTable"),d=l("PrintTable"),i=l("ExportExcel"),p=l("a-space");return n.willSubscriptionModuleVisible("reports_download")?(r(),w(p,{key:0},{default:a(()=>[t(m,{tableName:c.tableName,title:c.title},null,8,["tableName","title"]),t(d,{tableName:c.tableName},null,8,["tableName"]),t(i,{exportType:c.exportType},null,8,["exportType"])]),_:1})):A("",!0)}const bt=W(_2,[["render",f2]]),g2={components:{UserInfo:Xe,DateRangePicker:rt,AdminPageHeader:ge,Payments:jo,ExprotTable:bt},setup(){const e=Ge(),{permsArray:o,willSubscriptionModuleVisible:c}=X(),n=Se({user_id:void 0,payment_mode_id:void 0,dates:[]}),v=T({}),h=qe();return ft(()=>{(!((o.value.includes("purchases_view")||o.value.includes("sales_view")||o.value.includes("purchase_returns_view")||o.value.includes("sales_returns_view"))&&o.value.includes("order_payments_view")||o.value.includes("admin"))||!c("reports"))&&h.push("admin.dashboard.index")}),ee(()=>{const m=axiosAdmin.post("customer-suppliers");Promise.all([m]).then(([d])=>{v.value=d.data})}),{...e,filters:n,users:v,permsArray:o}}};function y2(e,o,c,n,v,h){const m=l("ExprotTable"),d=l("a-page-header"),i=l("router-link"),p=l("a-breadcrumb-item"),_=l("a-breadcrumb"),f=l("AdminPageHeader"),y=l("a-col"),b=l("a-select-option"),k=l("a-select"),C=l("DateRangePicker"),D=l("a-row"),S=l("admin-page-filters"),P=l("Payments"),F=l("admin-page-table-content");return r(),$(I,null,[t(f,null,{header:a(()=>[t(d,{title:e.$t("menu.payments"),class:"p-0"},{extra:a(()=>[t(m,{exportType:"payment_reports",tableName:"payment-reports-table",title:`${e.$t("menu.payments")} ${e.$t("menu.reports")}`},null,8,["title"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(_,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(p,null,{default:a(()=>[t(i,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(p,null,{default:a(()=>[u(s(e.$t("menu.reports")),1)]),_:1}),t(p,null,{default:a(()=>[u(s(e.$t("menu.payments")),1)]),_:1})]),_:1})]),_:1}),t(S,null,{default:a(()=>[t(D,{gutter:[16,16]},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:10,xl:10}),t(y,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(D,{gutter:[16,16],justify:"end"},{default:a(()=>[t(y,{xs:24,sm:24,md:7,lg:6,xl:6},{default:a(()=>[t(k,{value:n.filters.user_id,"onUpdate:value":o[0]||(o[0]=O=>n.filters.user_id=O),placeholder:e.$t("common.select_default_text",[e.$t("user.user")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.users,O=>(r(),w(b,{key:O.xid,title:O.name,value:O.xid},{default:a(()=>[u(s(O.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1}),t(y,{xs:24,sm:24,md:10,lg:8,xl:8},{default:a(()=>[t(C,{onDateTimeChanged:o[1]||(o[1]=O=>{n.filters.dates=O})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(F,null,{default:a(()=>[t(P,{user_id:n.filters.user_id,dates:n.filters.dates},null,8,["user_id","dates"])]),_:1})],64)}const h2=W(g2,[["render",y2]]),v2={components:{ProductSearchInput:Ut,AdminPageHeader:ge,ExprotTable:bt},setup(){const{permsArray:e,selectedWarehouse:o,willSubscriptionModuleVisible:c}=X(),{url:n,stockAlertColumns:v,stockAlertHashableColumns:h}=Ho(),m=T(void 0),d=qe(),i=Ge();ft(()=>{(!(e.value.includes("products_view")||e.value.includes("admin"))||!c("reports"))&&d.push("admin.dashboard.index")}),ee(()=>{p()});const p=()=>{i.tableUrl.value={url:n,filters:{"products.id":m.value},extraFilters:{fetch_stock_alert:!0}},i.hashable.value=[...h],i.exportDetails.value={allowExport:!0,exportType:"stock_alert_reports"},i.fetch({page:1})};return ue(o,(_,f)=>{p()}),{stockAlertColumns:v,...i,searchProductId:m,getTableData:p,permsArray:e}}},b2={class:"table-responsive"};function k2(e,o,c,n,v,h){const m=l("ExprotTable"),d=l("a-page-header"),i=l("router-link"),p=l("a-breadcrumb-item"),_=l("a-breadcrumb"),f=l("AdminPageHeader"),y=l("a-col"),b=l("ProductSearchInput"),k=l("a-row"),C=l("admin-page-filters"),D=l("a-avatar"),S=l("a-badge"),P=l("a-table"),F=l("admin-page-table-content");return r(),$(I,null,[t(f,null,{header:a(()=>[t(d,{title:e.$t("menu.stock_alert"),class:"p-0"},{extra:a(()=>[t(m,{exportType:"stock_alert_reports",tableName:"stock-alert-reports-table",title:`${e.$t("menu.stock_alert")} ${e.$t("menu.reports")}`},null,8,["title"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(_,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(p,null,{default:a(()=>[t(i,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(p,null,{default:a(()=>[u(s(e.$t("menu.reports")),1)]),_:1}),t(p,null,{default:a(()=>[u(s(e.$t("menu.stock_alert")),1)]),_:1})]),_:1})]),_:1}),t(C,null,{default:a(()=>[t(k,{gutter:[16,16]},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:10,xl:10}),t(y,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(k,{gutter:[16,16],justify:"end"},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:10,xl:6},{default:a(()=>[t(b,{onValueChanged:o[0]||(o[0]=O=>{n.searchProductId=O,n.getTableData()})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(F,null,{default:a(()=>[t(k,null,{default:a(()=>[t(y,{span:24},{default:a(()=>[g("div",b2,[t(P,{columns:n.stockAlertColumns,"row-key":O=>O.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,id:"stock-alert-reports-table",bordered:"",size:"middle"},{bodyCell:a(({column:O,record:E})=>[O.dataIndex==="name"?(r(),w(S,{key:0},{default:a(()=>[t(D,{shape:"square",src:E.image_url},null,8,["src"]),u(" "+s(E.name),1)]),_:2},1024)):A("",!0),O.dataIndex==="current_stock"?(r(),$(I,{key:1},[u(s(`${E.details.current_stock} ${E.unit.short_name}`),1)],64)):A("",!0),O.dataIndex==="stock_quantitiy_alert"?(r(),$(I,{key:2},[u(s(`${E.details.stock_quantitiy_alert} ${E.unit.short_name}`),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const w2=W(v2,[["render",k2]]),C2=Z({props:["data","orderType","visible"],components:{OrderTable:ea,DateRangePicker:rt},setup(e,{emit:o}){const{paymentStatus:c,permsArray:n}=X(),v=T("sales"),h=Se({payment_status:"all",user_id:void 0,dates:[]}),m=T(null),d=()=>{h.payment_status="all",o("closed")};return ue(()=>e.visible,(i,p)=>{i==!0&&(e.data.user_type=="suppliers"?v.value=e.orderType==""?"purchases":"purchase-returns":v.value=e.orderType==""?"sales":"sales-returns",h.user_id=e.data.xid,h.dates=[],m&&m.value&&m.value.resetPicker())}),{onClose:d,paymentStatus:c,filters:h,activeOrderType:v,drawerWidth:window.innerWidth<=991?"90%":"70%",serachDateRangePicker:m,permsArray:n}}});function S2(e,o,c,n,v,h){const m=l("a-select-option"),d=l("a-select"),i=l("a-col"),p=l("DateRangePicker"),_=l("a-row"),f=l("OrderTable"),y=l("a-drawer");return r(),w(y,{title:e.data.name,width:e.drawerWidth,open:e.visible,"body-style":{paddingBottom:"80px"},maskClosable:!0,destroyOnClose:!0,onClose:e.onClose},{default:a(()=>[t(_,{gutter:[8,8],class:"mb-20"},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:5,xl:5},{default:a(()=>[t(d,{value:e.filters.payment_status,"onUpdate:value":o[0]||(o[0]=b=>e.filters.payment_status=b),placeholder:e.$t("common.select_default_text",[e.$t("payments.payment_status")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[t(m,{title:e.$t("common.all"),value:"all"},{default:a(()=>[u(s(e.$t("common.all")),1)]),_:1},8,["title"]),(r(!0),$(I,null,G(e.paymentStatus,b=>(r(),w(m,{key:b.key,title:b.value,value:b.key},{default:a(()=>[u(s(b.value),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1}),t(i,{xs:24,sm:24,md:12,lg:6,xl:6},{default:a(()=>[t(p,{ref:"serachDateRangePicker",onDateTimeChanged:o[1]||(o[1]=b=>e.filters.dates=b)},null,512)]),_:1})]),_:1}),t(f,{orderType:e.activeOrderType,filters:e.filters,perPageItems:10},null,8,["orderType","filters"])]),_:1},8,["title","width","open","onClose"])}const $2=W(C2,[["render",S2]]),D2={components:{UserInfo:Xe,Details:$2,AdminPageHeader:ge,UserBalance:Xa,ExprotTable:bt},setup(){const{userType:e,columns:o,filterableColumns:c}=Jo(),n=Ve(),{formatAmountCurrency:v,getOrderTypeFromstring:h,statusColors:m,permsArray:d,convertToPositive:i,selectedWarehouse:p,willSubscriptionModuleVisible:_}=X(),f=T(!1),y=T({}),b=T("sales"),k=qe();ft(()=>{(!(d.value.includes("customers_view")||d.value.includes("suppliers_view")||d.value.includes("admin"))||!_("reports"))&&k.push("admin.dashboard.index"),d.value.includes("customers_view")||d.value.includes("admin")?e.value="customers":(d.value.includes("suppliers_view")||d.value.includes("admin"))&&(e.value="suppliers")}),ee(()=>{C()});const C=()=>{n.tableUrl.value={url:`${e.value}?fields=id,xid,user_type,name,email,profile_image,profile_image_url,phone,details{purchase_order_count,purchase_return_count,sales_order_count,sales_return_count,total_amount,paid_amount,due_amount}`,filters:""},n.table.filterableColumns=c,n.exportDetails.value={allowExport:!0,exportType:"user_reports"},n.fetch({page:1})},D=(S,P)=>{y.value=P,b.value=S,f.value=!0};return ue(p,(S,P)=>{C()}),{columns:o,...n,filterableColumns:c,statusColors:m,userType:e,formatAmountCurrency:v,convertToPositive:i,getOrderTypeFromstring:h,setUrlData:C,permsArray:d,detailsVisible:f,openUserReportDrawer:D,selectedUser:y,activeOrderType:b}}},A2={class:"table-responsive"},T2=["onClick"],E2={key:1},O2=["onClick"],I2={key:1},P2=["onClick"],U2={key:1},F2=["onClick"],M2={key:1};function q2(e,o,c,n,v,h){const m=l("ExprotTable"),d=l("a-page-header"),i=l("router-link"),p=l("a-breadcrumb-item"),_=l("a-breadcrumb"),f=l("AdminPageHeader"),y=l("a-col"),b=l("a-select-option"),k=l("a-select"),C=l("a-input-search"),D=l("a-input-group"),S=l("a-row"),P=l("admin-page-filters"),F=l("a-tab-pane"),O=l("a-tabs"),E=l("UserInfo"),U=l("UserBalance"),K=l("a-table"),z=l("Details"),M=l("admin-page-table-content");return r(),$(I,null,[t(f,null,{header:a(()=>[t(d,{title:e.$t("menu.users_reports"),class:"p-0"},{extra:a(()=>[t(m,{exportType:"user_reports",tableName:"users-reports-table",title:e.$t("menu.users_reports")},null,8,["title"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(_,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(p,null,{default:a(()=>[t(i,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(p,null,{default:a(()=>[u(s(e.$t("menu.reports")),1)]),_:1}),t(p,null,{default:a(()=>[u(s(e.$t("menu.users_reports")),1)]),_:1})]),_:1})]),_:1}),t(P,null,{default:a(()=>[t(S,{gutter:[16,16]},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:10,xl:10}),t(y,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(S,{gutter:[16,16],justify:"end"},{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:10,xl:10},{default:a(()=>[t(D,{compact:""},{default:a(()=>[t(k,{style:{width:"35%"},value:e.table.searchColumn,"onUpdate:value":o[0]||(o[0]=R=>e.table.searchColumn=R),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),$(I,null,G(n.filterableColumns,R=>(r(),w(b,{key:R.key},{default:a(()=>[u(s(R.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(C,{style:{width:"65%"},value:e.table.searchString,"onUpdate:value":o[1]||(o[1]=R=>e.table.searchString=R),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(M,null,{default:a(()=>[t(S,null,{default:a(()=>[t(y,{span:24},{default:a(()=>[t(O,{activeKey:n.userType,"onUpdate:activeKey":o[2]||(o[2]=R=>n.userType=R),onChange:n.setUrlData},{default:a(()=>[n.permsArray.includes("customers_view")||n.permsArray.includes("admin")?(r(),w(F,{key:"customers",tab:e.$t("menu.customers")},null,8,["tab"])):A("",!0),n.permsArray.includes("suppliers_view")||n.permsArray.includes("admin")?(r(),w(F,{key:"suppliers",tab:e.$t("menu.suppliers")},null,8,["tab"])):A("",!0)]),_:1},8,["activeKey","onChange"])]),_:1})]),_:1}),t(S,{gutter:[16,16]},{default:a(()=>[t(y,{span:24},{default:a(()=>[g("div",A2,[t(K,{columns:n.columns,"row-key":R=>R.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,id:"users-reports-table",bordered:"",size:"middle"},{bodyCell:a(({column:R,text:q,record:L})=>[R.dataIndex==="name"?(r(),w(E,{key:0,user:L},null,8,["user"])):A("",!0),R.dataIndex==="user_details.purchase_order_count"?(r(),$(I,{key:1},[n.permsArray.includes("purchases_view")||n.permsArray.includes("admin")?(r(),$("a",{key:0,onClick:j=>n.openUserReportDrawer("",L)},s(L.details.purchase_order_count),9,T2)):(r(),$("span",E2,s(L.details.purchase_order_count),1))],64)):A("",!0),R.dataIndex==="user_details.purchase_return_count"?(r(),$(I,{key:2},[n.permsArray.includes("purchase_returns_view")||n.permsArray.includes("admin")?(r(),$("a",{key:0,onClick:j=>n.openUserReportDrawer("returns",L)},s(L.details.purchase_return_count),9,O2)):(r(),$("span",I2,s(L.details.purchase_return_count),1))],64)):A("",!0),R.dataIndex==="user_details.sales_order_count"?(r(),$(I,{key:3},[n.permsArray.includes("sales_view")||n.permsArray.includes("admin")?(r(),$("a",{key:0,onClick:j=>n.openUserReportDrawer("",L)},s(L.details.sales_order_count),9,P2)):(r(),$("span",U2,s(L.details.sales_order_count),1))],64)):A("",!0),R.dataIndex==="user_details.sales_return_count"?(r(),$(I,{key:4},[n.permsArray.includes("sales_returns_view")||n.permsArray.includes("admin")?(r(),$("a",{key:0,onClick:j=>n.openUserReportDrawer("returns",L)},s(L.details.sales_return_count),9,F2)):(r(),$("span",M2,s(L.details.sales_return_count),1))],64)):A("",!0),R.dataIndex==="user_details.total_amount"?(r(),$(I,{key:5},[u(s(n.formatAmountCurrency(n.convertToPositive(L.details.total_amount))),1)],64)):A("",!0),R.dataIndex==="user_details.paid_amount"?(r(),$(I,{key:6},[u(s(n.formatAmountCurrency(n.convertToPositive(L.details.paid_amount))),1)],64)):A("",!0),R.dataIndex==="user_details.due_amount"?(r(),w(U,{key:7,amount:L.details.due_amount},null,8,["amount"])):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1}),t(z,{visible:n.detailsVisible,onClosed:o[3]||(o[3]=R=>n.detailsVisible=!1),data:n.selectedUser,orderType:n.activeOrderType,destroyOnClose:!0},null,8,["visible","data","orderType"])]),_:1})],64)}const R2=W(D2,[["render",q2]]),K2={components:{AdminPageHeader:ge,Payments:jo,DateRangePicker:rt,WalletOutlined:no,BankOutlined:Hn},setup(){const{permsArray:e}=X(),o=T("cash"),c=qe(),n=Se({dates:[]});return ft(()=>{e.value.includes("customers_view")||e.value.includes("suppliers_view")||e.value.includes("admin")||c.push("admin.dashboard.index")}),{activeType:o,filters:n}}};function V2(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("DateRangePicker"),y=l("a-col"),b=l("a-row"),k=l("admin-page-filters"),C=l("WalletOutlined"),D=l("a-tab-pane"),S=l("BankOutlined"),P=l("a-tabs"),F=l("Payments"),O=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.cash_bank"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.cash_bank")),1)]),_:1})]),_:1})]),_:1}),t(k,null,{default:a(()=>[t(b,{gutter:[16,16],justify:"end"},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:6,xl:4},{default:a(()=>[t(f,{onDateTimeChanged:o[0]||(o[0]=E=>{n.filters.dates=E})})]),_:1})]),_:1})]),_:1}),t(O,null,{default:a(()=>[t(b,null,{default:a(()=>[t(y,{span:24},{default:a(()=>[t(P,{activeKey:n.activeType,"onUpdate:activeKey":o[1]||(o[1]=E=>n.activeType=E)},{default:a(()=>[t(D,{key:"cash"},{tab:a(()=>[g("span",null,[t(C),u(" "+s(e.$t("payments.cash")),1)])]),_:1}),t(D,{key:"bank"},{tab:a(()=>[g("span",null,[t(S),u(" "+s(e.$t("payments.bank")),1)])]),_:1})]),_:1},8,["activeKey"])]),_:1})]),_:1}),t(F,{dates:n.filters.dates,paymentMode:n.activeType},null,8,["dates","paymentMode"])]),_:1})],64)}const z2=W(K2,[["render",V2]]),L2=Z({props:{user_id:null,paymentMode:null,dates:{default:[],type:null}},components:{UserInfo:Xe,PaymentStatus:gt},setup(e){const{salesSummaryColumns:o,orderHashableColumns:c}=No(),{formatDateTime:n,formatAmountCurrency:v,selectedWarehouse:h}=X(),m=Ge();ee(()=>{d(e)});const d=i=>{const p={};i.user_id&&i.user_id!=null&&(p.staff_user_id=i.user_id),m.tableUrl.value={url:"sales?fields=id,xid,order_date,invoice_number,total,payment_status,user_id,x_user_id,user{id,xid,name,profile_image,profile_image_url,user_type},staff_user_id,x_staff_user_id,staffMember{id,xid,name,profile_image,profile_image_url,user_type}",filters:p,extraFilters:{dates:i.dates}},m.hashable.value=[...c],m.table.sorter={field:"order_date",order:"desc"},m.exportDetails.value={allowExport:!0,exportType:"sales_summary_reports"},m.fetch({page:1})};return ue(e,(i,p)=>{d(i)}),ue(h,(i,p)=>{d(e)}),{salesSummaryColumns:o,...m,formatDateTime:n,formatAmountCurrency:v}}}),B2={key:0,class:"table-responsive"};function W2(e,o,c,n,v,h){const m=l("UserInfo"),d=l("PaymentStatus"),i=l("a-table"),p=l("a-col"),_=l("a-row");return r(),w(_,null,{default:a(()=>[t(p,{span:24},{default:a(()=>[e.table.loading?A("",!0):(r(),$("div",B2,[t(i,{columns:e.salesSummaryColumns,"row-key":f=>f.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,id:"sales-summary-reports-table",bordered:"",size:"middle"},{bodyCell:a(({column:f,record:y})=>[f.dataIndex==="order_date"?(r(),$(I,{key:0},[u(s(e.formatDateTime(y.order_date)),1)],64)):A("",!0),f.dataIndex==="payment_type"?(r(),$(I,{key:1},[u(s(y.payment_type=="in"?e.$t("menu.payment_in"):e.$t("menu.payment_out")),1)],64)):A("",!0),f.dataIndex==="user_id"?(r(),w(m,{key:2,user:y.user},null,8,["user"])):A("",!0),f.dataIndex==="amount"?(r(),$(I,{key:3},[u(s(e.formatAmountCurrency(y.total)),1)],64)):A("",!0),f.dataIndex==="payment_status"?(r(),w(d,{key:4,paymentStatus:y.payment_status},null,8,["paymentStatus"])):A("",!0),f.dataIndex==="staff_user_id"?(r(),$(I,{key:5},[u(s(y.staff_member.name),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])]))]),_:1})]),_:1})}const j2=W(L2,[["render",W2]]),H2={components:{UserInfo:Xe,DateRangePicker:rt,AdminPageHeader:ge,SalesSummary:j2,ExprotTable:bt},setup(){const e=Ge(),{permsArray:o,willSubscriptionModuleVisible:c}=X(),n=Se({user_id:void 0,payment_mode_id:void 0,dates:[]}),v=T({}),h=qe();return ft(()=>{(!(o.value.includes("users_view")||o.value.includes("admin"))||!c("reports"))&&h.push("admin.dashboard.index")}),ee(()=>{const m=axiosAdmin.get("users?limit=10000");Promise.all([m]).then(([d])=>{v.value=d.data})}),{...e,filters:n,users:v,permsArray:o}}};function N2(e,o,c,n,v,h){const m=l("ExprotTable"),d=l("a-page-header"),i=l("router-link"),p=l("a-breadcrumb-item"),_=l("a-breadcrumb"),f=l("AdminPageHeader"),y=l("a-col"),b=l("a-select-option"),k=l("a-select"),C=l("DateRangePicker"),D=l("a-row"),S=l("admin-page-filters"),P=l("SalesSummary"),F=l("admin-page-table-content");return r(),$(I,null,[t(f,null,{header:a(()=>[t(d,{title:e.$t("menu.sales_summary"),class:"p-0"},{extra:a(()=>[t(m,{exportType:"sales_summary_reports",tableName:"sales-summary-reports-table",title:`${e.$t("menu.sales_summary")} ${e.$t("menu.reports")}`},null,8,["title"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(_,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(p,null,{default:a(()=>[t(i,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(p,null,{default:a(()=>[u(s(e.$t("menu.reports")),1)]),_:1}),t(p,null,{default:a(()=>[u(s(e.$t("menu.sales_summary")),1)]),_:1})]),_:1})]),_:1}),t(S,null,{default:a(()=>[t(D,{gutter:[16,16]},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:10,xl:10}),t(y,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(D,{gutter:[16,16],justify:"end"},{default:a(()=>[t(y,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(k,{value:n.filters.user_id,"onUpdate:value":o[0]||(o[0]=O=>n.filters.user_id=O),placeholder:e.$t("common.select_default_text",[e.$t("staff_member.staff_member")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.users,O=>(r(),w(b,{key:O.xid,title:O.name,value:O.xid},{default:a(()=>[u(s(O.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1}),t(y,{xs:24,sm:24,md:10,lg:8,xl:8},{default:a(()=>[t(C,{onDateTimeChanged:o[1]||(o[1]=O=>{n.filters.dates=O})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(F,null,{default:a(()=>[t(P,{user_id:n.filters.user_id,dates:n.filters.dates},null,8,["user_id","dates"])]),_:1})],64)}const Y2=W(H2,[["render",N2]]),G2=Z({props:{category_id:null,brand_id:null},components:{UserInfo:Xe,PaymentStatus:gt},setup(e){const{summaryColumns:o,hashableColumns:c}=Yo(),{formatDateTime:n,formatAmountCurrency:v,selectedWarehouse:h}=X(),m=Ge();ee(()=>{d(e)});const d=i=>{const p={};i.category_id&&i.category_id!=null&&(p.category_id=i.category_id),i.brand_id&&i.brand_id!=null&&(p.brand_id=i.brand_id),m.tableUrl.value={url:"products?fields=id,xid,name,,item_code,image,image_url,category_id,x_category_id,category{id,xid,name},brand_id,x_brand_id,brand{id,xid,name},unit_id,x_unit_id,unit{id,xid,name,short_name},details{stock_quantitiy_alert,opening_stock,opening_stock_date,wholesale_price,wholesale_quantity,mrp,purchase_price,sales_price,tax_id,x_tax_id,purchase_tax_type,sales_tax_type,current_stock,warehouse_id,x_warehouse_id,status},details:tax{id,xid,name,rate}",filters:p},m.hashable.value=[...c],m.table.sorter={field:"name",order:"asc"},m.exportDetails.value={allowExport:!0,exportType:"stock_summary_reports"},m.fetch({page:1})};return ue(e,(i,p)=>{d(i)}),ue(h,(i,p)=>{d(e)}),{summaryColumns:o,...m,formatDateTime:n,formatAmountCurrency:v}}}),X2={key:0,class:"table-responsive"};function J2(e,o,c,n,v,h){const m=l("a-avatar"),d=l("a-badge"),i=l("a-typography-text"),p=l("a-table"),_=l("a-col"),f=l("a-row");return r(),w(f,null,{default:a(()=>[t(_,{span:24},{default:a(()=>[e.table.loading?A("",!0):(r(),$("div",X2,[t(p,{columns:e.summaryColumns,"row-key":y=>y.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,id:"stock-summary-reports-table",bordered:"",size:"middle"},{bodyCell:a(({column:y,record:b})=>[y.dataIndex==="name"?(r(),w(d,{key:0},{default:a(()=>[t(m,{shape:"square",src:b.image_url},null,8,["src"]),u(" "+s(b.name),1)]),_:2},1024)):A("",!0),y.dataIndex==="category_id"?(r(),$(I,{key:1},[u(s(b.category.name),1)],64)):A("",!0),y.dataIndex==="brand_id"?(r(),$(I,{key:2},[u(s(b.brand&&b.brand.xid?b.brand.name:"-"),1)],64)):A("",!0),y.dataIndex==="sales_price"?(r(),$(I,{key:3},[u(s(e.formatAmountCurrency(b.details.sales_price)),1)],64)):A("",!0),y.dataIndex==="purchase_price"?(r(),$(I,{key:4},[u(s(e.formatAmountCurrency(b.details.purchase_price)),1)],64)):A("",!0),y.dataIndex==="current_stock"?(r(),$(I,{key:5},[u(s(`${b.details.current_stock} ${b.unit.short_name}`),1)],64)):A("",!0),y.dataIndex==="stock_value"?(r(),$(I,{key:6},[u(s(e.$t("product.by_purchase"))+" : ",1),t(i,{strong:""},{default:a(()=>[u(s(e.formatAmountCurrency(b.details.current_stock*b.details.purchase_price)),1)]),_:2},1024),o[0]||(o[0]=g("br",null,null,-1)),u(" "+s(e.$t("product.by_sales"))+" : ",1),t(i,{strong:""},{default:a(()=>[u(s(e.formatAmountCurrency(b.details.current_stock*b.details.sales_price)),1)]),_:2},1024)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])]))]),_:1})]),_:1})}const Q2=W(G2,[["render",J2]]),Z2={components:{AdminPageHeader:ge,StockSummary:Q2,ExprotTable:bt},setup(){const e=Ge(),{permsArray:o,getRecursiveCategories:c,filterTreeNode:n,willSubscriptionModuleVisible:v}=X(),h=Se({category_id:void 0,brand_id:void 0}),m=T([]),d=T([]),i=qe();ft(()=>{(!(o.value.includes("products_view")||o.value.includes("admin"))||!v("reports"))&&i.push("admin.dashboard.index")}),ee(()=>{p()});const p=()=>{const _=axiosAdmin.get("categories?limit=10000"),f=axiosAdmin.get("brands?limit=10000");Promise.all([_,f]).then(([y,b])=>{m.value=c(y),d.value=b.data})};return{...e,filters:h,categories:m,brands:d,permsArray:o,filterTreeNode:n}}};function x2(e,o,c,n,v,h){const m=l("ExprotTable"),d=l("a-page-header"),i=l("router-link"),p=l("a-breadcrumb-item"),_=l("a-breadcrumb"),f=l("AdminPageHeader"),y=l("a-col"),b=l("a-tree-select"),k=l("a-select-option"),C=l("a-select"),D=l("a-row"),S=l("admin-page-filters"),P=l("StockSummary"),F=l("admin-page-table-content");return r(),$(I,null,[t(f,null,{header:a(()=>[t(d,{title:e.$t("menu.stock_summary"),class:"p-0"},{extra:a(()=>[t(m,{exportType:"stock_summary_reports",tableName:"stock-summary-reports-table",title:`${e.$t("menu.stock_summary")} ${e.$t("menu.reports")}`},null,8,["title"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(_,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(p,null,{default:a(()=>[t(i,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(p,null,{default:a(()=>[u(s(e.$t("menu.reports")),1)]),_:1}),t(p,null,{default:a(()=>[u(s(e.$t("menu.stock_summary")),1)]),_:1})]),_:1})]),_:1}),t(S,null,{default:a(()=>[t(D,{gutter:[16,16]},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:10,xl:10}),t(y,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(D,{gutter:[16,16],justify:"end"},{default:a(()=>[t(y,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(b,{value:n.filters.category_id,"onUpdate:value":o[0]||(o[0]=O=>n.filters.category_id=O),"show-search":"",style:{width:"100%"},"dropdown-style":{maxHeight:"250px",overflow:"auto"},placeholder:e.$t("common.select_default_text",[e.$t("category.category")]),"tree-data":n.categories,"allow-clear":"","tree-default-expand-all":"",filterTreeNode:n.filterTreeNode},null,8,["value","placeholder","tree-data","filterTreeNode"])]),_:1}),t(y,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(C,{value:n.filters.brand_id,"onUpdate:value":o[1]||(o[1]=O=>n.filters.brand_id=O),placeholder:e.$t("common.select_default_text",[e.$t("product.brand")]),allowClear:!0,style:{width:"100%"},optionFilterProp:"title","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.brands,O=>(r(),w(k,{key:O.xid,title:O.name,value:O.xid},{default:a(()=>[u(s(O.name),1)]),_:2},1032,["title","value"]))),128))]),_:1},8,["value","placeholder"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(F,null,{default:a(()=>[t(P,{category_id:n.filters.category_id,brand_id:n.filters.brand_id},null,8,["category_id","brand_id"])]),_:1})],64)}const ew=W(Z2,[["render",x2]]),tw=Z({props:{product_id:null},components:{UserInfo:Xe,PaymentStatus:gt},setup(e){const{columns:o,hashableColumns:c}=Go(),{formatDateTime:n,formatAmountCurrency:v,selectedWarehouse:h}=X(),m=Ge();ee(()=>{d(e)});const d=i=>{const p={};i.product_id&&i.product_id!=null&&(p.x_id=i.product_id),m.tableUrl.value={url:"products?fields=id,xid,name,,item_code,image,image_url,category_id,x_category_id,category{id,xid,name},brand_id,x_brand_id,brand{id,xid,name},unit_id,x_unit_id,unit{id,xid,name,short_name},details{mrp,sales_price,tax_id,x_tax_id,purchase_tax_type,sales_tax_type},details:tax{id,xid,name,rate}",extraFilters:p},m.hashable.value=[...c],m.table.sorter={field:"name",order:"asc"},m.exportDetails.value={allowExport:!0,exportType:"rate_list_reports"},m.fetch({page:1})};return ue(e,(i,p)=>{d(i)}),ue(h,(i,p)=>{d(e)}),{columns:o,...m,formatDateTime:n,formatAmountCurrency:v}}}),aw={key:0,class:"table-responsive"};function nw(e,o,c,n,v,h){const m=l("a-avatar"),d=l("a-badge"),i=l("a-table"),p=l("a-col"),_=l("a-row");return r(),w(_,null,{default:a(()=>[t(p,{span:24},{default:a(()=>[e.table.loading?A("",!0):(r(),$("div",aw,[t(i,{columns:e.columns,"row-key":f=>f.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,id:"rate-list-reports-table",bordered:"",size:"middle"},{bodyCell:a(({column:f,record:y})=>[f.dataIndex==="name"?(r(),w(d,{key:0},{default:a(()=>[t(m,{shape:"square",src:y.image_url},null,8,["src"]),u(" "+s(y.name),1)]),_:2},1024)):A("",!0),f.dataIndex==="category_id"?(r(),$(I,{key:1},[u(s(y.category&&y.category.name?y.category.name:"-"),1)],64)):A("",!0),f.dataIndex==="brand_id"?(r(),$(I,{key:2},[u(s(y.brand&&y.brand.name?y.brand.name:"-"),1)],64)):A("",!0),f.dataIndex==="mrp"?(r(),$(I,{key:3},[u(s(y.details.mrp?e.formatAmountCurrency(y.details.mrp):"-"),1)],64)):A("",!0),f.dataIndex==="sales_price"?(r(),$(I,{key:4},[u(s(e.formatAmountCurrency(y.details.sales_price)),1)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])]))]),_:1})]),_:1})}const ow=W(tw,[["render",nw]]),lw={components:{AdminPageHeader:ge,RateList:ow,ProductSearchInput:Ut,ExprotTable:bt},setup(){const e=Ge(),{permsArray:o,willSubscriptionModuleVisible:c}=X(),n=qe(),v=Se({product_id:void 0});return ft(()=>{(!(o.value.includes("products_view")||o.value.includes("admin"))||!c("reports"))&&n.push("admin.dashboard.index")}),{...e,permsArray:o,filters:v}}};function sw(e,o,c,n,v,h){const m=l("ExprotTable"),d=l("a-page-header"),i=l("router-link"),p=l("a-breadcrumb-item"),_=l("a-breadcrumb"),f=l("AdminPageHeader"),y=l("a-col"),b=l("ProductSearchInput"),k=l("a-row"),C=l("admin-page-filters"),D=l("RateList"),S=l("admin-page-table-content");return r(),$(I,null,[t(f,null,{header:a(()=>[t(d,{title:e.$t("menu.rate_list"),class:"p-0"},{extra:a(()=>[t(m,{exportType:"rate_list_reports",tableName:"rate-list-reports-table",title:`${e.$t("menu.rate_list")} ${e.$t("menu.reports")}`},null,8,["title"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(_,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(p,null,{default:a(()=>[t(i,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(p,null,{default:a(()=>[u(s(e.$t("menu.reports")),1)]),_:1}),t(p,null,{default:a(()=>[u(s(e.$t("menu.rate_list")),1)]),_:1})]),_:1})]),_:1}),t(C,null,{default:a(()=>[t(k,{gutter:[16,16]},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:10,xl:10}),t(y,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(k,{gutter:[16,16],justify:"end"},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:8,xl:6},{default:a(()=>[t(b,{onValueChanged:o[0]||(o[0]=P=>{n.filters.product_id=P})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(S,null,{default:a(()=>[t(D,{product_id:n.filters.product_id},null,8,["product_id"])]),_:1})],64)}const rw=W(lw,[["render",sw]]),dw=Z({props:{product_id:null,category_id:null,dates:{default:[],type:null}},components:{UserInfo:Xe,PaymentStatus:gt},setup(e){const{columns:o,hashableColumns:c}=Xo(),{formatDateTime:n,formatAmountCurrency:v,selectedWarehouse:h}=X(),m=Ge();ee(()=>{m.table.pagination={pageSize:1e4,showSizeChanger:!1},d(e)});const d=p=>{const _={};p.product_id&&p.product_id!=null&&(_.product_id=p.product_id),m.tableUrl.value={url:"order-items?fields=id",filters:_,extraFilters:{product_sales_summary:!0,dates:p.dates,category_id:p.category_id}},m.hashable.value=[...c],m.table.sorter={field:"products.name",order:"asc"},m.exportDetails.value={allowExport:!0,exportType:"product_sales_summary_reports"},m.fetch({page:1})},i=pe(()=>{let p=0,_=0;return m.table.data.forEach(f=>{p+=f.product.details.purchase_price*f.unit_sold,_+=f.total_sales_price}),{totalPurchasePrice:p,totalSalesPrice:_}});return ue(e,(p,_)=>{d(p)}),ue(h,(p,_)=>{d(e)}),{columns:o,...m,formatDateTime:n,formatAmountCurrency:v,totals:i}}}),iw={key:0,class:"table-responsive"};function uw(e,o,c,n,v,h){const m=l("a-avatar"),d=l("a-badge"),i=l("a-table-summary-cell"),p=l("a-typography-text"),_=l("a-table-summary-row"),f=l("a-table"),y=l("a-col"),b=l("a-row");return r(),w(b,null,{default:a(()=>[t(y,{span:24},{default:a(()=>[e.table.loading?A("",!0):(r(),$("div",iw,[t(f,{columns:e.columns,"row-key":k=>k.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,id:"product-sales-summary-reports-table",bordered:"",size:"middle"},{bodyCell:a(({column:k,record:C})=>[k.dataIndex==="name"?(r(),w(d,{key:0},{default:a(()=>[t(m,{shape:"square",src:C.product.image_url},null,8,["src"]),u(" "+s(C.product.name),1)]),_:2},1024)):A("",!0),k.dataIndex==="unit_sold"?(r(),$(I,{key:1},[u(s(`${C.unit_sold} ${C.product.unit.short_name}`),1)],64)):A("",!0),k.dataIndex==="total_purchase_price"?(r(),$(I,{key:2},[u(s(e.formatAmountCurrency(C.unit_sold*C.product.details.purchase_price)),1)],64)):A("",!0),k.dataIndex==="total_sales_price"?(r(),$(I,{key:3},[u(s(e.formatAmountCurrency(C.total_sales_price)),1)],64)):A("",!0)]),summary:a(()=>[t(_,null,{default:a(()=>[t(i,{"col-span":2}),t(i,{"col-span":1},{default:a(()=>[t(p,{strong:""},{default:a(()=>[u(s(e.$t("common.total")),1)]),_:1})]),_:1}),t(i,{"col-span":1},{default:a(()=>[t(p,{strong:""},{default:a(()=>[u(s(e.formatAmountCurrency(e.totals.totalPurchasePrice)),1)]),_:1})]),_:1}),t(i,{"col-span":1},{default:a(()=>[t(p,{strong:""},{default:a(()=>[u(s(e.formatAmountCurrency(e.totals.totalSalesPrice)),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])]))]),_:1})]),_:1})}const mw=W(dw,[["render",uw]]),cw={components:{AdminPageHeader:ge,ProductSaleSummary:mw,ProductSearchInput:Ut,DateRangePicker:rt,ExprotTable:bt},setup(){const e=Ge(),{permsArray:o,getRecursiveCategories:c,filterTreeNode:n,willSubscriptionModuleVisible:v}=X(),h=qe(),m=Se({product_id:void 0,category_id:void 0,dates:[]}),d=T([]);return ft(()=>{(!(o.value.includes("products_view")||o.value.includes("admin"))||!v("reports"))&&h.push("admin.dashboard.index")}),ee(()=>{const i=axiosAdmin.get("categories?limit=10000");Promise.all([i]).then(([p])=>{d.value=c(p)})}),{...e,permsArray:o,filters:m,filterTreeNode:n,categories:d}}};function pw(e,o,c,n,v,h){const m=l("ExprotTable"),d=l("a-page-header"),i=l("router-link"),p=l("a-breadcrumb-item"),_=l("a-breadcrumb"),f=l("AdminPageHeader"),y=l("a-col"),b=l("ProductSearchInput"),k=l("a-tree-select"),C=l("DateRangePicker"),D=l("a-row"),S=l("admin-page-filters"),P=l("ProductSaleSummary"),F=l("admin-page-table-content");return r(),$(I,null,[t(f,null,{header:a(()=>[t(d,{title:e.$t("menu.product_sales_summary"),class:"p-0"},{extra:a(()=>[t(m,{exportType:"product_sales_summary_reports",tableName:"product-sales-summary-reports-table",title:`${e.$t("menu.product_sales_summary")} ${e.$t("menu.reports")}`},null,8,["title"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(_,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(p,null,{default:a(()=>[t(i,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(p,null,{default:a(()=>[u(s(e.$t("menu.reports")),1)]),_:1}),t(p,null,{default:a(()=>[u(s(e.$t("menu.product_sales_summary")),1)]),_:1})]),_:1})]),_:1}),t(S,null,{default:a(()=>[t(D,{gutter:[16,16]},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:10,xl:10}),t(y,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(D,{gutter:[16,16],justify:"end"},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:8,xl:6},{default:a(()=>[t(b,{onValueChanged:o[0]||(o[0]=O=>{n.filters.product_id=O})})]),_:1}),t(y,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(k,{value:n.filters.category_id,"onUpdate:value":o[1]||(o[1]=O=>n.filters.category_id=O),"show-search":"",style:{width:"100%"},"dropdown-style":{maxHeight:"250px",overflow:"auto"},placeholder:e.$t("common.select_default_text",[e.$t("category.category")]),"tree-data":n.categories,"allow-clear":"","tree-default-expand-all":"",filterTreeNode:n.filterTreeNode},null,8,["value","placeholder","tree-data","filterTreeNode"])]),_:1}),t(y,{xs:24,sm:24,md:10,lg:6,xl:6},{default:a(()=>[t(C,{onDateTimeChanged:o[2]||(o[2]=O=>{n.filters.dates=O})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(F,null,{default:a(()=>[t(P,{product_id:n.filters.product_id,dates:n.filters.dates,category_id:n.filters.category_id},null,8,["product_id","dates","category_id"])]),_:1})],64)}const _w=W(cw,[["render",pw]]),fw={components:{ProductSearchInput:Ut,AdminPageHeader:ge,ExprotTable:bt,DateRangePicker:rt},setup(){const{permsArray:e,selectedWarehouse:o,formatAmountCurrency:c,formatDate:n,willSubscriptionModuleVisible:v}=X(),{url:h,expenseColumns:m,expenseHashableColumns:d}=Qo(),i=T(void 0),p=qe(),_=Ge(),f=T({expense_category_id:void 0,user_id:void 0}),y=T([]),b=T([]),k=T({dates:[]});ft(()=>{(!(e.value.includes("expenses_view")||e.value.includes("admin"))||!v("reports"))&&p.push("admin.dashboard.index")}),ee(()=>{const S=axiosAdmin.get("expense-categories?limit=10000"),P=axiosAdmin.get("users?limit=10000");Promise.all([S,P]).then(([F,O])=>{y.value=F.data,b.value=O.data}),C()});const C=()=>{_.tableUrl.value={url:h,filters:f,extraFilters:k},_.hashable.value=[...d],_.exportDetails.value={allowExport:!0,exportType:"expense_reports"},_.fetch({page:1})},D=pe(()=>{let S=0;return _.table.data.forEach(P=>{S+=P.amount}),{totalAmount:S}});return ue(o,(S,P)=>{C()}),{expenseColumns:m,..._,searchProductId:i,getTableData:C,permsArray:e,filters:f,extraFilters:k,expenseCategories:y,staffMembers:b,formatAmountCurrency:c,formatDate:n,totals:D}}},gw={class:"table-responsive"};function yw(e,o,c,n,v,h){const m=l("ExprotTable"),d=l("a-page-header"),i=l("router-link"),p=l("a-breadcrumb-item"),_=l("a-breadcrumb"),f=l("AdminPageHeader"),y=l("a-col"),b=l("a-select-option"),k=l("a-select"),C=l("DateRangePicker"),D=l("a-row"),S=l("admin-page-filters"),P=l("a-table-summary-cell"),F=l("a-typography-text"),O=l("a-table-summary-row"),E=l("a-table"),U=l("admin-page-table-content");return r(),$(I,null,[t(f,null,{header:a(()=>[t(d,{title:e.$t("menu.expense_reports"),class:"p-0"},{extra:a(()=>[t(m,{exportType:"expense_reports",tableName:"expense-reports-table",title:`${e.$t("menu.expenses")} ${e.$t("menu.reports")}`},null,8,["title"])]),_:1},8,["title"])]),breadcrumb:a(()=>[t(_,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(p,null,{default:a(()=>[t(i,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(p,null,{default:a(()=>[u(s(e.$t("menu.reports")),1)]),_:1}),t(p,null,{default:a(()=>[u(s(e.$t("menu.expense_reports")),1)]),_:1})]),_:1})]),_:1}),t(S,null,{default:a(()=>[t(D,{gutter:[16,16]},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:10,xl:10}),t(y,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(D,{gutter:[16,16],justify:"end"},{default:a(()=>[t(y,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(k,{value:n.filters.expense_category_id,"onUpdate:value":o[0]||(o[0]=K=>n.filters.expense_category_id=K),"show-search":"",style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("expense.expense_category")]),onChange:n.getTableData,allowClear:!0,optionFilterProp:"label"},{default:a(()=>[(r(!0),$(I,null,G(n.expenseCategories,K=>(r(),w(b,{key:K.xid,value:K.xid,label:K.name},{default:a(()=>[u(s(K.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),t(y,{xs:24,sm:24,md:8,lg:6,xl:6},{default:a(()=>[t(k,{value:n.filters.user_id,"onUpdate:value":o[1]||(o[1]=K=>n.filters.user_id=K),"show-search":"",style:{width:"100%"},placeholder:e.$t("common.select_default_text",[e.$t("expense.user")]),onChange:n.getTableData,allowClear:!0,optionFilterProp:"label"},{default:a(()=>[(r(!0),$(I,null,G(n.staffMembers,K=>(r(),w(b,{key:K.xid,value:K.xid,label:K.name},{default:a(()=>[u(s(K.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder","onChange"])]),_:1}),t(y,{xs:24,sm:24,md:8,lg:8,xl:8},{default:a(()=>[t(C,{onDateTimeChanged:o[2]||(o[2]=K=>{n.extraFilters.dates=K,n.getTableData()})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(U,null,{default:a(()=>[t(D,null,{default:a(()=>[t(y,{span:24},{default:a(()=>[g("div",gw,[t(E,{columns:n.expenseColumns,"row-key":K=>K.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,id:"expense-reports-table",bordered:"",size:"middle"},{bodyCell:a(({column:K,record:z})=>{var M;return[K.dataIndex==="expense_category_id"?(r(),$(I,{key:0},[u(s(z.expense_category.name),1)],64)):A("",!0),K.dataIndex==="amount"?(r(),$(I,{key:1},[u(s(n.formatAmountCurrency(z.amount)),1)],64)):A("",!0),K.dataIndex==="date"?(r(),$(I,{key:2},[u(s(n.formatDate(z.date)),1)],64)):A("",!0),K.dataIndex==="user_id"?(r(),$(I,{key:3},[u(s((M=z.user)==null?void 0:M.name),1)],64)):A("",!0)]}),summary:a(()=>[t(O,null,{default:a(()=>[t(P,{"col-span":2}),t(P,{"col-span":1},{default:a(()=>[t(F,{strong:""},{default:a(()=>[u(s(e.$t("common.total")),1)]),_:1})]),_:1}),t(P,{"col-span":1},{default:a(()=>[t(F,{strong:""},{default:a(()=>[u(s(n.formatAmountCurrency(n.totals.totalAmount)),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const hw=W(fw,[["render",yw]]),vw={components:{BarChartOutlined:jl,UnorderedListOutlined:Hl,ShoppingCartOutlined:$t,ClockCircleOutlined:Nl,ProductSearchInput:Ut,AdminPageHeader:ge,ExprotTable:bt,DateRangePicker:rt},setup(){const{permsArray:e,selectedWarehouse:o,formatAmountCurrency:c,formatDate:n,willSubscriptionModuleVisible:v}=X(),h=qe(),m=Se({dates:[],active_report_type:"daily_income"}),d=T([]),i=ke(),p=T("by_order"),_=T([]);ft(()=>{(!(e.value.includes("products_view")&&e.value.includes("purchases_view")&&e.value.includes("sales_view")&&e.value.includes("purchase_returns_view")&&e.value.includes("sales_returns_view")||e.value.includes("admin"))||!v("reports"))&&h.push("admin.dashboard.index")}),ee(()=>{f(m)});const f=y=>{axiosAdmin.post("reports/profit-loss",y).then(b=>{d.value=b.data.results,_.value=b.data.dates;var k="profit_loss_reports",C=i.state.auth.allExportData,D=et(C,P=>P.export_type!=k),S=et(D,P=>P.export_type!="profit_loss_reports_by_dates");i.commit("auth/updatAllExportData",[...S,{export_type:k,data:[b.data.results],url:"reports/profit-loss"},{export_type:"profit_loss_reports_by_dates",data:b.data.dates,url:"reports/profit-loss"}])})};return ue(m,(y,b)=>{f(y)}),{permsArray:e,formatAmountCurrency:c,formatDate:n,filters:m,reportData:d,dateWiseReportResults:_,selectedTab:p}}},bw={key:0,id:"profit-loss-reports-by-dates-table"};function kw(e,o,c,n,v,h){const m=l("ExprotTable"),d=l("a-page-header"),i=l("router-link"),p=l("a-breadcrumb-item"),_=l("a-breadcrumb"),f=l("AdminPageHeader"),y=l("a-col"),b=l("DateRangePicker"),k=l("a-row"),C=l("admin-page-filters"),D=l("ShoppingCartOutlined"),S=l("a-descriptions-item"),P=l("a-typography-text"),F=l("a-descriptions"),O=l("a-tab-pane"),E=l("ClockCircleOutlined"),U=l("a-result"),K=l("a-tabs"),z=l("admin-page-table-content");return r(),$(I,null,[t(f,null,{header:a(()=>[t(d,{title:e.$t("menu.profit_loss"),class:"p-0"},{extra:a(()=>[n.selectedTab=="by_order"?(r(),w(m,{key:0,exportType:"profit_loss_reports",tableName:"profit-loss-reports-table",title:`${e.$t("menu.profit_loss")} ${e.$t("menu.reports")}`},null,8,["title"])):A("",!0),n.selectedTab=="by_dates"&&n.dateWiseReportResults.length>0?(r(),w(m,{key:1,exportType:"profit_loss_reports_by_dates",tableName:"profit-loss-reports-by-dates-table",title:`${e.$t("menu.profit_loss")} ${e.$t("menu.reports")}`},null,8,["title"])):A("",!0)]),_:1},8,["title"])]),breadcrumb:a(()=>[t(_,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(p,null,{default:a(()=>[t(i,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(p,null,{default:a(()=>[u(s(e.$t("menu.reports")),1)]),_:1}),t(p,null,{default:a(()=>[u(s(e.$t("menu.profit_loss")),1)]),_:1})]),_:1})]),_:1}),t(C,null,{default:a(()=>[t(k,{gutter:[16,16]},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:10,xl:10}),t(y,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(k,{gutter:[16,16],justify:"end"},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:8,xl:8},{default:a(()=>[t(b,{onDateTimeChanged:o[0]||(o[0]=M=>{n.filters.dates=M})})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(z,null,{default:a(()=>[t(K,{activeKey:n.selectedTab,"onUpdate:activeKey":o[1]||(o[1]=M=>n.selectedTab=M)},{default:a(()=>[t(O,{key:"by_order"},{tab:a(()=>[t(D),u(" "+s(e.$t("report.by_order")),1)]),default:a(()=>[t(k,{id:"profit-loss-reports-table"},{default:a(()=>[t(y,{span:24,class:"mt-10"},{default:a(()=>[t(F,{title:e.$t("common.profit_reports_by_orders"),column:1,bordered:"",size:"middle"},{default:a(()=>[t(S,null,{label:a(()=>[g("strong",null,s(e.$t("common.particulars")),1)]),default:a(()=>[g("strong",null,s(e.$t("common.amount")),1)]),_:1}),t(S,null,{label:a(()=>[u(s(e.$t("menu.sales"))+" (+) ",1)]),default:a(()=>[u(" "+s(n.formatAmountCurrency(n.reportData.sales)),1)]),_:1}),t(S,null,{label:a(()=>[u(s(e.$t("menu.purchases"))+" (-) ",1)]),default:a(()=>[u(" "+s(n.formatAmountCurrency(n.reportData.purchases)),1)]),_:1}),t(S,null,{label:a(()=>[u(s(e.$t("menu.purchase_returns"))+" (+) ",1)]),default:a(()=>[u(" "+s(n.formatAmountCurrency(n.reportData.purchase_returns)),1)]),_:1}),t(S,null,{label:a(()=>[u(s(e.$t("menu.sales_returns"))+" (-) ",1)]),default:a(()=>[u(" "+s(n.formatAmountCurrency(n.reportData.sales_returns)),1)]),_:1}),t(S,null,{label:a(()=>[u(s(e.$t("stock_transfer.stock_transfer_transfered"))+" (+) ",1)]),default:a(()=>[u(" "+s(n.formatAmountCurrency(n.reportData.stock_transfer_transfered)),1)]),_:1}),t(S,null,{label:a(()=>[u(s(e.$t("stock_transfer.stock_transfer_received"))+" (-) ",1)]),default:a(()=>[u(" "+s(n.formatAmountCurrency(n.reportData.stock_transfer_received)),1)]),_:1}),t(S,null,{label:a(()=>[u(s(e.$t("menu.expenses"))+" (-) ",1)]),default:a(()=>[u(" "+s(n.formatAmountCurrency(n.reportData.expenses)),1)]),_:1}),t(S,{label:e.$t("common.profit")},{default:a(()=>[t(P,{type:n.reportData.profit>0?"success":"danger",strong:""},{default:a(()=>[u(s(n.formatAmountCurrency(n.reportData.profit)),1)]),_:1},8,["type"])]),_:1},8,["label"])]),_:1},8,["title"])]),_:1})]),_:1})]),_:1}),t(O,{key:"by_dates"},{tab:a(()=>[t(E),u(" "+s(e.$t("report.by_dates")),1)]),default:a(()=>[n.dateWiseReportResults.length>0?(r(),$("div",bw,[(r(!0),$(I,null,G(n.dateWiseReportResults,(M,R,q)=>(r(),w(k,{key:M.date},{default:a(()=>[t(y,{span:24,class:kt(["mt-10",`tbl_result_${R}`])},{default:a(()=>[t(F,{style:{"margin-top":"10px"},column:1,bordered:"",size:"middle"},{default:a(()=>[t(S,null,{label:a(()=>[g("strong",null,s(n.formatDate(M.date)),1)]),_:2},1024),t(S,null,{label:a(()=>[g("strong",null,s(e.$t("common.particulars")),1)]),default:a(()=>[g("strong",null,s(e.$t("common.amount")),1)]),_:1}),t(S,null,{label:a(()=>[u(s(e.$t("menu.sales"))+" (+) ",1)]),default:a(()=>[u(" "+s(n.formatAmountCurrency(M.result.sales)),1)]),_:2},1024),t(S,null,{label:a(()=>[u(s(e.$t("menu.purchases"))+" (-) ",1)]),default:a(()=>[u(" "+s(n.formatAmountCurrency(M.result.purchases)),1)]),_:2},1024),t(S,null,{label:a(()=>[u(s(e.$t("menu.purchase_returns"))+" (+) ",1)]),default:a(()=>[u(" "+s(n.formatAmountCurrency(M.result.purchase_returns)),1)]),_:2},1024),t(S,null,{label:a(()=>[u(s(e.$t("menu.sales_returns"))+" (-) ",1)]),default:a(()=>[u(" "+s(n.formatAmountCurrency(M.result.sales_returns)),1)]),_:2},1024),t(S,null,{label:a(()=>[u(s(e.$t("stock_transfer.stock_transfer_transfered"))+" (+) ",1)]),default:a(()=>[u(" "+s(n.formatAmountCurrency(M.result.stock_transfer_transfered)),1)]),_:2},1024),t(S,null,{label:a(()=>[u(s(e.$t("stock_transfer.stock_transfer_received"))+" (-) ",1)]),default:a(()=>[u(" "+s(n.formatAmountCurrency(M.result.stock_transfer_received)),1)]),_:2},1024),t(S,null,{label:a(()=>[u(s(e.$t("menu.expenses"))+" (-) ",1)]),default:a(()=>[u(" "+s(n.formatAmountCurrency(M.result.expenses)),1)]),_:2},1024),t(S,{label:e.$t("common.profit")},{default:a(()=>[t(P,{type:M.result.profit>0?"success":"danger",strong:""},{default:a(()=>[u(s(n.formatAmountCurrency(M.result.profit)),1)]),_:2},1032,["type"])]),_:2},1032,["label"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))])):(r(),w(k,{key:1},{default:a(()=>[t(y,{span:24,class:"mt-10"},{default:a(()=>[t(U,{title:e.$t("report.select_date"),"sub-title":e.$t("report.select_date_message")},null,8,["title","sub-title"])]),_:1})]),_:1}))]),_:1})]),_:1},8,["activeKey"])]),_:1})],64)}const ww=W(vw,[["render",kw]]),Cw=[{path:"/admin/reports/",component:()=>lt(()=>import("./Admin-3be1af1f.js"),["assets/Admin-3be1af1f.js","assets/vendor-4a6eb15a.js"]),children:[{path:"payments",component:h2,name:"admin.reports.payments.index",meta:{requireAuth:!0,menuParent:"reports",menuKey:"payments"}},{path:"stock-alert",component:w2,name:"admin.reports.stock.index",meta:{requireAuth:!0,menuParent:"reports",menuKey:"stock_alert"}},{path:"users",component:R2,name:"admin.reports.users.index",meta:{requireAuth:!0,menuParent:"reports",menuKey:"users_reports"}},{path:"sales-summary",component:Y2,name:"admin.reports.sales_summary.index",meta:{requireAuth:!0,menuParent:"reports",menuKey:"sales_summary",permission:"users_view"}},{path:"stock-summary",component:ew,name:"admin.reports.stock_summary.index",meta:{requireAuth:!0,menuParent:"reports",menuKey:"stock_summary",permission:"products_view"}},{path:"rate-list",component:rw,name:"admin.reports.rate_list.index",meta:{requireAuth:!0,menuParent:"reports",menuKey:"rate_list",permission:"products_view"}},{path:"product-sales-summary",component:_w,name:"admin.reports.product_sales_summary.index",meta:{requireAuth:!0,menuParent:"reports",menuKey:"product_sales_summary",permission:"products_view"}},{path:"cash-bank",component:z2,name:"admin.reports.cash_bank.index",meta:{requireAuth:!0,menuParent:"cash_bank",menuKey:"cash_bank"}},{path:"expenses",component:hw,name:"admin.reports.expenses.index",meta:{requireAuth:!0,menuParent:"reports",menuKey:"expense_reports"}},{path:"profit-loss",component:ww,name:"admin.reports.profit_loss.index",meta:{requireAuth:!0,menuParent:"reports",menuKey:"profit_loss"}}]}],ta=["innerWidth","collapsed","cssSettings","isRtl"],ED=It("div",ta)`

`,OD=It("div",ta)`
	${({innerWidth:e,collapsed:o,isRtl:c})=>c?e<=991?"margin-right: 2px;":o?"margin-right: 80px;":"margin-right: 240px;":""}
	${({innerWidth:e,collapsed:o,isRtl:c})=>c?"":e<=991?"margin-left: 2px;":o?"margin-left: 80px;":"margin-left: 240px;"}
	min-height: 100vh;
`,ID=It("div",ta)`
	display: flex;
	justify-content: flex-end;
	align-items: center;
`,PD=It("div",ta)`
	.ant-layout-header, .ant-menu-horizontal{
		background: #2e3f50 !important;
	}
`,UD=It("div",ta)`

	.breadcrumb-header {
		.page-content-sub-header {
			padding-top: 10px !important;
			padding-bottom: 10px !important;

			${({cssSettings:e})=>e&&e.headerMenuMode=="horizontal"?"border-bottom: 0px":""};
		}

		.breadcrumb-left-border {
			border-left: none !important;
		}

		.ant-card-body {
			padding: ${({cssSettings:e})=>e&&e.headerMenuMode=="horizontal"?`0px ${e.leftRightPadding}`:"0px"};
			margin: ${({cssSettings:e})=>e&&e.headerMenuMode=="horizontal"?"0px":"0px 16px 0"};
		}
	}

	.dashboard-page-content-container {
		padding: ${({cssSettings:e})=>e&&e.headerMenuMode=="horizontal"?`0px ${e.leftRightPadding}`:"0px"};
		margin: ${({cssSettings:e})=>e&&e.headerMenuMode=="horizontal"?"0px":"0px 16px 0"};
		${({cssSettings:e})=>e&&e.headerMenuMode=="horizontal"?"border-top: 1px solid #cbd6e2":""};
	}

	.page-content-container {
		min-height: calc(100vh - 165px);
	}

    .setup-page-content-container {
		min-height: calc(100vh - 147px);
	}

	.email-page-content-container {
		min-height: calc(100vh - 202px);
	}

	.page-content-container, .email-page-content-container {
		${({cssSettings:e})=>e&&e.headerMenuMode=="horizontal"?"border-top: 1px solid #cbd6e2":""};

		.ant-card-body {
			padding: ${({cssSettings:e})=>e&&e.headerMenuMode=="horizontal"?`0px ${e.leftRightPadding}`:"0px"};
			margin: ${({cssSettings:e})=>e&&e.headerMenuMode=="horizontal"?"0px":"0px 16px 0"};
			padding-top: 30px;
		}
	}

	.setting-sidebar {
		margin-left: ${({cssSettings:e})=>e&&e.headerMenuMode=="horizontal"?`${e.leftRightPadding}`:"0px"};
	}
`;const Sw=Z({components:{SyncOutlined:Ct},setup(){const{appSetting:e}=X();return{appSetting:e}}}),$w={class:"loading-app-container"},Dw={style:{color:"#7676e3"}},Aw=["src"];function Tw(e,o,c,n,v,h){const m=l("SyncOutlined"),d=l("a-result");return r(),$("div",$w,[t(d,null,{title:a(()=>[g("span",Dw,s(e.$t("messages.loading_app_message")),1)]),icon:a(()=>[g("img",{style:{width:"150px"},src:e.appSetting.light_logo_url},null,8,Aw)]),extra:a(()=>[t(m,{style:{fontSize:"38px",color:"#5254cf"},spin:""})]),_:1})])}const Ew=W(Sw,[["render",Tw],["__scopeId","data-v-c2a22665"]]),Ow={props:{showFilter:{default:!0}},emits:["addOrEditSuccess"],components:{PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,AddEdit:Ya,OnlineStoreStatus:Lo},setup(e,{emit:o}){const{permsArray:c,appSetting:n}=X(),{url:v,addEditUrl:h,initData:m,columns:d,filterableColumns:i}=Na(),p=Ve();return ee(()=>{p.tableUrl.value={url:v},p.table.filterableColumns=i,p.fetch({page:1}),p.crudUrl.value=h,p.langKey.value="warehouse",p.initData.value={...m},p.formData.value={...m}}),{appSetting:n,permsArray:c,columns:d,...p,filterableColumns:i,addOrEditSuccess:f=>{p.addEditSuccess(f),o("addOrEditSuccess",{action_type:p.addEditType.value,xid:f})}}}},Iw={class:"table-responsive"};function Pw(e,o,c,n,v,h){const m=l("AddEdit"),d=l("a-select-option"),i=l("a-select"),p=l("a-input-search"),_=l("a-input-group"),f=l("a-col"),y=l("a-row"),b=l("a-image"),k=l("OnlineStoreStatus"),C=l("a-button"),D=l("router-link"),S=l("EditOutlined"),P=l("DeleteOutlined"),F=l("a-table");return r(),$("div",null,[t(m,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:n.addOrEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),c.showFilter?(r(),w(y,{key:0,gutter:[15,15],class:"mb-20"},{default:a(()=>[t(f,{xs:24,sm:24,md:12,lg:8,xl:8},{default:a(()=>[t(_,{compact:""},{default:a(()=>[t(i,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":o[0]||(o[0]=O=>e.table.searchColumn=O),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),$(I,null,G(n.filterableColumns,O=>(r(),w(d,{key:O.key},{default:a(()=>[u(s(O.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(p,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":o[1]||(o[1]=O=>e.table.searchString=O),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})):A("",!0),t(y,{class:"mt-20"},{default:a(()=>[t(f,{span:24},{default:a(()=>[g("div",Iw,[t(F,{columns:n.columns,"row-key":O=>O.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange},{bodyCell:a(({column:O,record:E})=>[O.dataIndex==="logo"?(r(),w(b,{key:0,width:48,src:E.logo_url},null,8,["src"])):A("",!0),O.dataIndex==="online_store_enabled"?(r(),$(I,{key:1},[t(k,{status:E.online_store_enabled,x_warehouse_id:E.xid,onSuccess:e.fetch},null,8,["status","x_warehouse_id","onSuccess"]),E.online_store_enabled==1?(r(),$(I,{key:0},[o[2]||(o[2]=g("br",null,null,-1)),t(D,{to:{name:"front.homepage",params:{warehouse:E.slug}},target:"_blank"},{default:a(()=>[t(C,{type:"link",class:"p-0 mt-5"},{default:a(()=>[u(s(e.$t("warehouse.view_online_store")),1)]),_:1})]),_:1},8,["to"])],64)):A("",!0)],64)):A("",!0),O.dataIndex==="action"?(r(),$(I,{key:2},[n.permsArray.includes("warehouses_edit")||n.permsArray.includes("admin")?(r(),w(C,{key:0,type:"primary",onClick:U=>e.editItem(E),style:{"margin-left":"4px"}},{icon:a(()=>[t(S)]),_:1},8,["onClick"])):A("",!0),(n.permsArray.includes("warehouses_delete")||n.permsArray.includes("admin"))&&n.appSetting.x_warehouse_id!=E.xid?(r(),w(C,{key:1,type:"primary",onClick:U=>e.showDeleteConfirm(E.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(P)]),_:1},8,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})])}const Uw=W(Ow,[["render",Pw]]),Fw={props:{showFilter:{default:!0},panelType:{type:String,default:"admin"}},emits:["addOrEditSuccess"],components:{PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,AddEdit:Qa},setup(e,{emit:o}){const{permsArray:c,appSetting:n}=X(),{url:v,addEditUrl:h,initData:m,columns:d,filterableColumns:i}=Ja(e.panelType),p=Ve();return ee(()=>{p.tableUrl.value={url:v},p.table.filterableColumns=i,p.fetch({page:1}),p.crudUrl.value=h,p.langKey.value="currency",p.initData.value={...m},p.formData.value={...m}}),{appSetting:n,permsArray:c,columns:d,...p,filterableColumns:i,addOrEditSuccess:f=>{p.addEditSuccess(f),o("addOrEditSuccess",{action_type:p.addEditType.value,xid:f})}}}},Mw={class:"table-responsive"};function qw(e,o,c,n,v,h){const m=l("AddEdit"),d=l("a-select-option"),i=l("a-select"),p=l("a-input-search"),_=l("a-input-group"),f=l("a-col"),y=l("a-row"),b=l("EditOutlined"),k=l("a-button"),C=l("DeleteOutlined"),D=l("a-table");return r(),$("div",null,[t(m,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:n.addOrEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),c.showFilter?(r(),w(y,{key:0,gutter:[15,15],class:"mb-20"},{default:a(()=>[t(f,{xs:24,sm:24,md:12,lg:8,xl:8},{default:a(()=>[t(_,{compact:""},{default:a(()=>[t(i,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":o[0]||(o[0]=S=>e.table.searchColumn=S),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),$(I,null,G(n.filterableColumns,S=>(r(),w(d,{key:S.key},{default:a(()=>[u(s(S.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(p,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":o[1]||(o[1]=S=>e.table.searchString=S),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})):A("",!0),t(y,{class:"mt-20"},{default:a(()=>[t(f,{span:24},{default:a(()=>[g("div",Mw,[t(D,{columns:n.columns,"row-key":S=>S.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange},{bodyCell:a(({column:S,record:P})=>[S.dataIndex==="action"?(r(),$(I,{key:0},[c.panelType=="admin"&&(n.permsArray.includes("currencies_edit")||n.permsArray.includes("admin"))||c.panelType=="superadmin"?(r(),w(k,{key:0,type:"primary",onClick:F=>e.editItem(P),style:{"margin-left":"4px"}},{icon:a(()=>[t(b)]),_:1},8,["onClick"])):A("",!0),(c.panelType=="admin"&&(n.permsArray.includes("currencies_delete")||n.permsArray.includes("admin"))||c.panelType=="superadmin")&&n.appSetting.x_currency_id!=P.xid?(r(),w(k,{key:1,type:"primary",onClick:F=>e.showDeleteConfirm(P.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(C)]),_:1},8,["onClick"])):A("",!0)],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})])}const Rw=W(Fw,[["render",qw]]),Kw={props:{showFilter:{default:!0}},emits:["addOrEditSuccess"],components:{PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,AddEdit:ja},setup(e,{emit:o}){const{permsArray:c}=X(),{url:n,addEditUrl:v,initData:h,columns:m,filterableColumns:d}=Wa(),i=Ve();return ee(()=>{i.tableUrl.value={url:n},i.table.filterableColumns=d,i.fetch({page:1}),i.crudUrl.value=v,i.langKey.value="payment_mode",i.initData.value={...h},i.formData.value={...h}}),{permsArray:c,columns:m,...i,filterableColumns:d,addOrEditSuccess:_=>{i.addEditSuccess(_),o("addOrEditSuccess",{action_type:i.addEditType.value,xid:_})}}}},Vw={class:"table-responsive"},zw={key:0},Lw={key:1};function Bw(e,o,c,n,v,h){const m=l("AddEdit"),d=l("a-select-option"),i=l("a-select"),p=l("a-input-search"),_=l("a-input-group"),f=l("a-col"),y=l("a-row"),b=l("EditOutlined"),k=l("a-button"),C=l("DeleteOutlined"),D=l("a-table");return r(),$("div",null,[t(m,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:n.addOrEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData,pageTitle:e.pageTitle,successMessage:e.successMessage},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data","pageTitle","successMessage"]),c.showFilter?(r(),w(y,{key:0,gutter:[15,15],class:"mb-20"},{default:a(()=>[t(f,{xs:24,sm:24,md:12,lg:8,xl:8},{default:a(()=>[t(_,{compact:""},{default:a(()=>[t(i,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":o[0]||(o[0]=S=>e.table.searchColumn=S),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),$(I,null,G(n.filterableColumns,S=>(r(),w(d,{key:S.key},{default:a(()=>[u(s(S.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(p,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":o[1]||(o[1]=S=>e.table.searchString=S),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})):A("",!0),t(y,{class:"mt-20"},{default:a(()=>[t(f,{span:24},{default:a(()=>[g("div",Vw,[t(D,{columns:n.columns,"row-key":S=>S.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange},{bodyCell:a(({column:S,record:P})=>[S.dataIndex==="action"?(r(),$(I,{key:0},[P.name.toLowerCase()!="cash"?(r(),$("span",zw,[n.permsArray.includes("payment_modes_edit")||n.permsArray.includes("admin")?(r(),w(k,{key:0,type:"primary",onClick:F=>e.editItem(P),style:{"margin-left":"4px"}},{icon:a(()=>[t(b)]),_:1},8,["onClick"])):A("",!0),n.permsArray.includes("payment_modes_delete")||n.permsArray.includes("admin")?(r(),w(k,{key:1,type:"primary",onClick:F=>e.showDeleteConfirm(P.xid),style:{"margin-left":"4px"}},{icon:a(()=>[t(C)]),_:1},8,["onClick"])):A("",!0)])):(r(),$("span",Lw," - "))],64)):A("",!0)]),_:1},8,["columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})])}const Ww=W(Kw,[["render",Bw]]),jw={props:{showSubmitButton:{default:!0}},emits:["updateSuccess"],components:{EyeOutlined:tt,PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,ExclamationCircleOutlined:Ae,SaveOutlined:ve,SettingOutlined:St,ColorPicker:eo,Upload:mt,CurrencyAddButton:Ro,WarehouseAddButton:Bt,CreateMenuSetting:zo,FormItemHeading:ga},setup(e,{emit:o}){const{addEditRequestAdmin:c,loading:n,rules:v}=be(),{permsArray:h,appSetting:m,dayjsObject:d,appType:i}=X(),{t:p}=ae(),_=ke(),f=T({}),y=T([]),b=T([]),k=T([]),C=T([]),D=T([]),S=m.value,P="currencies?limit=10000",F="warehouses?limit=10000",O="timezones",E=T("linear-gradient(0deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%)"),U=window.config.theme_mode;ee(()=>{const L=axiosAdmin.get(F),j=axiosAdmin.get(P),Y=axiosAdmin.get(O);Promise.all([L,j,Y]).then(([x,B,N])=>{b.value=x.data,y.value=B.data,k.value=N.data.timezones,C.value=N.data.date_formates,D.value=N.data.time_formates,K()})});const K=()=>{f.value={name:S.name,short_name:S.short_name,email:S.email,phone:S.phone,address:S.address,left_sidebar_theme:S.left_sidebar_theme,dark_logo:S.dark_logo,dark_logo_url:S.dark_logo_url,light_logo:S.light_logo,light_logo_url:S.light_logo_url,small_dark_logo:S.small_dark_logo,small_light_logo:S.small_light_logo,small_dark_logo_url:S.small_dark_logo_url,small_light_logo_url:S.small_light_logo_url,login_image:S.login_image,login_image_url:S.login_image_url,shortcut_menus:S.shortcut_menus,rtl:S.rtl,currency_id:S.x_currency_id,warehouse_id:S.x_warehouse_id,primary_color:S.primary_color,timezone:S.timezone,date_format:S.date_format,time_format:S.time_format,auto_detect_timezone:S.auto_detect_timezone,app_debug:S.app_debug,update_app_notification:S.update_app_notification,_method:"PUT"}};return{appType:i,permsArray:h,formData:f,loading:n,rules:v,warehouses:b,currencies:y,onSubmit:()=>{c({url:`companies/${S.xid}`,data:f.value,successMessage:p("company.updated"),success:L=>{_.dispatch("auth/updateApp"),o("updateSuccess")}})},currencyAdded:()=>{axiosAdmin.get(P).then(L=>{y.value=L.data})},warehouseAdded:()=>{axiosAdmin.get(F).then(L=>{b.value=L.data})},gradientColor:E,timezones:k,dateFormats:C,timeFormats:D,dayjsObject:d,appThemeMode:U,addMenuSettingUpdated:L=>{f.value.shortcut_menus=L}}}},Hw={class:"mt-40"},Nw={style:{display:"flex"}},Yw={style:{display:"flex"}},Gw={class:"mt-30"},Xw={class:"mt-30"};function Jw(e,o,c,n,v,h){const m=l("FormItemHeading"),d=l("a-input"),i=l("a-form-item"),p=l("a-col"),_=l("a-row"),f=l("a-select-option"),y=l("a-select"),b=l("CurrencyAddButton"),k=l("WarehouseAddButton"),C=l("a-switch"),D=l("color-picker"),S=l("Upload"),P=l("SaveOutlined"),F=l("a-button"),O=l("a-form");return r(),w(O,{layout:"vertical"},{default:a(()=>[g("div",Hw,[t(m,null,{default:a(()=>[u(s(e.$t("setup_company.basic_settings")),1)]),_:1})]),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("company.name"),name:"name",help:n.rules.name?n.rules.name.message:null,validateStatus:n.rules.name?"error":null,class:"required"},{default:a(()=>[t(d,{value:n.formData.name,"onUpdate:value":o[0]||(o[0]=E=>n.formData.name=E),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("company.short_name"),name:"short_name",help:n.rules.short_name?n.rules.short_name.message:null,validateStatus:n.rules.short_name?"error":null,class:"required"},{default:a(()=>[t(d,{value:n.formData.short_name,"onUpdate:value":o[1]||(o[1]=E=>n.formData.short_name=E),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.short_name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("company.email"),name:"email",help:n.rules.email?n.rules.email.message:null,validateStatus:n.rules.email?"error":null,class:"required"},{default:a(()=>[t(d,{value:n.formData.email,"onUpdate:value":o[2]||(o[2]=E=>n.formData.email=E),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("company.phone"),name:"phone",help:n.rules.phone?n.rules.phone.message:null,validateStatus:n.rules.phone?"error":null,class:"required"},{default:a(()=>[t(d,{value:n.formData.phone,"onUpdate:value":o[3]||(o[3]=E=>n.formData.phone=E),placeholder:e.$t("common.placeholder_default_text",[e.$t("company.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("company.date_format"),name:"date_format",help:n.rules.date_format?n.rules.date_format.message:null,validateStatus:n.rules.date_format?"error":null,class:"required"},{default:a(()=>[t(y,{value:n.formData.date_format,"onUpdate:value":o[4]||(o[4]=E=>n.formData.date_format=E),placeholder:e.$t("common.select_default_text",[e.$t("company.date_format")]),allowClear:!0,optionFilterProp:"value","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.dateFormats,(E,U)=>(r(),w(f,{key:U,value:E},{default:a(()=>[u(s(`(${U}) => `+n.dayjsObject().format(E)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("company.time_format"),name:"time_format",help:n.rules.time_format?n.rules.time_format.message:null,validateStatus:n.rules.time_format?"error":null,class:"required"},{default:a(()=>[t(y,{value:n.formData.time_format,"onUpdate:value":o[5]||(o[5]=E=>n.formData.time_format=E),placeholder:e.$t("common.select_default_text",[e.$t("company.time_format")]),allowClear:!0,optionFilterProp:"value","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.timeFormats,(E,U)=>(r(),w(f,{key:U,value:U},{default:a(()=>[u(s(`(${E}) => `+n.dayjsObject().format(U)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("company.currency"),name:"currency_id",help:n.rules.currency_id?n.rules.currency_id.message:null,validateStatus:n.rules.currency_id?"error":null,class:"required"},{default:a(()=>[g("span",Nw,[t(y,{value:n.formData.currency_id,"onUpdate:value":o[6]||(o[6]=E=>n.formData.currency_id=E),placeholder:e.$t("common.select_default_text",[e.$t("company.currency")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.currencies,E=>(r(),w(f,{key:E.xid,value:E.xid},{default:a(()=>[u(s(`${E.name} (${E.symbol})`),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),t(b,{onOnAddSuccess:n.currencyAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("warehouse.warehouse"),name:"warehouse_id",help:n.rules.warehouse_id?n.rules.warehouse_id.message:null,validateStatus:n.rules.warehouse_id?"error":null,class:"required"},{default:a(()=>[g("span",Yw,[t(y,{value:n.formData.warehouse_id,"onUpdate:value":o[7]||(o[7]=E=>n.formData.warehouse_id=E),placeholder:e.$t("common.select_default_text",[e.$t("warehouse.warehouse")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.warehouses,E=>(r(),w(f,{key:E.xid,value:E.xid,label:E.name},{default:a(()=>[u(s(E.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","placeholder"]),t(k,{onOnAddSuccess:n.warehouseAdded},null,8,["onOnAddSuccess"])])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:4,lg:4},{default:a(()=>[t(i,{label:e.$t("company.auto_detect_timezone"),name:"auto_detect_timezone",help:n.rules.auto_detect_timezone?n.rules.auto_detect_timezone.message:null,validateStatus:n.rules.auto_detect_timezone?"error":null},{default:a(()=>[t(C,{checked:n.formData.auto_detect_timezone,"onUpdate:checked":o[8]||(o[8]=E=>n.formData.auto_detect_timezone=E),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:8,lg:8},{default:a(()=>[t(i,{label:e.$t("company.default_timezone"),name:"timezone",help:n.rules.timezone?n.rules.timezone.message:null,validateStatus:n.rules.timezone?"error":null,class:"required"},{default:a(()=>[t(y,{value:n.formData.timezone,"onUpdate:value":o[9]||(o[9]=E=>n.formData.timezone=E),placeholder:e.$t("common.select_default_text",[e.$t("company.default_timezone")]),allowClear:!0,optionFilterProp:"value","show-search":""},{default:a(()=>[(r(!0),$(I,null,G(n.timezones,(E,U)=>(r(),w(f,{key:U,value:E},{default:a(()=>[u(s(E),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),n.appType=="non-saas"?(r(),w(p,{key:0,xs:24,sm:24,md:4,lg:4},{default:a(()=>[t(i,{label:e.$t("company.app_debug"),name:"app_debug",help:n.rules.app_debug?n.rules.app_debug.message:null,validateStatus:n.rules.app_debug?"error":null},{default:a(()=>[t(C,{checked:n.formData.app_debug,"onUpdate:checked":o[10]||(o[10]=E=>n.formData.app_debug=E),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})):A("",!0),n.appType=="non-saas"?(r(),w(p,{key:1,xs:24,sm:24,md:4,lg:4},{default:a(()=>[t(i,{label:e.$t("company.update_app_notification"),name:"update_app_notification",help:n.rules.update_app_notification?n.rules.update_app_notification.message:null,validateStatus:n.rules.update_app_notification?"error":null},{default:a(()=>[t(C,{checked:n.formData.update_app_notification,"onUpdate:checked":o[11]||(o[11]=E=>n.formData.update_app_notification=E),checkedValue:1,unCheckedValue:0},null,8,["checked"])]),_:1},8,["label","help","validateStatus"])]),_:1})):A("",!0)]),_:1}),g("div",Gw,[t(m,null,{default:a(()=>[u(s(e.$t("setup_company.theme_settings")),1)]),_:1})]),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("company.left_sidebar_theme"),name:"left_sidebar_theme",help:n.rules.left_sidebar_theme?n.rules.left_sidebar_theme.message:null,validateStatus:n.rules.left_sidebar_theme?"error":null},{default:a(()=>[t(y,{value:n.formData.left_sidebar_theme,"onUpdate:value":o[12]||(o[12]=E=>n.formData.left_sidebar_theme=E),placeholder:e.$t("common.select_default_text",[e.$t("company.left_sidebar_theme")])},{default:a(()=>[t(f,{key:"dark",value:"dark"},{default:a(()=>[u(s(e.$t("company.dark")),1)]),_:1}),n.appThemeMode!="dark"?(r(),w(f,{key:"light",value:"light"},{default:a(()=>[u(s(e.$t("company.light")),1)]),_:1})):A("",!0)]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("company.primary_color"),name:"primary_color",help:n.rules.primary_color?n.rules.primary_color.message:null,validateStatus:n.rules.primary_color?"error":null},{default:a(()=>[t(D,{pureColor:n.formData.primary_color,"onUpdate:pureColor":o[13]||(o[13]=E=>n.formData.primary_color=E),format:"hex",useType:"pure",gradientColor:n.gradientColor,"onUpdate:gradientColor":o[14]||(o[14]=E=>n.gradientColor=E)},null,8,["pureColor","gradientColor"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("company.layout"),name:"rtl",help:n.rules.rtl?n.rules.rtl.message:null,validateStatus:n.rules.rtl?"error":null,class:"required"},{default:a(()=>[t(y,{value:n.formData.rtl,"onUpdate:value":o[15]||(o[15]=E=>n.formData.rtl=E),placeholder:e.$t("common.select_default_text",[e.$t("company.layout")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[t(f,{key:"rtl",value:1},{default:a(()=>[u(s(e.$t("company.rtl")),1)]),_:1}),t(f,{key:"ltr",value:0},{default:a(()=>[u(s(e.$t("company.ltr")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(i,{label:e.$t("company.shortcut_menu_Placement"),name:"shortcut_menus",help:n.rules.shortcut_menus?n.rules.shortcut_menus.message:null,validateStatus:n.rules.shortcut_menus?"error":null,class:"required"},{default:a(()=>[t(y,{value:n.formData.shortcut_menus,"onUpdate:value":o[16]||(o[16]=E=>n.formData.shortcut_menus=E),placeholder:e.$t("common.select_default_text",[e.$t("company.shortcut_menu_Placement")]),allowClear:!0,optionFilterProp:"label","show-search":""},{default:a(()=>[t(f,{key:"top_bottom",value:"top_bottom"},{default:a(()=>[u(s(e.$t("company.top_and_bottom")),1)]),_:1}),t(f,{key:"top",value:"top"},{default:a(()=>[u(s(e.$t("company.top_header")),1)]),_:1}),t(f,{key:"bottom",value:"bottom"},{default:a(()=>[u(s(e.$t("company.bottom_corner")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),g("div",Xw,[t(m,null,{default:a(()=>[u(s(e.$t("setup_company.logo_settings")),1)]),_:1})]),t(_,{gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(i,{label:e.$t("company.dark_logo"),name:"dark_logo",help:n.rules.dark_logo?n.rules.dark_logo.message:null,validateStatus:n.rules.dark_logo?"error":null},{default:a(()=>[t(S,{formData:n.formData,folder:"company",imageField:"dark_logo",onOnFileUploaded:o[17]||(o[17]=E=>{n.formData.dark_logo=E.file,n.formData.dark_logo_url=E.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(i,{label:e.$t("company.light_logo"),name:"light_logo",help:n.rules.light_logo?n.rules.light_logo.message:null,validateStatus:n.rules.light_logo?"error":null},{default:a(()=>[t(S,{formData:n.formData,folder:"company",imageField:"light_logo",onOnFileUploaded:o[18]||(o[18]=E=>{n.formData.light_logo=E.file,n.formData.light_logo_url=E.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(i,{label:e.$t("company.small_dark_logo"),name:"small_dark_logo",help:n.rules.small_dark_logo?n.rules.small_dark_logo.message:null,validateStatus:n.rules.small_dark_logo?"error":null},{default:a(()=>[t(S,{formData:n.formData,folder:"company",imageField:"small_dark_logo",onOnFileUploaded:o[19]||(o[19]=E=>{n.formData.small_dark_logo=E.file,n.formData.small_dark_logo_url=E.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(i,{label:e.$t("company.small_light_logo"),name:"small_light_logo",help:n.rules.small_light_logo?n.rules.small_light_logo.message:null,validateStatus:n.rules.small_light_logo?"error":null},{default:a(()=>[t(S,{formData:n.formData,folder:"company",imageField:"small_light_logo",onOnFileUploaded:o[20]||(o[20]=E=>{n.formData.small_light_logo=E.file,n.formData.small_light_logo_url=E.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),n.appType=="non-saas"?(r(),w(_,{key:0,gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:6,lg:6},{default:a(()=>[t(i,{label:e.$t("company.login_image"),name:"login_image",help:n.rules.login_image?n.rules.login_image.message:null,validateStatus:n.rules.login_image?"error":null},{default:a(()=>[t(S,{formData:n.formData,folder:"company",imageField:"login_image",onOnFileUploaded:o[21]||(o[21]=E=>{n.formData.login_image=E.file,n.formData.login_image_url=E.file_url})},null,8,["formData"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})):A("",!0),c.showSubmitButton?(r(),w(_,{key:1,gutter:16},{default:a(()=>[t(p,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(i,null,{default:a(()=>[t(F,{type:"primary",onClick:n.onSubmit,loading:n.loading},{icon:a(()=>[t(P)]),default:a(()=>[u(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1})]),_:1})):A("",!0)]),_:1})}const Qw=W(jw,[["render",Jw]]);const Zw=Z({components:{PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,DoubleRightOutlined:jn,DoubleLeftOutlined:Yl,SaveOutlined:ve,SyncOutlined:Ct,CheckCircleOutlined:Ra,HomeOutlined:Vt,InfoCircleOutlined:Kt,WarehouseTable:Uw,CurrencyTable:Rw,PaymentModeTable:Ww,EditSetupSetting:Qw},setup(){X();const e=qe(),o=ke(),c=T(null),n=T(null),v=T(null),h=T(null),m=T([]),d=T(0),i=T(0),p=Se({warehouseStepStatus:"wait",currencyStepStatus:"wait",paymentModeStepStatus:"wait",companySettingStepStatus:"wait"}),_=T(!1),f=T(!1);ee(()=>{y()});const y=()=>{axiosAdmin.get("app").then(M=>{m.value=M.data,p.warehouseStepStatus=m.value.total_warehouses>0?"finish":"wait",p.currencyStepStatus=m.value.total_currencies>0?"finish":"wait",p.paymentModeStepStatus=m.value.total_payment_modes>0?"finish":"wait",p.companySettingStepStatus=b()==!1?"finish":"wait",m.value.total_warehouses==0?(d.value=0,i.value=0,p.warehouseStepStatus="error"):m.value.total_currencies==0?(d.value=1,i.value=1,p.currencyStepStatus="error"):m.value.total_payment_modes==0?(d.value=2,i.value=2,p.paymentModeStepStatus="error"):b()?(d.value=3,i.value=3,p.companySettingStepStatus="error"):(d.value=3,i.value=3,f.value=!0,_.value=!0)})},b=()=>m.value.app.x_warehouse_id==null||m.value.app.x_currency_id==null,k=()=>{c.value.addItem()},C=M=>{y()},D=()=>{n.value.addItem()},S=M=>{y()},P=()=>{v.value.addItem()},F=M=>{y()},O=()=>{h.value.onSubmit()},E=()=>{_.value=!0,axiosAdmin.post("/user").then(function(M){o.commit("auth/updateUser",M.data.user),axiosAdmin.post("change-warehouse",{warehouse_id:M.data.user.x_warehouse_id}).then(R=>{o.commit("auth/updateWarehouse",R.data.warehouse),f.value=!0})}).catch(function(M){})},U=()=>{_.value=!1,e.push({name:"admin.dashboard.index"})},K=()=>{d.value=d.value==0?0:d.value-1},z=()=>{d.value=d.value>=3?3:d.value+1};return{appDetails:m,currentStep:d,correctStep:i,...vt(p),warhouseTableRef:c,addWarehouse:k,warehouseAddSuccess:C,currencyTableRef:n,addCurrency:D,currencyAddSuccess:S,paymentModeTableRef:v,addPaymentMode:P,paymentModeAddSuccess:F,companySettingRef:h,submitCompanySetting:O,companySettingUpdated:E,showFinalModal:_,setupCompleted:f,goToDashboard:U,goBack:K,goNext:z}}}),xw={style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"left",zIndex:1,marginBottom:"10px"}},e0={key:0,style:{color:"#7676e3"}},t0={key:1,style:{color:"#7676e3"}};function a0(e,o,c,n,v,h){const m=l("a-alert"),d=l("a-step"),i=l("a-steps"),p=l("a-divider"),_=l("PlusOutlined"),f=l("a-button"),y=l("WarehouseTable"),b=l("CurrencyTable"),k=l("PaymentModeTable"),C=l("EditSetupSetting"),D=l("a-col"),S=l("a-row"),P=l("a-card"),F=l("DoubleLeftOutlined"),O=l("DoubleRightOutlined"),E=l("SaveOutlined"),U=l("a-space"),K=l("CheckCircleOutlined"),z=l("InfoCircleOutlined"),M=l("HomeOutlined"),R=l("SyncOutlined"),q=l("a-result"),L=l("a-modal");return r(),$(I,null,[t(m,{message:e.$t("setup_company.setup_not_completed"),description:e.$t("setup_company.setup_not_completed_description"),type:"error","show-icon":""},null,8,["message","description"]),t(P,{class:"setup-page-content-container"},{default:a(()=>[t(S,{class:"mt-40"},{default:a(()=>[t(D,{span:20,offset:1},{default:a(()=>[t(i,{current:e.currentStep},{default:a(()=>[t(d,{status:e.warehouseStepStatus},{title:a(()=>[u(s(e.$t("setup_company.warehouse")),1)]),description:a(()=>[g("span",null,s(e.$t("setup_company.add_first_warehouse")),1)]),_:1},8,["status"]),t(d,{status:e.currencyStepStatus},{title:a(()=>[u(s(e.$t("setup_company.currency")),1)]),description:a(()=>[g("span",null,s(e.$t("setup_company.add_first_currency")),1)]),_:1},8,["status"]),t(d,{status:e.paymentModeStepStatus},{title:a(()=>[u(s(e.$t("setup_company.payment_mode")),1)]),description:a(()=>[g("span",null,s(e.$t("setup_company.add_payment_mode")),1)]),_:1},8,["status"]),t(d,{status:e.companySettingStepStatus},{title:a(()=>[u(s(e.$t("setup_company.company_settings")),1)]),description:a(()=>[g("span",null,s(e.$t("setup_company.set_company_basic_settings")),1)]),_:1},8,["status"])]),_:1},8,["current"]),t(p),e.appDetails&&e.appDetails.app&&e.appDetails.app.name?(r(),$(I,{key:0},[e.currentStep==0?(r(),$(I,{key:0},[t(f,{type:"primary",onClick:e.addWarehouse},{default:a(()=>[t(_),u(" "+s(e.$t("warehouse.add")),1)]),_:1},8,["onClick"]),t(y,{class:"mb-40",ref:"warhouseTableRef",showFilter:!1,onAddOrEditSuccess:e.warehouseAddSuccess},null,8,["onAddOrEditSuccess"])],64)):A("",!0),e.currentStep==1?(r(),$(I,{key:1},[t(f,{type:"primary",onClick:e.addCurrency},{default:a(()=>[t(_),u(" "+s(e.$t("currency.add")),1)]),_:1},8,["onClick"]),t(b,{class:"mb-40",ref:"currencyTableRef",showFilter:!1,onAddOrEditSuccess:e.currencyAddSuccess},null,8,["onAddOrEditSuccess"])],64)):A("",!0),e.currentStep==2?(r(),$(I,{key:2},[t(f,{type:"primary",onClick:e.addPaymentMode},{default:a(()=>[t(_),u(" "+s(e.$t("payment_mode.add")),1)]),_:1},8,["onClick"]),t(k,{class:"mb-40",ref:"paymentModeTableRef",showFilter:!1,onAddOrEditSuccess:e.paymentModeAddSuccess},null,8,["onAddOrEditSuccess"])],64)):A("",!0),e.currentStep==3?(r(),w(C,{key:3,class:"mb-40",ref:"companySettingRef",showSubmitButton:!1,onUpdateSuccess:e.companySettingUpdated},null,8,["onUpdateSuccess"])):A("",!0)],64)):A("",!0)]),_:1})]),_:1})]),_:1}),t(S,null,{default:a(()=>[t(D,{span:20,offset:1},{default:a(()=>[g("div",xw,[t(U,null,{default:a(()=>[e.currentStep>=1&&e.currentStep!=3?(r(),w(f,{key:0,type:"primary",style:{backgroundColor:"#faad14",border:"#faad14"},onClick:e.goBack},{default:a(()=>[t(F),u(" "+s(e.$t("setup_company.previous_step")),1)]),_:1},8,["onClick"])):A("",!0),e.currentStep<3?(r(),w(f,{key:1,type:"primary",onClick:e.goNext,disabled:e.currentStep>=e.correctStep},{default:a(()=>[u(s(e.$t("setup_company.next_step"))+" ",1),t(O)]),_:1},8,["onClick","disabled"])):A("",!0),e.currentStep==3&&e.companySettingRef?(r(),w(f,{key:2,type:"primary",style:{backgroundColor:"#52c41a",border:"#52c41a"},onClick:e.submitCompanySetting,loading:e.companySettingRef.loading},{default:a(()=>[t(E),u(" "+s(e.$t("setup_company.save_finish_setup")),1)]),_:1},8,["onClick","loading"])):A("",!0)]),_:1})])]),_:1})]),_:1}),t(L,{open:e.showFinalModal,"onUpdate:open":o[0]||(o[0]=j=>e.showFinalModal=j),maskClosable:!1,closable:!1,footer:null,centered:""},{default:a(()=>[t(q,null,{title:a(()=>[e.setupCompleted?(r(),$("span",e0,s(e.$t("setup_company.setup_complete_message")),1)):(r(),$("span",t0,s(e.$t("setup_company.setup_running_message")),1))]),icon:a(()=>[e.setupCompleted?(r(),w(K,{key:0})):(r(),w(z,{key:1}))]),extra:a(()=>[e.setupCompleted?(r(),w(f,{key:0,type:"primary",style:{backgroundColor:"#52c41a",border:"#52c41a"},onClick:e.goToDashboard},{default:a(()=>[t(M),u(" "+s(e.$t("setup_company.go_to_dashboard")),1)]),_:1},8,["onClick"])):(r(),w(R,{key:1,style:{fontSize:"38px",color:"#5254cf"},spin:""}))]),_:1})]),_:1},8,["open"])],64)}const n0=W(Zw,[["render",a0]]),dn=[{path:"/",component:()=>lt(()=>import("./Admin-3be1af1f.js"),["assets/Admin-3be1af1f.js","assets/vendor-4a6eb15a.js"]),children:[{path:"/admin/setup",component:n0,name:"admin.setup_app.index",meta:{requireAuth:!0,menuParent:"",menuKey:"setup_company"}}]}];const o0={props:["warehouse"],components:{FacebookFilled:Gl,LinkedinFilled:Xl,InstagramFilled:Jl,SendOutlined:Ia,CheckOutlined:ht,YoutubeFilled:Ql,TwitterCircleFilled:Zl},setup(){const{frontAppSetting:e,frontWarehouse:o}=Pt(),c=T(""),n=T(!1);return{frontAppSetting:e,newsletterEmail:c,isSubscribed:n,handleSubscribe:()=>{c.value&&(n.value=!0,setTimeout(()=>{n.value=!1,c.value=""},3e3))},frontWarehouse:o}}},l0={key:0,class:"modern-footer"},s0={class:"footer-container"},r0={class:"brand-section"},d0=["src"],i0={class:"company-bio"},u0={class:"newsletter-box"},m0={class:"newsletter-form"},c0={class:"social-links"},p0=["href"],_0=["href"],f0=["href"],g0=["href"],y0=["href"],h0={class:"footer-heading"},v0={class:"link-list"},b0=["href"],k0={class:"footer-heading"},w0={class:"link-list"},C0=["href"],S0={class:"footer-heading"},$0={class:"contact-info"},D0={class:"contact-label"},A0={class:"contact-text"},T0={class:"footer-copyright-bar"},E0={class:"footer-container"},O0={class:"copyright-flex"};function I0(e,o,c,n,v,h){var C;const m=l("SendOutlined"),d=l("CheckOutlined"),i=l("FacebookFilled"),p=l("InstagramFilled"),_=l("TwitterCircleFilled"),f=l("LinkedinFilled"),y=l("YoutubeFilled"),b=l("a-col"),k=l("a-row");return(C=n.frontAppSetting)!=null&&C.footer_company_description?(r(),$("footer",l0,[g("div",s0,[t(k,{gutter:[40,40]},{default:a(()=>[t(b,{xs:24,lg:9},{default:a(()=>[g("div",r0,[g("img",{src:n.frontWarehouse.dark_logo_url,class:"footer-logo",alt:"Logo"},null,8,d0),g("p",i0,s(n.frontAppSetting.footer_company_description),1),g("div",u0,[o[2]||(o[2]=g("h4",{class:"newsletter-title"},"Stay in the loop",-1)),g("div",m0,[Tt(g("input",{type:"email",placeholder:"your@email.com","onUpdate:modelValue":o[0]||(o[0]=D=>n.newsletterEmail=D)},null,512),[[xl,n.newsletterEmail]]),g("button",{onClick:o[1]||(o[1]=(...D)=>n.handleSubscribe&&n.handleSubscribe(...D)),class:kt({"is-success":n.isSubscribed})},[n.isSubscribed?(r(),w(d,{key:1})):(r(),w(m,{key:0}))],2)])]),g("div",c0,[n.frontAppSetting.facebook_url?(r(),$("a",{key:0,href:n.frontAppSetting.facebook_url,class:"social-btn facebook"},[t(i)],8,p0)):A("",!0),n.frontAppSetting.instagram_url?(r(),$("a",{key:1,href:n.frontAppSetting.instagram_url,class:"social-btn instagram"},[t(p)],8,_0)):A("",!0),n.frontAppSetting.twitter_url?(r(),$("a",{key:2,href:n.frontAppSetting.twitter_url,class:"social-btn twitter"},[t(_)],8,f0)):A("",!0),n.frontAppSetting.linkedin_url?(r(),$("a",{key:3,href:n.frontAppSetting.linkedin_url,class:"social-btn linkedin"},[t(f)],8,g0)):A("",!0),n.frontAppSetting.youtube_url?(r(),$("a",{key:4,href:n.frontAppSetting.youtube_url,class:"social-btn youtube"},[t(y)],8,y0)):A("",!0)])])]),_:1}),t(b,{xs:24,lg:15},{default:a(()=>[t(k,{gutter:[20,40]},{default:a(()=>[t(b,{xs:12,sm:8},{default:a(()=>[g("h4",h0,s(e.$t("front_setting.useful_links")),1),g("ul",v0,[(r(!0),$(I,null,G(n.frontAppSetting.links_widget,(D,S)=>(r(),$("li",{key:S},[g("a",{href:D.value,target:"_blank"},s(D.title),9,b0)]))),128))])]),_:1}),t(b,{xs:12,sm:8},{default:a(()=>[g("h4",k0,s(e.$t("front_setting.pages")),1),g("ul",w0,[(r(!0),$(I,null,G(n.frontAppSetting.pages_widget,(D,S)=>(r(),$("li",{key:S},[g("a",{href:D.value,target:"_blank"},s(D.title),9,C0)]))),128))])]),_:1}),t(b,{xs:24,sm:8},{default:a(()=>[g("h4",S0,s(e.$t("front_setting.contact")),1),g("div",$0,[(r(!0),$(I,null,G(n.frontAppSetting.contact_info_widget,(D,S)=>(r(),$("div",{key:S,class:"contact-item"},[g("span",D0,s(D.title),1),g("span",A0,s(D.value),1)]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})]),g("div",T0,[g("div",E0,[g("div",O0,[g("p",null,s(n.frontAppSetting.footer_copyright_text),1),o[3]||(o[3]=g("div",{class:"security-badges"},[g("span",null,"Secure Payments")],-1))])])])])):A("",!0)}const P0=W(o0,[["render",I0],["__scopeId","data-v-928a8178"]]);const U0=Z({emits:["openLoginModal"],components:{ShoppingCartOutlined:$t,ShoppingOutlined:Qt,CloseOutlined:es,DeleteOutlined:fe,RightOutlined:pa,EyeOutlined:tt},setup(e,{emit:o}){const c=ke(),n=T(!1),v=qe(),{products:h,updateCart:m,removeItem:d,total:i,formatAmountCurrency:p,frontWarehouse:_}=Pt(),f=()=>n.value=!0,y=()=>n.value=!1,b=pe(()=>c.getters["front/isLoggedIn"]),k=()=>{n.value=!1,b.value?v.push({name:"front.checkout",params:{warehouse:_.value.slug}}):o("openLoginModal")},C=T(!1),D=T(null),S=O=>{D.value=O,C.value=!0},P=O=>{O.cart_quantity++,m()},F=O=>{O.cart_quantity>1?(O.cart_quantity--,m()):d(O.xid)};return{visible:n,showDrawer:f,closeDrawer:y,totalCartItems:pe(()=>c.getters["front/totalCartItems"]),products:h,removeItem:d,updateCart:m,formatAmountCurrency:p,total:i,proceedCheckout:k,getSalesPriceWithTax:zt,frontWarehouse:_,previewVisible:C,previewItem:D,openPreview:S,handleIncrement:P,handleDecrement:F,innerWidth:window.innerWidth}}}),F0={class:"drawer-header-content"},M0={key:0,class:"cart-items-wrapper"},q0=["onClick"],R0=["src"],K0={class:"image-overlay"},V0={class:"item-details"},z0={class:"item-header"},L0={class:"unit-price"},B0={class:"item-footer"},W0={class:"quantity-stepper"},j0=["onClick"],H0=["value"],N0=["onClick"],Y0={class:"item-total"},G0={class:"cart-footer"},X0={class:"subtotal-row"},J0={class:"value"},Q0={class:"preview-content"},Z0=["src"],x0={class:"preview-info"},eC={class:"preview-price"};function tC(e,o,c,n,v,h){const m=l("shopping-cart-outlined"),d=l("a-badge"),i=l("a-button"),p=l("shopping-outlined"),_=l("close-outlined"),f=l("eye-outlined"),y=l("delete-outlined"),b=l("a-empty"),k=l("right-outlined"),C=l("a-drawer"),D=l("a-modal");return r(),$(I,null,[t(i,{type:"link",onClick:e.showDrawer,class:"cart-trigger-btn"},{default:a(()=>[t(d,{count:e.totalCartItems,offset:[5,5],color:"#2874f0"},{default:a(()=>[t(m,{class:"cart-icon"})]),_:1},8,["count"])]),_:1},8,["onClick"]),t(C,{open:e.visible,"onUpdate:open":o[1]||(o[1]=S=>e.visible=S),width:e.innerWidth<=768?"100%":450,placement:"right",closable:!1,class:"modern-cart-drawer"},{title:a(()=>[g("div",F0,[t(p,{class:"header-icon"}),g("span",null,[o[3]||(o[3]=u("Your Cart ",-1)),g("small",null,"("+s(e.totalCartItems)+" items)",1)])])]),extra:a(()=>[g("div",{class:"close-btn",onClick:o[0]||(o[0]=(...S)=>e.closeDrawer&&e.closeDrawer(...S))},[t(_)])]),footer:a(()=>[g("div",G0,[g("div",X0,[o[4]||(o[4]=g("span",{class:"label"},"Subtotal",-1)),g("span",J0,s(e.formatAmountCurrency(e.total)),1)]),t(i,{type:"primary",class:"checkout-btn",onClick:e.proceedCheckout,block:"",size:"large"},{default:a(()=>[o[5]||(o[5]=u(" Checkout Now ",-1)),t(k)]),_:1},8,["onClick"])])]),default:a(()=>[e.products.length>0?(r(),$("div",M0,[(r(!0),$(I,null,G(e.products,S=>(r(),$("div",{key:S.xid,class:"cart-item-card"},[g("div",{class:"item-image",onClick:P=>e.openPreview(S)},[g("img",{src:S.image_url,alt:"product"},null,8,R0),g("div",K0,[t(f)])],8,q0),g("div",V0,[g("div",z0,[g("h4",null,s(S.name),1),t(y,{class:"delete-icon",onClick:P=>e.removeItem(S.xid)},null,8,["onClick"])]),g("p",L0,s(e.formatAmountCurrency(e.getSalesPriceWithTax(S))),1),g("div",B0,[g("div",W0,[g("button",{onClick:P=>e.handleDecrement(S)},"-",8,j0),g("input",{type:"text",value:S.cart_quantity,readonly:""},null,8,H0),g("button",{onClick:P=>e.handleIncrement(S)},"+",8,N0)]),g("span",Y0,s(e.formatAmountCurrency(e.getSalesPriceWithTax(S)*S.cart_quantity)),1)])])]))),128))])):(r(),w(b,{key:1,description:"Your cart is empty",class:"empty-cart"}))]),_:1},8,["open","width"]),t(D,{open:e.previewVisible,"onUpdate:open":o[2]||(o[2]=S=>e.previewVisible=S),footer:null,centered:"",closable:!0,width:"400px",class:"preview-modal"},{default:a(()=>{var S,P;return[g("div",Q0,[g("img",{src:(S=e.previewItem)==null?void 0:S.image_url,class:"full-preview-img"},null,8,Z0),g("div",x0,[g("h3",null,s((P=e.previewItem)==null?void 0:P.name),1),g("p",eC,s(e.formatAmountCurrency(e.getSalesPriceWithTax(e.previewItem||{}))),1)])])]}),_:1},8,["open"])],64)}const aC=W(U0,[["render",tC],["__scopeId","data-v-151f9ecf"]]),ba=()=>{const e=T(!1),o=T({}),{t:c}=ae(),n=ke(),v=pe(()=>n.state.front.warehouseSlug);return{loading:e,rules:o,addEditRequestFront:d=>{e.value=!0;const{url:i,data:p,success:_}=d;var f={};Ce(p,function(y,b){y==null?f[b]=null:f[b]=y}),f.warehouse=v.value,axiosFront.post(i,f).then(y=>{d.successMessage&&Me.success({placement:"bottomRight",message:c("common.success"),description:d.successMessage}),_(y.data),e.value=!1,o.value={}}).catch(y=>{var b=y.data;const k=y.status;var C={};if(k==422){if(b.error&&typeof b.error.details<"u")for(var D=Object.keys(b.error.details),S=0;S<D.length;S++){var P=D[S].replace(".","\\.");C[P]={required:!0,message:b.error.details[D[S]][0]}}o.value=C,Ee.error(c("common.fix_errors"))}b&&b.message&&(Ee.error(b.message),b={error:{...b}}),d.error&&d.error(b),e.value=!1})},addEditFileRequestFront:d=>{e.value=!0;const{url:i,data:p,success:_}=d,f=new FormData;Ce(p,function(y,b){y==null?f.append(b,null):f.append(b,y.originFileObj)}),axiosAdmin.post(i,f,{headers:{"Content-Type":"multipart/form-data"}}).then(y=>{d.successMessage&&Me.success({placement:"bottomRight",message:c("common.success"),description:d.successMessage}),_(y.data),e.value=!1,o.value={}}).catch(y=>{var b=y.data;const k=y.status;var C={};if(k==422){if(b.error&&typeof b.error.details<"u")for(var D=Object.keys(b.error.details),S=0;S<D.length;S++){var P=D[S].replace(".","\\.");C[P]={required:!0,message:b.error.details[D[S]][0]}}o.value=C,Ee.error(c("common.fix_errors"))}b&&b.message&&(Ee.error(b.message),b={error:{...b}}),d.error&&d.error(b),e.value=!1})}}};const nC=Z({props:["modalVisible"],emits:["modalClosed"],components:{UserOutlined:Zt,MailOutlined:xn,LockOutlined:ts,PhoneOutlined:as},setup(e,{emit:o}){const c=ke(),n=T({email:null,password:null}),v=T({name:null,phone:null,email:null,password:null}),h=T(!1),{t:m}=ae(),d=qe(),i=T(!0),p=T(!1),{addEditRequestFront:_,loading:f,rules:y}=ba(),{frontWarehouse:b}=X(),k=T(""),C=()=>{h.value=!0},D=()=>{k.value="",_({url:"front/login",data:n.value,successMessage:m("front.logged_in_successfully"),success:F=>{c.commit("front/updateUser",F.user),c.commit("front/updateToken",F.token),c.commit("front/updateExpires",F.expires_in),h.value=!1,d.push({name:"front.dashboard",params:{warehouse:b.value.slug}})},error:F=>{F.error_message&&(k.value=F.error_message)}})},S=()=>{k.value="",_({url:"front/signup",data:v.value,successMessage:m("front.register_successfully"),success:F=>{p.value=!0},error:F=>{F.error_message&&(k.value=F.error_message)}})},P=()=>{o("modalClosed"),i.value=!0};return ue(e,(F,O)=>{h.value=F.modalVisible}),{credentials:n,rules:y,visible:h,showLogin:C,onLogin:D,errorMessage:k,loading:f,frontWarehouse:b,user:pe(()=>c.state.front.user),isLoggedIn:pe(()=>c.getters["front/isLoggedIn"]),loginModalClosed:P,loginForm:i,signupCredentials:v,onSignup:S,signupSuccess:p}}}),oC={key:0},lC={style:{textAlign:"center"},class:"mt-10"},sC={style:{color:"#6b7280",fontSize:"16px"}},rC={key:1},dC={style:{textAlign:"center"},class:"mt-10"},iC={style:{color:"#6b7280",fontSize:"16px"}};function uC(e,o,c,n,v,h){const m=l("a-avatar"),d=l("router-link"),i=l("a-button"),p=l("user-outlined"),_=l("a-typography-title"),f=l("a-alert"),y=l("mail-outlined"),b=l("a-input"),k=l("a-form-item"),C=l("lock-outlined"),D=l("a-input-password"),S=l("a-typography-text"),P=l("a-form"),F=l("UserOutlined"),O=l("MailOutlined"),E=l("PhoneOutlined"),U=l("a-modal");return r(),$(I,null,[e.isLoggedIn?(r(),w(i,{key:0,type:"link"},{default:a(()=>[t(d,{to:{name:"front.dashboard",params:{warehouse:e.frontWarehouse.slug}}},{default:a(()=>[t(m,{src:e.user.profile_image_url,size:28},null,8,["src"])]),_:1},8,["to"])]),_:1})):(r(),w(i,{key:1,type:"link",onClick:e.showLogin},{default:a(()=>[t(p,{style:{fontSize:"24px",color:"#333",verticalAlign:"top"}})]),_:1},8,["onClick"])),t(U,{open:e.visible,"onUpdate:open":o[9]||(o[9]=K=>e.visible=K),centered:"",footer:null,title:null,width:450,closable:!1,bodyStyle:{borderRadius:"10px"},wrapClassName:"login-register-modal",onCancel:e.loginModalClosed},{default:a(()=>[e.loginForm?(r(),$("div",oC,[g("div",lC,[t(_,{level:2,style:{marginBottom:"0px"}},{default:a(()=>[u(s(e.$t("front.login")),1)]),_:1}),g("p",sC,s(e.$t("front.login_using_email_password")),1)]),t(P,{layout:"vertical",class:"mt-30"},{default:a(()=>[e.errorMessage!=""?(r(),w(f,{key:0,message:e.errorMessage,type:"error",class:"mb-10","show-icon":""},null,8,["message"])):A("",!0),t(k,{label:e.$t("user.email_phone"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null},{default:a(()=>[t(b,{value:e.credentials.email,"onUpdate:value":o[0]||(o[0]=K=>e.credentials.email=K),onPressEnter:e.onLogin,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email_phone")])},{prefix:a(()=>[t(y)]),_:1},8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(k,{label:e.$t("user.password"),name:"password",help:e.rules.password?e.rules.password.message:null,validateStatus:e.rules.password?"error":null},{default:a(()=>[t(D,{value:e.credentials.password,"onUpdate:value":o[1]||(o[1]=K=>e.credentials.password=K),onPressEnter:e.onLogin,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.password")]),autocomplete:"off"},{prefix:a(()=>[t(C)]),_:1},8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(k,null,{default:a(()=>[t(i,{type:"primary",class:"mt-10",onClick:e.onLogin,loading:e.loading,block:""},{default:a(()=>[u(s(e.$t("front.login")),1)]),_:1},8,["onClick","loading"])]),_:1}),t(k,null,{default:a(()=>[t(S,{strong:""},{default:a(()=>[u(s(e.$t("front.dont_have_account")+" "),1)]),_:1}),t(i,{onClick:o[2]||(o[2]=K=>e.loginForm=!1),type:"link",class:"p-0"},{default:a(()=>[u(s(e.$t("front.signup")),1)]),_:1})]),_:1})]),_:1})])):(r(),$("div",rC,[g("div",dC,[t(_,{level:2,style:{marginBottom:"0px"}},{default:a(()=>[u(s(e.$t("front.signup")),1)]),_:1}),g("p",iC,s(e.$t("front.signup_using_email_password")),1)]),e.signupSuccess?(r(),w(f,{key:0,type:"success",class:"mt-10","show-icon":""},{message:a(()=>[u(s(e.$t("common.success")),1)]),description:a(()=>[u(s(e.$t("front.register_successfully"))+" ",1),t(i,{onClick:o[3]||(o[3]=K=>e.loginForm=!0),type:"link",class:"p-0"},{default:a(()=>[u(s(e.$t("front.click_here_to_login")),1)]),_:1})]),_:1})):(r(),w(P,{key:1,layout:"vertical",class:"mt-30"},{default:a(()=>[t(k,{label:e.$t("user.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null},{default:a(()=>[t(b,{value:e.signupCredentials.name,"onUpdate:value":o[4]||(o[4]=K=>e.signupCredentials.name=K),onPressEnter:e.onSignup,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.name")])},{prefix:a(()=>[t(F)]),_:1},8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(k,{label:e.$t("user.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null},{default:a(()=>[t(b,{value:e.signupCredentials.email,"onUpdate:value":o[5]||(o[5]=K=>e.signupCredentials.email=K),onPressEnter:e.onSignup,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email")])},{prefix:a(()=>[t(O)]),_:1},8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(k,{label:e.$t("user.phone"),name:"phone",help:e.rules.phone?e.rules.phone.message:null,validateStatus:e.rules.phone?"error":null},{default:a(()=>[t(b,{value:e.signupCredentials.phone,"onUpdate:value":o[6]||(o[6]=K=>e.signupCredentials.phone=K),onPressEnter:e.onSignup,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.phone")])},{prefix:a(()=>[t(E)]),_:1},8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(k,{label:e.$t("user.password"),name:"password",help:e.rules.password?e.rules.password.message:null,validateStatus:e.rules.password?"error":null},{default:a(()=>[t(D,{value:e.signupCredentials.password,"onUpdate:value":o[7]||(o[7]=K=>e.signupCredentials.password=K),onPressEnter:e.onSignup,placeholder:e.$t("common.placeholder_default_text",[e.$t("user.password")]),autocomplete:"off"},{prefix:a(()=>[t(C)]),_:1},8,["value","onPressEnter","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(k,null,{default:a(()=>[t(i,{type:"primary",class:"mt-10",onClick:e.onSignup,loading:e.loading,block:""},{default:a(()=>[u(s(e.$t("front.signup")),1)]),_:1},8,["onClick","loading"])]),_:1}),t(k,null,{default:a(()=>[t(S,{strong:""},{default:a(()=>[u(s(e.$t("front.already_have_account")+" "),1)]),_:1}),t(i,{onClick:o[8]||(o[8]=K=>e.loginForm=!0),type:"link",class:"p-0"},{default:a(()=>[u(s(e.$t("front.login")),1)]),_:1})]),_:1})]),_:1}))]))]),_:1},8,["open","onCancel"])],64)}const mC=W(nC,[["render",uC]]);const cC={},pC={class:"drawer-branding"},_C=["src"],fC={class:"drawer-content-scroll"},gC={class:"nav-section"},yC={class:"nav-section-title"},hC={key:0,class:"drawer-footer-actions"};function vC(e,o){const c=l("MenuOutlined"),n=l("close-outlined"),v=l("router-link"),h=l("a-menu-item"),m=l("a-menu"),d=l("a-divider"),i=l("a-drawer");return r(),$(I,null,[e.innerWidth<768?(r(),w(c,{key:0,class:"mobile-menu-trigger",onClick:e.openLeftSidebar},null,8,["onClick"])):A("",!0),t(i,{open:e.visible,"onUpdate:open":o[3]||(o[3]=p=>e.visible=p),width:"280",placement:"left",closable:!1,class:"modern-nav-drawer",onClose:e.drawerClosed},{title:a(()=>[g("div",pC,[g("img",{src:e.frontWarehouse.dark_logo_url,alt:"Logo"},null,8,_C)])]),extra:a(()=>[g("div",{class:"drawer-close-wrapper",onClick:o[0]||(o[0]=(...p)=>e.closeLeftSidebar&&e.closeLeftSidebar(...p))},[t(n)])]),default:a(()=>[g("div",fC,[g("div",gC,[g("h4",yC,s(e.$t("front.pages")),1),t(m,{openKeys:e.openKeys,"onUpdate:openKeys":o[1]||(o[1]=p=>e.openKeys=p),selectedKeys:e.selectedKeys,"onUpdate:selectedKeys":o[2]||(o[2]=p=>e.selectedKeys=p),mode:"inline",class:"modern-side-menu"},{default:a(()=>[(r(!0),$(I,null,G(e.frontAppSetting.pages_widget,(p,_)=>(r(),w(h,{key:_,class:"modern-side-item"},{default:a(()=>[t(v,{to:p.value},{default:a(()=>[o[4]||(o[4]=g("span",{class:"dot-indicator"},null,-1)),u(" "+s(p.title),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1},8,["openKeys","selectedKeys"])]),e.innerWidth<768?(r(),$("div",hC,[t(d),o[5]||(o[5]=g("div",{class:"footer-promo"},[g("p",null,"Free shipping on orders over $50!")],-1))])):A("",!0)])]),_:1},8,["open","onClose"])],64)}const bC=W(cC,[["render",vC],["__scopeId","data-v-65516c97"]]);const kC=Z({name:"category-menu",props:["categories"],setup(){const{frontWarehouse:e}=X();return{frontWarehouse:e}}}),wC={class:"menu-item-content"},CC={class:"category-icon-wrapper"},SC=["src"],$C={class:"category-icon-wrapper"},DC=["src"],AC={class:"menu-text"};function TC(e,o,c,n,v,h){const m=l("category-menu"),d=l("a-sub-menu"),i=l("router-link"),p=l("a-menu-item");return r(!0),$(I,null,G(e.categories,_=>(r(),$(I,{key:_.xid},[_.children&&_.children.length?(r(),w(d,{key:_.xid,class:"modern-submenu"},{title:a(()=>[g("span",wC,s(_.name),1)]),icon:a(()=>[g("div",CC,[g("img",{src:_.image_url,class:"category-icon-img"},null,8,SC)])]),default:a(()=>[t(m,{categories:_.children},null,8,["categories"])]),_:2},1024)):(r(),w(p,{key:_.xid,class:"modern-menu-item"},{default:a(()=>[t(i,{to:{name:"front.categories",params:{warehouse:e.frontWarehouse.slug,slug:[_.slug]}},class:"menu-link"},{default:a(()=>[g("div",$C,[g("img",{src:_.image_url,class:"category-icon-img"},null,8,DC)]),g("span",AC,s(_.name),1)]),_:2},1032,["to"])]),_:2},1024))],64))),128)}const EC=W(kC,[["render",TC],["__scopeId","data-v-319287d2"]]);const OC=Z({props:["catSelectedKeys","catOpenKeys"],components:{CategoryMenu:EC,AppstoreOutlined:oo},setup(e){const{frontWarehouse:o}=X(),c=T([]),n=T([]),v=T([]),h=async()=>{try{const d=(await axiosFront.post("front/categories")).data.categories,i=[],p={};d.forEach(_=>p[_.xid]={..._,children:[]}),d.forEach(_=>{_.x_parent_id&&p[_.x_parent_id]?p[_.x_parent_id].children.push(p[_.xid]):i.push(p[_.xid])}),c.value=i}catch(m){console.error("Error fetching categories:",m)}};return ee(()=>{n.value=e.catSelectedKeys||[],h()}),ue(()=>e.catSelectedKeys,m=>{n.value=m||[]}),{selectedKeys:n,openKeys:v,allCategories:c,frontWarehouse:o}}}),IC={class:"category-menu-wrapper"},PC={class:"menu-icon-container"},UC=["src"],FC={class:"menu-title-text"},MC={class:"menu-icon-container"},qC=["src"],RC={class:"menu-title-text"},KC={class:"menu-icon-container view-all-icon"};function VC(e,o,c,n,v,h){const m=l("CategoryMenu"),d=l("a-sub-menu"),i=l("router-link"),p=l("a-menu-item"),_=l("a-divider"),f=l("AppstoreOutlined"),y=l("a-menu");return r(),$("div",IC,[t(y,{selectedKeys:e.selectedKeys,"onUpdate:selectedKeys":o[0]||(o[0]=b=>e.selectedKeys=b),openKeys:e.openKeys,"onUpdate:openKeys":o[1]||(o[1]=b=>e.openKeys=b),mode:"inline",class:"modern-category-menu"},{default:a(()=>[(r(!0),$(I,null,G(e.allCategories,b=>(r(),$(I,{key:b.xid},[b.children&&b.children.length?(r(),w(d,{key:b.xid,class:"modern-submenu"},{icon:a(()=>[g("div",PC,[g("img",{src:b.image_url,class:"menu-thumb"},null,8,UC)])]),title:a(()=>[g("span",FC,s(b.name),1)]),default:a(()=>[t(m,{categories:b.children},null,8,["categories"])]),_:2},1024)):(r(),w(p,{key:b.xid,class:"modern-menu-item"},{icon:a(()=>[g("div",MC,[g("img",{src:b.image_url,class:"menu-thumb"},null,8,qC)])]),default:a(()=>[t(i,{to:{name:"front.categories",params:{slug:[b.slug]}}},{default:a(()=>[g("span",RC,s(b.name),1)]),_:2},1032,["to"])]),_:2},1024))],64))),128)),t(_,{style:{margin:"8px 0"}}),t(p,{key:"view-all-categories",class:"view-all-item"},{icon:a(()=>[g("div",KC,[t(f)])]),default:a(()=>[t(i,{to:{name:"front.categories",params:{warehouse:e.frontWarehouse.slug}}},{default:a(()=>[...o[2]||(o[2]=[g("span",{class:"menu-title-text explore-text"},"Explore All Categories",-1)])]),_:1},8,["to"])]),_:1})]),_:1},8,["selectedKeys","openKeys"])])}const Zo=W(OC,[["render",VC],["__scopeId","data-v-881e0e57"]]);const zC=Z({components:{DownOutlined:ns,MenuOutlined:os,HomeOutlined:Vt,AppstoreOutlined:oo,UserOutlined:Zt,Footer:P0,CheckoutDrawer:aC,Login:mC,LeftSidebar:bC,ShoppingCartOutlined:$t,LeftSidebarMenu:Zo},setup(){ke();const{frontWarehouse:e,frontAppSetting:o}=X(),c=T(!1),n=T(window.innerWidth),v=T(null),h=T(null),m=()=>{n.value=window.innerWidth};return ee(()=>window.addEventListener("resize",m)),qa(()=>window.removeEventListener("resize",m)),{frontAppSetting:o,openLoginModal:()=>{c.value=!0},loginModalClosed:()=>{c.value=!1},loginModalVisible:c,frontWarehouse:e,innerWidth:n,checkoutDrawerRef:v,mobileMenuRef:h,openCart:()=>{v.value&&v.value.showDrawer()},showMobileMenu:()=>{h.value&&h.value.showDrawer()}}}}),LC={class:"header-container"},BC={class:"header-left"},WC=["src"],jC={key:0,class:"header-center"},HC={class:"header-right"},NC={key:0,class:"subheader"},YC={class:"header-container"},GC={class:"subheader-wrapper"},XC={class:"category-trigger"},JC={class:"page-view-container"},QC={key:0,class:"mobile-bottom-nav"},ZC={class:"nav-item cart-action"},xC={class:"cart-icon-wrapper"},eS={class:"nav-item"},tS={key:1,class:"no-online-store-container"};function aS(e,o,c,n,v,h){const m=l("LeftSidebar"),d=l("router-link"),i=l("CheckoutDrawer"),p=l("Login"),_=l("a-layout-header"),f=l("AppstoreOutlined"),y=l("LeftSidebarMenu"),b=l("a-dropdown"),k=l("router-view"),C=l("Footer"),D=l("a-layout-content"),S=l("HomeOutlined"),P=l("a-layout"),F=l("a-result");return e.frontWarehouse.online_store_enabled==1?(r(),w(P,{key:0,class:"main-store-layout"},{default:a(()=>[t(_,{class:"store-header"},{default:a(()=>[g("div",LC,[g("div",BC,[t(m,{ref:"mobileMenuRef"},null,512),t(d,{to:{name:"front.homepage",params:{warehouse:e.frontWarehouse.slug}},class:"logo-link"},{default:a(()=>[g("img",{src:e.frontWarehouse.dark_logo_url,class:"store-logo",alt:"Store Logo"},null,8,WC)]),_:1},8,["to"])]),e.innerWidth>=768?(r(),$("div",jC)):A("",!0),g("div",HC,[t(i,{ref:"checkoutDrawerRef",onOpenLoginModal:e.openLoginModal},null,8,["onOpenLoginModal"]),t(p,{modalVisible:e.loginModalVisible,onModalClosed:e.loginModalClosed},null,8,["modalVisible","onModalClosed"])])])]),_:1}),t(D,{class:"store-content"},{default:a(()=>{var O;return[e.innerWidth>=768?(r(),$("div",NC,[g("div",YC,[g("div",GC,[(O=e.frontAppSetting)!=null&&O.pages_widget?(r(),w(b,{key:0,overlayClassName:"modern-dropdown"},{overlay:a(()=>[t(y)]),default:a(()=>[g("div",XC,[t(f,{class:"category-icon"}),o[1]||(o[1]=g("span",null,"Shop Categories",-1))])]),_:1})):A("",!0),o[2]||(o[2]=g("div",{class:"quick-links"},[g("a",{href:"#"},"New Arrivals"),g("a",{href:"#"},"Best Sellers"),g("a",{href:"#"},"Offers")],-1))])])])):A("",!0),g("div",JC,[t(k)]),t(C)]}),_:1}),e.innerWidth<768?(r(),$("nav",QC,[t(d,{to:{name:"front.homepage",params:{warehouse:e.frontWarehouse.slug}},class:"nav-item"},{default:a(()=>[t(S),o[3]||(o[3]=g("span",null,"Home",-1))]),_:1},8,["to"]),g("div",{class:"nav-item",onClick:o[0]||(o[0]=(...O)=>e.showMobileMenu&&e.showMobileMenu(...O))},[t(f),o[4]||(o[4]=g("span",null,"Categories",-1))]),g("div",ZC,[g("div",xC,[t(i,{ref:"checkoutDrawerRef",onOpenLoginModal:e.openLoginModal},null,8,["onOpenLoginModal"])]),o[5]||(o[5]=g("span",null,"Cart",-1))]),g("div",eS,[t(p,{modalVisible:e.loginModalVisible,onModalClosed:e.loginModalClosed},null,8,["modalVisible","onModalClosed"]),o[6]||(o[6]=g("span",null,"Profile",-1))])])):A("",!0)]),_:1})):(r(),$("div",tS,[t(F,{status:"warning",title:e.$t("warehouse.no_online_store_exists")},null,8,["title"])]))}const nS=W(zC,[["render",aS],["__scopeId","data-v-0e795ba7"]]);const oS={props:["product","currency"],components:{ShoppingCartOutlined:$t,MinusOutlined:ls,PlusOutlined:le},setup(e){const{formatAmountCurrency:o}=Pt(),c=ke(),n=T(!1),v=T({...e.product,cart_quantity:0}),h=()=>{const d=c.getters["front/storeCartItems"],i=at(d,{xid:e.product.xid});v.value.cart_quantity=i?i.cart_quantity:0};return ee(h),ue(()=>c.getters["front/storeCartItems"],h,{deep:!0}),{currentProduct:v,formatAmountCurrency:o,visible:n,showModal:()=>n.value=!0,updateQty:d=>{const i=v.value.cart_quantity+d,p=c.getters["front/storeCartItems"],_=et(p,f=>f.xid!==e.product.xid);i>0&&_.push({...e.product,cart_quantity:i}),c.commit("front/addCartItems",_),Ee.success(i>0?"Cart updated":"Removed from cart")},getSalesPriceWithTax:zt}}},lS={key:0,class:"product-card-modern"},sS={class:"product-image-wrapper"},rS={key:0,class:"sale-badge"},dS=["src"],iS={class:"product-info"},uS={class:"info-top"},mS={class:"category-tag"},cS={class:"info-bottom"},pS={class:"price-stack"},_S={class:"current-price"},fS={key:0,class:"old-price"},gS={class:"cart-action"},yS={key:0,class:"quantity-toggle"},hS={class:"qty-count"},vS={class:"modal-image"},bS=["src"],kS={class:"modal-details"},wS={class:"modal-cat"},CS={class:"modal-title"},SS={class:"modal-price"},$S={class:"modal-desc"},DS={class:"modal-actions"};function AS(e,o,c,n,v,h){const m=l("minus-outlined"),d=l("plus-outlined"),i=l("ShoppingCartOutlined"),p=l("a-button"),_=l("a-col"),f=l("a-button-group"),y=l("a-row"),b=l("a-modal");return r(),$(I,null,[n.currentProduct&&n.currentProduct.xid?(r(),$("div",lS,[g("div",sS,[n.currentProduct.details.mrp>n.getSalesPriceWithTax(n.currentProduct)?(r(),$("div",rS," Sale ")):A("",!0),g("a",{href:"javascript:void(0)",onClick:o[0]||(o[0]=(...k)=>n.showModal&&n.showModal(...k))},[g("img",{src:n.currentProduct.image_url,class:"main-img"},null,8,dS)]),g("div",{class:"quick-view-overlay",onClick:o[1]||(o[1]=(...k)=>n.showModal&&n.showModal(...k))},[...o[10]||(o[10]=[g("span",null,"Quick View",-1)])])]),g("div",iS,[g("div",uS,[g("span",mS,s(n.currentProduct.category.name),1),g("h3",{class:"title",onClick:o[2]||(o[2]=(...k)=>n.showModal&&n.showModal(...k))},s(n.currentProduct.name),1)]),g("div",cS,[g("div",pS,[g("span",_S,s(n.formatAmountCurrency(n.getSalesPriceWithTax(n.currentProduct))),1),n.currentProduct.details.mrp>n.getSalesPriceWithTax(n.currentProduct)?(r(),$("del",fS,s(n.formatAmountCurrency(n.currentProduct.details.mrp)),1)):A("",!0)]),g("div",gS,[t(ss,{name:"scale",mode:"out-in"},{default:a(()=>[n.currentProduct.cart_quantity>0?(r(),$("div",yS,[g("button",{onClick:o[3]||(o[3]=k=>n.updateQty(-1))},[t(m)]),g("span",hS,s(n.currentProduct.cart_quantity),1),g("button",{onClick:o[4]||(o[4]=k=>n.updateQty(1))},[t(d)])])):(r(),w(p,{key:1,type:"primary",shape:"circle",class:"add-btn",onClick:o[5]||(o[5]=k=>n.updateQty(1))},{icon:a(()=>[t(i)]),_:1}))]),_:1})])])])])):A("",!0),t(b,{open:n.visible,"onUpdate:open":o[9]||(o[9]=k=>n.visible=k),centered:"",footer:null,width:800,class:"modern-product-modal"},{default:a(()=>[t(y,{gutter:[32,32]},{default:a(()=>[t(_,{xs:24,sm:12},{default:a(()=>[g("div",vS,[g("img",{src:n.currentProduct.image_url},null,8,bS)])]),_:1}),t(_,{xs:24,sm:12},{default:a(()=>{var k;return[g("div",kS,[g("span",wS,s((k=n.currentProduct.category)==null?void 0:k.name),1),g("h2",CS,s(n.currentProduct.name),1),g("div",SS,s(n.formatAmountCurrency(n.getSalesPriceWithTax(n.currentProduct))),1),g("p",$S,s(n.currentProduct.description),1),g("div",DS,[n.currentProduct.cart_quantity>0?(r(),w(f,{key:0,size:"large"},{default:a(()=>[t(p,{onClick:o[6]||(o[6]=C=>n.updateQty(-1))},{default:a(()=>[t(m)]),_:1}),t(p,{disabled:"",style:{color:"#000",cursor:"default"}},{default:a(()=>[u(s(n.currentProduct.cart_quantity),1)]),_:1}),t(p,{onClick:o[7]||(o[7]=C=>n.updateQty(1))},{default:a(()=>[t(d)]),_:1})]),_:1})):(r(),w(p,{key:1,type:"primary",size:"large",block:"",onClick:o[8]||(o[8]=C=>n.updateQty(1))},{default:a(()=>[t(i),o[11]||(o[11]=u(" Add to Cart ",-1))]),_:1}))])])]}),_:1})]),_:1})]),_:1},8,["open"])],64)}const xo=W(oS,[["render",AS],["__scopeId","data-v-a5a4065b"]]);const TS=Z({setup(){const e=T([]);return ee(()=>{axiosFront.get("front/homepage").then(o=>{e.value=o.data.categories})}),{categories:e}}}),ES={style:{background:"#fff"},class:"category-box"},OS={class:"category"},IS=["alt","src"];function PS(e,o,c,n,v,h){const m=l("a-col"),d=l("a-row");return r(),$("div",ES,[t(d,{type:"flex",justify:"center"},{default:a(()=>[t(m,{span:20},{default:a(()=>[t(d,{gutter:[16,16]},{default:a(()=>[(r(!0),$(I,null,G(e.categories,i=>(r(),w(m,{key:i.id,xs:24,sm:24,md:6,lg:3,xl:2},{default:a(()=>[g("div",OS,[g("img",{alt:i.name,src:i.image_url,width:"80"},null,8,IS),g("h4",null,s(i.name),1)])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})])}const US=W(TS,[["render",PS],["__scopeId","data-v-7f7214ea"]]);const FS=Z({components:{RightOutlined:pa,RightCircleOutlined:Va,LeftCircleOutlined:Ka,ProductCard:xo,CategoryHeader:US},setup(){const{frontWarehouse:e}=X();Ze();const o=T({}),c=T([]),n=T([]),v=T({});return ee(()=>{axiosFront.get(`front/homepage/${e.value.slug}`).then(h=>{v.value=h.data.currency,o.value=h.data.front_settings,c.value=h.data.front_product_cards,n.value=o.value.featured_products_details})}),{frontSettings:o,frontProductCards:c,featuredProducts:n,currency:v}}}),MS={class:"homepage-modern"},qS={class:"hero-banners mt-30"},RS={class:"hero-card main-carousel"},KS={class:"hero-card sub-banner"},VS=["src"],zS={class:"hero-card sub-banner static-promo"},LS=["src"],BS={key:0,class:"section-padding"},WS={class:"section-header"},jS={class:"category-grid"},HS={class:"bubble-img"},NS=["src"],YS={key:1,class:"section-padding bg-light-section"},GS={class:"section-header"},XS={class:"section-header flex-header"},JS={class:"text-group"},QS={key:0},ZS={class:"bottom-hero mt-50 mb-50"};function xS(e,o,c,n,v,h){const m=l("a-carousel"),d=l("a-col"),i=l("a-row"),p=l("ProductCard"),_=l("right-outlined"),f=l("a-button");return r(),$("div",MS,[t(i,{type:"flex",justify:"center"},{default:a(()=>[t(d,{xs:22,sm:22,md:22,lg:20},{default:a(()=>{var y;return[g("div",qS,[t(i,{gutter:[20,20]},{default:a(()=>[t(d,{xs:24,md:14,lg:16},{default:a(()=>[g("div",RS,[t(m,{autoplay:"",effect:"fade"},{default:a(()=>[(r(!0),$(I,null,G(e.frontSettings.bottom_banners_1_details,b=>(r(),$("div",{key:b.uid},[g("div",{class:"banner-slide",style:Ye({backgroundImage:`url(${b.url})`})},[...o[0]||(o[0]=[g("div",{class:"banner-overlay"},null,-1)])],4)]))),128))]),_:1})])]),_:1}),t(d,{xs:24,md:10,lg:8},{default:a(()=>[t(i,{gutter:[0,20]},{default:a(()=>[t(d,{span:24},{default:a(()=>[g("div",KS,[t(m,{autoplay:"","dots-class":"slick-dots custom-dots"},{default:a(()=>[(r(!0),$(I,null,G(e.frontSettings.bottom_banners_2_details,b=>(r(),$("div",{key:b.uid},[g("img",{src:b.url,class:"side-img"},null,8,VS)]))),128))]),_:1})])]),_:1}),t(d,{span:24},{default:a(()=>[g("div",zS,[(r(!0),$(I,null,G(e.frontSettings.bottom_banners_3_details,b=>(r(),$("div",{key:b.uid},[g("img",{src:b.url,class:"side-img"},null,8,LS)]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})]),(y=e.frontSettings.featured_categories_details)!=null&&y.length?(r(),$("section",BS,[g("div",WS,[g("h2",null,s(e.frontSettings.featured_categories_title),1),g("p",null,s(e.frontSettings.featured_categories_subtitle),1)]),g("div",jS,[(r(!0),$(I,null,G(e.frontSettings.featured_categories_details,b=>(r(),$("div",{key:b.id,class:"category-bubble-card"},[g("div",HS,[g("img",{src:b.image_url},null,8,NS)]),g("span",null,s(b.name),1)]))),128))])])):A("",!0),e.featuredProducts.length?(r(),$("section",YS,[g("div",GS,[g("h2",null,s(e.frontSettings.featured_products_title),1),o[1]||(o[1]=g("div",{class:"header-line"},"dd",-1))]),t(i,{gutter:[24,24]},{default:a(()=>[(r(!0),$(I,null,G(e.featuredProducts,b=>(r(),w(d,{key:b.id,xs:24,sm:24,md:8,lg:6,xl:4},{default:a(()=>[t(p,{product:b,currency:e.currency},null,8,["product","currency"])]),_:2},1024))),128))]),_:1})])):A("",!0),(r(!0),$(I,null,G(e.frontProductCards,b=>(r(),$("div",{key:b.id,class:"section-padding"},[g("div",XS,[g("div",JS,[g("h2",null,s(b.title),1),b.subtitle?(r(),$("p",QS,s(b.subtitle),1)):A("",!0)]),t(f,{type:"link",class:"view-all-btn"},{default:a(()=>[o[2]||(o[2]=u(" View All ",-1)),t(_)]),_:1})]),t(i,{gutter:[24,24]},{default:a(()=>[(r(!0),$(I,null,G(b.products_details,k=>(r(),w(d,{key:k.id,xs:12,sm:12,md:8,lg:6,xl:4},{default:a(()=>[t(p,{product:k,currency:e.currency},null,8,["product","currency"])]),_:2},1024))),128))]),_:2},1024)]))),128)),g("div",ZS,[t(m,{autoplay:"",arrows:""},{default:a(()=>[(r(!0),$(I,null,G(e.frontSettings.top_banners_details,b=>(r(),$("div",{key:b.uid},[g("div",{class:"full-width-banner",style:Ye({backgroundImage:`url(${b.url})`})},null,4)]))),128))]),_:1})])]}),_:1})]),_:1})])}const e$=W(FS,[["render",xS],["__scopeId","data-v-f850a42b"]]);const t$=Z({components:{LeftSidebarMenu:Zo,ProductCard:xo,FilterOutlined:rs},setup(){Ze();const e=T(!1),o=T([]),c=T({}),n=T([]),v=T(0),h=T(1),m=T(20);return{catSelectedKeys:n,category:c,products:o,currentPage:h,pageSize:m,totalRecords:v,paginationClicked:d=>{h.value=d,window.scrollTo({top:0,behavior:"smooth"}),getProducts()},showMobileFilters:e}}}),a$={class:"category-page-wrapper"},n$={class:"sidebar-sticky-wrapper"},o$={class:"sidebar-card"},l$={class:"sidebar-title"},s$={class:"category-header-section"},r$={class:"title-action-bar"},d$={class:"page-title"},i$={key:0},u$={class:"products-container"},m$={key:1,class:"empty-wrapper"},c$={key:0,class:"pagination-wrapper"};function p$(e,o,c,n,v,h){const m=l("LeftSidebarMenu"),d=l("a-col"),i=l("router-link"),p=l("a-breadcrumb-item"),_=l("a-breadcrumb"),f=l("filter-outlined"),y=l("a-button"),b=l("a-divider"),k=l("ProductCard"),C=l("a-row"),D=l("a-empty"),S=l("a-pagination"),P=l("a-drawer");return r(),$("div",a$,[t(C,{type:"flex",justify:"center"},{default:a(()=>[t(d,{xs:22,sm:22,md:22,lg:20},{default:a(()=>[t(C,{gutter:[32,32],class:"main-content-row"},{default:a(()=>[t(d,{xs:0,lg:6,xl:5},{default:a(()=>[g("div",n$,[g("div",o$,[g("h3",l$,s(e.$t("menu.categories")),1),t(m,{catSelectedKeys:e.catSelectedKeys},null,8,["catSelectedKeys"])])])]),_:1}),t(d,{xs:24,lg:18,xl:19},{default:a(()=>{var F;return[g("div",s$,[t(_,{class:"modern-breadcrumb"},{default:a(()=>{var O;return[t(p,null,{default:a(()=>[t(i,{to:"/"},{default:a(()=>[u(s(e.$t("front.home")),1)]),_:1})]),_:1}),t(p,null,{default:a(()=>[t(i,{to:{name:"front.categories"}},{default:a(()=>[u(s(e.$t("menu.categories")),1)]),_:1})]),_:1}),(O=e.category)!=null&&O.name?(r(),w(p,{key:0},{default:a(()=>[u(s(e.category.name),1)]),_:1})):A("",!0)]}),_:1}),g("div",r$,[g("h1",d$,[u(s(((F=e.category)==null?void 0:F.name)||e.$t("front_setting.all_categories"))+" ",1),e.totalRecords?(r(),$("small",i$,"("+s(e.totalRecords)+" "+s(e.$t("front.items"))+")",1)):A("",!0)]),t(y,{class:"mobile-filter-btn",onClick:o[0]||(o[0]=O=>e.showMobileFilters=!0)},{icon:a(()=>[t(f)]),default:a(()=>[o[3]||(o[3]=u(" Filters ",-1))]),_:1})])]),t(b,{class:"header-divider"}),g("div",u$,[e.products.length>0?(r(),w(C,{key:0,gutter:[20,20]},{default:a(()=>[(r(!0),$(I,null,G(e.products,O=>(r(),w(d,{key:O.xid,xs:12,sm:12,md:8,lg:8,xl:6},{default:a(()=>[t(k,{product:O},null,8,["product"])]),_:2},1024))),128))]),_:1})):(r(),$("div",m$,[t(D,{description:e.$t("front_setting.no_results")},null,8,["description"])]))]),e.totalRecords>e.pageSize?(r(),$("div",c$,[t(S,{current:e.currentPage,"onUpdate:current":o[1]||(o[1]=O=>e.currentPage=O),total:e.totalRecords,"page-size":e.pageSize,"show-less-items":"",onChange:e.paginationClicked},null,8,["current","total","page-size","onChange"])])):A("",!0)]}),_:1})]),_:1})]),_:1})]),_:1}),t(P,{open:e.showMobileFilters,"onUpdate:open":o[2]||(o[2]=F=>e.showMobileFilters=F),title:"Filter Categories",placement:"bottom",height:"70%",closable:!0,class:"mobile-filter-drawer"},{default:a(()=>[t(m,{catSelectedKeys:e.catSelectedKeys},null,8,["catSelectedKeys"])]),_:1},8,["open"])])}const _$=W(t$,[["render",p$],["__scopeId","data-v-2e0a1e1d"]]);const f$=Z({components:{HomeOutlined:Vt,ShoppingOutlined:Qt,SettingOutlined:St,LogoutOutlined:lo},setup(){const e=Ze(),o=ke(),c=T([]),n=T("inline"),v=()=>{n.value=window.innerWidth<992?"horizontal":"inline"},h=d=>{const i=typeof d.meta.menuKey=="function"?d.meta.menuKey(d):d.meta.menuKey;i&&(c.value=[i.replace("-","_")])};return ee(()=>{v(),window.addEventListener("resize",v),h(e)}),qa(()=>{window.removeEventListener("resize",v)}),ue(e,d=>h(d)),{selectedKeys:c,logout:()=>o.dispatch("front/logout"),menuMode:n}}}),g$={class:"sidebar-nav-container"};function y$(e,o,c,n,v,h){const m=l("home-outlined"),d=l("router-link"),i=l("a-menu-item"),p=l("shopping-outlined"),_=l("setting-outlined"),f=l("logout-outlined"),y=l("a-menu");return r(),$("div",g$,[t(y,{selectedKeys:e.selectedKeys,"onUpdate:selectedKeys":o[0]||(o[0]=b=>e.selectedKeys=b),class:"dashboard-sidebar-menu",mode:e.menuMode},{default:a(()=>[t(i,{key:"dashboard"},{icon:a(()=>[t(m)]),default:a(()=>[t(d,{to:{name:"front.dashboard"}},{default:a(()=>[u(s(e.$t("front.dashboard")),1)]),_:1})]),_:1}),t(i,{key:"orders"},{icon:a(()=>[t(p)]),default:a(()=>[t(d,{to:{name:"front.orders"}},{default:a(()=>[u(s(e.$t("front.my_orders")),1)]),_:1})]),_:1}),t(i,{key:"profile"},{icon:a(()=>[t(_)]),default:a(()=>[t(d,{to:{name:"front.profile"}},{default:a(()=>[u(s(e.$t("front.my_profile")),1)]),_:1})]),_:1}),t(i,{onClick:e.logout,key:"logout",class:"logout-item"},{icon:a(()=>[t(f)]),default:a(()=>[g("span",null,s(e.$t("front.logout")),1)]),_:1},8,["onClick"])]),_:1},8,["selectedKeys","mode"])])}const xa=W(f$,[["render",y$],["__scopeId","data-v-bb1fab48"]]);const h$=Z({props:["order"],components:{EyeOutlined:tt,StopOutlined:ua,OrderStatus:uo,PaymentStatus:gt,OrderDetails:mo},setup(){const{formatAmountCurrency:e}=Pt(),o=T(!1);return{visible:o,showModal:()=>{o.value=!0},columns:[{title:"#",dataIndex:"id"},{title:"Product",dataIndex:"product_id"},{title:"Quantity",dataIndex:"quantity"},{title:"Price",dataIndex:"unit_price"},{title:"Total",dataIndex:"subtotal"}],formatAmountCurrency:e,buildAddress:La}}});function v$(e,o,c,n,v,h){const m=l("eye-outlined"),d=l("a-menu-item"),i=l("OrderDetails"),p=l("a-modal");return r(),$(I,null,[t(d,{onClick:e.showModal},{default:a(()=>[t(m),u(" "+s(e.$t("stock.view_order")),1)]),_:1},8,["onClick"]),t(p,{open:e.visible,"onUpdate:open":o[0]||(o[0]=_=>e.visible=_),width:"70%",footer:!1},{title:a(()=>[u(s(e.order.invoice_number),1)]),default:a(()=>[t(i,{order:e.order},null,8,["order"])]),_:1},8,["open"])],64)}const b$=W(h$,[["render",v$]]),k$=Z({props:["data"],emits:["reloadOrders"],components:{EyeOutlined:tt,DeleteOutlined:fe,MoreOutlined:Wn,StopOutlined:ua,DownloadOutlined:Ot,PaymentStatus:gt,OrderStatus:fa,OrderDetailsModal:b$},setup(e,{emit:o}){const{t:c}=ae(),{formatDateTime:n}=X(),{formatAmountCurrency:v}=Pt();return{columns:[{title:"Date",dataIndex:"order_date"},{title:"Total",dataIndex:"total"},{title:"Order Status",dataIndex:"order_status"},{title:"Payment Status",dataIndex:"payment_status"},{title:"Action",dataIndex:"action"}],cancelOrder:i=>{Le.confirm({title:c("common.delete")+"?",icon:t(Ae),content:c("stock.order_cancel_message"),centered:!0,okText:c("common.yes"),okType:"danger",cancelText:c("common.no"),onOk(){axiosFront.post(`front/self/cancel-order/${i}`).then(p=>{o("reloadOrders"),Me.success({message:c("common.success"),description:c("stock.order_canceled"),placement:"bottomRight"})})},onCancel(){}})},downloadInvoice:i=>{window.location.href=window.config.path+"/api/v1/pdf/"+i},formatAmountCurrency:v,formatDateTime:n}}});function w$(e,o,c,n,v,h){const m=l("PaymentStatus"),d=l("OrderStatus"),i=l("OrderDetailsModal"),p=l("stop-outlined"),_=l("a-menu-item"),f=l("download-outlined"),y=l("a-menu"),b=l("more-outlined"),k=l("a-dropdown"),C=l("a-table");return r(),w(C,{columns:e.columns,"row-key":D=>D.id,"data-source":e.data,pagination:!1},{bodyCell:a(({column:D,record:S})=>[D.dataIndex==="order_date"?(r(),$(I,{key:0},[u(s(e.formatDateTime(S.order_date)),1)],64)):A("",!0),D.dataIndex==="total"?(r(),$(I,{key:1},[u(s(e.formatAmountCurrency(S.total)),1)],64)):A("",!0),D.dataIndex==="payment_status"?(r(),w(m,{key:2,paymentStatus:S.payment_status},null,8,["paymentStatus"])):A("",!0),D.dataIndex==="order_status"?(r(),w(d,{key:3,data:S},null,8,["data"])):A("",!0),D.dataIndex==="action"?(r(),w(k,{key:4,placement:"bottomRight"},{overlay:a(()=>[t(y,null,{default:a(()=>[t(i,{order:S},null,8,["order"]),S.order_status=="ordered"&&!S.cancelled?(r(),w(_,{key:0,onClick:P=>e.cancelOrder(S.unique_id)},{default:a(()=>[t(p),o[0]||(o[0]=u(" Cancel Order ",-1))]),_:1},8,["onClick"])):A("",!0),t(_,{onClick:P=>e.downloadInvoice(S.unique_id)},{default:a(()=>[t(f),o[1]||(o[1]=u(" Download Invoice ",-1))]),_:1},8,["onClick"])]),_:2},1024)]),default:a(()=>[t(b,{style:{fontSize:"16px"}})]),_:2},1024)):A("",!0)]),_:1},8,["columns","row-key","data-source"])}const el=W(k$,[["render",w$]]);const C$=Z({components:{DashboardSidebar:xa,ShoppingCartOutlined:$t,SyncOutlined:Ct,FieldTimeOutlined:ds,CheckOutlined:ht,HomeOutlined:Vt,OrderTable:el},setup(){const{frontWarehouse:e}=X(),{addEditRequestFront:o}=ba(),c=T({totalOrders:0,pendingOrders:0,processingOrders:0,completedOrders:0}),n=T([]),v=()=>{o({url:"front/self/dashboard",data:{},success:h=>{c.value=h,n.value=h.recentOrders}})};return ee(v),{states:c,recentOrders:n,fetchOrders:v,frontWarehouse:e}}}),S$={class:"dashboard-wrapper"},$$={class:"sticky-sidebar"},D$={class:"dashboard-welcome"},A$={class:"welcome-text"},T$={class:"stat-card total"},E$={class:"stat-icon"},O$={class:"stat-info"},I$={class:"label"},P$={class:"value"},U$={class:"stat-card pending"},F$={class:"stat-icon"},M$={class:"stat-info"},q$={class:"label"},R$={class:"value"},K$={class:"stat-card processing"},V$={class:"stat-icon"},z$={class:"stat-info"},L$={class:"value"},B$={class:"stat-card completed"},W$={class:"stat-icon"},j$={class:"stat-info"},H$={class:"value"},N$={class:"card-header-flex"},Y$={class:"title-text"},G$={class:"table-container"};function X$(e,o,c,n,v,h){const m=l("home-outlined"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("dashboard-sidebar"),f=l("a-col"),y=l("shopping-cart-outlined"),b=l("sync-outlined"),k=l("field-time-outlined"),C=l("check-outlined"),D=l("a-row"),S=l("a-button"),P=l("OrderTable"),F=l("a-card");return r(),$("div",S$,[t(D,{type:"flex",justify:"center"},{default:a(()=>[t(f,{xs:22,sm:22,md:22,lg:20},{default:a(()=>[t(p,{class:"modern-breadcrumb mt-30"},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"front.homepage",params:{warehouse:e.frontWarehouse.slug}}},{default:a(()=>[t(m),u(" "+s(e.$t("front.home")),1)]),_:1},8,["to"])]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("front.dashboard")),1)]),_:1})]),_:1}),t(D,{gutter:[32,32],class:"mt-30 pb-50"},{default:a(()=>[t(f,{xs:24,lg:6,xl:5},{default:a(()=>[g("div",$$,[t(_)])]),_:1}),t(f,{xs:24,lg:18,xl:19},{default:a(()=>[g("div",D$,[g("div",A$,[g("h1",null,s(e.$t("front.dashboard")),1),o[0]||(o[0]=g("p",null,"Welcome back! Heres whats happening with your orders.",-1))])]),t(D,{gutter:[20,20],class:"mt-20"},{default:a(()=>[t(f,{xs:12,sm:12,md:6},{default:a(()=>[g("div",T$,[g("div",E$,[t(y)]),g("div",O$,[g("span",I$,s(e.$t("front.total_orders")),1),g("span",P$,s(e.states.totalOrders),1)])])]),_:1}),t(f,{xs:12,sm:12,md:6},{default:a(()=>[g("div",U$,[g("div",F$,[t(b)]),g("div",M$,[g("span",q$,s(e.$t("front.pending_orders")),1),g("span",R$,s(e.states.pendingOrders),1)])])]),_:1}),t(f,{xs:12,sm:12,md:6},{default:a(()=>[g("div",K$,[g("div",V$,[t(k)]),g("div",z$,[o[1]||(o[1]=g("span",{class:"label"},"Processing",-1)),g("span",L$,s(e.states.processingOrders),1)])])]),_:1}),t(f,{xs:12,sm:12,md:6},{default:a(()=>[g("div",B$,[g("div",W$,[t(C)]),g("div",j$,[o[2]||(o[2]=g("span",{class:"label"},"Completed",-1)),g("span",H$,s(e.states.completedOrders),1)])])]),_:1})]),_:1}),t(F,{bordered:!1,class:"recent-orders-card mt-30"},{title:a(()=>[g("div",N$,[g("span",Y$,s(e.$t("front.recent_orders")),1),t(S,{type:"link"},{default:a(()=>[...o[3]||(o[3]=[u("View All",-1)])]),_:1})])]),default:a(()=>[g("div",G$,[t(P,{data:e.recentOrders,onReloadOrders:e.fetchOrders},null,8,["data","onReloadOrders"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const J$=W(C$,[["render",X$],["__scopeId","data-v-9d059802"]]),tl=e=>{const{url:o,data:c,success:n,error:v,t:h}=e;var m={};Ce(c,function(d,i){d==null?m[i]=null:m[i]=d}),axiosFront.post(o,m).then(d=>{n(d.data)}).catch(d=>{const i=d.data,p=d.status;var _={};if(p==422){if(i.error&&typeof i.error.details<"u")for(var f=Object.keys(i.error.details),y=0;y<f.length;y++){var b=f[y].replace(".","\\.");_[b]={required:!0,message:i.error.details[f[y]][0]}}v(_)}else p==406?v(i):p==403&&notification.error({})}).then(()=>{})};const Q$=Z({props:{formData:null,folder:String,imageField:{default:"image",type:String},url:{default:"front/upload-file",type:String}},components:{LoadingOutlined:Oe,PlusOutlined:le},setup(e,{emit:o}){const c=T([]),n=T(!1),{t:v}=ae();return{fileList:c,loading:n,customRequest:m=>{const d=new FormData;d.append("image",m.file),d.append("folder",e.folder),n.value=!0,axiosFront.post(e.url,d,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>{c.value=[],n.value=!1,o("onFileUploaded",{file:i.data.file,file_url:i.data.file_url})}).catch(()=>{n.value=!1,Ee.error(v("messages.uploading_failed"))})}}}}),Z$={key:0},x$=["src"],e4={key:1},t4={class:"ant-upload-text"};function a4(e,o,c,n,v,h){const m=l("loading-outlined"),d=l("plus-outlined"),i=l("a-upload");return r(),w(i,{accept:"image/*","file-list":e.fileList,"onUpdate:fileList":o[0]||(o[0]=p=>e.fileList=p),name:"image","list-type":"picture-card",class:"avatar-uploader","show-upload-list":!1,customRequest:e.customRequest},{default:a(()=>[e.formData[e.imageField]!=null?(r(),$("div",Z$,[g("img",{style:{width:"128px"},src:e.formData[`${e.imageField}_url`],alt:"avatar"},null,8,x$)])):(r(),$("div",e4,[e.loading?(r(),w(m,{key:0})):(r(),w(d,{key:1})),g("div",t4,s(e.$t("common.upload")),1)]))]),_:1},8,["file-list","customRequest"])}const n4=W(Q$,[["render",a4]]);const o4={components:{SaveOutlined:ve,UserOutlined:Zt,HomeOutlined:Vt,DashboardSidebar:xa,UploadFront:n4},setup(){const{t:e}=ae(),o=ke(),c=T({}),n=T({}),v=o.state.front.user;return ee(()=>{c.value={...v,password:""}}),{formData:c,rules:n,onSubmit:()=>{tl({url:"front/profile",data:c.value,success:i=>{o.commit("front/updateUser",i.user),Me.success({placement:"bottomRight",message:e("common.success"),description:e("user.profile_updated")}),n.value={}},error:i=>{n.value=i,Ee.error(e("common.fix_errors"))}})},handleUpload:i=>{c.value.profile_image=i.file,c.value.profile_image_url=i.file_url},validate:i=>({help:n.value[i]?n.value[i].message:null,validateStatus:n.value[i]?"error":null})}}},l4={class:"profile-settings-wrapper"},s4={class:"sticky-sidebar"},r4={class:"profile-header-strip"},d4={class:"avatar-container"},i4={class:"user-meta"},u4={class:"form-section"},m4={class:"helper-text"},c4={class:"form-section"},p4={class:"upload-wrapper-modern"},_4={class:"form-section"},f4={class:"form-footer mt-20"};function g4(e,o,c,n,v,h){const m=l("home-outlined"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("dashboard-sidebar"),f=l("a-col"),y=l("UserOutlined"),b=l("a-avatar"),k=l("a-tag"),C=l("a-divider"),D=l("a-input"),S=l("a-form-item"),P=l("a-input-password"),F=l("a-row"),O=l("UploadFront"),E=l("a-textarea"),U=l("SaveOutlined"),K=l("a-button"),z=l("a-form"),M=l("a-card");return r(),$("div",l4,[t(F,{type:"flex",justify:"center"},{default:a(()=>[t(f,{xs:22,sm:22,md:22,lg:20},{default:a(()=>[t(p,{class:"modern-breadcrumb mt-30"},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:"/"},{default:a(()=>[t(m),u(" "+s(e.$t("front.home")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[t(d,{to:"/dashboard"},{default:a(()=>[u(s(e.$t("front.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("front.profile")),1)]),_:1})]),_:1}),t(F,{gutter:[32,32],class:"mt-30 pb-50"},{default:a(()=>[t(f,{xs:24,lg:6},{default:a(()=>[g("div",s4,[t(_)])]),_:1}),t(f,{xs:24,lg:18},{default:a(()=>[t(M,{bordered:!1,class:"profile-main-card"},{default:a(()=>[g("div",r4,[g("div",d4,[t(b,{size:80,src:n.formData.profile_image_url},{icon:a(()=>[t(y)]),_:1},8,["src"]),g("div",i4,[g("h2",null,s(n.formData.name),1),g("span",null,s(n.formData.email),1)])]),t(k,{color:"blue"},{default:a(()=>[...o[5]||(o[5]=[u("Verified Account",-1)])]),_:1})]),t(C),t(z,{layout:"vertical",class:"modern-form"},{default:a(()=>[g("div",u4,[o[6]||(o[6]=g("h3",{class:"section-title"},"Personal Information",-1)),t(F,{gutter:24},{default:a(()=>[t(f,{xs:24,md:12},{default:a(()=>[t(S,Nt({label:e.$t("user.name")},n.validate("name")),{default:a(()=>[t(D,{value:n.formData.name,"onUpdate:value":o[0]||(o[0]=R=>n.formData.name=R),size:"large"},null,8,["value"])]),_:1},16,["label"])]),_:1}),t(f,{xs:24,md:12},{default:a(()=>[t(S,Nt({label:e.$t("user.phone")},n.validate("phone")),{default:a(()=>[t(D,{value:n.formData.phone,"onUpdate:value":o[1]||(o[1]=R=>n.formData.phone=R),size:"large"},null,8,["value"])]),_:1},16,["label"])]),_:1}),t(f,{xs:24,md:12},{default:a(()=>[t(S,{label:e.$t("user.email")},{default:a(()=>[t(D,{value:n.formData.email,disabled:"",size:"large"},null,8,["value"])]),_:1},8,["label"])]),_:1}),t(f,{xs:24,md:12},{default:a(()=>[t(S,Nt({label:e.$t("user.password")},n.validate("password")),{default:a(()=>[t(P,{value:n.formData.password,"onUpdate:value":o[2]||(o[2]=R=>n.formData.password=R),size:"large"},null,8,["value"]),g("div",m4,s(e.$t("user.password_blank")),1)]),_:1},16,["label"])]),_:1})]),_:1})]),t(C),g("div",c4,[o[7]||(o[7]=g("h3",{class:"section-title"},"Profile Picture",-1)),g("div",p4,[t(O,{formData:n.formData,folder:"user",imageField:"profile_image",onOnFileUploaded:n.handleUpload},null,8,["formData","onOnFileUploaded"])])]),t(C),g("div",_4,[o[8]||(o[8]=g("h3",{class:"section-title"},"Address Management",-1)),t(F,{gutter:24},{default:a(()=>[t(f,{xs:24,md:12},{default:a(()=>[t(S,Nt({label:e.$t("user.billing_address")},n.validate("address")),{default:a(()=>[t(E,{value:n.formData.address,"onUpdate:value":o[3]||(o[3]=R=>n.formData.address=R),rows:3},null,8,["value"])]),_:1},16,["label"])]),_:1}),t(f,{xs:24,md:12},{default:a(()=>[t(S,Nt({label:e.$t("user.shipping_address")},n.validate("shipping_address")),{default:a(()=>[t(E,{value:n.formData.shipping_address,"onUpdate:value":o[4]||(o[4]=R=>n.formData.shipping_address=R),rows:3},null,8,["value"])]),_:1},16,["label"])]),_:1})]),_:1})]),g("div",f4,[t(K,{type:"primary",size:"large",onClick:n.onSubmit,class:"save-btn"},{icon:a(()=>[t(U)]),default:a(()=>[o[9]||(o[9]=u(" Save Profile Changes ",-1))]),_:1},8,["onClick"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const y4=W(o4,[["render",g4],["__scopeId","data-v-ad424940"]]),h4={components:{DashboardSidebar:xa,OrderTable:el},setup(){const{addEditRequestFront:e}=ba(),{orderStatus:o}=X(),c=T([]),n=Se({order_status_type:"all",dates:[]}),v="YYYY-MM-DD";ee(()=>{h()});const h=()=>{e({url:"front/self/orders",data:n,success:d=>{c.value=d.orders}})};return{myOrders:c,filters:n,orderStatus:o,fetchOrders:h,dateFormat:v}}},v4={class:"mt-30 mb-30"},b4={class:"table-responsive"};function k4(e,o,c,n,v,h){const m=l("router-link"),d=l("a-breadcrumb-item"),i=l("a-breadcrumb"),p=l("dashboard-sidebar"),_=l("a-col"),f=l("a-range-picker"),y=l("a-page-header"),b=l("a-row"),k=l("a-tab-pane"),C=l("a-tabs"),D=l("OrderTable"),S=l("a-card");return r(),$("div",v4,[t(b,{type:"flex",justify:"center"},{default:a(()=>[t(_,{span:20},{default:a(()=>[t(i,null,{default:a(()=>[t(d,null,{default:a(()=>[t(m,{to:{name:"front.homepage"}},{default:a(()=>[u(s(e.$t("front.home")),1)]),_:1})]),_:1}),t(d,null,{default:a(()=>[t(m,{to:{name:"front.dashboard"}},{default:a(()=>[u(s(e.$t("front.dashboard")),1)]),_:1})]),_:1}),t(d,null,{default:a(()=>[u(s(e.$t("front.my_orders")),1)]),_:1})]),_:1}),t(b,{gutter:[30,30],class:"mt-30"},{default:a(()=>[t(_,{xs:24,sm:24,md:24,lg:6,xl:6},{default:a(()=>[t(p)]),_:1}),t(_,{xs:24,sm:24,md:24,lg:18,xl:18},{default:a(()=>[t(S,{title:null,bordered:!1,style:{borderRadius:"10px"},class:"dashboard-container"},{default:a(()=>[t(b,null,{default:a(()=>[t(_,{span:24},{default:a(()=>[t(y,{title:e.$t("front.order_history"),style:{"padding-left":"0px"}},{extra:a(()=>[t(f,{value:n.filters.dates,"onUpdate:value":o[0]||(o[0]=P=>n.filters.dates=P),placeholder:[e.$t("common.start_date"),e.$t("common.end_date")],style:{width:"100%"},onChange:n.fetchOrders,valueFormat:n.dateFormat},null,8,["value","placeholder","onChange","valueFormat"])]),_:1},8,["title"])]),_:1})]),_:1}),t(b,null,{default:a(()=>[t(_,{span:24},{default:a(()=>[t(C,{activeKey:n.filters.order_status_type,"onUpdate:activeKey":o[1]||(o[1]=P=>n.filters.order_status_type=P),onChange:n.fetchOrders},{default:a(()=>[t(k,{key:"all",tab:"All Orders"}),(r(!0),$(I,null,G(n.orderStatus,P=>(r(),w(k,{key:P.key,tab:`${P.value}`},null,8,["tab"]))),128))]),_:1},8,["activeKey","onChange"]),g("div",b4,[t(D,{data:n.myOrders,onReloadOrders:n.fetchOrders},null,8,["data","onReloadOrders"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const w4=W(h4,[["render",k4]]),C4=Z({props:["formData","addEditVisible","addEditId"],emits:["addEditSuccess"],components:{SaveOutlined:ve},setup(e,{emit:o}){const c=T(!1),n=T({}),v=T({}),h=T(null),{t:m}=ae();ee(()=>{c.value=e.addEditVisible,n.value=e.formData,h.value=e.addEditId});const d=()=>{var p="front/self/address";e.addEditId!=null&&(p=`front/self/address/${e.addEditId}`),tl({url:p,data:n.value,success:_=>{Me.success({placement:"bottomRight",message:m("common.success"),description:m("front.address_saved")}),o("addEditSuccess"),v.value={},c.value=!1},error:_=>{v.value=_,Ee.error(m("common.fix_errors"))}})},i=()=>{c.value=!1};return ue(e,(p,_)=>{c.value=p.addEditVisible,n.value=p.formData,h.value=p.addEditId}),{address:n,rules:v,visible:c,onSubmit:d,onClose:i}}});function S4(e,o,c,n,v,h){const m=l("a-input"),d=l("a-form-item"),i=l("a-col"),p=l("a-row"),_=l("a-textarea"),f=l("a-form"),y=l("SaveOutlined"),b=l("a-button"),k=l("a-modal");return r(),w(k,{open:e.visible,"onUpdate:open":o[9]||(o[9]=C=>e.visible=C),width:"700px",title:e.addEditId==null?e.$t("front.add_new_address"):e.$t("front.edit_address")},{footer:a(()=>[t(b,{type:"primary",onClick:e.onSubmit,style:{"margin-right":"8px"}},{icon:a(()=>[t(y)]),default:a(()=>[u(" "+s(e.$t("common.save")),1)]),_:1},8,["onClick"]),t(b,{onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(f,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("user.name"),name:"name",help:e.rules.name?e.rules.name.message:null,validateStatus:e.rules.name?"error":null},{default:a(()=>[t(m,{value:e.address.name,"onUpdate:value":o[0]||(o[0]=C=>e.address.name=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.name")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.email"),name:"email",help:e.rules.email?e.rules.email.message:null,validateStatus:e.rules.email?"error":null},{default:a(()=>[t(m,{value:e.address.email,"onUpdate:value":o[1]||(o[1]=C=>e.address.email=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.email")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.phone"),name:"phone",help:e.rules.phone?e.rules.phone.message:null,validateStatus:e.rules.phone?"error":null},{default:a(()=>[t(m,{value:e.address.phone,"onUpdate:value":o[2]||(o[2]=C=>e.address.phone=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.phone")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("user.billing_address"),name:"address",help:e.rules.address?e.rules.address.message:null,validateStatus:e.rules.address?"error":null},{default:a(()=>[t(_,{value:e.address.address,"onUpdate:value":o[3]||(o[3]=C=>e.address.address=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.billing_address")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("user.shipping_address"),name:"shipping_address",help:e.rules.shipping_address?e.rules.shipping_address.message:null,validateStatus:e.rules.shipping_address?"error":null},{default:a(()=>[t(_,{value:e.address.shipping_address,"onUpdate:value":o[4]||(o[4]=C=>e.address.shipping_address=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.shipping_address")]),"auto-size":{minRows:2,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.city"),name:"city",help:e.rules.city?e.rules.city.message:null,validateStatus:e.rules.city?"error":null},{default:a(()=>[t(m,{value:e.address.city,"onUpdate:value":o[5]||(o[5]=C=>e.address.city=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.city")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.state"),name:"state",help:e.rules.state?e.rules.state.message:null,validateStatus:e.rules.state?"error":null},{default:a(()=>[t(m,{value:e.address.state,"onUpdate:value":o[6]||(o[6]=C=>e.address.state=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.state")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.country"),name:"country",help:e.rules.country?e.rules.country.message:null,validateStatus:e.rules.country?"error":null},{default:a(()=>[t(m,{value:e.address.country,"onUpdate:value":o[7]||(o[7]=C=>e.address.country=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.country")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1}),t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("user.zipcode"),name:"zipcode",help:e.rules.zipcode?e.rules.zipcode.message:null,validateStatus:e.rules.zipcode?"error":null},{default:a(()=>[t(m,{value:e.address.zipcode,"onUpdate:value":o[8]||(o[8]=C=>e.address.zipcode=C),placeholder:e.$t("common.placeholder_default_text",[e.$t("user.zipcode")]),type:"number"},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title"])}const $4=W(C4,[["render",S4]]),D4=Z({props:[],emits:["onAddressSelection"],components:{AddEdit:$4},setup(e,{emit:o}){const c=T(null),n=T([]),v=ke(),{t:h}=ae(),m=v.state.front.user,d="front/self/address?fields=id,xid,name,email,phone,address,shipping_address,city,state,country,zipcode",i=T(!1),p=T({}),_=T(null);ee(()=>{f(),c.value=e.selectedAddress});const f=()=>{axiosFront.get(d).then(S=>{n.value=S.data})};return{userAddresses:n,addAddress:()=>{p.value={name:m.name,phone:m.phone,email:m.email,address:m.address,shipping_address:m.shipping_address,city:m.city,state:m.state,country:m.country,zipcode:m.zipcode},_.value=null,i.value=!0},editAddress:S=>{p.value={name:S.name,email:S.email,phone:S.phone,address:S.address,shipping_address:S.shipping_address,city:S.city,state:S.state,country:S.country,zipcode:S.zipcode,_method:"PUT"},_.value=S.xid,i.value=!0},selectedAddress:c,addressSelected:()=>{o("onAddressSelection",c.value)},buildAddress:La,addEditVisible:i,addEditAddress:p,addEditId:_,addEditSuccess:()=>{f()},deleteAddress:S=>{Le.confirm({title:h("common.delete")+"?",icon:t(Ae),content:h("front.address_delete_message"),centered:!0,okText:h("common.yes"),okType:"danger",cancelText:h("common.no"),onOk(){axiosFront.delete(`front/self/address/${S}`).then(P=>{f(),Me.success({message:h("common.success"),description:h("front.address_deleted"),placement:"bottomRight"})})},onCancel(){}})}}}});function A4(e,o,c,n,v,h){const m=l("a-button"),d=l("a-radio"),i=l("a-radio-group"),p=l("a-list-item-meta"),_=l("a-list-item"),f=l("a-list"),y=l("AddEdit");return r(),$(I,null,[t(f,{"item-layout":"horizontal","data-source":e.userAddresses},{renderItem:a(({item:b})=>[t(_,null,{actions:a(()=>[t(m,{onClick:k=>e.editAddress(b),class:"p-0",type:"link"},{default:a(()=>[u(s(e.$t("common.edit")),1)]),_:1},8,["onClick"]),t(m,{onClick:k=>e.deleteAddress(b.xid),class:"p-0",type:"link"},{default:a(()=>[u(s(e.$t("common.delete")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(p,null,{title:a(()=>[t(i,{value:e.selectedAddress,"onUpdate:value":o[0]||(o[0]=k=>e.selectedAddress=k),name:"addressCheckbox",onChange:e.addressSelected},{default:a(()=>[t(d,{value:b.xid},{default:a(()=>[u(s(b.name),1)]),_:2},1032,["value"])]),_:2},1032,["value","onChange"])]),description:a(()=>[u(s(e.buildAddress(b)),1),o[1]||(o[1]=g("br",null,null,-1)),u(" "+s(e.$t("user.phone"))+": "+s(b.phone),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"]),t(m,{class:"pl-0",type:"link",onClick:e.addAddress},{default:a(()=>[u(s(e.$t("front.add_new_address")),1)]),_:1},8,["onClick"]),t(y,{addEditVisible:e.addEditVisible,formData:e.addEditAddress,addEditId:e.addEditId,onAddEditSuccess:e.addEditSuccess},null,8,["addEditVisible","formData","addEditId","onAddEditSuccess"])],64)}const T4=W(D4,[["render",A4]]);const E4=Z({components:{WalletOutlined:no,RollbackOutlined:is,RightOutlined:pa,DeleteOutlined:fe,UserAddress:T4,MobileOutlined:us},setup(){const{products:e,total:o,formatAmountCurrency:c,frontWarehouse:n}=Pt(),{loading:v,addEditRequestFront:h}=ba(),{t:m}=ae(),d=qe(),i=ke(),p=T(null),_=T("cod"),f=T(!1),y=T("254"),b=T(!1);return{products:e,total:o,formatAmountCurrency:c,frontWarehouse:n,loading:v,selectedAddress:p,paymentMethod:_,mpesaModalVisible:f,mpesaPhone:y,stkLoading:b,addressSelected:S=>p.value=S,openMpesaModal:()=>{if(!p.value)return Ee.error(m("front.select_shipping_address"));_.value="mpesa",f.value=!0},triggerStkPush:()=>{b.value=!0,setTimeout(()=>{b.value=!1,f.value=!1,Ee.success("STK Push sent! Please check your phone.")},2e3)},confirmOrder:()=>{Le.confirm({title:m("front.confirm_order"),icon:t(Ae),content:`You are about to place an order for ${c(o.value)}. Continue?`,onOk(){h({url:`front/self/checkout-orders/${n.value.slug}`,data:{products:e.value,address_id:p.value,payment_method:_.value,mpesa_phone:_.value==="mpesa"?y.value:null},success:S=>{i.commit("front/addCartItems",[]),d.push({name:"front.checkout.success",params:{uniqueId:S.unique_id,warehouse:n.value.slug}})}})}})},getSalesPriceWithTax:zt}}}),O4={class:"checkout-wrapper mt-30 mb-30"},I4={class:"checkout-section"},P4={class:"section-title"},U4={class:"checkout-section"},F4={class:"section-title"},M4={class:"option-content"},q4={class:"action-footer mt-40"},R4={class:"totals-area"},K4={class:"total-row grand-total"},V4={class:"mpesa-modal-body"},z4={class:"amount-badge"};function L4(e,o,c,n,v,h){const m=l("router-link"),d=l("a-breadcrumb-item"),i=l("a-breadcrumb"),p=l("a-alert"),_=l("UserAddress"),f=l("a-divider"),y=l("wallet-outlined"),b=l("a-radio"),k=l("a-col"),C=l("a-row"),D=l("rollback-outlined"),S=l("a-button"),P=l("right-outlined"),F=l("a-card"),O=l("a-avatar"),E=l("a-list-item-meta"),U=l("a-list-item"),K=l("a-list"),z=l("mobile-outlined"),M=l("a-input"),R=l("a-form-item"),q=l("a-form"),L=l("a-modal");return r(),$("div",O4,[t(C,{type:"flex",justify:"center"},{default:a(()=>[t(k,{xs:22,sm:22,md:22,lg:20},{default:a(()=>[t(i,{class:"mb-30"},{default:a(()=>[t(d,null,{default:a(()=>[t(m,{to:"/"},{default:a(()=>[u(s(e.$t("front.home")),1)]),_:1})]),_:1}),t(d,null,{default:a(()=>[u(s(e.$t("front.checkout_page")),1)]),_:1})]),_:1}),t(C,{gutter:[30,30]},{default:a(()=>[t(k,{xs:24,lg:16},{default:a(()=>[t(F,{bordered:!1,class:"checkout-card main-form"},{default:a(()=>[g("section",I4,[g("div",P4,[o[6]||(o[6]=g("span",{class:"step-number"},"1",-1)),g("h3",null,s(e.$t("front.address_details")),1)]),e.selectedAddress?A("",!0):(r(),w(p,{key:0,message:e.$t("front.select_shipping_address"),type:"warning","show-icon":"",class:"mb-20"},null,8,["message"])),t(_,{onOnAddressSelection:e.addressSelected},null,8,["onOnAddressSelection"])]),t(f),g("section",U4,[g("div",F4,[o[7]||(o[7]=g("span",{class:"step-number"},"2",-1)),g("h3",null,s(e.$t("front.payment_details")),1)]),t(C,{gutter:[16,16],class:"mt-20"},{default:a(()=>[t(k,{xs:24,md:12},{default:a(()=>[g("div",{class:kt(["payment-option",e.paymentMethod==="cod"?"active":""]),onClick:o[0]||(o[0]=j=>e.paymentMethod="cod")},[g("div",M4,[t(y),g("span",null,s(e.$t("front.cash_on_delivery")),1)]),t(b,{checked:e.paymentMethod==="cod"},null,8,["checked"])],2)]),_:1}),t(k,{xs:24,md:12},{default:a(()=>[g("div",{class:kt(["payment-option mpesa",e.paymentMethod==="mpesa"?"active":""]),onClick:o[1]||(o[1]=(...j)=>e.openMpesaModal&&e.openMpesaModal(...j))},[o[8]||(o[8]=g("div",{class:"option-content"},[g("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/15/M-PESA_LOGO-01.svg/1200px-M-PESA_LOGO-01.svg.png",class:"mpesa-logo"}),g("span",null,"Pay with M-Pesa")],-1)),t(b,{checked:e.paymentMethod==="mpesa"},null,8,["checked"])],2)]),_:1})]),_:1})]),g("div",q4,[t(S,{type:"ghost",size:"large",onClick:o[2]||(o[2]=j=>e.$router.go(-1))},{default:a(()=>[t(D),o[9]||(o[9]=u(" Back ",-1))]),_:1}),t(S,{type:"primary",size:"large",loading:e.loading,disabled:!e.selectedAddress||e.products.length===0,onClick:e.confirmOrder},{default:a(()=>[u(s(e.$t("front.confirm_order"))+" ",1),t(P)]),_:1},8,["loading","disabled","onClick"])])]),_:1})]),_:1}),t(k,{xs:24,lg:8},{default:a(()=>[t(F,{bordered:!1,class:"checkout-card summary-card"},{default:a(()=>[o[10]||(o[10]=g("h3",{class:"summary-title"},"Order Summary",-1)),t(K,{"item-layout":"horizontal","data-source":e.products,class:"cart-preview-list"},{renderItem:a(({item:j})=>[t(U,null,{default:a(()=>[t(E,null,{avatar:a(()=>[t(O,{src:j.image_url,shape:"square",size:50},null,8,["src"])]),title:a(()=>[u(s(j.name)+" x "+s(j.cart_quantity),1)]),description:a(()=>[u(s(e.formatAmountCurrency(e.getSalesPriceWithTax(j)*j.cart_quantity)),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"]),t(f),g("div",R4,[g("div",K4,[g("span",null,s(e.$t("stock.grand_total")),1),g("span",null,s(e.formatAmountCurrency(e.total)),1)])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(L,{open:e.mpesaModalVisible,"onUpdate:open":o[5]||(o[5]=j=>e.mpesaModalVisible=j),title:"M-Pesa Express Payment",centered:"",onOk:e.triggerStkPush},{footer:a(()=>[t(S,{key:"back",onClick:o[4]||(o[4]=j=>e.mpesaModalVisible=!1)},{default:a(()=>[...o[13]||(o[13]=[u("Cancel",-1)])]),_:1}),t(S,{key:"submit",type:"primary",loading:e.stkLoading,onClick:e.triggerStkPush,style:{background:"#49aa47","border-color":"#49aa47"}},{default:a(()=>[...o[14]||(o[14]=[u(" Send STK Push ",-1)])]),_:1},8,["loading","onClick"])]),default:a(()=>[g("div",V4,[o[11]||(o[11]=g("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/15/M-PESA_LOGO-01.svg/1200px-M-PESA_LOGO-01.svg.png",class:"mpesa-logo-large"},null,-1)),o[12]||(o[12]=g("p",null,"Enter your M-Pesa phone number to receive a payment prompt.",-1)),t(q,{layout:"vertical"},{default:a(()=>[t(R,{label:"Phone Number (254...)"},{default:a(()=>[t(M,{value:e.mpesaPhone,"onUpdate:value":o[3]||(o[3]=j=>e.mpesaPhone=j),placeholder:"2547XXXXXXXX",size:"large"},{prefix:a(()=>[t(z)]),_:1},8,["value"])]),_:1})]),_:1}),g("div",z4,"Total to Pay: "+s(e.formatAmountCurrency(e.total)),1)])]),_:1},8,["open","onOk"])])}const B4=W(E4,[["render",L4],["__scopeId","data-v-608ebaa1"]]),W4=Z({components:{ShoppingOutlined:Qt},setup(){const{frontWarehouse:e}=X();return{orderUniqueId:Ze().params.uniqueId,frontWarehouse:e}}}),j4={class:"mt-30 mb-30"};function H4(e,o,c,n,v,h){const m=l("router-link"),d=l("a-breadcrumb-item"),i=l("a-breadcrumb"),p=l("ShoppingOutlined"),_=l("a-button"),f=l("a-space"),y=l("a-result"),b=l("a-card"),k=l("a-col"),C=l("a-row");return r(),$("div",j4,[t(C,{type:"flex",justify:"center"},{default:a(()=>[t(k,{span:20},{default:a(()=>[t(i,null,{default:a(()=>[t(d,null,{default:a(()=>[t(m,{to:{name:"front.homepage",params:{warehouse:e.frontWarehouse.slug}}},{default:a(()=>[u(s(e.$t("front.home")),1)]),_:1},8,["to"])]),_:1}),t(d,null,{default:a(()=>[t(m,{to:{name:"front.dashboard",params:{warehouse:e.frontWarehouse.slug}}},{default:a(()=>[u(s(e.$t("front.dashboard")),1)]),_:1},8,["to"])]),_:1}),t(d,null,{default:a(()=>[t(m,{to:{name:"front.orders",params:{warehouse:e.frontWarehouse.slug}}},{default:a(()=>[u(s(e.$t("front.my_orders")),1)]),_:1},8,["to"])]),_:1}),t(d,null,{default:a(()=>[u(s(e.$t("front.order_placed")),1)]),_:1})]),_:1}),t(C,{class:"mt-30"},{default:a(()=>[t(k,{span:24},{default:a(()=>[t(b,{title:null,bordered:!1,style:{borderRadius:"10px"},class:"dashboard-container"},{default:a(()=>[t(y,{status:"success",title:e.$t("front.order_placed"),"sub-title":e.$t("front.order_placed_message",[e.orderUniqueId])},{extra:a(()=>[t(f,null,{default:a(()=>[t(_,{key:"console",type:"primary"},{default:a(()=>[t(m,{to:{name:"front.orders",params:{warehouse:e.frontWarehouse.slug}}},{default:a(()=>[t(p),u(" "+s(e.$t("front.all_orders")),1)]),_:1},8,["to"])]),_:1}),t(_,{key:"buy"},{default:a(()=>[t(m,{to:{name:"front.homepage",params:{warehouse:e.frontWarehouse.slug}}},{default:a(()=>[u(s(e.$t("front.continue_shopping")),1)]),_:1},8,["to"])]),_:1})]),_:1})]),_:1},8,["title","sub-title"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const N4=W(W4,[["render",H4]]),Y4=[{path:"/",component:nS,children:[{path:"/store/:warehouse",component:e$,name:"front.homepage",meta:{isFrontStore:!0,requireUnauth:!0,menuKey:"homepage"}},{path:"/store/:warehouse/categories/:slug*",component:_$,name:"front.categories",meta:{isFrontStore:!0,requireUnauth:!0,menuKey:"categories"}},{path:"/store/:warehouse/dashboard",component:J$,name:"front.dashboard",meta:{isFrontStore:!0,requireAuth:!0,menuKey:"dashboard"}},{path:"/store/:warehouse/profile",component:y4,name:"front.profile",meta:{isFrontStore:!0,requireAuth:!0,menuKey:"profile"}},{path:"/store/:warehouse/orders",component:w4,name:"front.orders",meta:{isFrontStore:!0,requireAuth:!0,menuKey:"orders"}},{path:"/store/:warehouse/checkout",component:B4,name:"front.checkout",meta:{isFrontStore:!0,requireAuth:!0,menuKey:"orders"}},{path:"/store/:warehouse/checkout-success/:uniqueId",component:N4,name:"front.checkout.success",meta:{isFrontStore:!0,requireAuth:!0,menuKey:"orders"}}]}],al=e=>{const{url:o,data:c,success:n,error:v}=e;var h={};Ce(c,function(m,d){m==null?h[d]=null:h[d]=m}),axiosAdmin.post(o,h).then(m=>{n(m.data)}).catch(m=>{const d=m.data,i=m.status;var p={};if(i==422){if(d.error&&typeof d.error.details<"u")for(var _=Object.keys(d.error.details),f=0;f<_.length;f++){var y=_[f].replace(".","\\.");p[y]={required:!0}}v(p),e.t}else i==403&&v(d)}).then(()=>{})},G4=Z({props:["formData","data","visible","url","addEditType"],components:{PlusOutlined:le,LoadingOutlined:Oe,SaveOutlined:ve,SearchOutlined:ut,DeleteOutlined:fe},setup(e,{emit:o}){const c=Se({formSubmitting:!1,formData:e.formData}),n=T({}),v=()=>{n.value={},o("closed")},{t:h}=ae(),m=Se({orderSearchTerm:[],productFetching:!1,products:[]}),d=T([]),{formatAmountCurrency:i}=X(),p=pe(()=>e.addEditType=="add"?h("product_card.add"):h("product_card.edit")),_=()=>{c.formSubmitting=!0,al({url:e.url,data:c.formData,success:k=>{Me.success({placement:"bottomRight",message:h("common.success"),description:e.addEditType=="add"?h("product_card.created"):h("product_card.updated")}),o("addEditSuccess",k.xid),c.formSubmitting=!1,n.value={}},error:k=>{n.value=k,Ee.error(h("common.fix_errors")),c.formSubmitting=!1}})},f=wt(k=>{if(m.products=[],k!=""){m.productFetching=!0;let C="product-lists/search-products";axiosAdmin.post(C,{search_term:k,except:c.formData.products}).then(D=>{m.products=D.data.products,m.productFetching=!1})}},300),y=(k,C)=>{const D=C.product;d.value=[...d.value,D],c.formData.products=[...c.formData.products,D.xid],m.orderSearchTerm=[],m.products=[]},b=k=>{const C=et(d.value,S=>S.xid!=k),D=et(c.formData.products,S=>S!=k);d.value=C,c.formData.products=D};return ue(e,(k,C)=>{c.formData={...k.formData},d.value=k.addEditType=="edit"?k.data.products_details:[]}),{...vt(m),fetchProducts:f,searchValueSelected:y,selectedProducts:d,rules:n,onClose:v,onSubmit:_,pageTitle:p,drawerWidth:window.innerWidth<=991?"90%":"45%",formatAmountCurrency:i,getSalesPriceWithTax:zt,removeItem:b,addEditForm:c}}});function X4(e,o,c,n,v,h){const m=l("a-input"),d=l("a-form-item"),i=l("a-col"),p=l("a-row"),_=l("SearchOutlined"),f=l("a-spin"),y=l("a-select-option"),b=l("a-select"),k=l("a-tag"),C=l("a-space"),D=l("a-avatar"),S=l("a-list-item-meta"),P=l("delete-outlined"),F=l("a-button"),O=l("a-list-item"),E=l("a-list"),U=l("a-form"),K=l("SaveOutlined"),z=l("a-modal");return r(),w(z,{open:e.visible,closable:!1,centered:!0,title:e.pageTitle,onOk:e.onSubmit},{footer:a(()=>[t(F,{key:"submit",type:"primary",loading:e.addEditForm.formSubmitting,onClick:e.onSubmit},{icon:a(()=>[t(K)]),default:a(()=>[u(" "+s(e.addEditType=="add"?e.$t("common.create"):e.$t("common.update")),1)]),_:1},8,["loading","onClick"]),t(F,{key:"back",onClick:e.onClose},{default:a(()=>[u(s(e.$t("common.cancel")),1)]),_:1},8,["onClick"])]),default:a(()=>[t(U,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("product_card.title"),name:"title",help:e.rules.title?e.rules.title.message:null,validateStatus:e.rules.title?"error":null},{default:a(()=>[t(m,{value:e.addEditForm.formData.title,"onUpdate:value":o[0]||(o[0]=M=>e.addEditForm.formData.title=M),placeholder:e.$t("common.placeholder_default_text",[e.$t("product_card.title")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("product_card.subtitle"),name:"subtitle",help:e.rules.subtitle?e.rules.subtitle.message:null,validateStatus:e.rules.subtitle?"error":null},{default:a(()=>[t(m,{value:e.addEditForm.formData.subtitle,"onUpdate:value":o[1]||(o[1]=M=>e.addEditForm.formData.subtitle=M),placeholder:e.$t("common.placeholder_default_text",[e.$t("product_card.subtitle")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,{label:e.$t("product_card.products"),name:"products",help:e.rules.products?e.rules.products.message:null,validateStatus:e.rules.products?"error":null},{default:a(()=>[t(b,{value:e.orderSearchTerm,"onUpdate:value":o[2]||(o[2]=M=>e.orderSearchTerm=M),"show-search":"","filter-option":!1,placeholder:e.$t("common.select_default_text",[e.$t("product_card.products")]),style:{width:"100%"},"not-found-content":e.productFetching?void 0:null,onSearch:e.fetchProducts,"option-label-prop":"label",onFocus:o[3]||(o[3]=M=>e.products=[]),onSelect:e.searchValueSelected},Qe({suffixIcon:a(()=>[t(_)]),default:a(()=>[(r(!0),$(I,null,G(e.products,M=>(r(),w(y,{key:M.xid,value:M.xid,label:M.name,product:M},{default:a(()=>[u(" => "+s(M.name),1)]),_:2},1032,["value","label","product"]))),128))]),_:2},[e.productFetching?{name:"notFoundContent",fn:a(()=>[t(f,{size:"small"})]),key:"0"}:void 0]),1032,["value","placeholder","not-found-content","onSearch","onSelect"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(E,{"item-layout":"horizontal","data-source":e.selectedProducts},{renderItem:a(({item:M})=>[t(O,null,{actions:a(()=>[t(F,{type:"link",onClick:R=>e.removeItem(M.xid)},{default:a(()=>[t(P,{style:{fontSize:"20px",color:"#f87171"}})]),_:1},8,["onClick"])]),default:a(()=>[t(S,null,{title:a(()=>[u(s(M.name),1)]),description:a(()=>[t(C,null,{default:a(()=>[g("div",null,[M.category_id?(r(),w(k,{key:0,color:"purple"},{default:a(()=>[u(s(M.category.name),1)]),_:2},1024)):A("",!0),M.brand_id?(r(),w(k,{key:1,color:"cyan"},{default:a(()=>[u(s(M.brand.name),1)]),_:2},1024)):A("",!0)])]),_:2},1024),o[4]||(o[4]=g("br",null,null,-1)),t(C,{class:"mt-5"},{default:a(()=>[g("span",null,s(e.$t("product.sales_price"))+": ",1),g("span",null,s(e.formatAmountCurrency(e.getSalesPriceWithTax(M))),1),g("del",null,s(e.formatAmountCurrency(M.details.mrp)),1)]),_:2},1024)]),avatar:a(()=>[t(D,{src:M.image_url},null,8,["src"])]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open","title","onOk"])}const J4=W(G4,[["render",X4]]),Q4=()=>{const e="product-cards?fields=xid,title,subtitle,products,x_products,products_details",{t:o}=ae(),c=["products"],n={title:"",subtitle:"",products:[]},v=[{title:o("product_card.title"),dataIndex:"title"},{title:o("product_card.products"),dataIndex:"products"},{title:o("common.action"),dataIndex:"action"}],h=[{key:"title",value:o("product_card.title")}];return{url:e,initData:n,columns:v,filterableColumns:h,hashableColumns:c}},Z4={components:{EyeOutlined:tt,PlusOutlined:le,EditOutlined:De,DeleteOutlined:fe,AddEdit:J4,AdminPageHeader:ge},setup(){const{formatAmountCurrency:e,selectedWarehouse:o}=X(),{url:c,initData:n,columns:v,filterableColumns:h,hashableColumns:m}=Q4(),d=Ve();ee(()=>{i()});const i=()=>{d.tableUrl.value={url:c},d.table.filterableColumns=h,d.fetch({page:1}),d.crudUrl.value="product-cards",d.langKey.value="product_card",d.initData.value={...n},d.formData.value={...n},d.hashableColumns.value=[...m]};return ue(o,(p,_)=>{i()}),{columns:v,...d,filterableColumns:h,formatAmountCurrency:e,getSalesPriceWithTax:zt}}},x4={class:"table-responsive"};function e8(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("PlusOutlined"),y=l("a-button"),b=l("DeleteOutlined"),k=l("a-space"),C=l("a-col"),D=l("a-select-option"),S=l("a-select"),P=l("a-input-search"),F=l("a-input-group"),O=l("a-row"),E=l("admin-page-filters"),U=l("AddEdit"),K=l("a-avatar"),z=l("a-list-item-meta"),M=l("a-list-item"),R=l("a-list"),q=l("EditOutlined"),L=l("a-table"),j=l("admin-page-table-content");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.product_cards"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.website_setup")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.product_cards")),1)]),_:1})]),_:1})]),_:1}),t(E,null,{default:a(()=>[t(O,{gutter:[16,16]},{default:a(()=>[t(C,{xs:24,sm:24,md:12,lg:10,xl:10},{default:a(()=>[t(k,null,{default:a(()=>[t(y,{type:"primary",onClick:e.addItem},{default:a(()=>[t(f),u(" "+s(e.$t("product_card.add")),1)]),_:1},8,["onClick"]),e.table.selectedRowKeys.length>0?(r(),w(y,{key:0,type:"primary",onClick:e.showSelectedDeleteConfirm,danger:""},{icon:a(()=>[t(b)]),default:a(()=>[u(" "+s(e.$t("common.delete")),1)]),_:1},8,["onClick"])):A("",!0)]),_:1})]),_:1}),t(C,{xs:24,sm:24,md:12,lg:14,xl:14},{default:a(()=>[t(O,{gutter:[16,16],justify:"end"},{default:a(()=>[t(C,{xs:24,sm:24,md:12,lg:8,xl:8},{default:a(()=>[t(F,{compact:""},{default:a(()=>[t(S,{style:{width:"25%"},value:e.table.searchColumn,"onUpdate:value":o[0]||(o[0]=Y=>e.table.searchColumn=Y),placeholder:e.$t("common.select_default_text",[""])},{default:a(()=>[(r(!0),$(I,null,G(n.filterableColumns,Y=>(r(),w(D,{key:Y.key},{default:a(()=>[u(s(Y.value),1)]),_:2},1024))),128))]),_:1},8,["value","placeholder"]),t(P,{style:{width:"75%"},value:e.table.searchString,"onUpdate:value":o[1]||(o[1]=Y=>e.table.searchString=Y),"show-search":"",onChange:e.onTableSearch,onSearch:e.onTableSearch,loading:e.table.filterLoading},null,8,["value","onChange","onSearch","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(j,null,{default:a(()=>[t(U,{addEditType:e.addEditType,visible:e.addEditVisible,url:e.addEditUrl,onAddEditSuccess:e.addEditSuccess,onClosed:e.onCloseAddEdit,formData:e.formData,data:e.viewData},null,8,["addEditType","visible","url","onAddEditSuccess","onClosed","formData","data"]),t(O,{class:"mt-20"},{default:a(()=>[t(C,{span:24},{default:a(()=>[g("div",x4,[t(L,{"row-selection":{selectedRowKeys:e.table.selectedRowKeys,onChange:e.onRowSelectChange,getCheckboxProps:Y=>({disabled:!1,name:Y.xid})},columns:n.columns,"row-key":Y=>Y.xid,"data-source":e.table.data,pagination:e.table.pagination,loading:e.table.loading,onChange:e.handleTableChange,bordered:"",size:"middle"},{bodyCell:a(({column:Y,record:x})=>[Y.dataIndex==="title"?(r(),$(I,{key:0},[u(s(x.title)+" ",1),o[2]||(o[2]=g("br",null,null,-1)),g("small",null,s(x.subtitle),1)],64)):A("",!0),Y.dataIndex==="products"?(r(),w(R,{key:1,"item-layout":"horizontal","data-source":x.products_details},{renderItem:a(({item:B})=>[t(M,null,{default:a(()=>[t(z,{title:B.name},{avatar:a(()=>[t(K,{src:B.image_url,size:"small"},null,8,["src"])]),_:2},1032,["title"])]),_:2},1024)]),_:1},8,["data-source"])):A("",!0),Y.dataIndex==="action"?(r(),w(k,{key:2},{default:a(()=>[t(y,{type:"primary",onClick:B=>e.editItem(x)},{icon:a(()=>[t(q)]),_:1},8,["onClick"]),t(y,{type:"primary",onClick:B=>e.showDeleteConfirm(x.xid)},{icon:a(()=>[t(b)]),_:1},8,["onClick"])]),_:2},1024)):A("",!0)]),_:1},8,["row-selection","columns","row-key","data-source","pagination","loading","onChange"])])]),_:1})]),_:1})]),_:1})],64)}const t8=W(Z4,[["render",e8]]),a8=Z({props:["formData","data","rules"],emits:["onSubmit"],components:{SaveOutlined:ve,SearchOutlined:ut,DeleteOutlined:fe},setup(e,{emit:o}){const c=Se({searchTerm:[],productFetching:!1,products:[]}),n=T([]),{formatAmountCurrency:v}=X(),h=Se({formSubmitting:!1,formData:e.formData});ee(()=>{h.formData=e.formData,n.value=e.data.featured_products_details});const m=wt(_=>{if(c.products=[],_!=""){c.productFetching=!0;const f=h.formData.featured_products;let y="products?fields=id,xid,name,image,image_url,details{id,xid,product_id,x_product_id,sales_price,sales_tax_type,tax_id,x_tax_id,mrp},brand_id,x_brand_id,category_id,x_category_id,details:tax{id,xid,rate},brand{id,xid,name,image,image_url},category{id,xid,name,image,image_url}",b="",k="";if(f.length>0){let C="";f.forEach(D=>{C+=`products.id ne ${D} and `,k+=`${D},`}),b+=`(${C.substring(0,C.length-5)}) and `,k=k.substring(0,k.length-1)}b+=`products.name lk "%${_}%"`,y+=`&filters=${encodeURIComponent(b)}`,y+=`&hashable=${k}`,axiosAdmin.get(y).then(C=>{c.products=C.data,c.productFetching=!1})}},300),d=(_,f)=>{const y=f.product;n.value=[...n.value,y],h.formData.featured_products=[...h.formData.featured_products,y.xid],c.searchTerm=[],c.products=[]},i=_=>{const f=et(n.value,b=>b.xid!=_),y=et(h.formData.featured_products,b=>b!=_);n.value=f,h.formData.featured_products=y},p=()=>{o("onSubmit",h.formData)};return{...vt(c),fetchProducts:m,searchValueSelected:d,selectedProducts:n,formatAmountCurrency:v,getSalesPriceWithTax:zt,removeItem:i,onSubmit:p,addEditForm:h}}});function n8(e,o,c,n,v,h){const m=l("a-input"),d=l("a-form-item"),i=l("SearchOutlined"),p=l("a-spin"),_=l("a-select-option"),f=l("a-select"),y=l("a-col"),b=l("a-row"),k=l("a-tag"),C=l("a-space"),D=l("a-avatar"),S=l("a-list-item-meta"),P=l("delete-outlined"),F=l("a-button"),O=l("a-list-item"),E=l("a-list"),U=l("SaveOutlined"),K=l("a-form"),z=l("a-card");return r(),w(z,{title:e.$t("front_setting.featured_products"),class:"page-content-container mt-20 mb-20"},{default:a(()=>[t(K,{layout:"vertical"},{default:a(()=>[t(b,{gutter:16},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("front_setting.featured_products_title"),name:"featured_products_title",help:e.rules.featured_products_title?e.rules.featured_products_title.message:null,validateStatus:e.rules.featured_products_title?"error":null},{default:a(()=>[t(m,{value:e.addEditForm.formData.featured_products_title,"onUpdate:value":o[0]||(o[0]=M=>e.addEditForm.formData.featured_products_title=M),placeholder:e.$t("common.placeholder_default_text",[e.$t("product_card.title")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(d,{label:e.$t("front_setting.featured_products_subtitle"),name:"featured_products_subtitle",help:e.rules.featured_products_subtitle?e.rules.featured_products_subtitle.message:null,validateStatus:e.rules.featured_products_subtitle?"error":null},{default:a(()=>[t(m,{value:e.addEditForm.formData.featured_products_subtitle,"onUpdate:value":o[1]||(o[1]=M=>e.addEditForm.formData.featured_products_subtitle=M),placeholder:e.$t("common.placeholder_default_text",[e.$t("product_card.subtitle")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(d,{label:e.$t("product.product"),name:"featured_products",help:e.rules.featured_products?e.rules.featured_products.message:null,validateStatus:e.rules.featured_products?"error":null},{default:a(()=>[t(f,{value:e.searchTerm,"onUpdate:value":o[2]||(o[2]=M=>e.searchTerm=M),"show-search":"","filter-option":!1,placeholder:e.$t("common.select_default_text",[e.$t("product.product")]),style:{width:"100%"},"not-found-content":e.productFetching?void 0:null,onSearch:e.fetchProducts,"option-label-prop":"label",onFocus:o[3]||(o[3]=M=>e.products=[]),onSelect:e.searchValueSelected},Qe({suffixIcon:a(()=>[t(i)]),default:a(()=>[(r(!0),$(I,null,G(e.products,M=>(r(),w(_,{key:M.xid,value:M.xid,label:M.name,product:M},{default:a(()=>[u(" => "+s(M.name),1)]),_:2},1032,["value","label","product"]))),128))]),_:2},[e.productFetching?{name:"notFoundContent",fn:a(()=>[t(p,{size:"small"})]),key:"0"}:void 0]),1032,["value","placeholder","not-found-content","onSearch","onSelect"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(b,{gutter:16},{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:12},{default:a(()=>[t(E,{"item-layout":"horizontal","data-source":e.selectedProducts},{renderItem:a(({item:M})=>[t(O,null,{actions:a(()=>[t(F,{type:"link",onClick:R=>e.removeItem(M.xid)},{default:a(()=>[t(P,{style:{fontSize:"20px",color:"#f87171"}})]),_:1},8,["onClick"])]),default:a(()=>[t(S,null,{title:a(()=>[u(s(M.name),1)]),description:a(()=>[t(C,null,{default:a(()=>[g("div",null,[M.category_id?(r(),w(k,{key:0,color:"purple"},{default:a(()=>[u(s(M.category.name),1)]),_:2},1024)):A("",!0),M.brand_id?(r(),w(k,{key:1,color:"cyan"},{default:a(()=>[u(s(M.brand.name),1)]),_:2},1024)):A("",!0)])]),_:2},1024),o[4]||(o[4]=g("br",null,null,-1)),t(C,{class:"mt-5"},{default:a(()=>[g("span",null,s(e.$t("product.sales_price"))+": ",1),g("span",null,s(e.formatAmountCurrency(e.getSalesPriceWithTax(M))),1),g("del",null,s(e.formatAmountCurrency(M.details.mrp)),1)]),_:2},1024)]),avatar:a(()=>[t(D,{src:M.image_url},null,8,["src"])]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"])]),_:1})]),_:1}),t(b,{gutter:16,class:"mt-30"},{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,null,{default:a(()=>[t(F,{type:"primary",onClick:e.onSubmit},{icon:a(()=>[t(U)]),default:a(()=>[u(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])}const o8=W(a8,[["render",n8]]),l8=Z({props:["formData","data","rules"],emits:["onSubmit"],components:{SaveOutlined:ve,SearchOutlined:ut,DeleteOutlined:fe},setup(e,{emit:o}){const c=Se({searchTerm:[],categoryFetching:!1,categories:[]}),n=T([]),v=Se({formSubmitting:!1,formData:e.formData});ee(()=>{v.formData=e.formData,n.value=e.data.featured_categories_details});const h=wt(p=>{if(c.categories=[],p!=""){c.categoryFetching=!0;const _=v.formData.featured_categories;let f="categories?fields=id,xid,name,image,image_url",y="",b="";if(_.length>0){let k="";_.forEach(C=>{k+=`id ne ${C} and `,b+=`${C},`}),y+=`(${k.substring(0,k.length-5)}) and `}y+=`name lk "%${p}%"`,f+=`&filters=${encodeURIComponent(y)}`,f+=`&hashable=${b}`,axiosAdmin.get(f).then(k=>{c.categories=k.data,c.categoryFetching=!1})}},300),m=(p,_)=>{const f=_.category;n.value=[...n.value,f],v.formData.featured_categories=[...v.formData.featured_categories,f.xid],c.searchTerm=[],c.categories=[]},d=p=>{const _=et(n.value,y=>y.xid!=p),f=et(v.formData.featured_categories,y=>y!=p);n.value=_,v.formData.featured_categories=f},i=()=>{o("onSubmit",v.formData)};return{...vt(c),fetchCategories:h,searchValueSelected:m,selectedCategoriess:n,removeItem:d,addEditForm:v,onSubmit:i}}});function s8(e,o,c,n,v,h){const m=l("a-input"),d=l("a-form-item"),i=l("SearchOutlined"),p=l("a-spin"),_=l("a-select-option"),f=l("a-select"),y=l("a-col"),b=l("a-row"),k=l("a-avatar"),C=l("a-list-item-meta"),D=l("delete-outlined"),S=l("a-button"),P=l("a-list-item"),F=l("a-list"),O=l("SaveOutlined"),E=l("a-form"),U=l("a-card");return r(),w(U,{title:e.$t("front_setting.featured_categories"),class:"page-content-container mt-20 mb-20 mt-20 mb-20"},{default:a(()=>[t(E,{layout:"vertical"},{default:a(()=>[t(b,{gutter:16},{default:a(()=>[t(y,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("front_setting.featured_categories_title"),name:"featured_categories_title",help:e.rules.featured_categories_title?e.rules.featured_categories_title.message:null,validateStatus:e.rules.featured_categories_title?"error":null},{default:a(()=>[t(m,{value:e.addEditForm.formData.featured_categories_title,"onUpdate:value":o[0]||(o[0]=K=>e.addEditForm.formData.featured_categories_title=K),placeholder:e.$t("common.placeholder_default_text",[e.$t("product_card.title")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(d,{label:e.$t("front_setting.featured_categories_subtitle"),name:"featured_categories_subtitle",help:e.rules.featured_categories_subtitle?e.rules.featured_categories_subtitle.message:null,validateStatus:e.rules.featured_categories_subtitle?"error":null},{default:a(()=>[t(m,{value:e.addEditForm.formData.featured_categories_subtitle,"onUpdate:value":o[1]||(o[1]=K=>e.addEditForm.formData.featured_categories_subtitle=K),placeholder:e.$t("common.placeholder_default_text",[e.$t("product_card.subtitle")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(d,{label:e.$t("category.category"),name:"featured_categories",help:e.rules.featured_categories?e.rules.featured_categories.message:null,validateStatus:e.rules.featured_categories?"error":null},{default:a(()=>[t(f,{value:e.searchTerm,"onUpdate:value":o[2]||(o[2]=K=>e.searchTerm=K),"show-search":"","filter-option":!1,placeholder:e.$t("common.select_default_text",[e.$t("category.category")]),style:{width:"100%"},"not-found-content":e.categoryFetching?void 0:null,onSearch:e.fetchCategories,"option-label-prop":"label",onFocus:o[3]||(o[3]=K=>e.categories=[]),onSelect:e.searchValueSelected},Qe({suffixIcon:a(()=>[t(i)]),default:a(()=>[(r(!0),$(I,null,G(e.categories,K=>(r(),w(_,{key:K.xid,value:K.xid,label:K.name,category:K},{default:a(()=>[u(s(K.name),1)]),_:2},1032,["value","label","category"]))),128))]),_:2},[e.categoryFetching?{name:"notFoundContent",fn:a(()=>[t(p,{size:"small"})]),key:"0"}:void 0]),1032,["value","placeholder","not-found-content","onSearch","onSelect"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(b,{gutter:16},{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:12},{default:a(()=>[t(F,{"item-layout":"horizontal","data-source":e.selectedCategoriess,size:"middle"},{renderItem:a(({item:K})=>[t(P,null,{actions:a(()=>[t(S,{type:"link",onClick:z=>e.removeItem(K.xid)},{default:a(()=>[t(D,{style:{fontSize:"20px",color:"#f87171"}})]),_:1},8,["onClick"])]),default:a(()=>[t(C,null,{title:a(()=>[u(s(K.name),1)]),avatar:a(()=>[t(k,{src:K.image_url,size:"small"},null,8,["src"])]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"])]),_:1})]),_:1}),t(b,{gutter:16,class:"mt-30"},{default:a(()=>[t(y,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,null,{default:a(()=>[t(S,{type:"primary",onClick:e.onSubmit},{icon:a(()=>[t(O)]),default:a(()=>[u(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])}const r8=W(l8,[["render",s8]]),d8=Z({props:["formData","data","rules"],emits:["onSubmit"],components:{SaveOutlined:ve,SearchOutlined:ut,DeleteOutlined:fe},setup(e,{emit:o}){const c=Se({formSubmitting:!1,formData:e.formData});return ee(()=>{c.formData=e.formData}),{addEditForm:c,onSubmit:()=>{o("onSubmit",c.formData)}}}});function i8(e,o,c,n,v,h){const m=l("a-input"),d=l("a-form-item"),i=l("a-col"),p=l("a-row"),_=l("SaveOutlined"),f=l("a-button"),y=l("a-form"),b=l("a-card");return r(),w(b,{title:e.$t("front_setting.social_links"),class:"page-content-container mt-20 mb-20"},{default:a(()=>[t(y,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("front_setting.facebook"),name:"name",help:e.rules.facebook_url?e.rules.facebook_url.message:null,validateStatus:e.rules.facebook_url?"error":null},{default:a(()=>[t(m,{value:e.addEditForm.formData.facebook_url,"onUpdate:value":o[0]||(o[0]=k=>e.addEditForm.formData.facebook_url=k),placeholder:e.$t("front_setting.placeholder_social_text",[e.$t("front_setting.facebook")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("front_setting.twitter"),name:"name",help:e.rules.twitter_url?e.rules.twitter_url.message:null,validateStatus:e.rules.twitter_url?"error":null},{default:a(()=>[t(m,{value:e.addEditForm.formData.twitter_url,"onUpdate:value":o[1]||(o[1]=k=>e.addEditForm.formData.twitter_url=k),placeholder:e.$t("front_setting.placeholder_social_text",[e.$t("front_setting.twitter")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("front_setting.instagram"),name:"name",help:e.rules.instagram_url?e.rules.instagram_url.message:null,validateStatus:e.rules.instagram_url?"error":null},{default:a(()=>[t(m,{value:e.addEditForm.formData.instagram_url,"onUpdate:value":o[2]||(o[2]=k=>e.addEditForm.formData.instagram_url=k),placeholder:e.$t("front_setting.placeholder_social_text",[e.$t("front_setting.instagram")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("front_setting.linkedin"),name:"name",help:e.rules.linkedin_url?e.rules.linkedin_url.message:null,validateStatus:e.rules.linkedin_url?"error":null},{default:a(()=>[t(m,{value:e.addEditForm.formData.linkedin_url,"onUpdate:value":o[3]||(o[3]=k=>e.addEditForm.formData.linkedin_url=k),placeholder:e.$t("front_setting.placeholder_social_text",[e.$t("front_setting.linkedin")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("front_setting.youtube"),name:"name",help:e.rules.youtube_url?e.rules.youtube_url.message:null,validateStatus:e.rules.youtube_url?"error":null},{default:a(()=>[t(m,{value:e.addEditForm.formData.youtube_url,"onUpdate:value":o[4]||(o[4]=k=>e.addEditForm.formData.youtube_url=k),placeholder:e.$t("front_setting.placeholder_social_text",[e.$t("front_setting.youtube")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(p,{gutter:16,class:"mt-30"},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,null,{default:a(()=>[t(f,{type:"primary",onClick:e.onSubmit},{icon:a(()=>[t(_)]),default:a(()=>[u(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])}const u8=W(d8,[["render",i8]]),m8=Z({props:["data","addText"],emits:["onEntry"],components:{PlusOutlined:le,MinusCircleOutlined:za},setup(e,{emit:o}){const c=T([]);return ee(()=>{c.value=e.data}),{dynamicValidateForm:c,onSubmit:()=>{o("onEntry",c.value)},removeItem:m=>{let d=c.value.indexOf(m);d!==-1&&c.value.splice(d,1)},addItem:()=>{c.value.push({title:"",value:""})}}}});function c8(e,o,c,n,v,h){const m=l("a-input"),d=l("a-form-item"),i=l("a-col"),p=l("MinusCircleOutlined"),_=l("a-row"),f=l("PlusOutlined"),y=l("a-button");return r(),$("div",null,[(r(!0),$(I,null,G(e.dynamicValidateForm,(b,k)=>(r(),$("div",{key:k},[t(_,{gutter:[16,16]},{default:a(()=>[t(i,{xs:10,sm:10,md:11,lg:11},{default:a(()=>[t(d,{name:["dataArray",k,"title"]},{default:a(()=>[t(m,{value:b.title,"onUpdate:value":C=>b.title=C,placeholder:e.$t("common.title"),rules:{required:!0,message:e.$t("front_setting.required_text",[e.$t("common.title")])}},null,8,["value","onUpdate:value","placeholder","rules"])]),_:2},1032,["name"])]),_:2},1024),t(i,{xs:10,sm:10,md:11,lg:11},{default:a(()=>[t(d,{name:["dataArray",k,"value"]},{default:a(()=>[t(m,{value:b.value,"onUpdate:value":C=>b.value=C,placeholder:e.$t("common.value"),rules:{required:!0,message:e.$t("front_setting.required_text",[e.$t("common.value")])}},null,8,["value","onUpdate:value","placeholder","rules"])]),_:2},1032,["name"])]),_:2},1024),t(i,{xs:4,sm:4,md:2,lg:2},{default:a(()=>[t(p,{onClick:C=>e.removeItem(b)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),t(_,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,null,{default:a(()=>[t(y,{type:"dashed",block:"",onClick:e.addItem},{default:a(()=>[t(f),u(" "+s(e.addText),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})])}const nl=W(m8,[["render",c8]]),p8=Z({props:["formData","data","rules"],emits:["onSubmit"],components:{SaveOutlined:ve,SearchOutlined:ut,DeleteOutlined:fe,PlusOutlined:le,MinusCircleOutlined:za,DyanmicForm:nl},setup(e,{emit:o}){const c=Se({formSubmitting:!1,formData:e.formData});ee(()=>{c.formData=e.formData});const n=d=>{c.formData.contact_info_widget=d,m()},v=d=>{c.formData.pages_widget=d,m()},h=d=>{c.formData.links_widget=d,m()},m=()=>{o("onSubmit",c.formData)};return{addEditForm:c,onSubmit:m,updateContactInfoWidget:n,updatePagesWidget:v,updateLinkInfoWidget:h}}});function _8(e,o,c,n,v,h){const m=l("a-input"),d=l("a-form-item"),i=l("a-col"),p=l("a-row"),_=l("a-divider"),f=l("a-typography-title"),y=l("DyanmicForm"),b=l("SaveOutlined"),k=l("a-button"),C=l("a-form"),D=l("a-card");return r(),w(D,{title:e.$t("front_setting.footer"),class:"page-content-container mt-20 mb-20"},{default:a(()=>[t(C,{layout:"vertical"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(d,{label:e.$t("front_setting.footer_company_description"),name:"footer_company_description",help:e.rules.footer_company_description?e.rules.footer_company_description.message:null,validateStatus:e.rules.footer_company_description?"error":null},{default:a(()=>[t(m,{value:e.addEditForm.formData.footer_company_description,"onUpdate:value":o[0]||(o[0]=S=>e.addEditForm.formData.footer_company_description=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("front_setting.copyright_text")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"]),t(d,{label:e.$t("front_setting.copyright_text"),name:"footer_copyright_text",help:e.rules.footer_copyright_text?e.rules.footer_copyright_text.message:null,validateStatus:e.rules.footer_copyright_text?"error":null},{default:a(()=>[t(m,{value:e.addEditForm.formData.footer_copyright_text,"onUpdate:value":o[1]||(o[1]=S=>e.addEditForm.formData.footer_copyright_text=S),placeholder:e.$t("common.placeholder_default_text",[e.$t("front_setting.copyright_text")])},null,8,["value","placeholder"])]),_:1},8,["label","help","validateStatus"])]),_:1})]),_:1}),t(_),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(f,{level:5,style:{marginBottom:"20px"}},{default:a(()=>[u(s(e.$t("front_setting.footer_contact_widget")),1)]),_:1}),t(y,{data:e.formData.contact_info_widget,addText:e.$t("front_setting.addContactLink"),onOnEntry:e.updateContactInfoWidget},null,8,["data","addText","onOnEntry"])]),_:1})]),_:1}),t(_),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(f,{level:5,style:{marginBottom:"20px"}},{default:a(()=>[u(s(e.$t("front_setting.footer_page_widget")),1)]),_:1}),t(y,{data:e.formData.pages_widget,addText:e.$t("front_setting.addPageDetails"),onOnEntry:e.updatePagesWidget},null,8,["data","addText","onOnEntry"])]),_:1})]),_:1}),t(_),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(f,{level:5,style:{marginBottom:"20px"}},{default:a(()=>[u(s(e.$t("front_setting.footer_links_widget")),1)]),_:1}),t(y,{data:e.formData.links_widget,addText:e.$t("front_setting.addLink"),onOnEntry:e.updateLinkInfoWidget},null,8,["data","addText","onOnEntry"])]),_:1})]),_:1}),t(_),t(p,{gutter:16,class:"mt-30"},{default:a(()=>[t(i,{xs:24,sm:24,md:24,lg:24},{default:a(()=>[t(d,null,{default:a(()=>[t(k,{type:"primary",onClick:e.onSubmit},{icon:a(()=>[t(b)]),default:a(()=>[u(" "+s(e.$t("common.update")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])}const f8=W(p8,[["render",_8]]);function g8(e){return new Promise((o,c)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>o(n.result),n.onerror=v=>c(v)})}const y8=Z({props:["fileNames","fileUrls"],emits:["uploadSuccess"],components:{PlusOutlined:le,LoadingOutlined:Oe},setup(e,{emit:o}){const c=T(!1),n=T(""),v=T([]),h=T([]),m=T([]),d=T(!1);return ee(()=>{v.value=[...e.fileUrls],h.value=[...e.fileNames],m.value=[...e.fileUrls]}),{previewVisible:c,previewImage:n,fileList:v,handleCancel:()=>{c.value=!1},handlePreview:async y=>{!y.url&&!y.preview&&(y.preview=await g8(y.originFileObj)),n.value=y.url||y.preview,c.value=!0},loading:d,customRequest:({onSuccess:y,onError:b,file:k})=>{const C=new FormData;C.append("image",k),C.append("folder","banners"),d.value=!0,axiosAdmin.post("upload-file",C,{headers:{"Content-Type":"multipart/form-data"}}).then(D=>{h.value.push(D.data.file),d.value=!1,y({name:D.data.file},k),m.value.push({uid:k.uid,name:D.data.file}),o("uploadSuccess",h.value)}).catch(()=>{d.value=!1,Ee.error("upload failed.")})},fileArray:h,handleRemove:y=>{const b=et(m.value,C=>C.uid!=y.uid),k=[];Ce(b,C=>{k.push(C.name)}),m.value=b,h.value=k,o("uploadSuccess",h.value)}}}}),h8={class:"clearfix"},v8={key:0},b8={key:1},k8=["src"];function w8(e,o,c,n,v,h){const m=l("loading-outlined"),d=l("plus-outlined"),i=l("a-upload"),p=l("a-modal");return r(),$("div",h8,[t(i,{accept:"image/*",name:"image","file-list":e.fileList,"onUpdate:fileList":o[0]||(o[0]=_=>e.fileList=_),"list-type":"picture-card","show-upload-list":!0,onPreview:e.handlePreview,customRequest:e.customRequest,remove:e.handleRemove},{default:a(()=>[e.loading?(r(),$("div",v8,[t(m)])):(r(),$("div",b8,[t(d),o[1]||(o[1]=g("div",{class:"ant-upload-text"},"Upload",-1))]))]),_:1},8,["file-list","onPreview","customRequest","remove"]),t(p,{open:e.previewVisible,footer:null,onCancel:e.handleCancel},{default:a(()=>[g("img",{alt:"example",style:{width:"100%"},src:e.previewImage},null,8,k8)]),_:1},8,["open","onCancel"])])}const C8=W(y8,[["render",w8]]),S8=Z({props:["formData","data","rules"],emits:["onSubmit"],components:{SaveOutlined:ve,SearchOutlined:ut,DeleteOutlined:fe,PlusOutlined:le,MinusCircleOutlined:za,DyanmicForm:nl,FileUploader:C8},setup(e,{emit:o}){const c=Se({formSubmitting:!1,formData:e.formData});ee(()=>{c.formData=e.formData});const n=p=>{c.formData.contact_info_widget=p},v=()=>{o("onSubmit",c.formData)};return{addEditForm:c,onSubmit:v,updateContactInfoWidget:n,topBannerUploadSuccess:p=>{c.formData.top_banners=p,v()},bottomBanner1UploadSuccess:p=>{c.formData.bottom_banners_1=p,v()},bottomBanner2UploadSuccess:p=>{c.formData.bottom_banners_2=p,v()},bottomBanner3UploadSuccess:p=>{c.formData.bottom_banners_3=p,v()}}}});function $8(e,o,c,n,v,h){const m=l("a-typography-title"),d=l("FileUploader"),i=l("a-col"),p=l("a-row"),_=l("a-divider"),f=l("a-form"),y=l("a-card");return r(),w(y,{title:e.$t("front_setting.banners"),class:"page-content-container mt-20 mb-20"},{default:a(()=>[t(f,{layout:"vertical",class:"mb-20"},{default:a(()=>[t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{level:5,style:{marginBottom:"20px"}},{default:a(()=>[u(s(e.$t("front_setting.top_banners_1")),1)]),_:1}),t(d,{key:"bottom_banners_1",fileUrls:e.data.bottom_banners_1_details,fileNames:e.formData.bottom_banners_1,onUploadSuccess:e.bottomBanner1UploadSuccess},null,8,["fileUrls","fileNames","onUploadSuccess"])]),_:1})]),_:1}),t(_),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{level:5,style:{marginBottom:"20px"}},{default:a(()=>[u(s(e.$t("front_setting.top_banners_2")),1)]),_:1}),t(d,{key:"bottom_banners_2",fileUrls:e.data.bottom_banners_2_details,fileNames:e.formData.bottom_banners_2,onUploadSuccess:e.bottomBanner2UploadSuccess},null,8,["fileUrls","fileNames","onUploadSuccess"])]),_:1})]),_:1}),t(_),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{level:5,style:{marginBottom:"20px"}},{default:a(()=>[u(s(e.$t("front_setting.top_banners_3")),1)]),_:1}),t(d,{key:"bottom_banners_3",fileUrls:e.data.bottom_banners_3_details,fileNames:e.formData.bottom_banners_3,onUploadSuccess:e.bottomBanner3UploadSuccess},null,8,["fileUrls","fileNames","onUploadSuccess"])]),_:1})]),_:1}),t(_),t(p,{gutter:16},{default:a(()=>[t(i,{xs:24,sm:24,md:12,lg:12},{default:a(()=>[t(m,{level:5,style:{marginBottom:"20px"}},{default:a(()=>[u(s(e.$t("front_setting.bottom_banners")),1)]),_:1}),t(d,{key:"top_banners_details",fileUrls:e.data.top_banners_details,fileNames:e.formData.top_banners,onUploadSuccess:e.topBannerUploadSuccess},null,8,["fileUrls","fileNames","onUploadSuccess"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])}const D8=W(S8,[["render",$8]]);const A8=Z({components:{FeaturedCategories:r8,FeaturedProducts:o8,SocialLinks:u8,Footers:f8,Banners:D8,HomeOutlined:Vt,ShoppingOutlined:Qt,SettingOutlined:St,LogoutOutlined:lo,SaveOutlined:ve,AdminPageHeader:ge},setup(){const{selectedWarehouse:e}=X(),{t:o}=ae(),c=T({}),n=T({}),v=T({}),h=T(["featured_categories"]);ee(()=>{m()});const m=()=>{const i="front-settings?fields=id,xid,featured_categories,x_featured_categories,featured_products_details,featured_categories_title,featured_categories_subtitle,featured_products,x_featured_products,featured_categories_details,featured_products_title,featured_products_subtitle,facebook_url,twitter_url,instagram_url,linkedin_url,youtube_url,pages_widget,contact_info_widget,links_widget,footer_copyright_text,top_banners,top_banners_details,bottom_banners_1,bottom_banners_1_details,bottom_banners_2,bottom_banners_2_details,bottom_banners_3,bottom_banners_3_details,footer_company_description";axiosAdmin.get(i).then(p=>{const _=p.data[0];n.value={featured_categories:_.x_featured_categories,featured_categories_title:_.featured_categories_title,featured_categories_subtitle:_.featured_categories_subtitle,featured_products:_.x_featured_products,featured_products_title:_.featured_products_title,featured_products_subtitle:_.featured_products_subtitle,facebook_url:_.facebook_url,twitter_url:_.twitter_url,instagram_url:_.instagram_url,linkedin_url:_.linkedin_url,youtube_url:_.youtube_url,pages_widget:_.pages_widget,contact_info_widget:_.contact_info_widget,links_widget:_.links_widget,footer_company_description:_.footer_company_description,footer_copyright_text:_.footer_copyright_text,top_banners:_.top_banners,bottom_banners_1:_.bottom_banners_1,bottom_banners_2:_.bottom_banners_2,bottom_banners_3:_.bottom_banners_3},v.value=_})},d=i=>{al({url:`front-settings/${v.value.xid}`,data:{...i,_method:"PUT"},success:p=>{Me.success({placement:"bottomRight",message:o("common.success"),description:o("front.setting_updated_successfully")}),c.value={}},error:p=>{c.value=p,message.error(o("common.fix_errors"))}})};return ue(e,(i,p)=>{n.value={},v.value={},m()}),{rules:c,formData:n,frontSettingsData:v,onSubmit:d,activeKey:h}}}),T8={class:"setting-sidebar"};function E8(e,o,c,n,v,h){const m=l("a-page-header"),d=l("router-link"),i=l("a-breadcrumb-item"),p=l("a-breadcrumb"),_=l("AdminPageHeader"),f=l("a-menu-item"),y=l("a-menu"),b=l("perfect-scrollbar"),k=l("a-col"),C=l("FeaturedCategories"),D=l("FeaturedProducts"),S=l("SocialLinks"),P=l("Footers"),F=l("Banners"),O=l("admin-page-table-content"),E=l("a-row");return r(),$(I,null,[t(_,null,{header:a(()=>[t(m,{title:e.$t("menu.front_settings"),class:"p-0"},null,8,["title"])]),breadcrumb:a(()=>[t(p,{separator:"-",style:{"font-size":"12px"}},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{to:{name:"admin.dashboard.index"}},{default:a(()=>[u(s(e.$t("menu.dashboard")),1)]),_:1})]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.website_setup")),1)]),_:1}),t(i,null,{default:a(()=>[u(s(e.$t("menu.front_settings")),1)]),_:1})]),_:1})]),_:1}),t(E,null,{default:a(()=>[t(k,{xs:24,sm:24,md:24,lg:4,xl:4,class:"bg-setting-sidebar"},{default:a(()=>[g("div",T8,[t(b,{options:{wheelSpeed:1,swipeEasing:!0,suppressScrollX:!0}},{default:a(()=>[t(y,{selectedKeys:e.activeKey,"onUpdate:selectedKeys":o[0]||(o[0]=U=>e.activeKey=U)},{default:a(()=>[t(f,{key:"featured_categories"},{default:a(()=>[u(s(e.$t("front_setting.featured_categories")),1)]),_:1}),t(f,{key:"featured_producs"},{default:a(()=>[u(s(e.$t("front_setting.featured_products")),1)]),_:1}),t(f,{key:"social_links"},{default:a(()=>[u(s(e.$t("front_setting.social_links")),1)]),_:1}),t(f,{key:"footers"},{default:a(()=>[u(s(e.$t("front_setting.footers")),1)]),_:1}),t(f,{key:"banners"},{default:a(()=>[u(s(e.$t("front_setting.banners")),1)]),_:1})]),_:1},8,["selectedKeys"])]),_:1})])]),_:1}),t(k,{xs:24,sm:24,md:24,lg:20,xl:20},{default:a(()=>[t(O,null,{default:a(()=>[e.formData&&e.formData.featured_categories?(r(),$(I,{key:0},[Tt(t(C,{formData:e.formData,data:e.frontSettingsData,rules:e.rules,onOnSubmit:e.onSubmit},null,8,["formData","data","rules","onOnSubmit"]),[[Yt,e.activeKey[0]=="featured_categories"]]),Tt(t(D,{formData:e.formData,data:e.frontSettingsData,rules:e.rules,onOnSubmit:e.onSubmit},null,8,["formData","data","rules","onOnSubmit"]),[[Yt,e.activeKey[0]=="featured_producs"]]),Tt(t(S,{formData:e.formData,data:e.frontSettingsData,rules:e.rules,onOnSubmit:e.onSubmit},null,8,["formData","data","rules","onOnSubmit"]),[[Yt,e.activeKey[0]=="social_links"]]),Tt(t(P,{formData:e.formData,data:e.frontSettingsData,rules:e.rules,onOnSubmit:e.onSubmit},null,8,["formData","data","rules","onOnSubmit"]),[[Yt,e.activeKey[0]=="footers"]]),Tt(t(F,{formData:e.formData,data:e.frontSettingsData,rules:e.rules,onOnSubmit:e.onSubmit},null,8,["formData","data","rules","onOnSubmit"]),[[Yt,e.activeKey[0]=="banners"]])],64)):A("",!0)]),_:1})]),_:1})]),_:1})],64)}const O8=W(A8,[["render",E8]]),I8=[{path:"/admin/website-setup/",component:()=>lt(()=>import("./Admin-3be1af1f.js"),["assets/Admin-3be1af1f.js","assets/vendor-4a6eb15a.js"]),children:[{path:"product-cards",component:t8,name:"admin.website-setup.product-cards.index",meta:{requireAuth:!0,menuParent:"website_setup",menuKey:e=>"product-cards",permission:"product_cards_view"}},{path:"front-settings",component:O8,name:"admin.website-setup.front-settings.edit",meta:{requireAuth:!0,menuParent:"website_setup",menuKey:e=>"front-settings",permission:"front_settings_edit"}}]}],ol=window.config.app_type,P8=window.config.modules,U8=()=>{var e=Pe.state.auth.appSetting;return!(e.x_currency_id==null||e.x_warehouse_id==null)},F8=()=>{var e=Pe.state.auth.appSetting;return!(e.x_currency_id==null||e.white_label_completed==!1)},We=ms({history:cs(),routes:[...Y4,{path:"",redirect:"/admin/login"},...I8,...Wu,...qy,...rh,...Hs,...Td,...Dh,...Cw,...xk],scrollBehavior:()=>({left:0,top:0})});let sa=null;const un=ol=="saas"?"superadmin":"";if(ol=="saas"){const e=Ta(Object.assign({"../../superadmin/router/index.js":()=>lt(()=>import("./index-49217c6f.js"),["assets/index-49217c6f.js","assets/vendor-4a6eb15a.js","assets/OfflineRequestStatus-7560c6d7.js","assets/index-b0074277.css"])}),`../../${un}/router/index.js`),o=Ta(Object.assign({"../../superadmin/router/admin/index.js":()=>lt(()=>import("./index-bae811ba.js"),["assets/index-bae811ba.js","assets/Admin-3be1af1f.js","assets/vendor-4a6eb15a.js","assets/OfflineRequestStatus-7560c6d7.js","assets/index-4dc6fbf0.css"])}),`../../${un}/router/admin/index.js`);sa=Promise.all([e,o]).then(([c,n])=>(c.default.forEach(v=>We.addRoute(v)),n.default.forEach(v=>We.addRoute(v)),dn.forEach(v=>We.addRoute(v)),!0))}else dn.forEach(e=>We.addRoute(e)),sa=Promise.resolve(!0);const M8=(e,o,c)=>{window.config.app_type;const n=e.name?e.name.split("."):[],v=Pe.getters["auth/isLoggedIn"],h=Pe.state.auth.user;if(n.length>0&&n[0]==="superadmin")return e.meta.requireAuth&&v&&h&&!h.is_superadmin?(Pe.dispatch("auth/logout"),c({name:"admin.login"})):e.meta.requireAuth&&!F8()&&n[1]!=="setup_app"?c({name:"superadmin.setup_app.index"}):e.meta.requireAuth&&!v?c({name:"admin.login"}):e.meta.requireUnauth&&v?c({name:"superadmin.dashboard.index"}):c();if(n.length>0&&n[0]==="admin"){if(h!=null&&h.is_superadmin)return c({name:"superadmin.dashboard.index"});if(e.meta.requireAuth&&!v)return Pe.commit("auth/updateAppChecking",!1),c({name:"admin.login"});if(e.meta.requireAuth&&!U8()&&n[1]!=="setup_app")return c({name:"admin.setup_app.index"});if(e.meta.permission){let m=typeof e.meta.permission=="function"?e.meta.permission(e):e.meta.permission;if(typeof m=="string"&&(n[1]==="stock"&&(m=m.replace("-","_")),!so(m,h)))return c({name:"admin.dashboard.index"})}return c()}else if(n.length>0&&n[0]==="front")return e.meta.requireAuth&&!Pe.getters["front/isLoggedIn"]?(Pe.commit("auth/updateAppChecking",!1),c({name:"front.homepage"})):c();c()};We.beforeEach(async(e,o,c)=>{if(sa&&await sa,Pe.commit("auth/updateAppChecking",!1),e.meta&&e.meta.module&&!P8.includes(e.meta.module))return c({name:"admin.login"});M8(e,o,c)});const mn="auth_user",cn="auth_token",pn="expire_key",_n="app_settings",fn="global_settings",gn="per_page_item",yn="all_langs",hn="selected_lang",vn="page_title",bn="dark_theme",kn="active_modules",wn="css_settings",Cn="selected_warehouse",Sn="all_warehouses",q8="all_front_warehouses",$n="add_menus",Dn="all_export_data",An="email_setting_verified",Tn="visible_subscription_modules";it.suppressDeprecationWarnings=!0;const nt=e=>{const o=window.localStorage.getItem(e);return o==="undefined"||o==="null"||o===void 0||o===null?null:JSON.parse(o)},R8=()=>{var e=window.config.defaultLangKey;return e||"en"},K8={namespaced:!0,state(){return{user:nt(mn),warehouse:nt(Cn),all_warehouses:nt(Sn)||[],all_front_warehouses:nt(q8)||[],allLangs:nt(yn)||[],lang:window.localStorage.getItem(hn)||R8(),token:window.localStorage.getItem(cn)||null,expires:window.localStorage.getItem(pn)||null,globalSetting:nt(fn),appSetting:nt(_n),addMenus:nt($n)||[],visibleSubscriptionModules:nt(Tn)||[],perPage:window.localStorage.getItem(gn)||window.config.path,pageTitle:window.localStorage.getItem(vn)||"",darkTheme:nt(bn),activeModules:nt(kn),cssSettings:nt(wn)||{leftRightPadding:"50px",headerMenuMode:"vertical"},appChecking:!1,emailSettingVerified:window.localStorage.getItem(An)||!1,menuCollapsed:window.innerWidth<=991,allExportData:nt(Dn)||[]}},mutations:{updateUser(e,o){e.user=o,window.localStorage.setItem(mn,JSON.stringify(o))},updateWarehouse(e,o){e.warehouse=o,window.localStorage.setItem(Cn,JSON.stringify(o))},updateAllWarehouses(e,o){e.all_warehouses=o,window.localStorage.setItem(Sn,JSON.stringify(o))},updateAppChecking(e,o){e.appChecking=o},updateToken(e,o){e.token=o,window.localStorage.setItem(cn,o),axiosAdmin.defaults.headers.common.Authorization=`Bearer ${o}`},updateExpires(e,o){e.expires=new Date(o),window.localStorage.setItem(pn,o)},updateApp(e,o){e.appSetting=o,window.localStorage.setItem(_n,JSON.stringify(o));var c=document.querySelector("link[rel~='icon']");c.href=o.small_light_logo_url},updateGlobalSetting(e,o){e.globalSetting=o,window.localStorage.setItem(fn,JSON.stringify(o));var c=document.querySelector("link[rel~='icon']");c.href=o.small_light_logo_url},updateAddMenus(e,o){e.addMenus=o,window.localStorage.setItem($n,JSON.stringify(o))},updatePerPage(e,o){e.perPage=o,window.localStorage.setItem(gn,o)},updateLang(e,o){e.lang=o,window.localStorage.setItem(hn,o)},updatePageTitle(e,o){e.pageTitle=o,window.localStorage.setItem(vn,o),e.appSetting!==null&&e.appSetting!==void 0?document.title=`${o} - ${e.appSetting.name}`:document.title=`${o} - Biashara sync`},updateDarkTheme(e,o){e.darkTheme=o,window.localStorage.setItem(bn,o)},updateActiveModules(e,o){e.activeModules=o,window.localStorage.setItem(kn,JSON.stringify(o))},updateCssSettings(e,o){e.cssSettings=o,window.localStorage.setItem(wn,JSON.stringify(o))},updateAllLangs(e,o){e.allLangs=o,window.localStorage.setItem(yn,JSON.stringify(o))},updateMenuCollapsed(e,o){e.menuCollapsed=o},updatAllExportData(e,o){e.allExportData=o,window.localStorage.setItem(Dn,JSON.stringify(o))},updateEmailVerifiedSetting(e,o){e.emailSettingVerified=o,window.localStorage.setItem(An,o)},updateVisibleSubscriptionModules(e,o){e.visibleSubscriptionModules=o,window.localStorage.setItem(Tn,JSON.stringify(o))}},actions:{updateUser(e){axiosAdmin.post("/user").then(function(o){e.commit("updateUser",o.data.user)}).catch(function(o){})},updateGlobalSetting(e){axiosAdmin.get("/global-setting").then(function(o){e.commit("updateGlobalSetting",o.data.global_setting);var c=document.querySelector("link[rel~='icon']");c.href=globalSetting.small_light_logo_url}).catch(function(o){})},updateApp(e){axiosAdmin.get("/app").then(function(o){e.commit("updateApp",o.data.app),e.commit("updateAddMenus",o.data.shortcut_menus.credentials),e.commit("updateEmailVerifiedSetting",o.data.email_setting_verified);var c=document.querySelector("link[rel~='icon']");c.href=o.data.app.small_light_logo_url}).catch(function(o){})},updateAllLangs(e){axiosAdmin.get("/all-langs").then(function(o){e.commit("updateAllLangs",o.data.langs)}).catch(function(o){})},updateAllWarehouses(e){axiosAdmin.get("/warehouses?limit=10000").then(function(o){e.commit("updateAllWarehouses",o.data)}).catch(function(o){})},refreshToken(e){const o=e.state.token;o!==""&&o!=="undefined"&&o!="null"&&o!=null&&axiosAdmin.post("/auth/refresh-token").then(function(c){e.commit("updateUser",c.data.user),e.commit("updateToken",c.data.token),e.commit("updateExpires",c.data.expires_in)}).catch(function(c){})},logout(e){axiosAdmin.post("/auth/logout").then(function(o){window.sessionStorage.clear(),e.commit("updateUser",[]),e.commit("updateToken",null),e.commit("updateExpires",null),e.commit("updateEmailVerifiedSetting",0),We.push({name:"admin.login"})}).catch(function(o){})},logoutToRootUrl(e){axiosAdmin.post("/auth/logout").then(function(o){e.commit("updateUser",[]),e.commit("updateToken",null),e.commit("updateExpires",null),window.location.href=window.config.path}).catch(function(o){})},updateVisibleSubscriptionModules(e){axiosAdmin.post("/visible-subscription-modules").then(function(o){e.commit("updateVisibleSubscriptionModules",o.data)}).catch(function(o){})}},getters:{isLoggedIn:e=>e.token===null||e.token===""?!1:it(e.expires).isAfter(it())}},En="cart_items",On="front_auth_user",In="front_auth_token",Pn="front_expire_key",Un="front_app_settings_key",$a=e=>{const o=window.localStorage.getItem(e);return o==="undefined"||o==="null"||o===void 0||o===null?null:JSON.parse(o)},V8={namespaced:!0,state(){return{appSetting:$a(Un),user:$a(On),token:window.localStorage.getItem(In)||null,expires:window.localStorage.getItem(Pn)||null,cartItems:$a(En)||{},warehouseSlug:"",warehouseCurrency:{}}},mutations:{updateApp(e,o){e.appSetting=o,window.localStorage.setItem(Un,JSON.stringify(o))},updateWarehouseCurrency(e,o){e.warehouseCurrency=o},updateUser(e,o){e.user=o,window.localStorage.setItem(On,JSON.stringify(o))},updateToken(e,o){e.token=o,window.localStorage.setItem(In,o),axiosFront.defaults.headers.common.Authorization=`Bearer ${o}`},updateExpires(e,o){e.expires=new Date(o),window.localStorage.setItem(Pn,o)},addCartItems(e,o){e.cartItems[e.warehouseSlug]=o,window.localStorage.setItem(En,JSON.stringify(e.cartItems))},updateWarehouseSlug(e,o){e.warehouseSlug=o}},actions:{updateApp(e,o){axiosFront.get(`/front/app/${o}`).then(function(c){e.commit("updateApp",c.data.app)}).catch(function(c){})},updateUser(e){axiosFront.post("/front/user").then(function(o){e.commit("updateUser",o.data.user)}).catch(function(o){})},refreshToken(e){const o=e.state.token;o!==""&&o!=="undefined"&&axiosFront.post(`/front/refresh-token?token=${o}`).then(function(c){e.commit("updateUser",c.data.user),e.commit("updateToken",c.data.token),e.commit("updateExpires",c.data.expires_in)}).catch(function(c){})},logout(e){axiosFront.post("/front/logout").then(function(o){window.sessionStorage.clear(),e.state.token,e.commit("updateToken",null),e.commit("updateExpires",null),We.push({name:"front.homepage",params:{warehouse:window.config.frontStoreWarehouse.slug}})}).catch(function(o){We.push({name:"front.homepage",params:{warehouse:window.config.frontStoreWarehouse.slug}})})}},getters:{isLoggedIn:e=>e.token===null||e.token===""?!1:it(e.expires).isAfter(it()),totalCartItems:e=>{var o=0;return e.cartItems&&e.cartItems[e.warehouseSlug]&&Ce(e.cartItems[e.warehouseSlug],c=>{o+=c.cart_quantity}),o},storeCartItems:e=>e.cartItems&&e.cartItems[e.warehouseSlug]?e.cartItems[e.warehouseSlug]:[]}},Pe=ps({modules:{auth:K8,front:V8}});var Wt=_t.create({baseURL:window.config.path+"/api/v1"});Wt.defaults.headers.Accept="application/json";Wt.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";Wt.defaults.headers.common["X-CSRF-TOKEN"]=document.head.querySelector('meta[name="csrf-token"]').content;localStorage.getItem("auth_token")&&(Wt.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("auth_token"));Wt.interceptors.response.use(function(e){return e.data},function(e){const o=e.response.status;return o===401||o===500&&e.response&&e.response.data&&e.response.data.message&&e.response.data.message=="UNAUTHORIZED EXCEPTION"?(window.location.href=window.config.path+"/admin/login",delete window.axiosAdmin.defaults.headers.common.Authorization,localStorage.removeItem("auth_token"),localStorage.setItem("auth_user",null)):o===400||o===403||o===404?e.response.data.error.message:o===405&&(Pe.dispatch("auth/updateApp"),window.config.app_type=="saas"&&We.push({name:"admin.subscription.current_plan"})),Promise.reject(e.response)});window.axiosAdmin=Wt;var jt=_t.create({baseURL:window.config.path+"/api/v1"});jt.defaults.headers.Accept="application/json";jt.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";jt.defaults.headers.common["X-CSRF-TOKEN"]=document.head.querySelector('meta[name="csrf-token"]').content;localStorage.getItem("front_auth_token")&&(jt.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("front_auth_token"));jt.interceptors.response.use(function(e){return e.data},function(e){const o=e.response.status;return o===401?(window.location.href=window.config.path,delete window.axiosFront.defaults.headers.common.Authorization,localStorage.removeItem("front_auth_token"),localStorage.setItem("front_auth_user",null)):(o===400||o===403||o===404)&&e.response.data.error.message,Promise.reject(e.response)});window.axiosFront=jt;it.suppressDeprecationWarnings=!0;window.moment=it;const Jt="#5F63F2",z8="#4347D9",L8="#FF69A5",B8="#E34A87",W8="#1890ff",j8="#0D79DF",H8="rgba(0, 0, 0, 0.85)",Da="#20C997",N8="#0CAB7C",Aa="#FA8B0C",Y8="#D47407",Fn="#f5222d",G8="#E30D0F",Mn="#2C99FF",X8="#0D79DF",Rt="#272B41",J8="#131623",qn="#5A5F7D",Rn="#363A51",Q8="#9299B8",Z8="#e2e6ea",Kn="#ffffff",x8="#5A5F7D",eD="#5A5F7D",tD="#ADB4D2",aD="#FF4D4F",nD="#E30D0F",Vn="#F1F2F6",zn="#E3E6EF",oD="#C6D0DC",lD="#EFF0F3",sD="#F8F9FB",rD="#F4F5F7",dD="#868EAE",Ln="rgba(95,99,242,0.2)",iD="#9299b8",uD="#F63178",mD="48px",cD="36px",pD="29px",ll={"primary-color":Jt,"primary-hover":z8,"secondary-color":L8,"secondary-hover":B8,"link-color":W8,"link-hover":j8,"success-color":Da,"success-hover":N8,"warning-color":Aa,"warning-hover":Y8,"error-color":Fn,"error-hover":G8,"info-color":Mn,"info-hover":X8,"dark-color":Rt,"dark-hover":J8,"gray-color":qn,"gray-hover":Rn,"light-color":Q8,"light-hover":Z8,"white-color":Kn,"white-hover":eD,white:Kn,black:"#000",pink:uD,"dash-color":x8,"dash-hover":Rn,"extra-light-color":tD,"danger-color":aD,"danger-hover":nD,"font-family":"'Inter', sans-serif","font-size-base":"14px","heading-color":H8,"text-color":Rt,"text-color-secondary":qn,"disabled-color":"rgba(0, 0, 0, 0.25)","border-radius-base":"4px","border-color-base":"#d9d9d9","box-shadow-base":"0 2px 8px rgba(0, 0, 0, 0.15)","border-color-light":Vn,"border-color-normal":zn,"border-color-deep":oD,"bg-color-light":sD,"bg-color-normal":rD,"bg-color-deep":lD,"light-gray-color":dD,"gray-solid":iD,"btn-height-large":mD,"btn-height-small":cD,"btn-height-extra-small":pD,"btn-default-color":Rt,"card-head-background":"#ffffff","card-head-color":Rt,"card-background":"#ffffff","card-head-padding":"16px","card-padding-base":"12px","card-radius":"10px","card-shadow":"0 5px 20px rgba(146,153,184,0.03)","layout-body-background":"#F4F5F7","layout-header-background":"#ffffff","layout-footer-background":"#fafafa","layout-header-height":"64px","layout-header-padding":"0 15px","layout-footer-padding":"24px 15px","layout-sider-background":"#ffffff","layout-trigger-height":"48px","layout-trigger-background":"#002140","layout-trigger-color":"#fff","layout-zero-trigger-width":"36px","layout-zero-trigger-height":"42px","layout-sider-background-light":"#fff","layout-trigger-background-light":"#fff","layout-trigger-color-light":"rgba(0, 0, 0, 0.65)","page-header-padding":"24px","page-header-padding-vertical":"16px","page-header-padding-breadcrumb":"12px","page-header-back-color":"#000","page-header-ghost-bg":"inherit","popover-color":Rt,"alert-success-border-color":Da,"alert-success-bg-color":Da+15,"alert-error-bg-color":Fn+15,"alert-warning-bg-color":Aa+15,"alert-info-bg-color":Mn+15,"radio-button-checked-bg":Jt,"grid-gutter-width":25,"skeleton-color":Vn,"slider-rail-background-color":Ln,"slider-rail-background-color-hover":Ln,"slider-track-background-color":Jt,"slider-track-background-color-hover":Jt,"slider-handle-color":Jt,"slider-handle-size":"16px","input-height-base":"48px","input-border-color":zn,"input-height-sm":"30px","input-height-lg":"50px","rate-star-color":Aa,"rate-star-size":"13px","switch-min-width":"30px","switch-sm-min-width":"30px","switch-height":"18px","switch-sm-height":"15px","result-title-font-size":"20px","result-subtitle-font-size":"12px","result-icon-font-size":"50px","tabs-horizontal-padding":"12px 15px","tabs-horizontal-margin":"0","list-item-padding":"10px 24px","tag-default-bg":"#EFF0F3","tag-default-color":Rt,"tag-font-size":"11px"};({...ll});const _D={name:"App",components:{ThemeProvider:_s,LoadingApp:Ew},setup(){const e=Ze(),o=qe(),c=ke(),n="dark",{updatePageTitle:v,appSetting:h,frontWarehouse:m,appType:d}=X(),i=pe(()=>c.state.auth.appChecking);return ee(()=>{o.currentRoute&&o.currentRoute.value&&o.currentRoute.value.meta.isFrontStore==null&&setInterval(()=>{c.dispatch("auth/refreshToken")},5*60*1e3)}),ue(e,(p,_)=>{const f=typeof p.meta.menuKey=="function"?p.meta.menuKey(p):p.meta.menuKey;v(f.replace("-","_")),d=="saas"&&h.value.is_global==0&&h.value.status=="license_expired"&&p&&p.meta&&!(p.meta.menuParent=="subscription"||p.name=="admin.login"||p.name=="verify.main")&&o.push({name:"admin.subscription.current_plan"})}),{theme:fs,themeVars:ll,darkTheme:n,appChecking:i,appSetting:h}}},fD={class:"theme-container"};function gD(e,o,c,n,v,h){const m=l("LoadingApp"),d=l("ThemeProvider"),i=l("a-config-provider"),p=l("router-view");return r(),w(p,null,{default:a(({Component:_,route:f})=>[(r(),w(gs,null,{default:a(()=>{var y,b;return[t(i,{theme:{token:{colorPrimary:(y=n.appSetting)==null?void 0:y.primary_color,fontFamily:"Nunito,sans-serif",borderRadius:4}},direction:(b=n.appSetting)!=null&&b.rtl?"rtl":"ltr"},{default:a(()=>[g("div",fD,[t(d,{theme:{...n.themeVars}},{default:a(()=>[n.appChecking?(r(),w(m,{key:0})):(r(),w(Qn(_),{key:1}))]),_:2},1032,["theme"])])]),_:2},1032,["theme","direction"])]}),fallback:a(()=>[...o[0]||(o[0]=[u(" Loading... ",-1)])]),_:2},1024))]),_:1})}const yD=W(_D,[["render",gD]]);const hD=Z({setup(){return{}}}),vD={style:{padding:"10px 16px",background:"white"},class:"mb-20"};function bD(e,o,c,n,v,h){return r(),$("div",vD,[ie(e.$slots,"default")])}const kD=W(hD,[["render",bD]]),wD=Z({setup(){return{}}}),CD={class:"dashboard-page-content-container"};function SD(e,o,c,n,v,h){return r(),$("div",CD,[ie(e.$slots,"default")])}const $D=W(wD,[["render",SD]]);async function DD(){Pe.getters["auth/isLoggedIn"]&&Pe.dispatch("auth/updateUser"),Pe.dispatch("auth/updateGlobalSetting"),Pe.dispatch("auth/updateApp"),Pe.dispatch("auth/updateAllLangs"),Pe.dispatch("auth/updateAllWarehouses"),Pe.commit("auth/updateActiveModules",window.config.modules),Pe.dispatch("auth/updateVisibleSubscriptionModules");const e=ys(yD),o=Yv({legacy:!1,globalInjection:!0,locale:Pe.state.auth.lang,warnHtmlMessage:!1});await Xv(o,Pe.state.auth.lang),e.config.devtools=!0,e.config.debug=!0,e.use(o),e.use(hs),e.use(vs),e.use(Pe),e.use(bs);const c=window.config.installed_modules,n=[];c.forEach(v=>{const h=v.verified_name,m=Ta(Object.assign({}),`../../Modules/${h}/Resources/assets/js/${h}.js`);n.push(m)}),Promise.all(n).then(v=>{v.forEach(h=>{e.use(h.default,{routes:We,store:Pe})}),We.addRoute({path:"/:catchAll(.*)",redirect:"/"}),e.use(We)}),e.component("admin-page-filters",kD),e.component("admin-page-table-content",$D),window.i18n=o,We.isReady().then(()=>{We.currentRoute&&We.currentRoute.value&&We.currentRoute.value.meta&&We.currentRoute.value.meta.isFrontStore&&(Pe.commit("front/updateWarehouseSlug",We.currentRoute.value.params.warehouse),Pe.commit("front/updateWarehouseCurrency",window.config.warehouseCurrency),Pe.commit("front/updateApp",window.config.frontStoreSettings)),e.mount("#app")})}DD();export{ge as A,_k as B,Ro as C,dk as D,ek as E,ga as F,mk as G,ID as H,Lt as I,PD as J,Ew as K,Za as L,Ab as M,Ga as P,b_ as R,ro as S,tb as T,mt as U,Bt as W,W as _,be as a,Ve as b,X as c,tv as d,Sv as e,Fb as f,$k as g,Tk as h,Ge as i,Rw as j,_o as k,Xv as l,th as m,ah as n,Jy as o,Io as p,U_ as q,bi as r,Si as s,Ny as t,Oi as u,Ha as v,io as w,ED as x,OD as y,UD as z};
