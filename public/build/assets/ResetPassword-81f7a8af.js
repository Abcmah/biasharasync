import{j as $,p as r,q as f,s as q,v as s,w as o,b as B,k as D,l as C,r as N,o as P,x as i,B as w,y,z as R,bD as V,A as S}from"./vendor-4a6eb15a.js";import{_ as E,a as T,c as W}from"./app-1bafd958.js";const A=$({setup(){const{addEditRequestAdmin:e,loading:l,rules:v}=T(),{globalSetting:m}=W(),p=B(),b=D(),d=m.value.login_image_url,a=C({token:"",email:"",password:"",password_confirmation:""}),t=N({error:"",success:""});return P(()=>{a.token=p.query.token,a.email=p.query.email,(!a.token||!a.email)&&(t.value.error="The reset link appears to be invalid. Please request a new one.")}),{loading:l,rules:v,resetData:a,onResetSubmit:()=>{t.value={error:"",success:""},e({url:"auth/reset-password",data:a,success:n=>{t.value.success="Password reset successfully! Redirecting...",setTimeout(()=>{b.push({name:"admin.login"})},3e3)},error:n=>{var u,c;t.value={error:(u=n==null?void 0:n.error)!=null&&u.message?(c=n==null?void 0:n.error)==null?void 0:c.message:"Something went wrong",success:!1}}})},onRequestSend:t,globalSetting:m,loginBackground:d,innerWidth:window.innerWidth,validateInfos:{}}}}),I={class:"login-main-container"},U={class:"login-logo mb-30"},j=["src"],z={class:"mb-20 text-center"},M={class:"login-footer-text"},F={class:"right-login-div"},G=["src"];function H(e,l,v,m,p,b){const d=r("a-alert"),a=r("a-input-password"),t=r("a-form-item"),h=r("a-button"),n=r("router-link"),u=r("a-form"),c=r("a-card"),_=r("a-col"),k=r("a-row");return f(),q("div",I,[s(k,{class:"main-container-div"},{default:o(()=>[s(_,{xs:24,sm:24,md:24,lg:8},{default:o(()=>[s(k,{class:"login-left-div"},{default:o(()=>[s(_,{xs:{span:20,offset:2},sm:{span:20,offset:2},md:{span:16,offset:4},lg:{span:16,offset:4}},{default:o(()=>[s(c,{bordered:e.innerWidth<=768},{default:o(()=>[s(u,{layout:"vertical"},{default:o(()=>[i("div",U,[i("img",{class:"login-img-logo",src:e.globalSetting.light_logo_url},null,8,j)]),i("div",z,[i("h3",null,w(e.$t("user.reset_password")),1),l[2]||(l[2]=i("p",{class:"text-muted"},"Enter your new password below.",-1))]),e.onRequestSend.error?(f(),y(d,{key:0,message:e.onRequestSend.error,type:"error","show-icon":"",class:"mb-20"},null,8,["message"])):R("",!0),e.onRequestSend.success?(f(),y(d,{key:1,message:e.onRequestSend.success,type:"success","show-icon":"",class:"mb-20"},null,8,["message"])):R("",!0),s(t,V({label:e.$t("user.password"),name:"password"},e.validateInfos.password),{default:o(()=>[s(a,{value:e.resetData.password,"onUpdate:value":l[0]||(l[0]=g=>e.resetData.password=g),placeholder:e.$t("user.password")},null,8,["value","placeholder"])]),_:1},16,["label"]),s(t,{label:e.$t("user.confirm_password"),name:"password_confirmation"},{default:o(()=>[s(a,{value:e.resetData.password_confirmation,"onUpdate:value":l[1]||(l[1]=g=>e.resetData.password_confirmation=g),placeholder:e.$t("user.confirm_password")},null,8,["value","placeholder"])]),_:1},8,["label"]),s(t,{class:"mt-30"},{default:o(()=>[s(h,{loading:e.loading,onClick:e.onResetSubmit,class:"login-btn",block:"",type:"primary"},{default:o(()=>[S(w(e.$t("user.update_password")),1)]),_:1},8,["loading","onClick"])]),_:1}),i("div",M,[s(n,{to:{name:"admin.login"}},{default:o(()=>[S(w(e.$t("user.back_to_login")),1)]),_:1})])]),_:1})]),_:1},8,["bordered"])]),_:1})]),_:1})]),_:1}),s(_,{xs:0,sm:0,md:24,lg:16},{default:o(()=>[i("div",F,[i("img",{class:"right-image",src:e.loginBackground},null,8,G)])]),_:1})]),_:1})])}const L=E(A,[["render",H]]);export{L as default};
